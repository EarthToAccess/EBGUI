encui = "aWYgbm90KGdhbWU6SXNMb2FkZWQoKSkgdGhlbg0KCWdhbWUuTG9hZGVkOldhaXQoKQ0KZW5kDQoNCmlmIChnYW1lLkNvcmVHdWk6RmluZEZpcnN0Q2hpbGQoImViZ3VpIikpIHRoZW4NCglnYW1lLkNvcmVHdWkuZWJndWk6RGVzdHJveSgpDQplbmQNCg0KbG9jYWwgYmxvY2tsaXN0ID0gew0KfQ0KDQpsb2NhbCBtYXN0ZXJsaXN0ID0gew0KCTMyNTczMzM0DQp9DQoNCmxvY2FsIHBsYXllciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcg0KbG9jYWwgSUQgPSBwbGF5ZXIuVXNlcklkDQpsb2NhbCBpc0Jsb2NrZWQgPSBmYWxzZQ0KbG9jYWwgaXNNYXN0ZXIgPSBmYWxzZQ0KDQpmb3IgaSx2IGluIHBhaXJzKGJsb2NrbGlzdCkgZG8NCiAgICBpZiB2ID09IElEIHRoZW4NCiAgICAgICAgaXNCbG9ja2VkID0gdHJ1ZQ0KICAgICAgICBicmVhaw0KICAgIGVuZA0KZW5kDQoNCmZvciBpLHYgaW4gcGFpcnMobWFzdGVybGlzdCkgZG8NCiAgICBpZiB2ID09IElEIHRoZW4NCiAgICAgICAgaXNNYXN0ZXIgPSB0cnVlDQogICAgICAgIGJyZWFrDQogICAgZW5kDQplbmQNCg0KaWYgaXNCbG9ja2VkIHRoZW4NCiAgICB3YXJuKCI9PT09PT09PT09PT09PT09PT09PT09PVtbIEFUVEVOVElPTiBdXT09PT09PT09PT09PT09PT09PT09PT09IikNCiAgICB3YXJuKCJ8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IikNCiAgICB3YXJuKCJ8ICAgICAgICAgICAgICBUaGlzIGFjY291bnQgaGFzIGJlZW4gYmxvY2tlZC4gICAgICAgICAgICAgICB8IikNCiAgICB3YXJuKCJ8ICAgIFBsZWFzZSB2aXNpdCB0aGUgRUJHdWkgRGlzY29yZCBmb3IgbW9yZSBpbmZvcm1hdGlvbi4gICB8IikNCiAgICB3YXJuKCJ8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IikNCiAgICB3YXJuKCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IikNCmVsc2VpZiBub3QgRUJHdWlLZXkgYW5kIG5vdCBpc0Jsb2NrZWQgYW5kIG5vdCBpc01hc3RlciB0aGVuDQogICAgd2FybigiPT09PT09PT09PT09PT09PT09PT09PT1bWyBBVFRFTlRJT04gXV09PT09PT09PT09PT09PT09PT09PT09PSIpDQogICAgd2FybigifCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCIpDQogICAgd2FybigifCAgICAgICBZb3UgZG9uJ3QgaGF2ZSB0aGUgdW5sb2NrIGtleSBpbiB5b3VyIHNjcmlwdC4gICAgICAgfCIpDQogICAgd2FybigifCAgICAgICBZb3UnbGwgbmVlZCB0byBmaW5kIHRoZSBhcHByb3ByaWF0ZSBrZXkgZmlyc3QuICAgICAgfCIpDQogICAgd2FybigifCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCIpDQogICAgd2FybigiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSIpDQplbHNlaWYgRUJHdWlLZXkgfj0gInNjcmlwdF9FbGVtZW50YWwwODIwMjJfMjIwNTAzIiBhbmQgbm90IGlzQmxvY2tlZCBhbmQgbm90IGlzTWFzdGVyIHRoZW4NCiAgICB3YXJuKCI9PT09PT09PT09PT09PT09PT09PT09PVtbIEFUVEVOVElPTiBdXT09PT09PT09PT09PT09PT09PT09PT09IikNCiAgICB3YXJuKCJ8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IikNCiAgICB3YXJuKCJ8ICAgICAgICAgICAgICAgWW91ciB1bmxvY2sga2V5IGlzIGluY29ycmVjdC4gICAgICAgICAgICAgICB8IikNCiAgICB3YXJuKCJ8ICAgICAgIFlvdSdsbCBuZWVkIHRvIGZpbmQgdGhlIGFwcHJvcHJpYXRlIGtleSBmaXJzdC4gICAgICB8IikNCiAgICB3YXJuKCJ8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IikNCiAgICB3YXJuKCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IikNCmVsc2UNCiAgICB3YXJuKFtbX19fX19fX19fX18gX19fX18gICAgICAgXyANCiAgICAgICAgICAgIHwgIF9fX3wgX19fIFwgIF9fIFwgICAgIChfKQ0KICAgICAgICAgICAgfCB8X18gfCB8Xy8gLyB8ICBcL18gICBfIF8gDQogICAgICAgICAgICB8ICBfX3x8IF9fXyBcIHwgX198IHwgfCB8IHwNCiAgICAgICAgICAgIHwgfF9fX3wgfF8vIC8gfF9cIFwgfF98IHwgfA0KICAgICAgICAgICAgXF9fX18vXF9fX18vIFxfX19fL1xfXyxffF98XV0pDQoJd2FybigiV2VsY29tZSB0byBFQkdVSSwgIiAuLiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZSAuLiAiISIpDQoJd2FybigiRUJHVUkgdjEuNy4xIHwgWW91J3JlIG9uIHRoZSBTdGFibGUgYnJhbmNoIG9mIEVCR1VJIikNCgl3YXJuKCJRdWVzdGlvbnMgb3IgY29uY2VybnM/IExldCB1cyBrbm93ISBFbWFpbCBFYXJ0aDsgZWFydGh0b2FjY2Vzc0BnbWFpbC5jb20iKQ0KCXdhaXQoMC41KQ0KICAgIA0KICAgIGxvY2FsIGZ1bmN0aW9uIGdldFNlcnZlclR5cGUoKQ0KICAgICAgICBpZiBnYW1lLlByaXZhdGVTZXJ2ZXJJZCB+PSAiIiB0aGVuDQogICAgICAgICAgICBpZiBnYW1lLlByaXZhdGVTZXJ2ZXJPd25lcklkIH49IDAgdGhlbg0KICAgICAgICAgICAgICAgIHJldHVybiAiVklQU2VydmVyIg0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHJldHVybiAiUmVzZXJ2ZWRTZXJ2ZXIiDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcmV0dXJuICJTdGFuZGFyZFNlcnZlciINCiAgICAgICAgZW5kDQogICAgZW5kDQoNCiAgICBpZiBnZXRTZXJ2ZXJUeXBlKCkgPT0gIlZJUFNlcnZlciIgdGhlbg0KICAgICAgICB3YXJuKCJJdCBhcHBlYXJzIHlvdSdyZSBpbiBhIFZJUCBzZXJ2ZXIhIikNCiAgICAgICAgd2FybigiU29tZSBmdW5jdGlvbnMgb2YgRUJHdWkgd29uJ3QgZnVuY3Rpb24gbm9ybWFsbHkgaW4gYSBWSVAgc2VydmVyLCIpDQogICAgICAgIHdhcm4oImFuZCBhcyBzdWNoIGhhdmUgYmVlbiBkaXNhYmxlZC4gSGFwcHkgZXhwbG9pdGluZyEiKQ0KICAgIGVuZA0KDQoJLS0gR1VJIEluc3RhbmNlcywgRXZlbnRzIGFuZCBGdW5jdGlvbnMNCg0KCWxvY2FsIGViZ3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQ0KCWViZ3VpLk5hbWUgPSAiZWJndWkiDQoJZWJndWkuUGFyZW50ID0gZ2FtZTpXYWl0Rm9yQ2hpbGQoIkNvcmVHdWkiKQ0KDQoJZ2FtZS5Db3JlR3VpLkNoaWxkUmVtb3ZlZDpjb25uZWN0KGZ1bmN0aW9uKGNoaWxkKQ0KCQlpZiBjaGlsZC5OYW1lID09ICJlYmd1aSIgdGhlbg0KCQkJY2xvc2VkZm9yZXZlciA9IHRydWUNCgkJCWJ1dHRvbnNvcGVuZWQgPSBmYWxzZQ0KCQkJY29tbWFuZHNvcGVuZWQgPSBmYWxzZQ0KCQkJYnV0dG9uc2RlYm91bmNlID0gdHJ1ZQ0KCQkJY29tbWFuZGRlYm91bmNlID0gdHJ1ZQ0KCQkJdGVybWluYXRldWlzID0gdHJ1ZQ0KCQkJVUlTID0gbmlsDQoJCQlicmVha2FibGUgPSB0cnVlDQoJCQlCbGF6ZUNvbHVtbkVuYWJsZWQgPSBuaWwNCgkJCVZpbmVUcmFwRW5hYmxlZCA9IG5pbA0KCQkJUGxhc21hSW1wbG9zaW9uRW5hYmxlZCA9IG5pbA0KCQkJTHVtaW5vdXNEaXNwZXJzaW9uRW5hYmxlZCA9IG5pbA0KCQkJTERSYWRpdXMgPSBuaWwNCgkJCUNyeXN0YWxBcm1hbWVudEVuYWJsZWQgPSBuaWwNCgkJCUFtYXVyb3RpY0xhbWJlbnRFbmFibGVkID0gbmlsDQoJCQlBYmxhemVKdWRnZW1lbnRIYWNrRW5hYmxlZCA9IG5pbA0KCQkJVm9pZE9wZW5pbmdIYWNrRW5hYmxlZCA9IG5pbA0KCQkJU2tlbGV0b25HcmFiRW5hYmxlZCA9IG5pbA0KCQkJVGhlV29ybGRFbmFibGVkID0gbmlsDQoJCQlQb2xhcmlzRW5hYmxlZCA9IG5pbA0KCQkJQW1wbGlmaWVkU09OQVJRdWFrZUVuYWJsZWQgPSBuaWwNCgkJCVNRQ2hhcmdlID0gbmlsDQoJCQlMYWdTZXJ2ZXJFbmFibGVkID0gbmlsDQoJCQlTaGF0dGVyaW5nRXJ1cHRpb25FbmFibGVkID0gbmlsDQoJCQlJbGx1c2l2ZUF0YWtlRW5hYmxlZCA9IG5pbA0KCQkJRXRoZXJlYWxBY3VtZW5FbmFibGVkID0gbmlsDQoJCQlGb3JtaWRhYmxlUm9hckVuYWJsZWQgPSBuaWwNCgkJCVNld2VyQnVyc3RFbmFibGVkID0gbmlsDQoJCQlUb3hpY0Jhc2lsaXNrRW5hYmxlZCA9IG5pbA0KCQkJU3BsaXR0aW5nU2xpbWVFbmFibGVkID0gbmlsDQoJCQlWaXJ0dWFsWm9uZUVuYWJsZWQgPSBuaWwNCgkJCUFudGlCbGluZEVuYWJsZWQgPSBuaWwNCgkJCUFudGlMYWdFbmFibGVkID0gbmlsDQoJCQlTcGVlZGhhY2tFbmFibGVkID0gbmlsDQoJCQlIb2xvYmVhbUVuYWJsZWQgPSBuaWwNCgkJCVNldFNwZWVkID0gbmlsDQoJCQlJZ25vcmVQaHlzaWNzRW5hYmxlZCA9IG5pbA0KCQkJQW50aUdyYXZpdHlFbmFibGVkID0gbmlsDQoJCQlJbmVydGlhR3Jhdml0eUVuYWJsZWQgPSBuaWwNCgkJCUNsaWNrVFBFbmFibGVkID0gbmlsDQoJCQlGcmVlemVFbmFibGVkID0gbmlsDQoJCQlUaHJ1c3RFbmFibGVkID0gbmlsDQoJCQlUaHJ1c3RQb3dlciA9IG5pbA0KCQkJdmlld2luZyA9IG5pbA0KCQkJVFBUYXJnZXRFbmFibGVkID0gbmlsDQoJCQlMb29wVFBUYXJnZXRFbmFibGVkID0gbmlsDQoJCQlFU1BFbmFibGVkID0gbmlsDQoJCQlUUFNoYXJkc0VuYWJsZWQgPSBuaWwNCgkJCVRQRGlhbW9uZHNFbmFibGVkID0gbmlsDQoJCQlGUFNEcm9wcGluZyA9IG5pbA0KCQkJc2Fuc0tpbGxlZCA9ICJ3aXAiDQoJCWVuZA0KCWVuZCkNCg0KCWxvY2FsIG1vdXNlID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOkdldE1vdXNlKCkNCg0KCWxvY2FsIGJvcmRlcnMgPSB7fQ0KDQoJbG9jYWwgYnV0dG9uc21haW4gPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikNCglidXR0b25zbWFpbi5OYW1lID0gImJ1dHRvbnNtYWluIg0KCWJ1dHRvbnNtYWluLlBvc2l0aW9uID0gVURpbTIubmV3KDEuMjUsIDAsIDAuNjUsIDApDQoJYnV0dG9uc21haW4uU2l6ZSA9IFVEaW0yLm5ldygwLjQsIDAsIDAuMjI1LCAwKQ0KCXRhYmxlLmluc2VydChib3JkZXJzLCBidXR0b25zbWFpbikNCg0KCWJ1dHRvbnNkZWJvdW5jZSA9IGZhbHNlDQoJYnV0dG9uc29wZW5lZCA9IHRydWUNCg0KDQoJLS1pZiAoaW5pdGlhdGlvbk1vZGUgPT0gIk1vZGVybiIpIHRoZW4NCglsb2NhbCBjb21tYW5kc21haW4gPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikNCgljb21tYW5kc21haW4uTmFtZSA9ICJjb21tYW5kc21haW4iDQoJY29tbWFuZHNtYWluLlBvc2l0aW9uID0gVURpbTIubmV3KDEuMjUsIDAsIDAuNDUsIDApDQoJY29tbWFuZHNtYWluLlNpemUgPSBVRGltMi5uZXcoMC4zLCAwLCAwLjE3NSwgMCkNCgl0YWJsZS5pbnNlcnQoYm9yZGVycywgY29tbWFuZHNtYWluKQ0KCS0tZW5kDQoNCgljb21tYW5kZGVib3VuY2UgPSBmYWxzZQ0KCWNvbW1hbmRzb3BlbmVkID0gdHJ1ZQ0KDQoJY2xvc2VkZm9yZXZlciA9IGZhbHNlDQoNCglsb2NhbCBmcmFtZXMgPSB7fQ0KDQoJbG9jYWwgYnV0dG9uc2ZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpDQoJYnV0dG9uc2ZyYW1lLk5hbWUgPSAiYnV0dG9uc2ZyYW1lIg0KCWJ1dHRvbnNmcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTgsIDU0LCAxNzkpDQoJYnV0dG9uc2ZyYW1lLkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEyOCwgMTI4LCAxMjgpDQoJYnV0dG9uc2ZyYW1lLkJvcmRlclNpemVQaXhlbCA9IDINCglidXR0b25zZnJhbWUuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkNCglidXR0b25zZnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjUsIDApDQoJYnV0dG9uc2ZyYW1lLlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLjg1LCAwKQ0KCXRhYmxlLmluc2VydChmcmFtZXMsIGJ1dHRvbnNmcmFtZSkNCglidXR0b25zZnJhbWUuUGFyZW50ID0gYnV0dG9uc21haW4NCg0KCWxvY2FsIGNvbW1hbmRzZnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikNCgljb21tYW5kc2ZyYW1lLk5hbWUgPSAiY29tbWFuZHNmcmFtZSINCgljb21tYW5kc2ZyYW1lLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpDQoJY29tbWFuZHNmcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTgsIDU0LCAxNzkpDQoJY29tbWFuZHNmcmFtZS5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMjgsIDEyOCwgMTI4KQ0KCWNvbW1hbmRzZnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMg0KCWNvbW1hbmRzZnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjUsIDApDQoJY29tbWFuZHNmcmFtZS5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMC44NSwgMCkNCgl0YWJsZS5pbnNlcnQoZnJhbWVzLCBjb21tYW5kc2ZyYW1lKQ0KCWNvbW1hbmRzZnJhbWUuUGFyZW50ID0gY29tbWFuZHNtYWluDQoNCglsb2NhbCBjb21tYW5kQm94ID0gSW5zdGFuY2UubmV3KCJUZXh0Qm94IikNCgljb21tYW5kQm94Lk5hbWUgPSAiY29tbWFuZEJveCINCgljb21tYW5kQm94LkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpDQoJY29tbWFuZEJveC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUsIDQwLCA0MCkNCgljb21tYW5kQm94LkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEyOCwgMTI4LCAxMjgpDQoJY29tbWFuZEJveC5Cb3JkZXJTaXplUGl4ZWwgPSAyDQoJY29tbWFuZEJveC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuMywgMCkNCgljb21tYW5kQm94LlNpemUgPSBVRGltMi5uZXcoMC44NSwgMCwgMC4yMCwgMCkNCgljb21tYW5kQm94LkZvbnQgPSBFbnVtLkZvbnQuU2FycGFuY2gNCgljb21tYW5kQm94LlRleHQgPSAiIg0KCWNvbW1hbmRCb3guVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1MSwgMjUxLCAyNTUpDQoJY29tbWFuZEJveC5UZXh0U2NhbGVkID0gdHJ1ZQ0KCWNvbW1hbmRCb3guVGV4dFNpemUgPSAxNC4wMDANCgljb21tYW5kQm94LlRleHRXcmFwcGVkID0gdHJ1ZQ0KCWNvbW1hbmRCb3guQ2xlYXJUZXh0T25Gb2N1cyA9IGZhbHNlDQoJY29tbWFuZEJveC5QYXJlbnQgPSBjb21tYW5kc2ZyYW1lDQoNCglsb2NhbCBsYWJlbHMgPSB7fQ0KDQoJbG9jYWwgY29tbWFuZEJveE91dHB1dCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikNCgljb21tYW5kQm94T3V0cHV0Lk5hbWUgPSAiY29tbWFuZEJveE91dHB1dCINCgljb21tYW5kQm94T3V0cHV0LkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpDQoJY29tbWFuZEJveE91dHB1dC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkNCgljb21tYW5kQm94T3V0cHV0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMA0KCWNvbW1hbmRCb3hPdXRwdXQuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkNCgljb21tYW5kQm94T3V0cHV0LkJvcmRlclNpemVQaXhlbCA9IDANCgljb21tYW5kQm94T3V0cHV0LlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgMCwgMC42LCAwKQ0KCWNvbW1hbmRCb3hPdXRwdXQuU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAuMiwgMCkNCgljb21tYW5kQm94T3V0cHV0LkZvbnQgPSBFbnVtLkZvbnQuU2FycGFuY2gNCgljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoTm9uZSkiDQoJY29tbWFuZEJveE91dHB1dC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTEsIDI1NSkNCgljb21tYW5kQm94T3V0cHV0LlRleHRTY2FsZWQgPSB0cnVlDQoJY29tbWFuZEJveE91dHB1dC5UZXh0U2l6ZSA9IDE0LjAwMA0KCWNvbW1hbmRCb3hPdXRwdXQuVGV4dFdyYXBwZWQgPSB0cnVlDQoJdGFibGUuaW5zZXJ0KGxhYmVscywgY29tbWFuZEJveE91dHB1dCkNCgljb21tYW5kQm94T3V0cHV0LlBhcmVudCA9IGNvbW1hbmRzZnJhbWUNCg0KCWxvY2FsIERldGFpbHMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpDQoJRGV0YWlscy5OYW1lID0gIkRldGFpbHMiDQoJRGV0YWlscy5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkNCglEZXRhaWxzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMA0KCURldGFpbHMuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkNCglEZXRhaWxzLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAuMDE0MTQxNDE0MywgMCkNCglEZXRhaWxzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC4xNSwgMCkNCglEZXRhaWxzLkZvbnQgPSBFbnVtLkZvbnQuU2FycGFuY2gNCglEZXRhaWxzLlRleHQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZSAuLiAiIHwgRUJHVUkgfCBTdGFibGUiDQoJRGV0YWlscy5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTEsIDI1NSkNCglEZXRhaWxzLlRleHRTY2FsZWQgPSB0cnVlDQoJRGV0YWlscy5aSW5kZXggPSA1DQoJRGV0YWlscy5UZXh0U2l6ZSA9IDE0LjAwMA0KCURldGFpbHMuVGV4dFdyYXBwZWQgPSB0cnVlDQoJdGFibGUuaW5zZXJ0KGxhYmVscywgRGV0YWlscykNCglEZXRhaWxzLlBhcmVudCA9IGJ1dHRvbnNmcmFtZQ0KDQoJbG9jYWwgRGV0YWlsczIgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpDQoJRGV0YWlsczIuTmFtZSA9ICJEZXRhaWxzMiINCglEZXRhaWxzMi5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KQ0KCURldGFpbHMyLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQ0KCURldGFpbHMyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMA0KCURldGFpbHMyLkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEyOCwgMTI4LCAxMjgpDQoJRGV0YWlsczIuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjksIDApDQoJRGV0YWlsczIuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLjE1LCAwKQ0KCURldGFpbHMyLkZvbnQgPSBFbnVtLkZvbnQuU2FycGFuY2gNCglEZXRhaWxzMi5UZXh0ID0gIlByZXNzIF0gdG8gb3BlbiBhbmQgY2xvc2UgdGhpcyBHVUkuIg0KCURldGFpbHMyLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1MSwgMjU1KQ0KCURldGFpbHMyLlRleHRTY2FsZWQgPSB0cnVlDQoJRGV0YWlsczIuVGV4dFNpemUgPSAxNC4wMDANCglEZXRhaWxzMi5UZXh0V3JhcHBlZCA9IHRydWUNCgl0YWJsZS5pbnNlcnQobGFiZWxzLCBEZXRhaWxzMikNCglEZXRhaWxzMi5QYXJlbnQgPSBjb21tYW5kc2ZyYW1lDQoNCglsb2NhbCBEZXRhaWxzMyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikNCglEZXRhaWxzMy5OYW1lID0gIkRldGFpbHMzIg0KCURldGFpbHMzLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQ0KCURldGFpbHMzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMA0KCURldGFpbHMzLkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEyOCwgMTI4LCAxMjgpDQoJRGV0YWlsczMuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMC44NzUsIDApDQoJRGV0YWlsczMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLjE1LCAwKQ0KCURldGFpbHMzLkZvbnQgPSBFbnVtLkZvbnQuU2FycGFuY2gNCglEZXRhaWxzMy5UZXh0ID0gIlByZXNzIFsgdG8gb3BlbiBhbmQgY2xvc2UgdGhpcyBHVUkuIg0KCURldGFpbHMzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1MSwgMjU1KQ0KCURldGFpbHMzLlRleHRTY2FsZWQgPSB0cnVlDQoJRGV0YWlsczMuVGV4dFNpemUgPSAxNC4wMDANCglEZXRhaWxzMy5UZXh0V3JhcHBlZCA9IHRydWUNCgl0YWJsZS5pbnNlcnQobGFiZWxzLCBEZXRhaWxzMykNCglEZXRhaWxzMy5QYXJlbnQgPSBidXR0b25zZnJhbWUNCg0KCWxvY2FsIERldGFpbHM0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQ0KCURldGFpbHM0Lk5hbWUgPSAiRGV0YWlsczQiDQoJRGV0YWlsczQuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpDQoJRGV0YWlsczQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEuMDAwDQoJRGV0YWlsczQuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkNCglEZXRhaWxzNC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAxLjEsIDApDQoJRGV0YWlsczQuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLjE3NSwgMCkNCglEZXRhaWxzNC5Gb250ID0gRW51bS5Gb250LlNhcnBhbmNoDQoJRGV0YWlsczQuVGV4dCA9ICJIb2xkIExlZnQgYW5kIFJpZ2h0LCB0aGVuIHByZXNzIGFueXRoaW5nIHRvIHRlcm1pbmF0ZSB0aGUgc2NyaXB0IGFuZCBHVUlzLiINCglEZXRhaWxzNC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCkNCglEZXRhaWxzNC5UZXh0U2NhbGVkID0gdHJ1ZQ0KCURldGFpbHM0LlRleHRTaXplID0gMTQuMDAwDQoJRGV0YWlsczQuVGV4dFdyYXBwZWQgPSB0cnVlDQoJRGV0YWlsczQuUGFyZW50ID0gYnV0dG9uc2ZyYW1lDQoNCglsb2NhbCBWZXJzaW9uID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQ0KCVZlcnNpb24uTmFtZSA9ICJWZXJzaW9uIg0KCVZlcnNpb24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpDQoJVmVyc2lvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMS4wMDANCglWZXJzaW9uLkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEyOCwgMTI4LCAxMjgpDQoJVmVyc2lvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLjA1LCAwKQ0KCVZlcnNpb24uU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLjEsIDApDQoJVmVyc2lvbi5Gb250ID0gRW51bS5Gb250LlNhcnBhbmNoDQoJVmVyc2lvbi5UZXh0ID0gIlZlcnNpb24gdjEuNy4xIg0KCVZlcnNpb24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1MSwgMjUxLCAyNTUpDQoJVmVyc2lvbi5UZXh0U2NhbGVkID0gdHJ1ZQ0KCVZlcnNpb24uVGV4dFNpemUgPSAxNC4wMDANCglWZXJzaW9uLlRleHRXcmFwcGVkID0gdHJ1ZQ0KCXRhYmxlLmluc2VydChsYWJlbHMsIFZlcnNpb24pDQoJVmVyc2lvbi5QYXJlbnQgPSBjb21tYW5kc2ZyYW1lDQoNCglsb2NhbCBtYWluZnJhbWUgPSBJbnN0YW5jZS5uZXcoIlNjcm9sbGluZ0ZyYW1lIikNCgltYWluZnJhbWUuTmFtZSA9ICJtYWluZnJhbWUiDQoJbWFpbmZyYW1lLkFjdGl2ZSA9IHRydWUNCgltYWluZnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ5LCA4MywgODkpDQoJbWFpbmZyYW1lLkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEyOCwgMTI4LCAxMjgpDQoJbWFpbmZyYW1lLkJvcmRlclNpemVQaXhlbCA9IDINCgltYWluZnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjUsIDApDQoJbWFpbmZyYW1lLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpDQoJbWFpbmZyYW1lLlNpemUgPSBVRGltMi5uZXcoMC44Njc3Njg1ODYsIDAsIDAuNiwgMCkNCgltYWluZnJhbWUuU2Nyb2xsQmFyVGhpY2tuZXNzID0gNg0KCW1haW5mcmFtZS5QYXJlbnQgPSBidXR0b25zbWFpbg0KDQoJbG9jYWwgVUlHcmlkTGF5b3V0ID0gSW5zdGFuY2UubmV3KCJVSUdyaWRMYXlvdXQiKQ0KCVVJR3JpZExheW91dC5GaWxsRGlyZWN0aW9uID0gRW51bS5GaWxsRGlyZWN0aW9uLkhvcml6b250YWwNCglVSUdyaWRMYXlvdXQuSG9yaXpvbnRhbEFsaWdubWVudCA9IEVudW0uSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXINCglVSUdyaWRMYXlvdXQuQ2VsbFBhZGRpbmcgPSBVRGltMi5uZXcoMCwgNywgMCwgNykNCglVSUdyaWRMYXlvdXQuQ2VsbFNpemUgPSBVRGltMi5uZXcoMC40NSwgMCwgMCwgMzApDQoJVUlHcmlkTGF5b3V0LlNvcnRPcmRlciA9IEVudW0uU29ydE9yZGVyLkxheW91dE9yZGVyDQoJVUlHcmlkTGF5b3V0LlBhcmVudCA9IG1haW5mcmFtZQ0KDQoJbG9jYWwgYnV0dG9ucyA9IHt9DQoNCgktLSBJbnN0YW50IEJsYXplIENvbHVtbg0KDQoJbG9jYWwgQmxhemVDb2x1bW4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUJsYXplQ29sdW1uLk5hbWUgPSAiQmxhemVDb2x1bW4iDQoJQmxhemVDb2x1bW4uVGV4dCA9ICJJbnN0YW50IEJsYXplIENvbHVtbiAoT0ZGKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQmxhemVDb2x1bW4pDQoNCglCbGF6ZUNvbHVtbkVuYWJsZWQgPSBmYWxzZQ0KDQoJQmxhemVDb2x1bW4uTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgQmxhemVDb2x1bW5FbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUJsYXplQ29sdW1uRW5hYmxlZCA9IHRydWUNCgkJCUJsYXplQ29sdW1uLlRleHQgPSAiSW5zdGFudCBCbGF6ZSBDb2x1bW4gKE9OKSINCgkJZWxzZQ0KCQkJQmxhemVDb2x1bW5FbmFibGVkID0gZmFsc2UNCgkJCUJsYXplQ29sdW1uLlRleHQgPSAiSW5zdGFudCBCbGF6ZSBDb2x1bW4gKE9GRikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEluZmluaXRlIEZsYW1lIEJvZHkNCg0KCWxvY2FsIEZsYW1lQm9keSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJRmxhbWVCb2R5Lk5hbWUgPSAiRmxhbWVCb2R5Ig0KCUZsYW1lQm9keS5UZXh0ID0gIkluZmluaXRlIEZsYW1lIEJvZHkiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEZsYW1lQm9keSkNCg0KCUZsYW1lQm9keS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJCb2R5IENvbG9ycyIpIHRoZW4NCgkJCWdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJbIkJvZHkgQ29sb3JzIl06RGVzdHJveSgpDQoJCWVuZA0KCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJGaXJlIiwgIkZsYW1lIEJvZHkiKQ0KCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkZpcmUiLCAiRmxhbWUgQm9keSIpDQoJZW5kKQ0KDQoJLS0gSGlkZSBGbGFtZXMNCg0KCWxvY2FsIEhpZGVGbGFtZXMgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUhpZGVGbGFtZXMuTmFtZSA9ICJIaWRlRmxhbWVzIg0KCUhpZGVGbGFtZXMuVGV4dCA9ICJIaWRlIEZsYW1lcyINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgSGlkZUZsYW1lcykNCg0KCUhpZGVGbGFtZXMuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkdldENoaWxkcmVuKCkpIGRvDQoJCQlpZiB2Lk5hbWUgPT0gIkZpcmUiIHRoZW4NCgkJCQl2OkRlc3Ryb3koKQ0KCQkJZW5kDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEludmlzaWJsZSBJbmZpbml0ZSBGbGFtZSBCb2R5DQoNCglsb2NhbCBJbnZpc2libGVGbGFtZUJvZHkgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUludmlzaWJsZUZsYW1lQm9keS5OYW1lID0gIkludmlzaWJsZUZsYW1lQm9keSINCglJbnZpc2libGVGbGFtZUJvZHkuVGV4dCA9ICJJbnZpc2libGUgSW5maW5pdGUgRmxhbWUgQm9keSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgSW52aXNpYmxlRmxhbWVCb2R5KQ0KDQoJSW52aXNpYmxlRmxhbWVCb2R5Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkJvZHkgQ29sb3JzIikgdGhlbg0KCQkJZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlclsiQm9keSBDb2xvcnMiXTpEZXN0cm95KCkNCgkJZW5kDQoJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIkZpcmUiLCAiRmxhbWUgQm9keSIpDQoJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiRmlyZSIsICJGbGFtZSBCb2R5IikNCgkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkdldENoaWxkcmVuKCkpIGRvDQoJCQlpZiB2Lk5hbWUgPT0gIkZpcmUiIHRoZW4NCgkJCQl2OkRlc3Ryb3koKQ0KCQkJZW5kDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEluZmluaXRlIFJvY2sgQXJtb3INCg0KCWxvY2FsIFJvY2tBcm1vciA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJUm9ja0FybW9yLk5hbWUgPSAiUm9ja0FybW9yIg0KCVJvY2tBcm1vci5UZXh0ID0gIkluZmluaXRlIFJvY2sgQXJtb3IiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFJvY2tBcm1vcikNCg0KCVJvY2tBcm1vci5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJCb2R5IENvbG9ycyIpIHRoZW4NCgkJCWdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJbIkJvZHkgQ29sb3JzIl06RGVzdHJveSgpDQoJCWVuZA0KCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJFYXJ0aCIsICJSb2NrIEFybW9yIikNCgkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJFYXJ0aCIsICJSb2NrIEFybW9yIikNCgllbmQpDQoNCgktLSBJbnN0YW50IFZpbmUgVHJhcA0KDQoJbG9jYWwgVmluZVRyYXAgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCVZpbmVUcmFwLk5hbWUgPSAiVmluZVRyYXAiDQoJVmluZVRyYXAuVGV4dCA9ICJJbnN0YW50IFZpbmUgVHJhcCAoT0ZGKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgVmluZVRyYXApDQoNCglWaW5lVHJhcEVuYWJsZWQgPSBmYWxzZQ0KDQoJVmluZVRyYXAuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgVmluZVRyYXBFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCVZpbmVUcmFwRW5hYmxlZCA9IHRydWUNCgkJCVZpbmVUcmFwLlRleHQgPSAiSW5zdGFudCBWaW5lIFRyYXAgKE9OKSINCgkJZWxzZQ0KCQkJVmluZVRyYXBFbmFibGVkID0gZmFsc2UNCgkJCVZpbmVUcmFwLlRleHQgPSAiSW5zdGFudCBWaW5lIFRyYXAgKE9GRikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEluc3RhbnQgUGxhc21hIEltcGxvc2lvbg0KDQoJbG9jYWwgUGxhc21hSW1wbG9zaW9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglQbGFzbWFJbXBsb3Npb24uTmFtZSA9ICJQbGFzbWFJbXBsb3Npb24iDQoJUGxhc21hSW1wbG9zaW9uLlRleHQgPSAiSW5zdGFudCBQbGFzbWEgSW1wbG9zaW9uIChPRkYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBQbGFzbWFJbXBsb3Npb24pDQoNCglQbGFzbWFJbXBsb3Npb25FbmFibGVkID0gZmFsc2UNCg0KCVBsYXNtYUltcGxvc2lvbi5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBQbGFzbWFJbXBsb3Npb25FbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCVBsYXNtYUltcGxvc2lvbkVuYWJsZWQgPSB0cnVlDQoJCQlQbGFzbWFJbXBsb3Npb24uVGV4dCA9ICJJbnN0YW50IFBsYXNtYSBJbXBsb3Npb24gKE9OKSINCgkJZWxzZQ0KCQkJUGxhc21hSW1wbG9zaW9uRW5hYmxlZCA9IGZhbHNlDQoJCQlQbGFzbWFJbXBsb3Npb24uVGV4dCA9ICJJbnN0YW50IFBsYXNtYSBJbXBsb3Npb24gKE9GRikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEFtcGxpZmllZCBMdW1pbm91cyBEaXNwZXJzaW9uIEhhY2sNCg0KCWxvY2FsIEx1bWlub3VzRGlzcGVyc2lvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJTHVtaW5vdXNEaXNwZXJzaW9uLk5hbWUgPSAiTHVtaW5vdXNEaXNwZXJzaW9uIg0KCUx1bWlub3VzRGlzcGVyc2lvbi5UZXh0ID0gIkFtcGxpZmllZCBMdW1pbm91cyBEaXNwZXJzaW9uIEhhY2sgKE9GRikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEx1bWlub3VzRGlzcGVyc2lvbikNCg0KCWxvY2FsIEx1bWlub3VzRGlzcGVyc2lvbkVuYWJsZWQgPSBmYWxzZQ0KCWxvY2FsIExEUmFkaXVzID0gMzAgLS0gMjUwMDANCg0KCUx1bWlub3VzRGlzcGVyc2lvbi5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBMdW1pbm91c0Rpc3BlcnNpb25FbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUx1bWlub3VzRGlzcGVyc2lvbkVuYWJsZWQgPSB0cnVlDQoJCQlMdW1pbm91c0Rpc3BlcnNpb24uVGV4dCA9ICJBbXBsaWZpZWQgTHVtaW5vdXMgRGlzcGVyc2lvbiBIYWNrIChPTikiDQoJCWVsc2UNCgkJCUx1bWlub3VzRGlzcGVyc2lvbkVuYWJsZWQgPSBmYWxzZQ0KCQkJTHVtaW5vdXNEaXNwZXJzaW9uLlRleHQgPSAiQW1wbGlmaWVkIEx1bWlub3VzIERpc3BlcnNpb24gSGFjayAoT0ZGKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gQ3J5c3RhbCBBcm1hbWVudCBIYWNrDQoNCglsb2NhbCBDcnlzdGFsQXJtYW1lbnQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUNyeXN0YWxBcm1hbWVudC5OYW1lID0gIkNyeXN0YWxBcm1hbWVudCINCglDcnlzdGFsQXJtYW1lbnQuVGV4dCA9ICJDcnlzdGFsIEFybWFtZW50IEhhY2sgKE9GRikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIENyeXN0YWxBcm1hbWVudCkNCg0KCUNyeXN0YWxBcm1hbWVudEVuYWJsZWQgPSBmYWxzZQ0KDQoJQ3J5c3RhbEFybWFtZW50Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIENyeXN0YWxBcm1hbWVudEVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJQ3J5c3RhbEFybWFtZW50RW5hYmxlZCA9IHRydWUNCgkJCUNyeXN0YWxBcm1hbWVudC5UZXh0ID0gIkNyeXN0YWwgQXJtYW1lbnQgSGFjayAoT04pIg0KCQllbHNlDQoJCQlDcnlzdGFsQXJtYW1lbnRFbmFibGVkID0gZmFsc2UNCgkJCUNyeXN0YWxBcm1hbWVudC5UZXh0ID0gIkNyeXN0YWwgQXJtYW1lbnQgSGFjayAoT0ZGKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gU3BlY3RyYWwgRW1ib2RpbWVudA0KDQoJbG9jYWwgU3BlY3RyYWxFbWJvZGltZW50ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglTcGVjdHJhbEVtYm9kaW1lbnQuTmFtZSA9ICJTcGVjdHJhbEVtYm9kaW1lbnQiDQoJU3BlY3RyYWxFbWJvZGltZW50LlRleHQgPSAiU3BlY3RyYWwgRW1ib2RpbWVudCBLZXliaW5kIChPRkYpIFtYXSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgU3BlY3RyYWxFbWJvZGltZW50KQ0KDQoJU3BlY3RyYWxFbWJvZGltZW50RW5hYmxlZCA9IGZhbHNlDQoNCglTcGVjdHJhbEVtYm9kaW1lbnQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgU3BlY3RyYWxFbWJvZGltZW50RW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlTcGVjdHJhbEVtYm9kaW1lbnRFbmFibGVkID0gdHJ1ZQ0KCQkJU3BlY3RyYWxFbWJvZGltZW50LlRleHQgPSAiU3BlY3RyYWwgRW1ib2RpbWVudCBLZXliaW5kIChPTikgW1hdIg0KCQllbHNlDQoJCQlTcGVjdHJhbEVtYm9kaW1lbnRFbmFibGVkID0gZmFsc2UNCgkJCVNwZWN0cmFsRW1ib2RpbWVudC5UZXh0ID0gIlNwZWN0cmFsIEVtYm9kaW1lbnQgS2V5YmluZCAoT0ZGKSBbWF0iDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEdyYXZpdGFsIEdsb2JlIEhhY2sNCg0KCWxvY2FsIEdyYXZpdGFsR2xvYmUgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUdyYXZpdGFsR2xvYmUuTmFtZSA9ICJHcmF2aXRhbEdsb2JlIg0KCUdyYXZpdGFsR2xvYmUuVGV4dCA9ICJHcmF2aXRhbCBHbG9iZSBIYWNrIChPRkYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBHcmF2aXRhbEdsb2JlKQ0KDQoJR3Jhdml0YWxHbG9iZUVuYWJsZWQgPSBmYWxzZQ0KDQoJR3Jhdml0YWxHbG9iZS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBHcmF2aXRhbEdsb2JlRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlHcmF2aXRhbEdsb2JlRW5hYmxlZCA9IHRydWUNCgkJCUdyYXZpdGFsR2xvYmUuVGV4dCA9ICJHcmF2aXRhbCBHbG9iZSBIYWNrIChPTikiDQoJCWVsc2UNCgkJCUdyYXZpdGFsR2xvYmVFbmFibGVkID0gZmFsc2UNCgkJCUdyYXZpdGFsR2xvYmUuVGV4dCA9ICJHcmF2aXRhbCBHbG9iZSBIYWNrIChPRkYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBHcmF2aXRhdGlvbmFsIEZpZWxkIEhhY2sNCg0KCWxvY2FsIEdyYXZpdGF0aW9uYWxGaWVsZCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJR3Jhdml0YXRpb25hbEZpZWxkLk5hbWUgPSAiR3Jhdml0YXRpb25hbEZpZWxkIg0KCUdyYXZpdGF0aW9uYWxGaWVsZC5UZXh0ID0gIkdyYXZpdGF0aW9uYWwgRmllbGQgSGFjayAoT0ZGKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgR3Jhdml0YXRpb25hbEZpZWxkKQ0KDQoJR3Jhdml0YXRpb25hbEZpZWxkRW5hYmxlZCA9IGZhbHNlDQoNCglHcmF2aXRhdGlvbmFsRmllbGQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgR3Jhdml0YXRpb25hbEZpZWxkRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlHcmF2aXRhdGlvbmFsRmllbGRFbmFibGVkID0gdHJ1ZQ0KCQkJR3Jhdml0YXRpb25hbEZpZWxkLlRleHQgPSAiR3Jhdml0YXRpb25hbCBGaWVsZCBIYWNrIChPTikiDQoJCWVsc2UNCgkJCUdyYXZpdGF0aW9uYWxGaWVsZEVuYWJsZWQgPSBmYWxzZQ0KCQkJR3Jhdml0YXRpb25hbEZpZWxkLlRleHQgPSAiR3Jhdml0YXRpb25hbCBGaWVsZCBIYWNrIChPRkYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBBbWF1cm90aWMgTGFtYmVudCBIYWNrDQoNCglsb2NhbCBBbWF1cm90aWNMYW1iZW50ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglBbWF1cm90aWNMYW1iZW50Lk5hbWUgPSAiQW1hdXJvdGljTGFtYmVudCINCglBbWF1cm90aWNMYW1iZW50LlRleHQgPSAiQW1hdXJvdGljIExhbWJlbnQgSGFjayAoT0ZGKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQW1hdXJvdGljTGFtYmVudCkNCg0KCUFtYXVyb3RpY0xhbWJlbnRFbmFibGVkID0gZmFsc2UNCg0KCUFtYXVyb3RpY0xhbWJlbnQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgQW1hdXJvdGljTGFtYmVudEVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJQW1hdXJvdGljTGFtYmVudEVuYWJsZWQgPSB0cnVlDQoJCQlBbWF1cm90aWNMYW1iZW50LlRleHQgPSAiQW1hdXJvdGljIExhbWJlbnQgSGFjayAoT04pIg0KCQllbHNlDQoJCQlBbWF1cm90aWNMYW1iZW50RW5hYmxlZCA9IGZhbHNlDQoJCQlBbWF1cm90aWNMYW1iZW50LlRleHQgPSAiQW1hdXJvdGljIExhbWJlbnQgSGFjayAoT0ZGKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gQWJsYXplIEp1ZGdlbWVudCBIYWNrDQoNCglsb2NhbCBBYmxhemVKdWRnZW1lbnQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUFibGF6ZUp1ZGdlbWVudC5OYW1lID0gIkFibGF6ZUp1ZGdlbWVudCINCglBYmxhemVKdWRnZW1lbnQuVGV4dCA9ICJBYmxhemUgSnVkZ2VtZW50IEhhY2sgKE9GRikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEFibGF6ZUp1ZGdlbWVudCkNCg0KCUFibGF6ZUp1ZGdlbWVudEhhY2tFbmFibGVkID0gZmFsc2UNCg0KCUFibGF6ZUp1ZGdlbWVudC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBBYmxhemVKdWRnZW1lbnRIYWNrRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlBYmxhemVKdWRnZW1lbnRIYWNrRW5hYmxlZCA9IHRydWUNCgkJCUFibGF6ZUp1ZGdlbWVudC5UZXh0ID0gIkFibGF6ZSBKdWRnZW1lbnQgSGFjayAoT04pIg0KCQllbHNlDQoJCQlBYmxhemVKdWRnZW1lbnRIYWNrRW5hYmxlZCA9IGZhbHNlDQoJCQlBYmxhemVKdWRnZW1lbnQuVGV4dCA9ICJBYmxhemUgSnVkZ2VtZW50IEhhY2sgKE9GRikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIFZvaWQgT3BlbmluZyBIYWNrDQoNCglsb2NhbCBWb2lkT3BlbmluZyA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJVm9pZE9wZW5pbmcuTmFtZSA9ICJWb2lkT3BlbmluZyINCglWb2lkT3BlbmluZy5UZXh0ID0gIlZvaWQgT3BlbmluZyBIYWNrIChPRkYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBWb2lkT3BlbmluZykNCg0KCVZvaWRPcGVuaW5nSGFja0VuYWJsZWQgPSBmYWxzZQ0KDQoJVm9pZE9wZW5pbmcuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgVm9pZE9wZW5pbmdIYWNrRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlWb2lkT3BlbmluZ0hhY2tFbmFibGVkID0gdHJ1ZQ0KCQkJVm9pZE9wZW5pbmcuVGV4dCA9ICJWb2lkIE9wZW5pbmcgSGFjayAoT04pIg0KCQllbHNlDQoJCQlWb2lkT3BlbmluZ0hhY2tFbmFibGVkID0gZmFsc2UNCgkJCVZvaWRPcGVuaW5nLlRleHQgPSAiVm9pZCBPcGVuaW5nIEhhY2sgKE9GRikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEluc3RhbnQgU2tlbGV0b24gR3JhYg0KDQoJbG9jYWwgU2tlbGV0b25HcmFiID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglTa2VsZXRvbkdyYWIuTmFtZSA9ICJTa2VsZXRvbkdyYWIiDQoJU2tlbGV0b25HcmFiLlRleHQgPSAiSW5zdGFudCBTa2VsZXRvbiBHcmFiIChPRkYpIFtBSU1FRF0iDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFNrZWxldG9uR3JhYikNCg0KCVNrZWxldG9uR3JhYkVuYWJsZWQgPSBmYWxzZQ0KDQoJU2tlbGV0b25HcmFiLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIFNrZWxldG9uR3JhYkVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJU2tlbGV0b25HcmFiRW5hYmxlZCA9IHRydWUNCgkJCVNrZWxldG9uR3JhYi5UZXh0ID0gIkluc3RhbnQgU2tlbGV0b24gR3JhYiAoT04pIFtBSU1FRF0iDQoJCWVsc2UNCgkJCVNrZWxldG9uR3JhYkVuYWJsZWQgPSBmYWxzZQ0KCQkJU2tlbGV0b25HcmFiLlRleHQgPSAiSW5zdGFudCBTa2VsZXRvbiBHcmFiIChPRkYpIFtBSU1FRF0iDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEhvbG9iZWFtIENhbWVyYSBBdHRhY2gNCg0KCWxvY2FsIEhvbG9iZWFtID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglIb2xvYmVhbS5OYW1lID0gIkhvbG9iZWFtIg0KCUhvbG9iZWFtLlRleHQgPSAiSG9sb2JlYW0gQ2FtZXJhIEF0dGFjaCAoT0ZGKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgSG9sb2JlYW0pDQoNCglIb2xvYmVhbUVuYWJsZWQgPSBmYWxzZQ0KDQoJZnVuY3Rpb24gYXR0YWNoQ2FtZXJhKHYpDQoJCWlmICh2IH49IG5pbCkgdGhlbg0KCQkJaWYgbm90KHZpZXdpbmcpIGFuZCAodi5OYW1lID09ICJIb2xvYmVhbSIpIHRoZW4NCgkJCQlnYW1lLldvcmtzcGFjZS5DYW1lcmEuQ2FtZXJhU3ViamVjdCA9IGdhbWUuV29ya3NwYWNlWycuSWdub3JlJ11bJy5BdHRhY2tzJ11bdi5OYW1lXQ0KCQkJZWxzZQ0KCQkJCXY6RGVzdHJveSgpDQoJCQkJcmV0dXJuDQoJCQllbmQNCgkJCQ0KCQkJdi5UcmFuc3BhcmVuY3kgPSAwDQoNCgkJCXdhaXQoNCkNCgkJCWlmIG5vdCh2aWV3aW5nKSBhbmQgbm90KGdhbWUuV29ya3NwYWNlLkNhbWVyYS5DYW1lcmFTdWJqZWN0ID09IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQpIHRoZW4NCgkJCQlnYW1lLldvcmtzcGFjZS5DYW1lcmEuQ2FtZXJhU3ViamVjdCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQNCgkJCWVuZA0KCQkJDQoJCQl2OkRlc3Ryb3koKQ0KCQllbmQNCgllbmQNCgkNCglnYW1lLldvcmtzcGFjZVsnLklnbm9yZSddWycuQXR0YWNrcyddLkRlc2NlbmRhbnRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHYpDQoJCWlmIEhvbG9iZWFtRW5hYmxlZCB0aGVuDQoJCQlpZiAodi5OYW1lID09ICJQYXJ0IikgYW5kIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyKSB0aGVuDQoJCQkJbG9jYWwgZGlzdGFuY2UgPSAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdi5Qb3NpdGlvbikuTWFnbml0dWRlDQoJCQkJDQoJCQkJaWYgKHYuU2l6ZSA9PSBWZWN0b3IzLm5ldyg1LCA1LCA1KSkgYW5kIChkaXN0YW5jZSA8IDEwKSBhbmQgKHY6V2FpdEZvckNoaWxkKCJCb2R5VmVsb2NpdHkiLCAxKSkgYW5kICh2OldhaXRGb3JDaGlsZCgiQm9keUd5cm8iLCAxKSkgYW5kICh2LkJvZHlWZWxvY2l0eS5QID49IDEyNTApIHRoZW4NCgkJCQkNCgkJCQkJdi5OYW1lID0gIkhvbG9iZWFtIg0KCQkJCQ0KCQkJCQlwY2FsbChmdW5jdGlvbigpDQoJCQkJCQljb3JvdXRpbmUucmVzdW1lKGNvcm91dGluZS5jcmVhdGUoZnVuY3Rpb24oKSANCgkJCQkJCQlhdHRhY2hDYW1lcmEodikgDQoJCQkJCQllbmQpKQ0KCQkJCQllbmQpDQoJCQkJCQ0KCQkJCQlsb2NhbCBndWkgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uU2tpbGxzQmFyDQoJCQkJCQ0KCQkJCQl3YWl0KDAuNSkNCgkJCQkJDQoJCQkJCXdoaWxlIHdhaXQoKSBkbw0KCQkJCQkJaWYgbm90KGd1aVsnMSddLkNELlRleHQgPT0gIi4uLiIpIGFuZCBub3QoZ3VpWycyJ10uQ0QuVGV4dCA9PSAiLi4uIikgYW5kIG5vdChndWlbJzMnXS5DRC5UZXh0ID09ICIuLi4iKSBhbmQgbm90KGd1aVsnNCddLkNELlRleHQgPT0gIi4uLiIpIGFuZCBub3QoZ3VpWyc1J10uQ0QuVGV4dCA9PSAiLi4uIikgdGhlbg0KCQkJCQkJCXBjYWxsKGZ1bmN0aW9uKCkNCgkJCQkJCQkJaWYgbm90KHZpZXdpbmcpIGFuZCBub3QoZ2FtZS5Xb3Jrc3BhY2UuQ2FtZXJhLkNhbWVyYVN1YmplY3QgPT0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZCkgdGhlbg0KCQkJCQkJCQkJZ2FtZS5Xb3Jrc3BhY2UuQ2FtZXJhLkNhbWVyYVN1YmplY3QgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkDQoJCQkJCQkJCWVuZA0KCQkJDQoJCQkJCQkJCXY6RGVzdHJveSgpDQoJCQkJCQkJZW5kKQ0KCQkJCQkJCQ0KCQkJCQkJCWJyZWFrDQoJCQkJCQllbmQNCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZW5kKQ0KDQoJSG9sb2JlYW0uTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgSG9sb2JlYW1FbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUhvbG9iZWFtRW5hYmxlZCA9IHRydWUNCgkJCUhvbG9iZWFtLlRleHQgPSAiSG9sb2JlYW0gQ2FtZXJhIEF0dGFjaCAoT04pIg0KCQkJDQoJCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZVsnLklnbm9yZSddWycuQXR0YWNrcyddOkdldENoaWxkcmVuKCkpIGRvDQoJCQkJaWYgKHYuTmFtZSA9PSAiUGFydCIpIGFuZCAodjpXYWl0Rm9yQ2hpbGQoIkJvZHlWZWxvY2l0eSIsIDEpKSBhbmQgKHY6V2FpdEZvckNoaWxkKCJCb2R5R3lybyIsIDEpKSBhbmQgKHYuQm9keVZlbG9jaXR5LlAgPj0gMTI1MCkgdGhlbiB2OkRlc3Ryb3koKSBlbmQNCgkJCWVuZA0KCQllbHNlDQoJCQlIb2xvYmVhbUVuYWJsZWQgPSBmYWxzZQ0KCQkJSG9sb2JlYW0uVGV4dCA9ICJIb2xvYmVhbSBDYW1lcmEgQXR0YWNoIChPRkYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBBbXBsaWZpZWQgR2VuZXNpcyBSYXkNCg0KCWxvY2FsIEdlbmVzaXNSYXkgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUdlbmVzaXNSYXkuTmFtZSA9ICJHZW5lc2lzUmF5Ig0KCUdlbmVzaXNSYXkuVGV4dCA9ICJBbXBsaWZpZWQgR2VuZXNpcyBSYXkgKE9GRikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEdlbmVzaXNSYXkpDQoNCglsb2NhbCBHZW5lc2lzUmF5RW5hYmxlZCA9IGZhbHNlDQoJbG9jYWwgR1JDaGFyZ2UgPSAxIC0tIDEwMDAwMDANCg0KCUdlbmVzaXNSYXkuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgR2VuZXNpc1JheUVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJR2VuZXNpc1JheUVuYWJsZWQgPSB0cnVlDQoJCQlHZW5lc2lzUmF5LlRleHQgPSAiQW1wbGlmaWVkIEdlbmVzaXMgUmF5IChPTikiDQoJCWVsc2UNCgkJCUdlbmVzaXNSYXlFbmFibGVkID0gZmFsc2UNCgkJCUdlbmVzaXNSYXkuVGV4dCA9ICJBbXBsaWZpZWQgR2VuZXNpcyBSYXkgKE9GRikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIFRoZSBXb3JsZCBIYWNrDQoNCglsb2NhbCBUaGVXb3JsZCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJVGhlV29ybGQuTmFtZSA9ICJUaGVXb3JsZCINCglUaGVXb3JsZC5UZXh0ID0gIlRoZSBXb3JsZCBIYWNrIChPRkYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBUaGVXb3JsZCkNCg0KCVRoZVdvcmxkRW5hYmxlZCA9IGZhbHNlDQoNCglUaGVXb3JsZC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBUaGVXb3JsZEVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJVGhlV29ybGRFbmFibGVkID0gdHJ1ZQ0KCQkJVGhlV29ybGQuVGV4dCA9ICJUaGUgV29ybGQgSGFjayAoT04pIg0KCQllbHNlDQoJCQlUaGVXb3JsZEVuYWJsZWQgPSBmYWxzZQ0KCQkJVGhlV29ybGQuVGV4dCA9ICJUaGUgV29ybGQgSGFjayAoT0ZGKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gUG9sYXJpcyBIYWNrDQoNCglsb2NhbCBQb2xhcmlzID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglQb2xhcmlzLk5hbWUgPSAiUG9sYXJpcyINCglQb2xhcmlzLlRleHQgPSAiUG9sYXJpcyBIYWNrIChPRkYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBQb2xhcmlzKQ0KDQoJUG9sYXJpc0VuYWJsZWQgPSBmYWxzZQ0KDQoJUG9sYXJpcy5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBQb2xhcmlzRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlQb2xhcmlzRW5hYmxlZCA9IHRydWUNCgkJCVBvbGFyaXMuVGV4dCA9ICJQb2xhcmlzIEhhY2sgKE9OKSINCgkJZWxzZQ0KCQkJUG9sYXJpc0VuYWJsZWQgPSBmYWxzZQ0KCQkJUG9sYXJpcy5UZXh0ID0gIlBvbGFyaXMgSGFjayAoT0ZGKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gU2hhcmQgQ29sb3JzDQoNCglsb2NhbCBSYW5kb21Db2xvcnMgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCVJhbmRvbUNvbG9ycy5OYW1lID0gIlJhbmRvbUNvbG9ycyINCglSYW5kb21Db2xvcnMuVGV4dCA9ICJSYW5kb20gU2hhcmQgQ29sb3JzIChPRkYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBSYW5kb21Db2xvcnMpDQoNCglsb2NhbCBDb2xvcnNMaXN0ID0geyJSZWFsbHkgcmVkIiwgIlJlYWxseSBibHVlIiwgIk5ldyBZZWxsZXIiLCAiSG90IHBpbmsiLCAiUm95YWwgcHVycGxlIiwgIkxpbWUgZ3JlZW4iLCAiRGVlcCBvcmFuZ2UiLCAiVG9vdGhwYXN0ZSIsICJJbnN0aXR1dGlvbmFsIHdoaXRlIn0NCglsb2NhbCBTaGFyZENvbG9yRW5hYmxlZCA9IGZhbHNlDQoNCglsb2NhbCBmdW5jdGlvbiBzaGFyZFJhbmRvbWl6ZXIoKQ0KCQlmb3IgaSwgY2hpbGQgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2VbIi5JZ25vcmUiXVsiLlNlcnZlckVmZmVjdHMiXTpHZXRDaGlsZHJlbigpKSBkbw0KCQkJaWYgbm90IGNoaWxkLk5hbWUgPT0gIlNoYXJkIiB0aGVuIHByaW50KCJDaGlsZCBub3QgYSBTaGFyZCIpDQoJCQllbHNlaWYgY2hpbGQuTmFtZSA9PSAiU2hhcmQiIGFuZCBub3QgY2hpbGQ6RmluZEZpcnN0Q2hpbGQoIkNDQm9vbCIpIHRoZW4NCgkJCQl4cGNhbGwoZnVuY3Rpb24oKQ0KCQkJCQljaGlsZC5Ccmlja0NvbG9yID0gQnJpY2tDb2xvci5uZXcoQ29sb3JzTGlzdFttYXRoLnJhbmRvbSgxLDkpXSkNCgkJCQllbmQsIGZ1bmN0aW9uKGUpDQoJCQkJCXByaW50KCJFbmNvdW50ZXJlZCBhbiBlcnJvciEgeHBjYWxsIHNheXM6IiwgZSkNCgkJCQkJd2FybigiW3RyYWNlYmFja10gIiwgZGVidWcudHJhY2ViYWNrKCkpDQoJCQkJZW5kKQ0KCQkJCWxvY2FsIENDQm9vbCA9IEluc3RhbmNlLm5ldygiQm9vbFZhbHVlIikNCgkJCQlDQ0Jvb2wuTmFtZSA9ICJDQ0Jvb2wiDQoJCQkJQ0NCb29sLlBhcmVudCA9IGNoaWxkDQoJCQkJQ0NCb29sLlZhbHVlID0gdHJ1ZQ0KCQkJZWxzZWlmIGNoaWxkLk5hbWUgPT0gIlNoYXJkIiBhbmQgY2hpbGQ6RmluZEZpcnN0Q2hpbGQoIkNDQm9vbCIpLlZhbHVlIHRoZW4gZW5kDQoJCWVuZA0KCWVuZA0KDQoJUmFuZG9tQ29sb3JzLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIFNoYXJkQ29sb3JFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCVNoYXJkQ29sb3JFbmFibGVkID0gdHJ1ZQ0KCQkJcHJpbnQoIlR1cm5lZCBvbiBSYW5kb20gU2hhcmQgQ29sb3JzIikNCgkJCVJhbmRvbUNvbG9ycy5UZXh0ID0gIlJhbmRvbSBTaGFyZCBDb2xvcnMgKE9OKSINCgkJCXdoaWxlIFNoYXJkQ29sb3JFbmFibGVkIGRvDQoJCQkJc2hhcmRSYW5kb21pemVyKCkNCgkJCQl3YWl0KDEpDQoJCQllbmQNCgkJZWxzZQ0KCQkJU2hhcmRDb2xvckVuYWJsZWQgPSBmYWxzZQ0KCQkJUmFuZG9tQ29sb3JzLlRleHQgPSAiUmFuZG9tIFNoYXJkIENvbG9ycyAoT0ZGKSINCgkJZW5kCQ0KCWVuZCkNCg0KCS0tIENvbnRyb2xsZWQgRWNob2VzDQoNCglsb2NhbCBFY2hvZXMgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUVjaG9lcy5OYW1lID0gIkVjaG9lcyINCglFY2hvZXMuVGV4dCA9ICJDb250cm9sbGVkIEVjaG9lcyAoT0ZGKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgRWNob2VzKQ0KDQoJQ29udHJvbGxlZEVjaG9lc0VuYWJsZWQgPSBmYWxzZQ0KCUVjaG9lc1BoYXNlID0gMQ0KDQoJRWNob2VzLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIENvbnRyb2xsZWRFY2hvZXNFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUNvbnRyb2xsZWRFY2hvZXNFbmFibGVkID0gdHJ1ZQ0KCQkJRWNob2VzLlRleHQgPSAiQ29udHJvbGxlZCBFY2hvZXMgKE9OKSINCgkJZWxzZQ0KCQkJQ29udHJvbGxlZEVjaG9lc0VuYWJsZWQgPSBmYWxzZQ0KCQkJRWNob2VzLlRleHQgPSAiQ29udHJvbGxlZCBFY2hvZXMgKE9GRikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEluc3RhbnQgU2hhdHRlcmluZyBFcnVwdGlvbg0KDQoJbG9jYWwgU2hhdHRlcmluZ0VydXB0aW9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglTaGF0dGVyaW5nRXJ1cHRpb24uTmFtZSA9ICJTaGF0dGVyaW5nRXJ1cHRpb24iDQoJU2hhdHRlcmluZ0VydXB0aW9uLlRleHQgPSAiSW5zdGFudCBTaGF0dGVyaW5nIEVydXB0aW9uIChPRkYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBTaGF0dGVyaW5nRXJ1cHRpb24pDQoNCglTaGF0dGVyaW5nRXJ1cHRpb25FbmFibGVkID0gZmFsc2UNCg0KCVNoYXR0ZXJpbmdFcnVwdGlvbi5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBTaGF0dGVyaW5nRXJ1cHRpb25FbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCVNoYXR0ZXJpbmdFcnVwdGlvbkVuYWJsZWQgPSB0cnVlDQoJCQlTaGF0dGVyaW5nRXJ1cHRpb24uVGV4dCA9ICJJbnN0YW50IFNoYXR0ZXJpbmcgRXJ1cHRpb24gKE9OKSINCgkJZWxzZQ0KCQkJU2hhdHRlcmluZ0VydXB0aW9uRW5hYmxlZCA9IGZhbHNlDQoJCQlTaGF0dGVyaW5nRXJ1cHRpb24uVGV4dCA9ICJJbnN0YW50IFNoYXR0ZXJpbmcgRXJ1cHRpb24gKE9GRikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIElsbHVzaXZlIEF0YWtlIEhhY2sNCg0KCWxvY2FsIElsbHVzaXZlQXRha2UgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUlsbHVzaXZlQXRha2UuTmFtZSA9ICJJbGx1c2l2ZUF0YWtlIg0KCUlsbHVzaXZlQXRha2UuVGV4dCA9ICJJbGx1c2l2ZSBBdGFrZSBIYWNrIChPRkYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBJbGx1c2l2ZUF0YWtlKQ0KDQoJSWxsdXNpdmVBdGFrZUVuYWJsZWQgPSBmYWxzZQ0KDQoJSWxsdXNpdmVBdGFrZS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBJbGx1c2l2ZUF0YWtlRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlJbGx1c2l2ZUF0YWtlRW5hYmxlZCA9IHRydWUNCgkJCUlsbHVzaXZlQXRha2UuVGV4dCA9ICJJbGx1c2l2ZSBBdGFrZSBIYWNrIChPTikiDQoJCWVsc2UNCgkJCUlsbHVzaXZlQXRha2VFbmFibGVkID0gZmFsc2UNCgkJCUlsbHVzaXZlQXRha2UuVGV4dCA9ICJJbGx1c2l2ZSBBdGFrZSBIYWNrIChPRkYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBFdGhlcmVhbCBBY3VtZW4gSGFjaw0KDQoJbG9jYWwgRXRoZXJlYWxBY3VtZW4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUV0aGVyZWFsQWN1bWVuLk5hbWUgPSAiRXRoZXJlYWxBY3VtZW4iDQoJRXRoZXJlYWxBY3VtZW4uVGV4dCA9ICJFdGhlcmVhbCBBY3VtZW4gSGFjayAoT0ZGKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgRXRoZXJlYWxBY3VtZW4pDQoNCglFdGhlcmVhbEFjdW1lbkVuYWJsZWQgPSBmYWxzZQ0KDQoJRXRoZXJlYWxBY3VtZW4uTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgRXRoZXJlYWxBY3VtZW5FbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUV0aGVyZWFsQWN1bWVuRW5hYmxlZCA9IHRydWUNCgkJCUV0aGVyZWFsQWN1bWVuLlRleHQgPSAiRXRoZXJlYWwgQWN1bWVuIEhhY2sgKE9OKSINCgkJZWxzZQ0KCQkJRXRoZXJlYWxBY3VtZW5FbmFibGVkID0gZmFsc2UNCgkJCUV0aGVyZWFsQWN1bWVuLlRleHQgPSAiRXRoZXJlYWwgQWN1bWVuIEhhY2sgKE9GRikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEZvcm1pZGFibGUgUm9hciBIYWNrDQoNCglsb2NhbCBGb3JtaWRhYmxlUm9hciA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJRm9ybWlkYWJsZVJvYXIuTmFtZSA9ICJGb3JtaWRhYmxlUm9hciINCglGb3JtaWRhYmxlUm9hci5UZXh0ID0gIkZvcm1pZGFibGUgUm9hciBIYWNrIChPRkYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBGb3JtaWRhYmxlUm9hcikNCg0KCUZvcm1pZGFibGVSb2FyRW5hYmxlZCA9IGZhbHNlDQoNCglGb3JtaWRhYmxlUm9hci5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBGb3JtaWRhYmxlUm9hckVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJRm9ybWlkYWJsZVJvYXJFbmFibGVkID0gdHJ1ZQ0KCQkJRm9ybWlkYWJsZVJvYXIuVGV4dCA9ICJGb3JtaWRhYmxlIFJvYXIgSGFjayAoT04pIg0KCQllbHNlDQoJCQlGb3JtaWRhYmxlUm9hckVuYWJsZWQgPSBmYWxzZQ0KCQkJRm9ybWlkYWJsZVJvYXIuVGV4dCA9ICJGb3JtaWRhYmxlIFJvYXIgSGFjayAoT0ZGKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gVG94aWMgQmFzaWxpc2sgSGFjaw0KDQoJbG9jYWwgVG94aWNCYXNpbGlzayA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJVG94aWNCYXNpbGlzay5OYW1lID0gIlRveGljQmFzaWxpc2siDQoJVG94aWNCYXNpbGlzay5UZXh0ID0gIlRveGljIEJhc2lsaXNrIEhhY2sgKE9GRikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFRveGljQmFzaWxpc2spDQoNCglUb3hpY0Jhc2lsaXNrRW5hYmxlZCA9IGZhbHNlDQoNCglUb3hpY0Jhc2lsaXNrLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIFRveGljQmFzaWxpc2tFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCVRveGljQmFzaWxpc2tFbmFibGVkID0gdHJ1ZQ0KCQkJVG94aWNCYXNpbGlzay5UZXh0ID0gIlRveGljIEJhc2lsaXNrIEhhY2sgKE9OKSINCgkJZWxzZQ0KCQkJVG94aWNCYXNpbGlza0VuYWJsZWQgPSBmYWxzZQ0KCQkJVG94aWNCYXNpbGlzay5UZXh0ID0gIlRveGljIEJhc2lsaXNrIEhhY2sgKE9GRikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEFyY2FuZSBHdWFyZGlhbiBIYWNrDQoNCglsb2NhbCBBcmNhbmVHdWFyZGlhbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJQXJjYW5lR3VhcmRpYW4uTmFtZSA9ICJBcmNhbmVHdWFyZGlhbiINCglBcmNhbmVHdWFyZGlhbi5UZXh0ID0gIkFyY2FuZSBHdWFyZGlhbiBIYWNrIChPRkYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBBcmNhbmVHdWFyZGlhbikNCg0KCUFyY2FuZUd1YXJkaWFuRW5hYmxlZCA9IGZhbHNlDQoNCglBcmNhbmVHdWFyZGlhbi5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBBcmNhbmVHdWFyZGlhbkVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJQXJjYW5lR3VhcmRpYW5FbmFibGVkID0gdHJ1ZQ0KCQkJQXJjYW5lR3VhcmRpYW4uVGV4dCA9ICJBcmNhbmUgR3VhcmRpYW4gSGFjayAoT04pIg0KCQllbHNlDQoJCQlBcmNhbmVHdWFyZGlhbkVuYWJsZWQgPSBmYWxzZQ0KCQkJQXJjYW5lR3VhcmRpYW4uVGV4dCA9ICJBcmNhbmUgR3VhcmRpYW4gSGFjayAoT0ZGKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gU3BsaXR0aW5nIFNsaW1lIEhhY2sNCg0KCWxvY2FsIFNwbGl0dGluZ1NsaW1lID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglTcGxpdHRpbmdTbGltZS5OYW1lID0gIlNwbGl0dGluZ1NsaW1lIg0KCVNwbGl0dGluZ1NsaW1lLlRleHQgPSAiU3BsaXR0aW5nIFNsaW1lIEhhY2sgKE9GRikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFNwbGl0dGluZ1NsaW1lKQ0KDQoJU3BsaXR0aW5nU2xpbWVFbmFibGVkID0gZmFsc2UNCg0KCVNwbGl0dGluZ1NsaW1lLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIFNwbGl0dGluZ1NsaW1lRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlTcGxpdHRpbmdTbGltZUVuYWJsZWQgPSB0cnVlDQoJCQlTcGxpdHRpbmdTbGltZS5UZXh0ID0gIlNwbGl0dGluZyBTbGltZSBIYWNrIChPTikiDQoJCWVsc2UNCgkJCVNwbGl0dGluZ1NsaW1lRW5hYmxlZCA9IGZhbHNlDQoJCQlTcGxpdHRpbmdTbGltZS5UZXh0ID0gIlNwbGl0dGluZyBTbGltZSBIYWNrIChPRkYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBWaXJ0dWFsIFpvbmUgSGFjaw0KDQoJbG9jYWwgVmlydHVhbFpvbmUgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCVZpcnR1YWxab25lLk5hbWUgPSAiVmlydHVhbFpvbmUiDQoJVmlydHVhbFpvbmUuVGV4dCA9ICJWaXJ0dWFsIFpvbmUgSGFjayAoT0ZGKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgVmlydHVhbFpvbmUpDQoNCglWaXJ0dWFsWm9uZUVuYWJsZWQgPSBmYWxzZQ0KDQoJVmlydHVhbFpvbmUuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgVmlydHVhbFpvbmVFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCVZpcnR1YWxab25lRW5hYmxlZCA9IHRydWUNCgkJCVZpcnR1YWxab25lLlRleHQgPSAiVmlydHVhbCBab25lIEhhY2sgKE9OKSINCgkJZWxzZQ0KCQkJVmlydHVhbFpvbmVFbmFibGVkID0gZmFsc2UNCgkJCVZpcnR1YWxab25lLlRleHQgPSAiVmlydHVhbCBab25lIEhhY2sgKE9GRikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEFudGktQmxpbmQNCg0KCWxvY2FsIEFudGlCbGluZCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJQW50aUJsaW5kLk5hbWUgPSAiQW50aUJsaW5kIg0KCUFudGlCbGluZC5UZXh0ID0gIkFudGktQmxpbmQgKE9GRikgW0tdIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBBbnRpQmxpbmQpDQoNCglBbnRpQmxpbmRFbmFibGVkID0gZmFsc2UNCg0KCWxvY2FsIG5vcm1hbEZvZ0NvbG9yID0gZ2FtZS5MaWdodGluZy5Gb2dDb2xvcg0KCWxvY2FsIG5vcm1hbEZvZ0VuZCA9IGdhbWUuTGlnaHRpbmcuRm9nRW5kDQoJbG9jYWwgbm9ybWFsQnJpZ2h0bmVzcyA9IGdhbWUuTGlnaHRpbmcuQnJpZ2h0bmVzcw0KCWxvY2FsIG5vcm1hbENsb2NrVGltZSA9IGdhbWUuTGlnaHRpbmcuQ2xvY2tUaW1lDQoNCglsb2NhbCBmdW5jdGlvbiBBbnRpQmxpbmRGdW5jKCkNCgkJaWYgQW50aUJsaW5kRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlBbnRpQmxpbmRFbmFibGVkID0gdHJ1ZQ0KCQkJQW50aUJsaW5kLlRleHQgPSAiQW50aS1CbGluZCAoT04pIFtLXSINCgkJCXdoaWxlIEFudGlCbGluZEVuYWJsZWQgZG8NCgkJCQl3YWl0KCkNCgkJCQlnYW1lLkxpZ2h0aW5nLkZvZ0NvbG9yID0gbm9ybWFsRm9nQ29sb3INCgkJCQlnYW1lLkxpZ2h0aW5nLkZvZ0VuZCA9IG5vcm1hbEZvZ0VuZA0KCQkJCWdhbWUuTGlnaHRpbmcuQnJpZ2h0bmVzcyA9IG5vcm1hbEJyaWdodG5lc3MNCgkJCQlnYW1lLkxpZ2h0aW5nLkNsb2NrVGltZSA9IG5vcm1hbENsb2NrVGltZQ0KCQkJZW5kDQoJCWVsc2UNCgkJCUFudGlCbGluZEVuYWJsZWQgPSBmYWxzZQ0KCQkJQW50aUJsaW5kLlRleHQgPSAiQW50aS1CbGluZCAoT0ZGKSBbS10iDQoJCWVuZA0KCWVuZA0KDQoJQW50aUJsaW5kLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChBbnRpQmxpbmRGdW5jKQ0KDQoJZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOldhaXRGb3JDaGlsZCgiUGxheWVyR3VpIikuRGVzY2VuZGFudEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oZCkNCgkJaWYgQW50aUJsaW5kRW5hYmxlZCB0aGVuDQoJCQlpZiBkLk5hbWUgPT0gIlNjcmVlbkd1aSIgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCWdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuU2NyZWVuR3VpOkRlc3Ryb3koKQ0KCQkJZWxzZWlmIGQuTmFtZSA9PSAiRGlzdG9ydCIgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCWdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuRGlzdG9ydDpEZXN0cm95KCkNCgkJCWVuZA0KCQllbmQNCgllbmQpDQoNCgktLSBBbnRpLUxhZw0KDQoJbG9jYWwgQW50aUxhZyA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJQW50aUxhZy5OYW1lID0gIkFudGlMYWciDQoJQW50aUxhZy5UZXh0ID0gIkFudGktTGFnIChPRkYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBBbnRpTGFnKQ0KDQoJQW50aUxhZ0VuYWJsZWQgPSBmYWxzZQ0KDQoJZnVuY3Rpb24gcmVtb3ZlTGFnKCkNCgkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2VbJy5JZ25vcmUnXVsnLkxvY2FsRWZmZWN0cyddOkdldENoaWxkcmVuKCkpIGRvDQoJCQlpZiB2OkZpbmRGaXJzdENoaWxkKCJNZXNoIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkQxIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkQyIikgdGhlbg0KCQkJCWlmIHYuRDEuVGV4dHVyZSA9PSAicmJ4YXNzZXRpZDovLzI2NzE2MjI2NDYiIHRoZW4NCgkJCQkJdjpEZXN0cm95KCkNCgkJCQllbmQNCgkJCWVsc2VpZiB2OkZpbmRGaXJzdENoaWxkKCJGcm9udERlY2FsIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkJhY2tEZWNhbCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJTcGVjaWFsTWVzaCIpIHRoZW4NCgkJCQlpZiB2LkZyb250RGVjYWwuVGV4dHVyZSA9PSAicmJ4YXNzZXRpZDovLzk3OTAwNDI5MSIgdGhlbg0KCQkJCQl2OkRlc3Ryb3koKQ0KCQkJCWVuZA0KCQkJZWxzZWlmICh2Lk5hbWUgPT0gIk9yYml0YWxTdHJpa2UiKSBvciAodi5OYW1lID09ICJCb2x0UGFydCIpIG9yIChzdHJpbmcuc3ViKHYuTmFtZSwgMSwgMTApID09ICJTb3VuZF9UZWNoIikgdGhlbg0KCQkJCXY6RGVzdHJveSgpDQoJCQllbmQNCgkJZW5kDQoNCgkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2VbJy5JZ25vcmUnXVsnLkF0dGFja3MnXTpHZXRDaGlsZHJlbigpKSBkbw0KCQkJaWYgdi5Db2xvciA9PSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApIHRoZW4NCgkJCQlpZiB2Lk1lc2guTWVzaFR5cGUgPT0gIlNwaGVyZSIgdGhlbg0KCQkJCQl3YWl0KCkNCgkJCQkJdjpEZXN0cm95KCkNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCg0KCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbw0KCQkJZm9yIF8sIHggaW4gcGFpcnModi5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8NCgkJCQlpZiB4Lk5hbWUgPT0gIkFuZ2VsU3dvcmQiIHRoZW4NCgkJCQkJeDpEZXN0cm95KCkNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCg0KCWdhbWUuV29ya3NwYWNlLkRlc2NlbmRhbnRBZGRlZDpjb25uZWN0KGZ1bmN0aW9uKHYpDQoJCWlmIEFudGlMYWdFbmFibGVkIHRoZW4NCgkJCWlmIHY6RmluZEZpcnN0Q2hpbGQoIk1lc2giKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiRDEiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiRDIiKSB0aGVuDQoJCQkJaWYgdi5EMS5UZXh0dXJlID09ICJyYnhhc3NldGlkOi8vMjY3MTYyMjY0NiIgdGhlbg0KCQkJCQl3YWl0KCkNCgkJCQkJdjpEZXN0cm95KCkNCgkJCQllbmQNCgkJCWVsc2VpZiB2Lk5hbWUgPT0gIkFuZ2VsU3dvcmQiIHRoZW4NCgkJCQl3YWl0KCkNCgkJCQl2OkRlc3Ryb3koKQ0KCQkJZWxzZWlmIHY6RmluZEZpcnN0Q2hpbGQoIkZyb250RGVjYWwiKSB0aGVuDQoJCQkJaWYgdi5Gcm9udERlY2FsLlRleHR1cmUgPT0gInJieGFzc2V0aWQ6Ly85NzkwMDQyOTEiIHRoZW4NCgkJCQkJd2FpdCgpDQoJCQkJCXY6RGVzdHJveSgpDQoJCQkJZW5kDQoJCQllbHNlaWYgdi5Db2xvciA9PSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApIHRoZW4NCgkJCQlpZiB2Lk1lc2guTWVzaFR5cGUgPT0gIlNwaGVyZSIgdGhlbg0KCQkJCQl3YWl0KCkNCgkJCQkJdjpEZXN0cm95KCkNCgkJCQllbmQNCgkJCWVsc2VpZiAodi5OYW1lID09ICJPcmJpdGFsU3RyaWtlIikgb3IgKHYuTmFtZSA9PSAiQm9sdFBhcnQiKSBvciAoc3RyaW5nLnN1Yih2Lk5hbWUsIDEsIDEwKSA9PSAiU291bmRfVGVjaCIpIHRoZW4NCgkJCQl3YWl0KCkNCgkJCQl2OkRlc3Ryb3koKQ0KCQkJZW5kDQoJCWVuZA0KCWVuZCkNCg0KCUFudGlMYWcuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgQW50aUxhZ0VuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJQW50aUxhZ0VuYWJsZWQgPSB0cnVlDQoJCQlBbnRpTGFnLlRleHQgPSAiQW50aS1MYWcgKE9OKSINCgkJCXJlbW92ZUxhZygpDQoJCWVsc2UNCgkJCUFudGlMYWdFbmFibGVkID0gZmFsc2UNCgkJCUFudGlMYWcuVGV4dCA9ICJBbnRpLUxhZyAoT0ZGKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gSW5maW5pdGUgU3ByaW50DQoNCglsb2NhbCBTcGVlZGhhY2sgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCVNwZWVkaGFjay5OYW1lID0gIlNwZWVkaGFjayINCglTcGVlZGhhY2suVGV4dCA9ICJTcGVlZGhhY2sgW2RlZmF1bHQgNjRdIChPRkYpIFtUXSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgU3BlZWRoYWNrKQ0KDQoJU3BlZWRoYWNrRW5hYmxlZCA9IGZhbHNlDQoJU2V0U3BlZWQgPSA2NA0KDQoJZnVuY3Rpb24gbW9kaWZ5U3BlZWQoKQ0KCQlnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpLkNoYW5nZWQ6Y29ubmVjdChmdW5jdGlvbigpDQoJCQlpZiBTcGVlZGhhY2tFbmFibGVkIGFuZCBTZXRTcGVlZCB+PSBuaWwgdGhlbg0KCQkJCWdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuV2Fsa1NwZWVkID0gU2V0U3BlZWQNCgkJCWVsc2UNCgkJCQlyZXR1cm4NCgkJCWVuZA0KCQllbmQpDQoJZW5kDQoNCglmdW5jdGlvbiBiZWdpblNwZWVkKCkNCgkJaWYgU3BlZWRoYWNrRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlTcGVlZGhhY2tFbmFibGVkID0gdHJ1ZQ0KCQkJU3BlZWRoYWNrLlRleHQgPSAiU3BlZWRoYWNrIFtkZWZhdWx0IDY0XSAoT04pIFtUXSINCgkJCW1vZGlmeVNwZWVkKCkNCgkJCXdhaXQoKQ0KCQkJZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5XYWxrU3BlZWQgPSBTZXRTcGVlZA0KCQkJd2hpbGUgU3BlZWRoYWNrRW5hYmxlZCBkbw0KCQkJCXdhaXQoKQ0KCQkJCWlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID09IDAgdGhlbg0KCQkJCQlyZXBlYXQgd2FpdCgpIHVudGlsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoIH49IDANCgkJCQkJbW9kaWZ5U3BlZWQoKQ0KCQkJCQl3YWl0KCkNCgkJCQkJZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5XYWxrU3BlZWQgPSBTZXRTcGVlZA0KCQkJCWVuZA0KCQkJZW5kDQoJCWVsc2UNCgkJCVNwZWVkaGFja0VuYWJsZWQgPSBmYWxzZQ0KCQkJU3BlZWRoYWNrLlRleHQgPSAiU3BlZWRoYWNrIFtkZWZhdWx0IDY0XSAoT0ZGKSBbVF0iDQoJCWVuZA0KCWVuZA0KDQoJU3BlZWRoYWNrLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChiZWdpblNwZWVkKQ0KDQoJLS0gU2FucyBJbW11bml0eQ0KDQoJbG9jYWwgU2Fuc0ltbXVuaXR5ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglTYW5zSW1tdW5pdHkuTmFtZSA9ICJTYW5zSW1tdW5pdHkiDQoJU2Fuc0ltbXVuaXR5LlRleHQgPSAiRW5hYmxlIFNhbnMgSW1tdW5pdHkiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFNhbnNJbW11bml0eSkNCg0KCVNhbnNJbW11bml0eS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBzYW5zS2lsbGVkID09IG5pbCB0aGVuDQogICAgCQlsb2NhbCBzYW5zSGVhZCA9IGdhbWUuV29ya3NwYWNlLk1hcC5Vcldobw0KCQkJcHJpbnQoIkdvdCB0aGUgaGVhZCBtb2RlbCIpDQoJCQlsb2NhbCB5b3Vyc1RydWx5ID0gc2Fuc0hlYWRbIm1lPyJdDQoJCQlwcmludCgiR290IHRoZSBoZWFkIHBhcnQiKQ0KCQkJbG9jYWwgc0luZGljID0gSW5zdGFuY2UubmV3KCJQYXJ0IikNCgkJCXNJbmRpYy5QYXJlbnQgPSBnYW1lLndvcmtzcGFjZS5NYXANCgkJCXByaW50KCJDcmVhdGVkIGluZGljYXRvciBwYXJ0IikNCiAgICAgICAgICAgIC0tIFZhcmlhYmxlcyBhc3NpZ25lZA0KCQkJaWYgc0luZGljIHRoZW4NCiAgICAJCQlzSW5kaWMuQW5jaG9yZWQgPSB0cnVlDQogICAJCQkJc0luZGljLk5hbWUgPSAiU2Fuc0luZGljYXRvciINCiAgICAJCQlzSW5kaWMuTWF0ZXJpYWwgPSBFbnVtLk1hdGVyaWFsLk5lb24NCiAgICAJCQlzSW5kaWMuU2hhcGUgPSBFbnVtLlBhcnRUeXBlLkJhbGwNCiAgICAJCQlzSW5kaWMuQnJpY2tDb2xvciA9IEJyaWNrQ29sb3IubmV3KCJUb290aHBhc3RlIikNCiAgICAJCQlzSW5kaWMuU2l6ZSA9IFZlY3RvcjMubmV3KDAuNSwgMC41LCAwLjUpDQogICAgCQkJc0luZGljLlBvc2l0aW9uID0geW91cnNUcnVseS5Qb3NpdGlvbg0KCQkJCXdhcm4oIkZpbmlzaGVkIGluZGljYXRvciIpDQoJCQkJLS0gSW5kaWNhdG9yIGNyZWF0ZWQNCiAgICAgICAgICAgIAl5b3Vyc1RydWx5LlRvdWNoSW50ZXJlc3Q6RGVzdHJveSgpDQogICAgCQkJeW91cnNUcnVseTpEZXN0cm95KCkNCiAgICAJCQl5b3Vyc1RydWx5ID0gbmlsDQogICAgCQkJc2Fuc0hlYWQ6RGVzdHJveSgpDQogICAgCQkJc2Fuc0hlYWQgPSBuaWwNCgkJCQlTYW5zSW1tdW5pdHkuVGV4dCA9ICJTYW5zIEltbXVuaXR5IEVuYWJsZWQiDQoJCQkJLS0gU2FucyBoZWFkIGRlc3Ryb3llZCwgdmFyaWFibGVzIG5pbCdkIHRvIHByZXZlbnQgbWVtb3J5IGxlYWsNCgkJCWVsc2UNCgkJCQl3YXJuKCJTb21ldGhpbmcgd2VudCB3cm9uZyBjcmVhdGluZyB0aGUgaW5kaWNhdG9yIHBhcnQuIikNCgkJCQlTYW5zSW1tdW5pdHkuVGV4dCA9ICJFcnJvcjsgQ2hlY2sgQ29uc29sZSINCgkJCWVuZA0KCQllbHNlDQoJCQllcnJvcigiVW5leHBlY3RlZCB2YWx1ZSBmb3Igc2Fuc0tpbGxlZC4gRXhwZWN0ZWQgbmlsLCBnb3QgJyIgLi4gc2Fuc0tpbGxlZCkgDQoJCWVuZA0KCWVuZCkNCg0KCS0tIFRlbGVwb3J0IHRvIFNhbnMgSGVhZA0KDQoJbG9jYWwgU2Fuc1RlbGVwb3J0ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglTYW5zVGVsZXBvcnQuTmFtZSA9ICJTYW5zVGVsZXBvcnQiDQoJU2Fuc1RlbGVwb3J0LlRleHQgPSAiVGVsZXBvcnQgdG8gU2FucyBIZWFkIChPRkYpIFtQXSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgU2Fuc1RlbGVwb3J0KQ0KDQoJU2Fuc1RlbGVwb3J0RW5hYmxlZCA9IGZhbHNlDQoNCglTYW5zVGVsZXBvcnQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgU2Fuc1RlbGVwb3J0RW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlTYW5zVGVsZXBvcnRFbmFibGVkID0gdHJ1ZQ0KCQkJU2Fuc1RlbGVwb3J0LlRleHQgPSAiVGVsZXBvcnQgdG8gU2FucyBIZWFkIChPTikgW1BdIg0KCQllbHNlDQoJCQlTYW5zVGVsZXBvcnRFbmFibGVkID0gZmFsc2UNCgkJCVNhbnNUZWxlcG9ydC5UZXh0ID0gIlRlbGVwb3J0IHRvIFNhbnMgSGVhZCAoT0ZGKSBbUF0iDQoJCWVuZA0KCWVuZCkNCg0KCS0tIElnbm9yZSBQaHlzaWNzDQoNCglsb2NhbCBJZ25vcmVQaHlzaWNzID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglJZ25vcmVQaHlzaWNzLk5hbWUgPSAiZklnbm9yZVBoeXNpY3MiDQoJSWdub3JlUGh5c2ljcy5UZXh0ID0gIklnbm9yZSBQaHlzaWNzIChPRkYpIFtaXSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgSWdub3JlUGh5c2ljcykNCg0KCUlnbm9yZVBoeXNpY3NFbmFibGVkID0gZmFsc2UNCg0KCWxvY2FsIGZ1bmN0aW9uIGluaXRpYWxOdWxsaWZ5Rm9yY2VzKCkNCgkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkdldENoaWxkcmVuKCkpIGRvDQoJCQlpZiB2OklzQSgiQm9keUd5cm8iKSB0aGVuDQoJCQkJd2FpdCgpDQoJCQkJdjpEZXN0cm95KCkNCgkJCWVsc2VpZiB2OklzQSgiQm9keVBvc2l0aW9uIikgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCXY6RGVzdHJveSgpDQoJCQllbHNlaWYgdjpJc0EoIkJvZHlWZWxvY2l0eSIpIHRoZW4NCgkJCQl3YWl0KCkNCgkJCQl2OkRlc3Ryb3koKQ0KCQkJZWxzZWlmIHY6SXNBKCJCb2R5QW5ndWxhclZlbG9jaXR5IikgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCXY6RGVzdHJveSgpDQoJCQllbHNlaWYgdjpJc0EoIkJvZHlGb3JjZSIpIHRoZW4NCgkJCQl3YWl0KCkNCgkJCQl2OkRlc3Ryb3koKQ0KCQkJZWxzZWlmIHY6SXNBKCJCb2R5VGhydXN0IikgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCXY6RGVzdHJveSgpDQoJCQllbHNlaWYgdjpJc0EoIlJvY2tldFByb3B1bHNpb24iKSB0aGVuDQoJCQkJd2FpdCgpDQoJCQkJdjpEZXN0cm95KCkNCgkJCWVuZA0KCQllbmQNCg0KCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkZsaXBzSG9sZGVyOkdldENoaWxkcmVuKCkpIGRvDQoJCQlpZiB2OklzQSgiQm9keUd5cm8iKSB0aGVuDQoJCQkJd2FpdCgpDQoJCQkJdjpEZXN0cm95KCkNCgkJCWVsc2VpZiB2OklzQSgiQm9keVBvc2l0aW9uIikgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCXY6RGVzdHJveSgpDQoJCQllbHNlaWYgdjpJc0EoIkJvZHlWZWxvY2l0eSIpIHRoZW4NCgkJCQl3YWl0KCkNCgkJCQl2OkRlc3Ryb3koKQ0KCQkJZWxzZWlmIHY6SXNBKCJCb2R5QW5ndWxhclZlbG9jaXR5IikgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCXY6RGVzdHJveSgpDQoJCQllbHNlaWYgdjpJc0EoIkJvZHlGb3JjZSIpIHRoZW4NCgkJCQl3YWl0KCkNCgkJCQl2OkRlc3Ryb3koKQ0KCQkJZWxzZWlmIHY6SXNBKCJCb2R5VGhydXN0IikgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCXY6RGVzdHJveSgpDQoJCQllbHNlaWYgdjpJc0EoIlJvY2tldFByb3B1bHNpb24iKSB0aGVuDQoJCQkJd2FpdCgpDQoJCQkJdjpEZXN0cm95KCkNCgkJCWVuZA0KCQllbmQNCgllbmQNCg0KCWxvY2FsIGZ1bmN0aW9uIEFmdGVyTnVsbGlmeUZvcmNlcygpDQoJCWdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuRGVzY2VuZGFudEFkZGVkOmNvbm5lY3QoZnVuY3Rpb24odikNCgkJCWlmIElnbm9yZVBoeXNpY3NFbmFibGVkIHRoZW4NCgkJCQlpZiB2OklzQSgiQm9keUd5cm8iKSB0aGVuDQoJCQkJCXdhaXQoKQ0KCQkJCQl2OkRlc3Ryb3koKQ0KCQkJCWVsc2VpZiB2OklzQSgiQm9keVBvc2l0aW9uIikgdGhlbg0KCQkJCQl3YWl0KCkNCgkJCQkJdjpEZXN0cm95KCkNCgkJCQllbHNlaWYgdjpJc0EoIkJvZHlWZWxvY2l0eSIpIHRoZW4NCgkJCQkJd2FpdCgpDQoJCQkJCXY6RGVzdHJveSgpDQoJCQkJZWxzZWlmIHY6SXNBKCJCb2R5QW5ndWxhclZlbG9jaXR5IikgdGhlbg0KCQkJCQl3YWl0KCkNCgkJCQkJdjpEZXN0cm95KCkNCgkJCQllbHNlaWYgdjpJc0EoIkJvZHlGb3JjZSIpIHRoZW4NCgkJCQkJd2FpdCgpDQoJCQkJCXY6RGVzdHJveSgpDQoJCQkJZWxzZWlmIHY6SXNBKCJCb2R5VGhydXN0IikgdGhlbg0KCQkJCQl3YWl0KCkNCgkJCQkJdjpEZXN0cm95KCkNCgkJCQllbHNlaWYgdjpJc0EoIlJvY2tldFByb3B1bHNpb24iKSB0aGVuDQoJCQkJCXdhaXQoKQ0KCQkJCQl2OkRlc3Ryb3koKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZCkNCgllbmQNCg0KCWZ1bmN0aW9uIGJlZ2luTnVsbGlmeUZvcmNlcygpDQoJCWlmIElnbm9yZVBoeXNpY3NFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUlnbm9yZVBoeXNpY3NFbmFibGVkID0gdHJ1ZQ0KCQkJSWdub3JlUGh5c2ljcy5UZXh0ID0gIklnbm9yZSBQaHlzaWNzIChPTikgW1pdIg0KCQkJaW5pdGlhbE51bGxpZnlGb3JjZXMoKQ0KCQkJQWZ0ZXJOdWxsaWZ5Rm9yY2VzKCkNCgkJCXdoaWxlIElnbm9yZVBoeXNpY3NFbmFibGVkIGRvDQoJCQkJd2FpdCgpDQoJCQkJaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPT0gMCB0aGVuDQoJCQkJCXJlcGVhdCB3YWl0KCkgdW50aWwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggfj0gMA0KCQkJCQlBZnRlck51bGxpZnlGb3JjZXMoKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVsc2UNCgkJCUlnbm9yZVBoeXNpY3NFbmFibGVkID0gZmFsc2UNCgkJCUlnbm9yZVBoeXNpY3MuVGV4dCA9ICJJZ25vcmUgUGh5c2ljcyAoT0ZGKSBbWl0iDQoJCWVuZA0KCWVuZA0KDQoJSWdub3JlUGh5c2ljcy5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoYmVnaW5OdWxsaWZ5Rm9yY2VzKQ0KDQoJLS0gQW50aS1HcmF2aXR5DQoNCglsb2NhbCBBbnRpR3Jhdml0eSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJQW50aUdyYXZpdHkuTmFtZSA9ICJBbnRpR3Jhdml0eSINCglBbnRpR3Jhdml0eS5UZXh0ID0gIkFudGktR3Jhdml0eSAoT0ZGKSBbR10iDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEFudGlHcmF2aXR5KQ0KDQoJQW50aUdyYXZpdHlFbmFibGVkID0gZmFsc2UNCg0KCWZ1bmN0aW9uIEFudGlHcmF2aXR5RnVuYygpDQoJCWlmIEFudGlHcmF2aXR5RW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlBbnRpR3Jhdml0eUVuYWJsZWQgPSB0cnVlDQoJCQlBbnRpR3Jhdml0eS5UZXh0ID0gIkFudGktR3Jhdml0eSAoT04pIFtHXSINCgkJCWxvY2FsIEJvZHlGb3JjZSA9IEluc3RhbmNlLm5ldygiQm9keUZvcmNlIikNCgkJCUJvZHlGb3JjZS5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQNCgkJCUJvZHlGb3JjZS5OYW1lID0gIkFudGlHcmF2aXR5Rm9yY2UiDQoJCQlCb2R5Rm9yY2UuRm9yY2UgPSBWZWN0b3IzLm5ldygwLCA1MDAwLCAwKQ0KCQllbHNlDQoJCQlBbnRpR3Jhdml0eUVuYWJsZWQgPSBmYWxzZQ0KCQkJQW50aUdyYXZpdHkuVGV4dCA9ICJBbnRpLUdyYXZpdHkgKE9GRikgW0ddIg0KCQkJaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkZpbmRGaXJzdENoaWxkKCJBbnRpR3Jhdml0eUZvcmNlIikgdGhlbg0KCQkJCWdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbnRpR3Jhdml0eUZvcmNlOkRlc3Ryb3koKQ0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KDQoJQW50aUdyYXZpdHkuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KEFudGlHcmF2aXR5RnVuYykNCg0KCS0tIEluZXJ0aWEgR3Jhdml0eQ0KDQoJbG9jYWwgSW5lcnRpYUdyYXZpdHkgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUluZXJ0aWFHcmF2aXR5Lk5hbWUgPSAiSW5lcnRpYUdyYXZpdHkiDQoJSW5lcnRpYUdyYXZpdHkuVGV4dCA9ICJJbmVydGlhIEdyYXZpdHkgKE9GRikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEluZXJ0aWFHcmF2aXR5KQ0KDQoJSW5lcnRpYUdyYXZpdHlFbmFibGVkID0gZmFsc2UNCg0KCUluZXJ0aWFHcmF2aXR5Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIEluZXJ0aWFHcmF2aXR5RW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlJbmVydGlhR3Jhdml0eUVuYWJsZWQgPSB0cnVlDQoJCQlJbmVydGlhR3Jhdml0eS5UZXh0ID0gIkluZXJ0aWEgR3Jhdml0eSAoT04pIg0KCQkJbG9jYWwgQm9keUZvcmNlID0gSW5zdGFuY2UubmV3KCJCb2R5Rm9yY2UiKQ0KCQkJQm9keUZvcmNlLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydA0KCQkJQm9keUZvcmNlLk5hbWUgPSAiSW5lcnRpYUdyYXZpdHlGb3JjZSINCgkJCUJvZHlGb3JjZS5Gb3JjZSA9IFZlY3RvcjMubmV3KDAsIDE2MzgsIDApDQoJCWVsc2UNCgkJCUluZXJ0aWFHcmF2aXR5RW5hYmxlZCA9IGZhbHNlDQoJCQlJbmVydGlhR3Jhdml0eS5UZXh0ID0gIkluZXJ0aWEgR3Jhdml0eSAoT0ZGKSINCgkJCWlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDpGaW5kRmlyc3RDaGlsZCgiSW5lcnRpYUdyYXZpdHlGb3JjZSIpIHRoZW4NCgkJCQlnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuSW5lcnRpYUdyYXZpdHlGb3JjZTpEZXN0cm95KCkNCgkJCWVuZA0KCQllbmQNCgllbmQpDQoNCgktLSBDbGljay1UUA0KDQoJbG9jYWwgQ2xpY2tUUCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJQ2xpY2tUUC5OYW1lID0gIkNsaWNrVFAiDQoJQ2xpY2tUUC5UZXh0ID0gIkNsaWNrLVRQIChPRkYpIFtKIHRvIHRwIHRvIG1vdXNlXSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQ2xpY2tUUCkNCg0KCUNsaWNrVFBFbmFibGVkID0gZmFsc2UNCg0KCUNsaWNrVFAuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgQ2xpY2tUUEVuYWJsZWQgPT0gdHJ1ZSB0aGVuDQoJCQlDbGlja1RQRW5hYmxlZCA9IGZhbHNlDQoJCQlDbGlja1RQLlRleHQgPSAiQ2xpY2stVFAgKE9GRikgW0ogdG8gQ2xpY2stVFBdIg0KCQllbHNlDQoJCQlDbGlja1RQRW5hYmxlZCA9IHRydWUNCgkJCUNsaWNrVFAuVGV4dCA9ICJDbGljay1UUCAoT04pIFtKIHRvIENsaWNrLVRQXSINCgkJZW5kDQoJZW5kKQ0KDQoJZnVuY3Rpb24gY2xpY2t0cChwb3NpdGlvbikNCgkJbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyDQoJCWlmIHBsYXllciA9PSBuaWwgb3IgcGxheWVyLkNoYXJhY3RlciA9PSBuaWwgdGhlbiByZXR1cm4gZW5kDQoJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KFZlY3RvcjMubmV3KHBvc2l0aW9uLngsIHBvc2l0aW9uLnkgKyAzLCBwb3NpdGlvbi56KSkNCgllbmQNCg0KCS0tIEZyZWV6ZQ0KDQoJbG9jYWwgRnJlZXplID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglGcmVlemUuTmFtZSA9ICJGcmVlemUiDQoJRnJlZXplLlRleHQgPSAiRnJlZXplIChPRkYpIFtGXSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgRnJlZXplKQ0KDQoJRnJlZXplRW5hYmxlZCA9IGZhbHNlDQoNCglmdW5jdGlvbiBGcmVlemVGdW5jKCkNCgkJaWYgRnJlZXplRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlGcmVlemVFbmFibGVkID0gdHJ1ZQ0KCQkJRnJlZXplLlRleHQgPSAiRnJlZXplIChPTikgW0ZdIg0KCQkJZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KCQllbHNlDQoJCQlGcmVlemVFbmFibGVkID0gZmFsc2UNCgkJCUZyZWV6ZS5UZXh0ID0gIkZyZWV6ZSAoT0ZGKSBbRl0iDQoJCQlnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KCQllbmQNCgllbmQNCg0KCUZyZWV6ZS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoRnJlZXplRnVuYykNCg0KCS0tIExvbmcgRmxhc2gNCg0KCWxvY2FsIExGbGFzaCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJTEZsYXNoLk5hbWUgPSAiRmxhc2giDQoJTEZsYXNoLlRleHQgPSAiTG9uZyBGbGFzaCAoT0ZGKSBbYCB0byB1c2VdIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBMRmxhc2gpDQoNCglGbGFzaEVuYWJsZWQgPSBmYWxzZQ0KDQoJZnVuY3Rpb24gbG9uZ2ZsYXNoKCkNCgkJbG9jYWwgbW91c2Vwb3MgPSBtb3VzZS5IaXQucA0KCQlsb2NhbCBhcmdzID0gew0KCQkJWzFdID0gIlN0b3JtIiwNCgkJCVsyXSA9ICJMaWdodG5pbmcgRmxhc2giDQoJCX0NCgkJZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkNCgkJbG9jYWwgYXJncyA9IHsNCgkJCVsxXSA9ICJTdG9ybSIsDQoJCQlbMl0gPSAiTGlnaHRuaW5nIEZsYXNoIiwNCgkJCVszXSA9IHsNCgkJCQlbIkVuZCJdID0gbW91c2Vwb3MsDQoJCQkJWyJPcmlnaW4iXSA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZS5wDQoJCQl9DQoJCX0NCgkJZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuRG9NYWdpYzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQ0KCWVuZA0KDQoJTEZsYXNoLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIEZsYXNoRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlGbGFzaEVuYWJsZWQgPSB0cnVlDQoJCQlMRmxhc2guVGV4dCA9ICJMb25nIEZsYXNoIChPTikgW2AgdG8gdXNlXSINCgkJZWxzZQ0KCQkJRmxhc2hFbmFibGVkID0gZmFsc2UNCgkJCUxGbGFzaC5UZXh0ID0gIkxvbmcgRmxhc2ggKE9GRikgW2AgdG8gdXNlXSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gVmlldyBUYXJnZXQNCg0KCWxvY2FsIFZpZXdUYXJnZXQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCVZpZXdUYXJnZXQuTmFtZSA9ICJWaWV3VGFyZ2V0Ig0KCVZpZXdUYXJnZXQuVGV4dCA9ICJWaWV3IFRhcmdldCAoT0ZGKSBbVl0iDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFZpZXdUYXJnZXQpDQoNCgl2aWV3aW5nID0gZmFsc2UNCg0KCWZ1bmN0aW9uIHZpZXcoKQ0KCQlpZiB0YXJnZXQgfj0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUgdGhlbg0KCQkJaWYgdmlld2luZyA9PSBmYWxzZSB0aGVuDQoJCQkJdmlld2luZyA9IHRydWUNCgkJCQlnYW1lLldvcmtzcGFjZS5DYW1lcmEuQ2FtZXJhU3ViamVjdCA9IGdhbWUuUGxheWVyc1t0YXJnZXRdLkNoYXJhY3Rlci5IdW1hbm9pZA0KCQkJCVZpZXdUYXJnZXQuVGV4dCA9ICJWaWV3IFRhcmdldCAoT04pIFtWXSINCgkJCWVsc2UNCgkJCQl2aWV3aW5nID0gZmFsc2UNCgkJCQlnYW1lLldvcmtzcGFjZS5DYW1lcmEuQ2FtZXJhU3ViamVjdCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQNCgkJCQlWaWV3VGFyZ2V0LlRleHQgPSAiVmlldyBUYXJnZXQgKE9GRikgW1ZdIg0KCQkJZW5kDQoJCWVsc2VpZiB2aWV3aW5nID09IHRydWUgdGhlbiANCgkJCXZpZXdpbmcgPSBmYWxzZQ0KCQkJZ2FtZS5Xb3Jrc3BhY2UuQ2FtZXJhLkNhbWVyYVN1YmplY3QgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkDQoJCQlWaWV3VGFyZ2V0LlRleHQgPSAiVmlldyBUYXJnZXQgKE9GRikgW1ZdIg0KCQllbmQNCgllbmQNCg0KCVZpZXdUYXJnZXQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KHZpZXcpDQoNCglsb2NhbCBUUFRhcmdldCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJVFBUYXJnZXQuTmFtZSA9ICJUUFRhcmdldCINCglUUFRhcmdldC5UZXh0ID0gIlRlbGVwb3J0IFRvIFRhcmdldCAoT0ZGKSBbVV0iDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFRQVGFyZ2V0KQ0KDQoJVFBUYXJnZXRFbmFibGVkID0gZmFsc2UNCg0KCWxvY2FsIGZ1bmN0aW9uIFRQVG9UYXJnZXQoKQ0KCQlpZiBUUFRhcmdldEVuYWJsZWQgYW5kIHRhcmdldCB+PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZSB0aGVuDQoJCQlyZXBlYXQgd2FpdCgpIHVudGlsIGdldEhSUChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyKSBhbmQgZ2V0SFJQKGdhbWUuUGxheWVyc1t0YXJnZXRdLkNoYXJhY3RlcikNCg0KCQkJZ2V0SFJQKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIpLkNGcmFtZSA9IGdldEhSUChnYW1lLlBsYXllcnNbdGFyZ2V0XS5DaGFyYWN0ZXIpLkNGcmFtZQ0KCQllbmQNCgllbmQNCg0KCVRQVGFyZ2V0Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIFRQVGFyZ2V0RW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlUUFRhcmdldEVuYWJsZWQgPSB0cnVlDQoJCQlUUFRhcmdldC5UZXh0ID0gIlRlbGVwb3J0IFRvIFRhcmdldCAoT04pIFtVXSINCgkJZWxzZQ0KCQkJVFBUYXJnZXRFbmFibGVkID0gZmFsc2UNCgkJCVRQVGFyZ2V0LlRleHQgPSAiVGVsZXBvcnQgVG8gVGFyZ2V0IChPRkYpIFtVXSINCgkJZW5kDQoJZW5kKQ0KDQoJbG9jYWwgTG9vcFRQVGFyZ2V0ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglMb29wVFBUYXJnZXQuTmFtZSA9ICJMb29wVFBUYXJnZXQiDQoJTG9vcFRQVGFyZ2V0LlRleHQgPSAiTG9vcCBUZWxlcG9ydCBUbyBUYXJnZXQgKE9GRikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIExvb3BUUFRhcmdldCkNCg0KCUxvb3BUUFRhcmdldEVuYWJsZWQgPSBmYWxzZQ0KDQoJTG9vcFRQVGFyZ2V0Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIExvb3BUUFRhcmdldEVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJTG9vcFRQVGFyZ2V0RW5hYmxlZCA9IHRydWUNCgkJCUxvb3BUUFRhcmdldC5UZXh0ID0gIkxvb3AgVGVsZXBvcnQgVG8gVGFyZ2V0IChPTikiDQoJCQl3aGlsZSBMb29wVFBUYXJnZXRFbmFibGVkIGRvDQoJCQkJd2FpdCgpDQoJCQkJVFBUb1RhcmdldCgpDQoJCQllbmQNCgkJZWxzZQ0KCQkJTG9vcFRQVGFyZ2V0RW5hYmxlZCA9IGZhbHNlDQoJCQlMb29wVFBUYXJnZXQuVGV4dCA9ICJMb29wIFRlbGVwb3J0IFRvIFRhcmdldCAoT0ZGKSINCgkJZW5kDQoJZW5kKQ0KDQoJbG9jYWwgQ0JyaW5nVGFyZ2V0ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglDQnJpbmdUYXJnZXQuTmFtZSA9ICJDQnJpbmdUYXJnZXQiDQoJQ0JyaW5nVGFyZ2V0LlRleHQgPSAiQ0JyaW5nIFRhcmdldCAoT0ZGKSBbTV0iDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIENCcmluZ1RhcmdldCkNCgkNCglsb2NhbCBDQnJpbmdUYXJnZXRFbmFibGVkID0gZmFsc2UNCgkNCglsb2NhbCBicmluZ2luZ1RhcmdldHMgPSB7fQ0KCQ0KCWxvY2FsIGZ1bmN0aW9uIGJyaW5nUGxheWVyKHBsck5hbWUpDQoJCWxvY2FsIHBsciA9IGdhbWUuUGxheWVyc1twbHJOYW1lXQ0KCQ0KCQlpZiAocGxyKSB0aGVuDQoJCQlpZiAoYnJpbmdpbmdUYXJnZXRzW3Bsck5hbWVdKSB0aGVuDQoJCQkJYnJpbmdpbmdUYXJnZXRzW3Bsck5hbWVdID0gbmlsDQoJCQllbHNlaWYgKHBsci5DaGFyYWN0ZXIpIGFuZCAocGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpKSB0aGVuDQoJCQkJYnJpbmdpbmdUYXJnZXRzW3Bsck5hbWVdID0gdHJ1ZQ0KCQkJDQoJCQkJcmVwZWF0IHdhaXQoKSB1bnRpbCBnZXRIUlAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcikNCgkJCQkNCgkJCQlsb2NhbCBjZnJhbWUgPSBnZXRIUlAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcikuQ0ZyYW1lIG9yIENGcmFtZS5uZXcoMCwgMCwgMCkNCgkJCQkJCQ0KCQkJCXdoaWxlIChwbHIpIGFuZCAoYnJpbmdpbmdUYXJnZXRzW3Bsck5hbWVdID09IHRydWUpIGRvDQoJCQkJCWlmIChwbHIuQ2hhcmFjdGVyKSBhbmQgKHBsci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikpIGFuZCAocGxyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggfj0gMCkgdGhlbg0KCQkJCQkJcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpLkFuY2hvcmVkID0gdHJ1ZQ0KCQkJCQkJcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpLkNGcmFtZSA9IGNmcmFtZSAqIENGcmFtZS5uZXcoMCwgMCwgLTE2KQ0KCQkJCQllbmQNCgkJCQllbmQNCgkJCQkNCgkJCQlicmluZ2luZ1RhcmdldHNbcGxyTmFtZV0gPSBuaWwNCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCglDQnJpbmdUYXJnZXQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgQ0JyaW5nVGFyZ2V0RW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlDQnJpbmdUYXJnZXRFbmFibGVkID0gdHJ1ZQ0KCQkJQ0JyaW5nVGFyZ2V0LlRleHQgPSAiQ0JyaW5nIFRhcmdldCAoT04pIFtNXSINCgkJZWxzZQ0KCQkJQ0JyaW5nVGFyZ2V0RW5hYmxlZCA9IGZhbHNlDQoJCQlDQnJpbmdUYXJnZXQuVGV4dCA9ICJDQnJpbmcgVGFyZ2V0IChPRkYpIFtNXSINCgkJZW5kDQoJZW5kKQ0KDQoJbG9jYWwgTG9vcENCcmluZ1RhcmdldCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJTG9vcENCcmluZ1RhcmdldC5OYW1lID0gIkxvb3BDQnJpbmdUYXJnZXQiDQoJTG9vcENCcmluZ1RhcmdldC5UZXh0ID0gIkxvb3AgQ0JyaW5nIFRhcmdldCAoT0ZGKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgTG9vcENCcmluZ1RhcmdldCkNCg0KCWxvY2FsIENCcmluZ1NlcnZlciA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJQ0JyaW5nU2VydmVyLk5hbWUgPSAiQ0JyaW5nU2VydmVyIg0KCUNCcmluZ1NlcnZlci5UZXh0ID0gIkNCcmluZyBTZXJ2ZXIgKE9GRikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIENCcmluZ1NlcnZlcikNCg0KCWxvY2FsIExvb3BDQnJpbmdTZXJ2ZXIgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUxvb3BDQnJpbmdTZXJ2ZXIuTmFtZSA9ICJMb29wQ0JyaW5nU2VydmVyIg0KCUxvb3BDQnJpbmdTZXJ2ZXIuVGV4dCA9ICJMb29wIENCcmluZyBTZXJ2ZXIgKE9GRikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIExvb3BDQnJpbmdTZXJ2ZXIpDQoNCgktLSBFU1ANCg0KCWxvY2FsIEVTUCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJRVNQLk5hbWUgPSAiRVNQIg0KCUVTUC5UZXh0ID0gIkVTUCAoT0ZGKSBbQl0iDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEVTUCkNCg0KCUVTUEVuYWJsZWQgPSBmYWxzZQ0KDQoJbG9jYWwgSG9sZGVyID0gSW5zdGFuY2UubmV3KCJGb2xkZXIiLCBnYW1lLkNvcmVHdWkpDQoJSG9sZGVyLk5hbWUgPSAiRVNQIg0KDQoJbG9jYWwgVXBkYXRlRnVuY3MgPSB7fQ0KDQoJbG9jYWwgQm94ID0gSW5zdGFuY2UubmV3KCJCb3hIYW5kbGVBZG9ybm1lbnQiKQ0KCUJveC5OYW1lID0gIm5pbEJveCINCglCb3guU2l6ZSA9IFZlY3RvcjMubmV3KDQsIDcsIDQpDQoJQm94LkNvbG9yMyA9IENvbG9yMy5uZXcoMTAwIC8gMjU1LCAxMDAgLyAyNTUsIDEwMCAvIDI1NSkNCglCb3guVHJhbnNwYXJlbmN5ID0gMC43DQoJQm94LlpJbmRleCA9IDANCglCb3guQWx3YXlzT25Ub3AgPSB0cnVlDQoJQm94LlZpc2libGUgPSB0cnVlDQoNCglsb2NhbCBOYW1lVGFnID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKQ0KCU5hbWVUYWcuTmFtZSA9ICJuaWxOYW1lVGFnIg0KCU5hbWVUYWcuRW5hYmxlZCA9IHRydWUNCglOYW1lVGFnLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCkNCglOYW1lVGFnLkFsd2F5c09uVG9wID0gdHJ1ZQ0KCU5hbWVUYWcuU3R1ZHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAzLjYsIDApDQoNCglsb2NhbCBUYWcgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIE5hbWVUYWcpDQoJVGFnLk5hbWUgPSAiVGFnIg0KCVRhZy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQ0KCVRhZy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAtNTAsIDAsIDApDQoJVGFnLlNpemUgPSBVRGltMi5uZXcoMCwgMzAwLCAwLCAyMCkNCglUYWcuVGV4dFNpemUgPSAyMA0KCVRhZy5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxMDAgLyAyNTUsIDEwMCAvIDI1NSwgMTAwIC8gMjU1KQ0KCVRhZy5UZXh0U3Ryb2tlQ29sb3IzID0gQ29sb3IzLm5ldygwIC8gMjU1LCAwIC8gMjU1LCAwIC8gMjU1KQ0KCVRhZy5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC40DQoJVGFnLlRleHQgPSAibmlsIg0KCVRhZy5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnNCb2xkDQoJVGFnLlRleHRTY2FsZWQgPSBmYWxzZQ0KCVRhZy5UZXh0VHJhbnNwYXJlbmN5ID0gMA0KDQoJZnVuY3Rpb24gTG9hZENoYXJhY3Rlcih2KQ0KCQlpZiB2IH49IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllciB0aGVuDQoJCQlyZXBlYXQgd2FpdCgpIHVudGlsIHYuQ2hhcmFjdGVyIH49IG5pbA0KCQkJdi5DaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZCIpDQoJCQlsb2NhbCB2SG9sZGVyID0gSG9sZGVyOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkNCgkJCXZIb2xkZXI6Q2xlYXJBbGxDaGlsZHJlbigpDQoNCgkJCWxvY2FsIGIgPSBCb3g6Q2xvbmUoKQ0KCQkJYi5OYW1lID0gdi5OYW1lIC4uICJCb3giDQoJCQliLkFkb3JuZWUgPSB2LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0DQoJCQliLlBhcmVudCA9IHZIb2xkZXINCg0KCQkJbG9jYWwgdCA9IE5hbWVUYWc6Q2xvbmUoKQ0KCQkJdC5OYW1lID0gdi5OYW1lIC4uICJOYW1lVGFnIg0KCQkJdC5QYXJlbnQgPSB2SG9sZGVyDQoJCQl0LkFkb3JuZWUgPSB2LkNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiLCA1KQ0KCQkJaWYgbm90IHQuQWRvcm5lZSB0aGVuDQoJCQkJcmV0dXJuIFVubG9hZENoYXJhY3Rlcih2KQ0KCQkJZW5kDQoJCQl0LlRhZy5UZXh0ID0gdi5OYW1lDQoJCQl0LkVuYWJsZWQgPSB0cnVlDQoJCQl3YWl0KCkNCg0KCQkJbG9jYWwgZnVuY3Rpb24gVXBkYXRlTmFtZVRhZygpDQoJCQkJaWYgbm90IHBjYWxsKGZ1bmN0aW9uKCkNCgkJCQkJCS0tIHYuQ2hhcmFjdGVyLkh1bWFub2lkLkRpc3BsYXlEaXN0YW5jZVR5cGUgPSBFbnVtLkh1bWFub2lkRGlzcGxheURpc3RhbmNlVHlwZS5Ob25lDQoJCQkJCQlsb2NhbCBtYXhoID0gbWF0aC5jZWlsKHYuQ2hhcmFjdGVyLkh1bWFub2lkLk1heEhlYWx0aCAqIDEwKQ0KCQkJCQkJbG9jYWwgaCA9IG1hdGguY2VpbCh2LkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggKiAxMCkNCgkJCQkJCXQuVGFnLlRleHQgPSB2Lk5hbWUgLi4gIlxuIiAuLiAoKG1heGggfj0gMCBhbmQgdG9zdHJpbmcobWF0aC5jZWlsKChoIC8gbWF4aCkgKiAxMDApKSkgb3IgIjAiKSAuLiAiJSAgIiAuLiB0b3N0cmluZyhoKSAuLiAiLyIgLi4gdG9zdHJpbmcobWF4aCkNCgkJCQkJCWlmIEVTUEVuYWJsZWQgdGhlbg0KCQkJCQkJCXQuVGFnLlRleHRUcmFuc3BhcmVuY3kgPSAwDQoJCQkJCQkJYi5UcmFuc3BhcmVuY3kgPSAwLjcNCgkJCQkJCWVsc2UNCgkJCQkJCQl0LlRhZy5UZXh0VHJhbnNwYXJlbmN5ID0gMQ0KCQkJCQkJCWIuVHJhbnNwYXJlbmN5ID0gMQ0KCQkJCQkJZW5kDQoJCQkJCQlpZiBoIC8gbWF4aCA9PSAxIHRoZW4NCgkJCQkJCQl0LlRhZy5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkNCgkJCQkJCQliLkNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpDQoJCQkJCQllbHNlaWYgaCAvIG1heGggPT0gMCB0aGVuDQoJCQkJCQkJdC5UYWcuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApDQoJCQkJCQkJYi5Db2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQ0KCQkJCQkJZWxzZQ0KCQkJCQkJCXQuVGFnLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxOTIsICgxOTIgKiAoaCAvIG1heGgpKSwgKDE5MiAqIChoIC8gbWF4aCkpKQ0KCQkJCQkJCWIuQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTkyLCAoMTkyICogKGggLyBtYXhoKSksICgxOTIgKiAoaCAvIG1heGgpKSkNCgkJCQkJCWVuZA0KCQkJCQllbmQpIHRoZW4NCgkJCQkJVXBkYXRlRnVuY3Nbdl0gPSBuaWwNCgkJCQllbmQNCgkJCWVuZA0KCQkJVXBkYXRlTmFtZVRhZygpDQoJCQlVcGRhdGVGdW5jc1t2XSA9IFVwZGF0ZU5hbWVUYWcNCgkJZW5kDQoJZW5kDQoNCglmdW5jdGlvbiBVbmxvYWRDaGFyYWN0ZXIodikNCgkJbG9jYWwgdkhvbGRlciA9IEhvbGRlcjpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQoJCWlmIHZIb2xkZXIgYW5kICh2SG9sZGVyOkZpbmRGaXJzdENoaWxkKHYuTmFtZSAuLiAiQm94Iikgfj0gbmlsIG9yIHZIb2xkZXI6RmluZEZpcnN0Q2hpbGQodi5OYW1lIC4uICJOYW1lVGFnIikgfj0gbmlsKSB0aGVuDQoJCQl2SG9sZGVyOkNsZWFyQWxsQ2hpbGRyZW4oKQ0KCQllbmQNCgllbmQNCg0KCWZ1bmN0aW9uIExvYWRQbGF5ZXIodikNCgkJaWYgdiB+PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIgdGhlbg0KCQkJbG9jYWwgdkhvbGRlciA9IEluc3RhbmNlLm5ldygiRm9sZGVyIiwgSG9sZGVyKQ0KCQkJdkhvbGRlci5OYW1lID0gdi5OYW1lDQoJCQl2LkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oKQ0KCQkJCWlmIEVTUEVuYWJsZWQgPT0gdHJ1ZSB0aGVuDQoJCQkJCXBjYWxsKExvYWRDaGFyYWN0ZXIsIHYpDQoJCQkJZW5kDQoJCQllbmQpDQoJCQl2LkNoYXJhY3RlclJlbW92aW5nOkNvbm5lY3QoZnVuY3Rpb24oKQ0KCQkJCXBjYWxsKFVubG9hZENoYXJhY3RlciwgdikNCgkJCWVuZCkNCgkJCUxvYWRDaGFyYWN0ZXIodikNCgkJZW5kDQoJZW5kDQoNCglmdW5jdGlvbiBVbmxvYWRQbGF5ZXIodikNCgkJVW5sb2FkQ2hhcmFjdGVyKHYpDQoJCWxvY2FsIHZIb2xkZXIgPSBIb2xkZXI6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KCQlpZiB2SG9sZGVyIHRoZW4NCgkJCXZIb2xkZXI6RGVzdHJveSgpDQoJCWVuZA0KCWVuZA0KDQoJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0UGxheWVycygpKSBkbw0KCQlzcGF3bihmdW5jdGlvbigpIHBjYWxsKExvYWRQbGF5ZXIsIHYpIGVuZCkNCgllbmQNCg0KCWdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLlBsYXllckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24odikNCgkJcGNhbGwoTG9hZFBsYXllciwgdikNCgllbmQpDQoNCglnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5QbGF5ZXJSZW1vdmluZzpDb25uZWN0KGZ1bmN0aW9uKHYpDQoJCXBjYWxsKFVubG9hZFBsYXllciwgdikNCgllbmQpDQoNCglnYW1lLkl0ZW1DaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24oaSkNCgkJaWYgaTpJc0EoIlBsYXllciIpIHRoZW4NCgkJCWlmIEhvbGRlcjpGaW5kRmlyc3RDaGlsZChpLk5hbWUpIHRoZW4NCgkJCQlVbmxvYWRDaGFyYWN0ZXIoaSkNCgkJCQl3YWl0KCkNCgkJCQlMb2FkQ2hhcmFjdGVyKGkpDQoJCQllbmQNCgkJZWxzZWlmIGk6SXNBKCJIdW1hbm9pZCIpIGFuZCBpLlBhcmVudCB0aGVuDQoJCQlsb2NhbCBwID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0UGxheWVyRnJvbUNoYXJhY3RlcihpLlBhcmVudCkNCgkJCWlmIHAgfj0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyIGFuZCBwIH49IG5pbCBhbmQgSG9sZGVyOkZpbmRGaXJzdENoaWxkKHAuTmFtZSkgdGhlbg0KCQkJCXBjYWxsKGZ1bmN0aW9uKCkNCgkJCQkJVXBkYXRlRnVuY3NbcF0oKQ0KCQkJCWVuZCkNCgkJCWVuZA0KCQllbmQNCgllbmQpDQoNCglmdW5jdGlvbiB0b2dnbGVFU1AoKQ0KCQlpZiBFU1BFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUVTUEVuYWJsZWQgPSB0cnVlDQoJCQlFU1AuVGV4dCA9ICJFU1AgKE9OKSBbQl0iDQoJCQlmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOkdldFBsYXllcnMoKSkgZG8NCgkJCQlzcGF3bihmdW5jdGlvbigpIHBjYWxsKExvYWRQbGF5ZXIsIHYpIGVuZCkNCgkJCWVuZA0KCQllbHNlDQoJCQlFU1BFbmFibGVkID0gZmFsc2UNCgkJCUVTUC5UZXh0ID0gIkVTUCAoT0ZGKSBbQl0iDQoJCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbw0KCQkJCXNwYXduKGZ1bmN0aW9uKCkgcGNhbGwoVW5sb2FkUGxheWVyLCB2KSBlbmQpDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoNCglFU1AuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KHRvZ2dsZUVTUCkNCg0KCS0tIFRQIHRvIERyb3BzDQoNCglsb2NhbCBUUFNoYXJkcyA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJVFBTaGFyZHMuTmFtZSA9ICJUUFNoYXJkcyINCglUUFNoYXJkcy5UZXh0ID0gIlRlbGVwb3J0IHRvIFNoYXJkcyAoT0ZGKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgVFBTaGFyZHMpDQoNCglUUFNoYXJkc0VuYWJsZWQgPSBmYWxzZQkNCg0KCWxvY2FsIFRQRGlhbW9uZHMgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCVRQRGlhbW9uZHMuTmFtZSA9ICJUUERpYW1vbmRzIg0KCVRQRGlhbW9uZHMuVGV4dCA9ICJUZWxlcG9ydCB0byBEaWFtb25kcyAoT0ZGKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgVFBEaWFtb25kcykNCg0KCVRQRGlhbW9uZHNFbmFibGVkID0gZmFsc2UNCg0KCWxvY2FsIHBsYXRlID0gSW5zdGFuY2UubmV3KCJQYXJ0IikNCglwbGF0ZS5QYXJlbnQgPSBnYW1lLldvcmtzcGFjZQ0KCXBsYXRlLlNpemUgPSBWZWN0b3IzLm5ldyg0MCwgMSwgNDApDQoJcGxhdGUuUG9zaXRpb24gPSBWZWN0b3IzLm5ldygwLCAxMDAwMDAsIDApDQoJcGxhdGUuQW5jaG9yZWQgPSB0cnVlDQoJcGxhdGUuUmVmbGVjdGFuY2UgPSAwLjUNCglwbGF0ZS5UcmFuc3BhcmVuY3kgPSAwLjUNCg0KCWxvY2FsIHRpbWUgPSAwDQoJbG9jYWwgY2FuSW52aXMgPSBmYWxzZQ0KDQoJZnVuY3Rpb24gdGVsZXBvcnRUb0Ryb3BzKCkNCgkJbG9jYWwgaHJwID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQ0KCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZVsnLklnbm9yZSddWycuU2VydmVyRWZmZWN0cyddOkdldENoaWxkcmVuKCkpIGRvDQoJCQlpZiBUUFNoYXJkc0VuYWJsZWQgYW5kIHYuTmFtZSA9PSAiU2hhcmQiIHRoZW4NCgkJCQlocnAuQ0ZyYW1lID0gdi5DRnJhbWUNCgkJCQl3YWl0KC4yKQ0KCQkJZWxzZWlmIFRQRGlhbW9uZHNFbmFibGVkIGFuZCB2Lk5hbWUgPT0gIkRpYW1vbmQiIHRoZW4NCgkJCQlocnAuQ0ZyYW1lID0gdi5DRnJhbWUNCgkJCQl3YWl0KC4yKQ0KCQkJZW5kDQoNCgkJCWlmIGNhbkludmlzIHRoZW4NCgkJCQlpZiB0aW1lID09IDUgdGhlbiANCgkJCQkJYnJlYWsNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCg0KCQlocnAuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhWZWN0b3IzLm5ldygwLCAxMDAwMDMsIC0xMCkpDQoNCgkJcmV0dXJuIA0KCWVuZA0KDQoNCglmdW5jdGlvbiBzdGFydFRpbWVyKCkNCgkJbG9jYWwgaHJwID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQ0KCQl3aGlsZSB3YWl0KCkgZG8NCgkJCWlmIFRQU2hhcmRzRW5hYmxlZCBvciBUUERpYW1vbmRzRW5hYmxlZCB0aGVuDQoJCQkJaWYgdGltZSB+PSAwIHRoZW4gcmV0dXJuDQoJCQkJZWxzZQ0KCQkJCQlpZiBjYW5JbnZpcyB0aGVuDQoJCQkJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJTcGlyaXQiLCAiU3BlY3RyYWwgRW1ib2RpbWVudCIpDQoJCQkJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIlNwaXJpdCIsICJTcGVjdHJhbCBFbWJvZGltZW50IikNCgkJCQkJCXdhaXQoMSkNCgkJCQkJCXJlcGVhdA0KCQkJCQkJCXNwYXduKGZ1bmN0aW9uKCkgcGNhbGwodGVsZXBvcnRUb0Ryb3BzKSBlbmQpDQoJCQkJCQkJdGltZSA9IHRpbWUgKyAxDQoJCQkJCQkJd2FpdCgxKQ0KCQkJCQkJdW50aWwgdGltZSA9PSA2DQoJCQkJCQlocnAuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhWZWN0b3IzLm5ldygwLCAxMDAwMDMsIC0xMCkpDQoJCQkJCQl3YWl0KDcuNSkNCgkJCQkJCXRpbWUgPSAwDQoJCQkJCWVsc2UNCgkJCQkJCXdoaWxlIHRydWUgZG8NCgkJCQkJCQlpZiBub3QgVFBTaGFyZHNFbmFibGVkIGFuZCBub3QgVFBEaWFtb25kc0VuYWJsZWQgdGhlbg0KCQkJCQkJCQlicmVhaw0KCQkJCQkJCWVuZA0KCQkJCQkJCXNwYXduKGZ1bmN0aW9uKCkgcGNhbGwodGVsZXBvcnRUb0Ryb3BzKSBlbmQpDQoJCQkJCQkJd2FpdCgxKQ0KCQkJCQkJZW5kDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZWxzZQ0KCQkJCWJyZWFrDQoJCQllbmQNCgkJZW5kDQoNCgkJcmV0dXJuDQoJZW5kDQoNCglUUFNoYXJkcy5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6V2FpdEZvckNoaWxkKCJQbGF5ZXJHdWkiKTpXYWl0Rm9yQ2hpbGQoIk1haW4iKS5DaGFyYWN0ZXIuQXZhaWxhYmxlLlNjcm9sbGluZ0ZyYW1lLkZyYW1lOkZpbmRGaXJzdENoaWxkKCJTcGVjdHJhbCBFbWJvZGltZW50IikgdGhlbg0KCQkJY2FuSW52aXMgPSB0cnVlDQoJCWVuZA0KCQlpZiBUUFNoYXJkc0VuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJVFBTaGFyZHNFbmFibGVkID0gdHJ1ZQ0KCQkJVFBTaGFyZHMuVGV4dCA9ICJUZWxlcG9ydCB0byBTaGFyZHMgKE9OKSINCgkJCXN0YXJ0VGltZXIoKQ0KCQkJd2hpbGUgVFBTaGFyZHNFbmFibGVkIGRvDQoJCQkJd2FpdCgpDQoJCQkJaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPT0gMCB0aGVuDQoJCQkJCXJlcGVhdCB3YWl0KCkgdW50aWwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggfj0gMA0KCQkJCQlzdGFydFRpbWVyKCkNCgkJCQllbmQNCgkJCWVuZA0KCQllbHNlDQoJCQlUUFNoYXJkc0VuYWJsZWQgPSBmYWxzZQ0KCQkJVFBTaGFyZHMuVGV4dCA9ICJUZWxlcG9ydCB0byBTaGFyZHMgKE9GRikiDQoJCWVuZA0KCWVuZCkNCg0KCVRQRGlhbW9uZHMuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOldhaXRGb3JDaGlsZCgiUGxheWVyR3VpIik6V2FpdEZvckNoaWxkKCJNYWluIikuQ2hhcmFjdGVyLkF2YWlsYWJsZS5TY3JvbGxpbmdGcmFtZS5GcmFtZTpGaW5kRmlyc3RDaGlsZCgiU3BlY3RyYWwgRW1ib2RpbWVudCIpIHRoZW4NCgkJCWNhbkludmlzID0gdHJ1ZQ0KCQllbmQNCgkJaWYgVFBEaWFtb25kc0VuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJVFBEaWFtb25kc0VuYWJsZWQgPSB0cnVlDQoJCQlUUERpYW1vbmRzLlRleHQgPSAiVGVsZXBvcnQgdG8gRGlhbW9uZHMgKE9OKSINCgkJCXN0YXJ0VGltZXIoKQ0KCQkJd2hpbGUgVFBEaWFtb25kc0VuYWJsZWQgZG8NCgkJCQl3YWl0KCkNCgkJCQlpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA9PSAwIHRoZW4NCgkJCQkJcmVwZWF0IHdhaXQoKSB1bnRpbCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCB+PSAwDQoJCQkJCXN0YXJ0VGltZXIoKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVsc2UNCgkJCVRQRGlhbW9uZHNFbmFibGVkID0gZmFsc2UNCgkJCVRQRGlhbW9uZHMuVGV4dCA9ICJUZWxlcG9ydCB0byBEaWFtb25kcyAoT0ZGKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gUmVqb2luIFNlcnZlcg0KDQoJbG9jYWwgUmVqb2luU2VydmVyID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglSZWpvaW5TZXJ2ZXIuTmFtZSA9ICJSZWpvaW5TZXJ2ZXIiDQoJUmVqb2luU2VydmVyLlRleHQgPSAiUmVqb2luIFNlcnZlciINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgUmVqb2luU2VydmVyKQ0KDQoJZnVuY3Rpb24gcmVqb2luKCkNCgkJbG9jYWwgdHMgPSBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpDQoJCWxvY2FsIHAgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcg0KDQoJCXRzOlRlbGVwb3J0KGdhbWUuUGxhY2VJZCwgcCkNCgllbmQNCg0KCVJlam9pblNlcnZlci5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QocmVqb2luKQ0KDQoJLS0gR1VJIFR3ZWFraW5nDQoNCglmb3IgaSwgdiBpbiBwYWlycyhib3JkZXJzKSBkbw0KCQl2LkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMSwgMC41KQ0KCQl2LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQ0KCQl2LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjc1MA0KCQl2LkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApDQoJCXYuQm9yZGVyU2l6ZVBpeGVsID0gMA0KCQl2LlNpemVDb25zdHJhaW50ID0gRW51bS5TaXplQ29uc3RyYWludC5SZWxhdGl2ZVlZDQoJCXYuQWN0aXZlID0gdHJ1ZQ0KCQl2LlBhcmVudCA9IGViZ3VpDQoJZW5kDQoNCglmb3IgaSwgdiBpbiBwYWlycyhidXR0b25zKSBkbw0KCQl2LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMzYsIDIwLCAxMTUpDQoJCXYuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCkNCgkJdi5Cb3JkZXJTaXplUGl4ZWwgPSAyDQoJCXYuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMCkNCgkJdi5TaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDApDQoJCXYuRm9udCA9IEVudW0uRm9udC5TYXJwYW5jaA0KCQl2LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1MSwgMjU1KQ0KCQl2LlRleHRTY2FsZWQgPSB0cnVlDQoJCXYuVGV4dFNpemUgPSAxNC4wMDANCgkJdi5UZXh0V3JhcHBlZCA9IHRydWUNCgkJdi5MYXlvdXRPcmRlciA9IGkNCgkJdi5QYXJlbnQgPSBtYWluZnJhbWUNCgllbmQNCgkNCgktLVtbUGluZyBUcmFja2VyDQoJDQoJbG9jYWwgcGluZ1RyYWNrZXINCgkNCgljb3JvdXRpbmUucmVzdW1lKGNvcm91dGluZS5jcmVhdGUoZnVuY3Rpb24oKQ0KCQlwY2FsbChmdW5jdGlvbigpDQoJCQlwaW5nVHJhY2tlciA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikNCgkJCXBpbmdUcmFja2VyLlZpc2libGUgPSB0cnVlDQoJCQlwaW5nVHJhY2tlci5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMSkNCgkJCXBpbmdUcmFja2VyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxDQoJCQlwaW5nVHJhY2tlci5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnNCb2xkDQoJCQlwaW5nVHJhY2tlci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAsIDApDQoJCQlwaW5nVHJhY2tlci5TaXplID0gVURpbTIubmV3KDAuNzUsIDAsIDAuMSwgMCkNCgkJCXBpbmdUcmFja2VyLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpDQoJCQlwaW5nVHJhY2tlci5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC4zDQoJCQlwaW5nVHJhY2tlci5UZXh0U2NhbGVkID0gdHJ1ZQ0KCQkJcGluZ1RyYWNrZXIuVGV4dCA9ICJQaW5nIHwgUGxlYXNlIG9wZW4gcGVyZm9ybWFuY2Ugc3RhdHMgdG8gYmVnaW4gdHJhY2tpbmcgcGluZy4iDQoJCQlwaW5nVHJhY2tlci5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6V2FpdEZvckNoaWxkKCJQbGF5ZXJHdWkiKTpXYWl0Rm9yQ2hpbGQoIk1haW4iKTpXYWl0Rm9yQ2hpbGQoIlNraWxsc0JhciIpDQoJCQkNCgkJCWdhbWUuQ29yZUd1aS5Sb2Jsb3hHdWk6V2FpdEZvckNoaWxkKCJQZXJmb3JtYW5jZVN0YXRzIikuVmlzaWJsZSA9IGZhbHNlDQoJCQkNCgkJCWxvY2FsIHBpbmcNCgkJCQ0KCQkJZm9yIGksIHYgaW4gbmV4dCwgZ2FtZS5Db3JlR3VpLlJvYmxveEd1aS5QZXJmb3JtYW5jZVN0YXRzOkdldENoaWxkcmVuKCkgZG8NCgkJCQlpZiAodjpGaW5kRmlyc3RDaGlsZCgiU3RhdHNNaW5pVGV4dFBhbmVsQ2xhc3MiKSkgdGhlbiANCgkJCQkJaWYgKHYuU3RhdHNNaW5pVGV4dFBhbmVsQ2xhc3MuVGl0bGVMYWJlbC5UZXh0ID09ICJQaW5nIikgdGhlbg0KCQkJCQkJcGluZyA9IHYuU3RhdHNNaW5pVGV4dFBhbmVsQ2xhc3MuVmFsdWVMYWJlbA0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQkNCgkJCWlmIChwaW5nKSB0aGVuDQoJCQkJZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkNCgkJCQkJZ2FtZS5Db3JlR3VpLlJvYmxveEd1aS5QZXJmb3JtYW5jZVN0YXRzLlZpc2libGUgPSBmYWxzZQ0KCQkJCQ0KCQkJCQlsb2NhbCBwaW5nU3RyaW5nID0gcGluZy5UZXh0DQoJCQkJCQ0KCQkJCQlsb2NhbCBwaW5nVmFsdWUgPSB0b251bWJlcihzdHJpbmcuc3BsaXQocGluZ1N0cmluZywgIiAiKVsxXSkNCgkJCQkJDQoJCQkJCWxvY2FsIHJhdGluZw0KCQkJCQkNCgkJCQkJaWYgKHBpbmdWYWx1ZSA8PSA1MCkgdGhlbg0KCQkJCQkJcmF0aW5nID0gIlBlcmZlY3QiDQoJCQkJCWVsc2VpZiAocGluZ1ZhbHVlIDw9IDcwKSB0aGVuDQoJCQkJCQlyYXRpbmcgPSAiR29vZCINCgkJCQkJZWxzZWlmIChwaW5nVmFsdWUgPD0gMTAwKSB0aGVuDQoJCQkJCQlyYXRpbmcgPSAiRGVjZW50Ig0KCQkJCQllbHNlaWYgKHBpbmdWYWx1ZSA8PSAxMzApIHRoZW4NCgkJCQkJCXJhdGluZyA9ICJPa2F5Ig0KCQkJCQllbHNlaWYgKHBpbmdWYWx1ZSA8PSAxNTApIHRoZW4NCgkJCQkJCXJhdGluZyA9ICJCYWQiDQoJCQkJCWVsc2UNCgkJCQkJCXJhdGluZyA9ICJIb3JyaWJsZSINCgkJCQkJZW5kDQoJCQkNCgkJCQkJcGluZ1RyYWNrZXIuVGV4dCA9ICJQaW5nIHwgIiAuLiBwaW5nU3RyaW5nIC4uICIgKCIgLi4gcmF0aW5nIC4uICIpIg0KCQkJCWVuZCkNCgkJCWVuZA0KCQllbmQpDQoJZW5kKSldXQ0KDQoJLS0gY29tbWFuZEJveA0KDQoJdGFyZ2V0ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUNCgl0YXJnZXRTZXR0aW5nID0gInNlbGVjdCINCglsb29waW5nID0gZmFsc2UNCglzbWFydEF0dGFjayA9IHRydWUNCglIZWFsU2V0dGluZyA9IDENCglzdHVuRW5hYmxlZCA9IHRydWUNCglGUFNEcm9wcGluZyA9IGZhbHNlDQoJbG9jYWwgYnV0dG9uSGVpZ2h0ID0gMzANCglsb2NhbCBidXR0b25HYXAgPSA3DQogICAgbG9jYWwgaGVscDEgPSBbW3x8IEJlbG93IGlzIGEgZnVsbCwgY29tcHJlaGVuc2l2ZSBsaXN0IG9mIGVhY2ggY29tbWFuZCBFQkdVSSBoYXMgdG8gb2ZmZXIuIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIChQcmVmaXggaXMgOykNCg0KICAgICAgICAgICAgICAgICJoZWxwIFtudW1dIiAtIFNob3dzIHRoaXMgY29tbWFuZHMgbGlzdCEgQ2hvb3NlIGJldHdlZW4gcGFnZXMgMSBvciAyLg0KICAgICAgICAgICAgICAgICJjaGFuZ2Vsb2ciIC0gU2hvd3MgYSBsaW5rIHRvIHRoZSBjaGFuZ2Vsb2cgZm9yIEVCR1VJIGFuZCBpdHMgQ2FuYXJ5IGJyYW5jaC4NCiAgICAgICAgICAgICAgICAicmUiIC0gUmVmcmVzaGVzIHlvdXIgY2hhcmFjdGVyLiBUaGlzIHdpbGwgdGVtcG9yYXJpbHkgdmFuaXNoIHlvdSwgYW5kIGJyaW5nIHlvdSBiYWNrIHdpdGggZnVsbCBzdGF0cy4NCiAgICAgICAgICAgICAgICAidHAgPG1hcD4iIC0gVGVsZXBvcnRzIHlvdSB0byB0aGUgbWFwIG9mIHlvdXIgY2hvaWNlLiBIZWF2ZW4gZG9lc24ndCB3b3JrIHdpdGhvdXQgdGhlIGdhbWVwYXNzLg0KICAgICAgICAgICAgICAgICJkZWNsdXR0ZXIiIC0gQ2xlYXJzIHRoZSBiYWNrZ3JvdW5kcyBvZiB0aGUgbWFpbiBHVUlzLCBhbmQgc2hyaW5rcyB0aGUgbW92ZXMvc3RhdHMuDQogICAgICAgICAgICAgICAgInJhaW4iIC0gRW5hYmxlcyB0aGUgcmFpbiBmcm9tIFdhdGVyIG1hcC4gQ2FyZWZ1bCwgeW91IGhhdmUgdG8gcmVqb2luIHRvIHR1cm4gaXQgb2ZmIQ0KICAgICAgICAgICAgICAgICJmaXgiIC0gUmVtb3ZlcyB0aGUgIkxPQURJTkciIHNjcmVlbiB3aGVuIHRlbGVwb3J0aW5nIHRvIGNlcnRhaW4gbWFwcy4NCiAgICAgICAgICAgICAgICAiYnV0dG9uaGVpZ2h0IDxudW0+IiAtIENoYW5nZXMgdGhlIGhlaWdodCwgaW4gcGl4ZWxzLCBvZiBFQkdVSSdzIGJ1dHRvbnMuDQogICAgICAgICAgICAgICAgImJ1dHRvbmdhcCA8bnVtPiIgLSBDaGFuZ2VzIHRoZSBnYXAsIGluIHBpeGVscywgYmV0d2VlbiBFQkdVSSdzIGJ1dHRvbnMuDQogICAgICAgICAgICAgICAgInJlam9pbiIgLSBSZWpvaW5zIHRoZSBzZXJ2ZXIuDQogICAgICAgICAgICAgICAgImF1cmEvb2ZmIiAtIEFuIGFsdGVybmF0ZSBtZXRob2Qgb2Ygc2lsZW50bHkgdHVybmluZyBvZmYgYXVyYS4NCiAgICAgICAgICAgICAgICAidGFyZ2V0c2V0dGluZyA8bW9kZT4iIC0gTW9kaWZpZXMgaG93IEVCR1VJIHNlbGVjdHMgdGFyZ2V0cy4gV29uJ3QgdGFyZ2V0IHRob3NlIGluIHNhZmV6b25lLCBleGNlcHQgaW4gInNlbGVjdCIgbW9kZS4NCiAgICAgICAgICAgICAgICAgICAgLS0gInNlbGVjdCIgYWxsb3dzIHlvdSB0byBjaG9vc2UgYnkgdHlwaW5nIGludG8gdGhlIGNvbW1hbmQgYm94LiBTZXQgdG8gdGhpcyBieSBkZWZhdWx0Lg0KICAgICAgICAgICAgICAgICAgICAtLSAiY2xvc2VzdCIgc2VsZWN0cyB0aGUgcGVyc29uIGNsb3Nlc3QgdG8geW91Lg0KICAgICAgICAgICAgICAgICAgICAtLSAiZmFydGhlc3QiIHNlbGVjdHMgdGhlIHBlcnNvbiBmYXJ0aGVzdCBmcm9tIHlvdS4NCiAgICAgICAgICAgICAgICAgICAgLS0gImxvd2hwIiBzZWxlY3RzIHRoZSBwZXJzb24gd2l0aCB0aGUgbG93ZXN0IEhQLg0KICAgICAgICAgICAgICAgICAgICAtLSAiaGlnaGhwIiBzZWxlY3RzIHRoZSBjbG9zZXN0IHBlcnNvbiB3aXRoIHRoZSBoaWdoZXN0IEhQLl1dDQoNCiAgICBsb2NhbCBoZWxwMiA9IFtbImxvb3AiIC0gTG9vcHMgdGhlIHVzYWdlIG9mIGVuYWJsZWQgYXR0YWNrIGV4cGxvaXRzLg0KICAgICAgICAgICAgICAgICJncmNoYXJnZSA8bnVtPiIgLSBNdWx0aXBsaWVzIHRoZSB0aW1lIEFtcGxpZmllZCBHZW5lc2lzIFJheSBhdHRhY2sgZXhwbG9pdCBzdGF5cyBhbGl2ZSBmb3IuIERlZmF1bHQsIDEsIGxhc3RzIDYgc2Vjb25kcy4NCiAgICAgICAgICAgICAgICAic3BlZWQgPG51bT4iIC0gQ2hhbmdlcyB5b3VyIGRlZmF1bHQgd2Fsa3NwZWVkLiBEZWZhdWx0LCA2NCwgZXF1YWxzIG1heC1zcGVlZCBzcHJpbnRpbmcuDQogICAgICAgICAgICAgICAgInNtYXJ0YXR0YWNrIiAtIFRvZ2dsZXMgaWYgYXR0YWNrIGV4cGxvaXRzIHdpbGwgZmlyZSBvbiBwZW9wbGUgd2hvIGFyZSBpbiBzYWZlem9uZS4gRGVmYXVsdCBvbi4NCiAgICAgICAgICAgICAgICAiZ2FtZWNvbG9yIDxtb2RlPiIgLSBDaGFuZ2VzIHRoZSBjb250cmFzdCBhbmQgc2F0dXJhdGlvbiBvZiB0aGUgZ2FtZS4NCiAgICAgICAgICAgICAgICAgICAgLS0gIm5vcm1hbCIgd2lsbCByZXNldCBldmVyeXRoaW5nIHRvIG5vcm1hbC4NCiAgICAgICAgICAgICAgICAgICAgLS0gImdyYXlzY2FsZSIgdHVybnMgb2ZmIHRoZSBzYXR1cmF0aW9uIGFuZCBtYWtlcyBldmVyeXRoaW5nIGdyYXkuDQogICAgICAgICAgICAgICAgICAgIC0tICJpbnZlcnRodWUiIGludmVydHMgdGhlIGh1ZSBvZiBldmVyeXRoaW5nLiBHcmVlbiBiZWNvbWVzIHB1cnBsZSwgYmx1ZSBiZWNvbWVzIHJlZC4NCiAgICAgICAgICAgICAgICAgICAgLS0gImludmVydGFsbCIgaW52ZXJ0cyB0aGUgaHVlLCBzYXR1cmF0aW9uLCBhbmQgY29udHJhc3Qgb2YgZXZlcnl0aGluZy4gTmVnYXRpdmUhDQogICAgICAgICAgICAgICAgImJsYWNrY2FzdCIgLSBDaGFuZ2VzIGFsbCB0aGUgbWVkYWxzIHRvIGJsYWNrIHdoZW4gY2FzdGluZyBzcGVsbHMuDQogICAgICAgICAgICAgICAgInN0dW4iIC0gVG9nZ2xlcyB3aGV0aGVyIHlvdSB3YW50IHRvIGJlIHN0dW5uZWQgb3Igbm90LiBOb3QgdmVyeSBkaXNjcmVldC4NCiAgICAgICAgICAgICAgICAiZHJ1Z3MiIC0gUmFuZG9taXplcyB0aGUgY29sb3JzIG9mIGFsbCBtYWdpYyBzcGVsbHMuIFJlcXVpcmVzIHlvdSB0byBydW4gImNvbG9ycyIgZmlyc3QuDQogICAgICAgICAgICAgICAgIm1hZ2ljY29sb3IgPHI+IDxnPiA8Yj4iIC0gQ2hhbmdlcyB0aGUgY29sb3Igb2YgYWxsIG1hZ2ljIHNwZWxscyB0byBhbiBSR0IgdmFsdWUuIFJlcXVpcmVzIHlvdSB0byBydW4gImNvbG9ycyIgZmlyc3QuDQogICAgICAgICAgICAgICAgImNvbG9ycyIgLSBBbGxvd3MgeW91IHRvIHJ1biAiZHJ1Z3MiIGFuZCAibWFnaWNjb2xvciIuDQogICAgICAgICAgICAgICAgImhlYWwgPHBsYXllcj4iIC0gUGxhY2VzIEJsdWUgQXJzb24gYW5kIEdsZWFtaW5nIEhhcm1vbnkgYXQgdGhlIGZlZXQgb2YgYSBwbGF5ZXIgb2YgeW91ciBjaG9pY2UuDQogICAgICAgICAgICAgICAgImUgPG51bSAxLTM+IiAtIENoYW5nZXMgdGhlIHBoYXNlIG9mIHRoZSBDb250cm9sbGVkIEVjaG9lcyBhdHRhY2sgZXhwbG9pdC4NCiAgICAgICAgICAgICAgICAgICAgLS0gIjEiIHdpbGwgY2hhbmdlIGl0IHRvIFBPVywgYW5kIGlzIHRoZSBkZWZhdWx0Lg0KICAgICAgICAgICAgICAgICAgICAtLSAiMiIgd2lsbCBjaGFuZ2UgaXQgdG8gQlVSTi4NCiAgICAgICAgICAgICAgICAgICAgLS0gIjMiIHdpbGwgY2hhbmdlIGl0IHRvIFNUVU4uDQogICAgICAgICAgICAgICAgIm9yaWdpbiIgLSBDcmVhdGVzIGEgc21hbGwsIHJlZCBibG9jayBhdCAwLCAwLCAwIHdpdGhpbiB0aGUgd29ybGQuXV0NCg0KCVJTUiA9IGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6V2FpdEZvckNoaWxkKCJSZW1vdGVzIikNCg0KCWxvY2FsIHN0dW5Db25uZWN0aW9uID0gZ2V0Y29ubmVjdGlvbnMoUlNSOldhaXRGb3JDaGlsZCgiQ29tYmF0IikuT25DbGllbnRFdmVudCkNCglsb2NhbCBsYWdnZXJzID0gew0KCQkiMUIwRjk4QkUtRTEwQi00Njc0LTlGQjQtNkY2NTE3MUEzNDdGIiwgLS0gbG9nDQoJCSI2QTMzMTA0QS0xRkU5LTRGQTgtOTM3NC1DMTY0RDI4RjgzNTEiLCAtLSBicmlhbg0KCQkiODM3NzM2QUEtMDE5Mi00N0Y5LTk4QzUtOEREMERGMThGRTc0IiwgLS0gamV0DQoJCSI1NUMyMDQ5RC1DNkJELTQ1MjMtODgwNC1ENTM5QzM4NzkyQTMiLCAtLSBwZW50YXJhY3QNCgkJIjk0NjRCNjhBLTM2M0MtNDFGOC1CQjdELUI0QkVEOEFDMDk2MyIsIC0tIHZhc3RvcmlvDQoJCS0tICI4MzBCRDRFOS01RUJFLTRBMTMtQjQ3Qi05QkU2MDA4M0I4MzYiLCAtLSBsb2xvaw0KCQktLSAiNjNCMzlFMjctREExQi00ODJFLUIyOEMtNkEzMzk4Qzk1QTRDIiwgLS0gYWxleA0KCQkiODQ2QTY1RTItRTk2My00QTBBLTkwMjUtRTlCOEU5NTg5NjEzIiwgLS0gYnJhbQ0KCQkiM0YxNjg0NDAtQTVDMC00RjcxLThFNTEtM0ZERjkwMjVGNTFCIiwgLS0gdG9tZWsNCgkJIjZBOTcwNTJBLTYzNEUtNDdFMS04RDkwLTVFRTNDQTRBOTZGQSIsIC0tIHJhdmVuDQoJCSJGNTk3NUQ3RC0yQUM1LTQ0QUEtODAxRi04Mjc2MjVENkQ3NjMiLCAtLSBhbGV4aWENCgkJIjQ4Mjg3MTgyLTlFNzctNEY5Ny1BNjU0LTk3MDY5RUQ4MTY2QyIsIC0tIGplc3MNCgkJIjc0ODlDQkFFLTc5ODYtNDVBOS1CRTQwLUEyMThFRENEMEYwMSIgLS0gY2VwaGFzDQoJfQ0KDQoJbG9jYWwgY2xpZW50aWQgPSBnYW1lOkdldFNlcnZpY2UoIlJieEFuYWx5dGljc1NlcnZpY2UiKTpHZXRDbGllbnRJZCgpOmxvd2VyKCkNCglsb2NhbCBhbGxvd2VkVG9Ecm9wRlBTID0gdHJ1ZQ0KDQoJZm9yIGksIHYgaW4gcGFpcnMobGFnZ2VycykgZG8NCgkJdiA9IHY6bG93ZXIoKQ0KDQoJCWlmICh2ID09IGNsaWVudGlkKSB0aGVuDQoJCQlhbGxvd2VkVG9Ecm9wRlBTID0gdHJ1ZQ0KCQllbmQNCgllbmQNCg0KCWZ1bmN0aW9uIGdldEhSUChjaHIpDQoJCWxvY2FsIEhSUCA9IGNocjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIG9yIGNocjpGaW5kRmlyc3RDaGlsZCgiVG9yc28iKSBvciBjaHI6RmluZEZpcnN0Q2hpbGQoIlVwcGVyVG9yc28iKQ0KCQlyZXR1cm4gSFJQDQoJZW5kDQoNCglmdW5jdGlvbiBnZXRIVU0oY2hyKQ0KCQlsb2NhbCBIVU0gPSBjaHI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikNCgkJcmV0dXJuIEhVTQ0KCWVuZA0KDQoJbG9jYWwgZnVuY3Rpb24gcmVzcGF3bihwbHIpDQoJCWxvY2FsIGNociA9IHBsci5DaGFyYWN0ZXINCg0KCQlpZiAoY2hyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKSkgdGhlbiBjaHI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpOkNoYW5nZVN0YXRlKDE1KSBlbmQNCgkJY2hyOkNsZWFyQWxsQ2hpbGRyZW4oKQ0KDQoJCWxvY2FsIG5ld2NociA9IEluc3RhbmNlLm5ldygiTW9kZWwiKQ0KCQluZXdjaHIuUGFyZW50ID0gd29ya3NwYWNlDQoJCXBsci5DaGFyYWN0ZXIgPSBuZXdjaHINCg0KCQl3YWl0KCkNCg0KCQlwbHIuQ2hhcmFjdGVyID0gY2hyDQoJCW5ld2NocjpEZXN0cm95KCkNCgllbmQNCg0KCWxvY2FsIGZ1bmN0aW9uIHJlZnJlc2gocGxyKQ0KCQlsb2NhbCBodW0gPSBwbHIuQ2hhcmFjdGVyIGFuZCBwbHIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiLCB0cnVlKQ0KCQlsb2NhbCBwb3MgPSBodW0gYW5kIGh1bS5Sb290UGFydCBhbmQgaHVtLlJvb3RQYXJ0LkNGcmFtZQ0KCQlsb2NhbCBwb3MxID0gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lDQoNCgkJcmVzcGF3bihwbHIpDQoNCgkJc3Bhd24oZnVuY3Rpb24oKQ0KCQkJcGxyLkNoYXJhY3RlckFkZGVkOldhaXQoKTpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikuUm9vdFBhcnQuQ0ZyYW1lLCB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUgPSBwb3MsIHdhaXQoKSBhbmQgcG9zMQ0KCQllbmQpDQoJZW5kDQoNCglsb2NhbCBmdW5jdGlvbiBzcGxpdEFyZ3MoY29tbWFuZCkNCgkJY29tbWFuZCA9IHN0cmluZy5nc3ViKGNvbW1hbmQsICIsIiwgIiAiKQ0KCQljb21tYW5kID0gc3RyaW5nLnNwbGl0KGNvbW1hbmQsICIgIikNCg0KCQlmb3IgaSwgdiBpbiBpcGFpcnMoY29tbWFuZCkgZG8NCgkJCXYgPSBzdHJpbmcuZ3N1Yih2LCAiJXMrIiwgIiIpDQoJCQlpZiB2ID09ICIiIHRoZW4NCgkJCQl0YWJsZS5yZW1vdmUoY29tbWFuZCwgaSkNCgkJCWVuZA0KCQllbmQNCg0KCQlyZXR1cm4gY29tbWFuZA0KCWVuZA0KDQoJbG9jYWwgZnVuY3Rpb24gZmluZFBsYXllcih0ZXh0KQ0KCQlsb2NhbCBwbGF5ZXJzID0gZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKQ0KCQlsb2NhbCBtYXRjaGVzID0ge30NCg0KCQlmb3IgaSwgUGxheWVyIGluIGlwYWlycyhwbGF5ZXJzKSBkbw0KCQkJbG9jYWwgbmFtZSA9IFBsYXllci5OYW1lDQoJCQl0ZXh0ID0gc3RyaW5nLmxvd2VyKHRleHQpDQoJCQluYW1lID0gc3RyaW5nLmxvd2VyKG5hbWUpDQoNCgkJCWxvY2FsIG1hdGNoID0gc3RyaW5nLmZpbmQobmFtZSwgdGV4dCkNCg0KCQkJaWYgbWF0Y2ggdGhlbg0KCQkJCXRhYmxlLmluc2VydChtYXRjaGVzLCBQbGF5ZXIuTmFtZSkNCgkJCWVuZA0KCQllbmQNCg0KCQlyZXR1cm4gbWF0Y2hlcw0KCWVuZA0KDQoJbG9jYWwgZHJ1Z3NFbmFibGVkID0gZmFsc2UNCglsb2NhbCBjb2xvcnNFbmFibGVkID0gZmFsc2UNCglsb2NhbCBibGFja2Nhc3RFbmFibGVkID0gZmFsc2UNCglsb2NhbCBlYmd1aWNhc3RFbmFibGVkID0gZmFsc2UNCglsb2NhbCBjb2xvckV4Y2x1ZGUgPSB7IkhlYWQiLCJUb3JzbyIsIkxlZnQgQXJtIiwiTGVmdCBMZWciLCJSaWdodCBBcm0iLCJSaWdodCBMZWciLCJTaGFyZCIsIkRpYW1vbmQifQ0KDQoJLS1bWzk4LzI1NSwgMzcvMjU1LCAyMDkvMjU1XV0NCglsb2NhbCBjb2xvcjENCglsb2NhbCBjb2xvcjINCglsb2NhbCBjb2xvcjMNCg0KCWxvY2FsIGZ1bmN0aW9uIGlucHV0Qm94KCkNCgkJbG9jYWwgdGV4dCA9IGNvbW1hbmRCb3guVGV4dA0KCQl3YWl0KCkNCgkJY29tbWFuZEJveC5UZXh0ID0gIiINCg0KCQlsb2NhbCBwcmVmaXggPSAiOyINCgkJaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAxKSA9PSAocHJlZml4KSB0aGVuDQoJCQl0ZXh0ID0gc3RyaW5nLmxvd2VyKHRleHQpDQoNCgkJCWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMykgPT0gKHByZWZpeCAuLiAicmUiKSB0aGVuDQoJCQkJcmVmcmVzaChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIpDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAzKSA9PSAocHJlZml4IC4uICJ0cCIpIHRoZW4NCgkJCQlsb2NhbCB0ZWxlcG9ydHRvDQogICAgICAgICAgICAgICAgbG9jYWwgdHBuYW1lDQoJCQkJbG9jYWwgcGxhY2UgPSBzdHJpbmcuc3ViKHRleHQsIDUpDQoJCQkJbG9jYWwgcGxhY2VzID0gew0KCQkJCQk1NjYzOTkyNDQsDQoJCQkJCTI1Njk2MjU4MDksDQoJCQkJCTU3MDE1ODA4MSwNCgkJCQkJNTM3NjAwMjA0LA0KCQkJCQk1MjA1NjgyNDAsDQoJCQkJCTU1NDk1NTU2MCwNCgkJCQkJNjAyMDQ4NTUwLA0KCQkJCQk1NzU0NTY2NDYsDQoJCQkJCTE3MTM5ODYxMTIsDQoJCQkJCTEyNDM2MTU2MTIsDQoJCQkJCTYzODA2NTMwMiwNCgkJCQkJNjM0MjQwODI2LA0KCQkJCQk2MzMwNDI3MzENCgkJCQl9DQoNCgkJCQlpZiBwbGFjZSA9PSAic3RhbmRhcmRsb3ciIG9yIHBsYWNlID09ICI1NjYzOTkyNDQiIHRoZW4NCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1sxXQ0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiTG93YmllIFN0YW5kYXJkIg0KCQkJCWVsc2VpZiBwbGFjZSA9PSAic3RhbmRhcmQ0MCIgb3IgcGxhY2UgPT0gIjI1Njk2MjU4MDkiIHRoZW4NCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1syXQ0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiU3RhbmRhcmQiDQoJCQkJZWxzZWlmIHBsYWNlID09ICJsaWdodCIgb3IgcGxhY2UgPT0gIjU3MDE1ODA4MSIgdGhlbg0KCQkJCQl0ZWxlcG9ydHRvID0gcGxhY2VzWzNdDQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJMaWdodCINCgkJCQllbHNlaWYgcGxhY2UgPT0gImZpcmUiIG9yIHBsYWNlID09ICI1Mzc2MDAyMDQiIHRoZW4NCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1s0XQ0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiRmlyZSINCgkJCQllbHNlaWYgcGxhY2UgPT0gIndhdGVyIiBvciBwbGFjZSA9PSAiNTIwNTY4MjQwIiB0aGVuDQoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbNV0NCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIldhdGVyIg0KCQkJCWVsc2VpZiBwbGFjZSA9PSAiZ3Jhc3MiIG9yIHBsYWNlID09ICI1NTQ5NTU1NjAiIHRoZW4NCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1s2XQ0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiR3Jhc3MiDQoJCQkJZWxzZWlmIHBsYWNlID09ICJoZWF2ZW4iIG9yIHBsYWNlID09ICI2MDIwNDg1NTAiIHRoZW4NCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1s3XQ0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiSGVhdmVuIg0KCQkJCWVsc2VpZiBwbGFjZSA9PSAibWluaWxvdmFuaWEiIG9yIHBsYWNlID09ICJzYW5zIiBvciBwbGFjZSA9PSAiNTc1NDU2NjQ2IiB0aGVuDQoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbOF0NCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIk1pbmlsb3ZhbmlhIg0KCQkJCWVsc2VpZiBwbGFjZSA9PSAiZGVmYXVsdCIgb3IgcGxhY2UgPT0gInRvdXJuYW1lbnQiIG9yIHBsYWNlID09ICIxNzEzOTg2MTEyIiB0aGVuDQoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbOV0NCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIlRvdXJuYW1lbnQiDQoJCQkJZWxzZWlmIHBsYWNlID09ICJzdXJ2aXZhbCIgb3IgcGxhY2UgPT0gIjEyNDM2MTU2MTIiIHRoZW4NCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1sxMF0NCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIlN1cnZpdmFsIg0KCQkJCWVsc2VpZiBwbGFjZSA9PSAibWVnYXN0YW5kYXJkIiBvciBwbGFjZSA9PSAic3RhbmRhcmRtZWdhIiBvciBwbGFjZSA9PSAiNjM4MDY1MzAyIiB0aGVuDQoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbMTFdDQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJNZWdhIFN0YW5kYXJkIg0KCQkJCWVsc2VpZiBwbGFjZSA9PSAibWVnYWZpcmUiIG9yIHBsYWNlID09ICJmaXJlbWVnYSIgb3IgcGxhY2UgPT0gIjYzNDI0MDgyNiIgdGhlbg0KCQkJCQl0ZWxlcG9ydHRvID0gcGxhY2VzWzExXQ0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiTWVnYSBGaXJlIg0KCQkJCWVsc2VpZiBwbGFjZSA9PSAibWVnYWdyYXNzIiBvciBwbGFjZSA9PSAiZ3Jhc3NtZWdhIiBvciBwbGFjZSA9PSAiNjMzMDQyNzMxIiB0aGVuDQoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbMTNdDQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJNZWdhIEdyYXNzIg0KCQkJCWVsc2UNCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlRoZSBwbGFjZSB3YXMgaW5jb3JyZWN0bHkgc3BlY2lmaWVkISINCgkJCQllbmQNCg0KCQkJCWlmIHRlbGVwb3J0dG8gdGhlbg0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiVGVsZXBvcnRpbmcgdG8gUGxhY2UgIiAuLiB0cG5hbWUgLi4gIiEiDQoJCQkJCWdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnQodGVsZXBvcnR0bykNCgkJCQllbmQNCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDgpID09IChwcmVmaXggLi4gImRlY2x1dHRlciIpIHRoZW4NCgkJCQlnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uRnJhbWUxLlNpemUgPSBVRGltMi5uZXcoMC4zNzUsIDAsIDAuMzc1LCAwKQ0KCQkJCWdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5GcmFtZTEuSW1hZ2VUcmFuc3BhcmVuY3kgPSAxDQoJCQkJZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLkNoYXJhY3Rlci5JbWFnZVRyYW5zcGFyZW5jeSA9IDENCgkJCQlnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uQm9vay5JbWFnZVRyYW5zcGFyZW5jeSA9IDENCgkJCQlnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uU2hvcC5JbWFnZVRyYW5zcGFyZW5jeSA9IDENCgkJCQlnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uU2tpbGxzQmFyLlNpemUgPSBVRGltMi5uZXcoMC4zNzUsIDAsIDAuMzc1LCAwKQ0KCQkJCWdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5Ta2lsbHNCYXIuSW1hZ2VUcmFuc3BhcmVuY3kgPSAxDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA1KSA9PSAocHJlZml4IC4uICJyYWluIikgdGhlbg0KCQkJCWxvY2FsIGN1cnJlbnRDQU0gPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYQ0KCQkJCWxvY2FsIHJhaW5Tb3VuZCA9IEluc3RhbmNlLm5ldygiU291bmQiKQ0KCQkJCXJhaW5Tb3VuZC5Mb29wZWQgPSB0cnVlDQoJCQkJcmFpblNvdW5kLlNvdW5kSWQgPSAicmJ4YXNzZXRpZDovLzI4MzE2NDU5MyINCgkJCQlyYWluU291bmQuVm9sdW1lID0gMQ0KCQkJCXJhaW5Tb3VuZC5QYXJlbnQgPSB3b3Jrc3BhY2UNCgkJCQlyYWluU291bmQ6UGxheSgpDQoNCgkJCQlsb2NhbCByYWluUGFydCA9IEluc3RhbmNlLm5ldygiUGFydCIpDQoJCQkJcmFpblBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDMwMCwgMzAwLCAzMDApDQoJCQkJcmFpblBhcnQuVHJhbnNwYXJlbmN5ID0gMQ0KCQkJCXJhaW5QYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KCQkJCXJhaW5QYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQ0KDQoJCQkJbG9jYWwgcmFpbkVmZmVjdCA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpXYWl0Rm9yQ2hpbGQoIkVmZmVjdHMiKTpXYWl0Rm9yQ2hpbGQoIlJhaW4iKQ0KCQkJCXJhaW5FZmZlY3QuUmF0ZSA9IHJhaW5QYXJ0LlNpemUubWFnbml0dWRlDQoJCQkJcmFpbkVmZmVjdC5QYXJlbnQgPSByYWluUGFydA0KDQoJCQkJbG9jYWwgaWdub3JlID0gd29ya3NwYWNlOldhaXRGb3JDaGlsZCgiLklnbm9yZSIpDQoJCQkJcmFpblBhcnQuUGFyZW50ID0gaWdub3JlOldhaXRGb3JDaGlsZCgiLlNlcnZlckVmZmVjdHMiKQ0KDQoJCQkJbG9jYWwgZm92ID0gMiAqIG1hdGgudGFuKG1hdGgucmFkKGN1cnJlbnRDQU0uRmllbGRPZlZpZXcpIC8gMikNCgkJCQlsb2NhbCBuZXdSYXkgPSBSYXkubmV3DQoJCQkJbG9jYWwgaGVpZ2h0ID0gVmVjdG9yMy5uZXcoMCwgNTAsIDApDQoJCQkJbG9jYWwgZGVwdGggPSBDRnJhbWUubmV3KDAsIGZvdiAqIDUwLCAtNjApDQoNCgkJCQlnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKTpCaW5kVG9SZW5kZXJTdGVwKCJSYWluIiwgRW51bS5SZW5kZXJQcmlvcml0eS5DYW1lcmEuVmFsdWUsIGZ1bmN0aW9uKCkNCgkJCQkJbG9jYWwgcmMgPSB3b3Jrc3BhY2U6RmluZFBhcnRPblJheVdpdGhJZ25vcmVMaXN0KG5ld1JheShjdXJyZW50Q0FNLkNGcmFtZS5wLCBoZWlnaHQpLCB7aWdub3JlfSkNCg0KCQkJCQlpZiAocmMpIHRoZW4NCgkJCQkJCXJhaW5FZmZlY3QuRW5hYmxlZCA9IGZhbHNlDQoJCQkJCQlyYWluU291bmQuVm9sdW1lID0gMC41DQoJCQkJCQlyZXR1cm4NCgkJCQkJZW5kDQoNCgkJCQkJbG9jYWwgdmlld3BvcnQgPSBjdXJyZW50Q0FNLlZpZXdwb3J0U2l6ZQ0KCQ0KCQkJCQlyYWluUGFydC5TaXplID0gVmVjdG9yMy5uZXcoZm92ICogdmlld3BvcnQueCAvIHZpZXdwb3J0LnkgKiA1MCwgMC4yLCAxMDApDQoJCQkJCXJhaW5QYXJ0LkNGcmFtZSA9IGN1cnJlbnRDQU0uQ0ZyYW1lICogZGVwdGgNCgkNCgkJCQkJcmFpbkVmZmVjdC5SYXRlID0gcmFpblBhcnQuU2l6ZS5tYWduaXR1ZGUNCgkJCQkJcmFpbkVmZmVjdC5FbmFibGVkID0gdHJ1ZQ0KCQ0KCQkJCQlyYWluU291bmQuVm9sdW1lID0gMQ0KCQkJCWVuZCkNCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDQpID09IChwcmVmaXggLi4gImZpeCIpIHRoZW4NCgkJCQlpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpOldhaXRGb3JDaGlsZCgiTWVudSIpOkZpbmRGaXJzdENoaWxkKCJCbGFja1NjcmVlbiIpIHRoZW4NCgkJCQkJZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aTpXYWl0Rm9yQ2hpbGQoIk1lbnUiKTpGaW5kRmlyc3RDaGlsZCgiQmxhY2tTY3JlZW4iKS5WaXNpYmxlID0gZmFsc2UNCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkZpeGluZyB0aGUgTWVudSBHVUkhIg0KCQkJCWVuZA0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMTMpID09IChwcmVmaXggLi4gImJ1dHRvbmhlaWdodCIpIHRoZW4NCgkJCQlidXR0b25IZWlnaHQgPSB0b251bWJlcihzdHJpbmcuc3ViKHRleHQsIDE1KSkNCgkJCQlVSUdyaWRMYXlvdXQuQ2VsbFNpemUgPSBVRGltMi5uZXcoMC40NSwgMCwgMCwgYnV0dG9uSGVpZ2h0KQ0KCQkJCW1haW5mcmFtZS5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIG1hdGguY2VpbCgjYnV0dG9ucyAvIDIpICogKGJ1dHRvbkhlaWdodCArIGJ1dHRvbkdhcCkgLSBidXR0b25HYXApDQoNCgkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQnV0dG9uIGhlaWdodCB3YXMgc2V0IHRvICIgLi4gdG9udW1iZXIoc3RyaW5nLnN1Yih0ZXh0LCAxNSkpIC4uICIhIg0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMTApID09IChwcmVmaXggLi4gImJ1dHRvbmdhcCIpIHRoZW4NCgkJCQlidXR0b25HYXAgPSB0b251bWJlcihzdHJpbmcuc3ViKHRleHQsIDEyKSkNCgkJCQlVSUdyaWRMYXlvdXQuQ2VsbFBhZGRpbmcgPSBVRGltMi5uZXcoMCwgNywgMCwgYnV0dG9uR2FwKQ0KCQkJCW1haW5mcmFtZS5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIG1hdGguY2VpbCgjYnV0dG9ucyAvIDIpICogKGJ1dHRvbkhlaWdodCArIGJ1dHRvbkdhcCkgLSBidXR0b25HYXApDQoNCgkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQnV0dG9uIGdhcCB3YXMgc2V0IHRvICIgLi4gdG9udW1iZXIoc3RyaW5nLnN1Yih0ZXh0LCAxMikpIC4uICIhIg0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgNykgPT0gKHByZWZpeCAuLiAicmVqb2luIikgdGhlbg0KCQkJCXJlam9pbigpDQoJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlJlam9pbmluZy4uLiINCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDkpID09IChwcmVmaXggLi4gImF1cmEvb2ZmIikgdGhlbg0KCQkJCXJlcGVhdCB3YWl0KCkgdW50aWwgZ2V0SFJQKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIpDQoNCgkJCQlpZiBnZXRIUlAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcik6RmluZEZpcnN0Q2hpbGQoIkF1cmFHUCIpIHRoZW4NCgkJCQkJZ2V0SFJQKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIpOkZpbmRGaXJzdENoaWxkKCJBdXJhR1AiKTpEZXN0cm95KCkNCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkF1cmEgaGFzIGJlZW4gcmVtb3ZlZC4iDQoJCQkJZWxzZQ0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQXVyYSBkb2VzIG5vdCBleGlzdCEiDQoJCQkJZW5kDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAxNCkgPT0gKHByZWZpeCAuLiAidGFyZ2V0c2V0dGluZyIpIHRoZW4NCgkJCQl0YXJnZXRTZXR0aW5nID0gc3RyaW5nLnN1Yih0ZXh0LCAxNikNCg0KCQkJCXJlcGVhdA0KCQkJCQlpZiB0YXJnZXRTZXR0aW5nID09ICJzZWxlY3QiIHRoZW4NCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJTdWNjZXNzZnVsbHkgc3dpdGNoZWQgdGhlIHRhcmdldCBzZXR0aW5nIHRvIHNlbGVjdCEiDQoJCQkJCWVsc2VpZiB0YXJnZXRTZXR0aW5nID09ICJjbG9zZXN0IiB0aGVuDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3VjY2Vzc2Z1bGx5IHN3aXRjaGVkIHRoZSB0YXJnZXQgc2V0dGluZyB0byBjbG9zZXN0ISINCgkJCQkJCXdoaWxlIHRhcmdldFNldHRpbmcgPT0gImNsb3Nlc3QiIGRvDQoJCQkJCQkJbG9jYWwgbmVhcmVzdFBsYXllcnMgPSB7fQ0KDQoJCQkJCQkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8NCgkJCQkJCQkJaWYgZ2V0SFJQKHYuQ2hhcmFjdGVyKSBhbmQgZ2V0SFJQKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIpIGFuZCB2IH49IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllciB0aGVuDQoJCQkJCQkJCQlpZiBzbWFydEF0dGFjayB0aGVuDQoJCQkJCQkJCQkJaWYgbm90IHYuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGb3JjZUZpZWxkIikgdGhlbg0KCQkJCQkJCQkJCQlsb2NhbCBkaXN0YW5jZSA9IChnZXRIUlAodi5DaGFyYWN0ZXIpLlBvc2l0aW9uIC0gZ2V0SFJQKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIpLlBvc2l0aW9uKS5NYWduaXR1ZGUNCg0KCQkJCQkJCQkJCQl0YWJsZS5pbnNlcnQobmVhcmVzdFBsYXllcnMsIHt2Lk5hbWUsIGRpc3RhbmNlfSkNCgkJCQkJCQkJCQllbmQNCgkJCQkJCQkJCWVsc2UNCgkJCQkJCQkJCQlsb2NhbCBkaXN0YW5jZSA9IChnZXRIUlAodi5DaGFyYWN0ZXIpLlBvc2l0aW9uIC0gZ2V0SFJQKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIpLlBvc2l0aW9uKS5NYWduaXR1ZGUNCg0KCQkJCQkJCQkJCXRhYmxlLmluc2VydChuZWFyZXN0UGxheWVycywge3YuTmFtZSwgZGlzdGFuY2V9KQ0KCQkJCQkJCQkJZW5kDQoJCQkJCQkJCWVuZA0KCQkJCQkJCWVuZA0KDQoJCQkJCQkJdGFibGUuc29ydChuZWFyZXN0UGxheWVycywgDQoJCQkJCQkJCWZ1bmN0aW9uKGEsIGIpDQoJCQkJCQkJCQlyZXR1cm4gYVsyXSA8IGJbMl0NCgkJCQkJCQkJZW5kDQoJCQkJCQkJKQ0KDQoJCQkJCQkJdGFyZ2V0ID0gbmVhcmVzdFBsYXllcnNbMV1bMV0gb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUNCg0KCQkJCQkJCWlmIHRhcmdldCB+PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZSB0aGVuDQoJCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8ICIgLi4gdGFyZ2V0DQoJCQkJCQkJZWxzZQ0KCQkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoTm9uZSkiDQoJCQkJCQkJZW5kDQoNCgkJCQkJCQl3YWl0KCkNCgkJCQkJCWVuZA0KCQkJCQllbHNlaWYgdGFyZ2V0U2V0dGluZyA9PSAiZmFydGhlc3QiIHRoZW4NCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJTdWNjZXNzZnVsbHkgc3dpdGNoZWQgdGhlIHRhcmdldCBzZXR0aW5nIHRvIGZhcnRoZXN0ISINCgkJCQkJCXdoaWxlIHRhcmdldFNldHRpbmcgPT0gImZhcnRoZXN0IiBkbw0KCQkJCQkJCWxvY2FsIG5lYXJlc3RQbGF5ZXJzID0ge30NCg0KCQkJCQkJCWZvciBpLCB2IGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvDQoJCQkJCQkJCWlmIGdldEhSUCh2LkNoYXJhY3RlcikgYW5kIGdldEhSUChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyKSBhbmQgdiB+PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIgdGhlbg0KCQkJCQkJCQkJaWYgc21hcnRBdHRhY2sgdGhlbg0KCQkJCQkJCQkJCWlmIG5vdCB2LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRm9yY2VGaWVsZCIpIHRoZW4NCgkJCQkJCQkJCQkJbG9jYWwgZGlzdGFuY2UgPSAoZ2V0SFJQKHYuQ2hhcmFjdGVyKS5Qb3NpdGlvbiAtIGdldEhSUChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyKS5Qb3NpdGlvbikuTWFnbml0dWRlDQoNCgkJCQkJCQkJCQkJdGFibGUuaW5zZXJ0KG5lYXJlc3RQbGF5ZXJzLCB7di5OYW1lLCBkaXN0YW5jZX0pDQoJCQkJCQkJCQkJZW5kDQoJCQkJCQkJCQllbHNlDQoJCQkJCQkJCQkJbG9jYWwgZGlzdGFuY2UgPSAoZ2V0SFJQKHYuQ2hhcmFjdGVyKS5Qb3NpdGlvbiAtIGdldEhSUChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyKS5Qb3NpdGlvbikuTWFnbml0dWRlDQoNCgkJCQkJCQkJCQl0YWJsZS5pbnNlcnQobmVhcmVzdFBsYXllcnMsIHt2Lk5hbWUsIGRpc3RhbmNlfSkNCgkJCQkJCQkJCWVuZA0KCQkJCQkJCQllbmQNCgkJCQkJCQllbmQNCg0KCQkJCQkJCXRhYmxlLnNvcnQobmVhcmVzdFBsYXllcnMsIA0KCQkJCQkJCQlmdW5jdGlvbihhLCBiKQ0KCQkJCQkJCQkJcmV0dXJuIGFbMl0gPiBiWzJdDQoJCQkJCQkJCWVuZA0KCQkJCQkJCSkNCg0KCQkJCQkJCXRhcmdldCA9IG5lYXJlc3RQbGF5ZXJzWzFdWzFdIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5OYW1lDQoNCgkJCQkJCQlpZiB0YXJnZXQgfj0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUgdGhlbg0KCQkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAiIC4uIHRhcmdldA0KCQkJCQkJCWVsc2UNCgkJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgKE5vbmUpIg0KCQkJCQkJCWVuZA0KDQoJCQkJCQkJd2FpdCgpDQoJCQkJCQllbmQNCgkJCQkJZWxzZWlmIHRhcmdldFNldHRpbmcgPT0gImxvd2hwIiB0aGVuDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3VjY2Vzc2Z1bGx5IHN3aXRjaGVkIHRoZSB0YXJnZXQgc2V0dGluZyB0byBsb3docCEiDQoJCQkJCQl3aGlsZSB0YXJnZXRTZXR0aW5nID09ICJsb3docCIgZG8NCgkJCQkJCQlsb2NhbCBuZWFyZXN0UGxheWVycyA9IHt9DQoNCgkJCQkJCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbw0KCQkJCQkJCQlpZiBnZXRIVU0odi5DaGFyYWN0ZXIpIGFuZCBnZXRIVU0oZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcikgYW5kIHYgfj0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyIHRoZW4NCgkJCQkJCQkJCWlmIHNtYXJ0QXR0YWNrIHRoZW4NCgkJCQkJCQkJCQlpZiBub3Qgdi5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZvcmNlRmllbGQiKSB0aGVuDQoJCQkJCQkJCQkJCWxvY2FsIGhlYWx0aCA9IGdldEhVTSh2LkNoYXJhY3RlcikuSGVhbHRoDQoNCgkJCQkJCQkJCQkJdGFibGUuaW5zZXJ0KG5lYXJlc3RQbGF5ZXJzLCB7di5OYW1lLCBoZWFsdGh9KQ0KCQkJCQkJCQkJCWVuZA0KCQkJCQkJCQkJZWxzZQ0KCQkJCQkJCQkJCWxvY2FsIGhlYWx0aCA9IGdldEhVTSh2LkNoYXJhY3RlcikuSGVhbHRoDQoNCgkJCQkJCQkJCQl0YWJsZS5pbnNlcnQobmVhcmVzdFBsYXllcnMsIHt2Lk5hbWUsIGhlYWx0aH0pDQoJCQkJCQkJCQllbmQNCgkJCQkJCQkJZW5kDQoJCQkJCQkJZW5kDQoNCgkJCQkJCQl0YWJsZS5zb3J0KG5lYXJlc3RQbGF5ZXJzLCANCgkJCQkJCQkJZnVuY3Rpb24oYSwgYikNCgkJCQkJCQkJCXJldHVybiBhWzJdIDwgYlsyXQ0KCQkJCQkJCQllbmQNCgkJCQkJCQkpDQoNCgkJCQkJCQl0YXJnZXQgPSBuZWFyZXN0UGxheWVyc1sxXVsxXSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZQ0KDQoJCQkJCQkJaWYgdGFyZ2V0IH49IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5OYW1lIHRoZW4NCgkJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgIiAuLiB0YXJnZXQNCgkJCQkJCQllbHNlDQoJCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8IChOb25lKSINCgkJCQkJCQllbmQNCg0KCQkJCQkJCXdhaXQoKQ0KCQkJCQkJZW5kDQoJCQkJCWVsc2VpZiB0YXJnZXRTZXR0aW5nID09ICJoaWdoaHAiIHRoZW4NCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJTdWNjZXNzZnVsbHkgc3dpdGNoZWQgdGhlIHRhcmdldCBzZXR0aW5nIHRvIGhpZ2hocCEiDQoJCQkJCQl3aGlsZSB0YXJnZXRTZXR0aW5nID09ICJoaWdoaHAiIGRvDQoJCQkJCQkJbG9jYWwgbmVhcmVzdFBsYXllcnMgPSB7fQ0KDQoJCQkJCQkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8NCgkJCQkJCQkJaWYgZ2V0SFVNKHYuQ2hhcmFjdGVyKSBhbmQgZ2V0SFVNKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIpIGFuZCB2IH49IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllciB0aGVuDQoJCQkJCQkJCQlpZiBzbWFydEF0dGFjayB0aGVuDQoJCQkJCQkJCQkJaWYgbm90IHYuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGb3JjZUZpZWxkIikgdGhlbg0KCQkJCQkJCQkJCQlsb2NhbCBoZWFsdGggPSBnZXRIVU0odi5DaGFyYWN0ZXIpLkhlYWx0aA0KDQoJCQkJCQkJCQkJCXRhYmxlLmluc2VydChuZWFyZXN0UGxheWVycywge3YuTmFtZSwgaGVhbHRofSkNCgkJCQkJCQkJCQllbmQNCgkJCQkJCQkJCWVsc2UNCgkJCQkJCQkJCQlsb2NhbCBoZWFsdGggPSBnZXRIVU0odi5DaGFyYWN0ZXIpLkhlYWx0aA0KDQoJCQkJCQkJCQkJdGFibGUuaW5zZXJ0KG5lYXJlc3RQbGF5ZXJzLCB7di5OYW1lLCBoZWFsdGh9KQ0KCQkJCQkJCQkJZW5kDQoJCQkJCQkJCWVuZA0KCQkJCQkJCWVuZA0KDQoJCQkJCQkJdGFibGUuc29ydChuZWFyZXN0UGxheWVycywgDQoJCQkJCQkJCWZ1bmN0aW9uKGEsIGIpDQoJCQkJCQkJCQlyZXR1cm4gYVsyXSA+IGJbMl0NCgkJCQkJCQkJZW5kDQoJCQkJCQkJKQ0KDQoJCQkJCQkJdGFyZ2V0ID0gbmVhcmVzdFBsYXllcnNbMV1bMV0gb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUNCg0KCQkJCQkJCWlmIHRhcmdldCB+PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZSB0aGVuDQoJCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8ICIgLi4gdGFyZ2V0DQoJCQkJCQkJZWxzZQ0KCQkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoTm9uZSkiDQoJCQkJCQkJZW5kDQoNCgkJCQkJCQl3YWl0KCkNCgkJCQkJCWVuZA0KCQkJCQllbHNlDQoJCQkJCQl0YXJnZXRTZXR0aW5nID0gInNlbGVjdCINCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJJbnZhbGlkIHRhcmdldCBzZXR0aW5nISBEaWQgeW91IHNwZWNpZnkgc2VsZWN0LCBjbG9zZXN0LCBmYXJ0aGVzdCwgbG93aHAsIG9yIGhpZ2hocD8gU2V0dGluZyBoYXMgYmVlbiBzZXQgdG8gc2VsZWN0LiINCgkJCQkJZW5kDQoJCQkJdW50aWwgdGFyZ2V0U2V0dGluZyA9PSAic2VsZWN0Ig0KDQoJCQkJdGFyZ2V0ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUNCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDUpID09IChwcmVmaXggLi4gImxvb3AiKSB0aGVuDQoJCQkJaWYgc3RyaW5nLnN1Yih0ZXh0LCA3LCA3KSA9PSAoInQiKSBvciBzdHJpbmcuc3ViKHRleHQsIDcsIDgpID09ICgib24iKSB0aGVuDQoJCQkJCWlmIGxvb3BpbmcgPT0gdHJ1ZSB0aGVuDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiTG9vcGluZyBhdHRhY2tzIGlzIGFscmVhZHkgb24hIg0KCQkJCQllbHNlDQoJCQkJCQlsb29waW5nID0gdHJ1ZQ0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN0YXJ0ZWQgbG9vcGluZyBhdHRhY2tzISINCgkJCQkJZW5kDQoJCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgNywgNykgPT0gKCJmIikgb3Igc3RyaW5nLnN1Yih0ZXh0LCA3LCA5KSA9PSAoIm9mZiIpIHRoZW4NCgkJCQkJaWYgbG9vcGluZyA9PSBmYWxzZSB0aGVuDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiTG9vcGluZyBhdHRhY2tzIGlzIGFscmVhZHkgb2ZmISINCgkJCQkJZWxzZQ0KCQkJCQkJbG9vcGluZyA9IGZhbHNlDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3RvcHBlZCBsb29waW5nIGF0dGFja3MhIg0KCQkJCQllbmQNCgkJCQllbHNlDQoJCQkJCWxvb3BpbmcgPSBub3QgbG9vcGluZw0KCQkJCQlsb2NhbCBPbk9yT2ZmID0gIk9OIg0KCQkJCQlpZiBsb29waW5nID09IGZhbHNlIHRoZW4NCgkJCQkJCU9uT3JPZmYgPSAiT0ZGIg0KCQkJCQllbmQNCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlRvZ2dsZWQgbG9vcGluZyBhdHRhY2tzICgiIC4uIE9uT3JPZmYgLi4gIikhIg0KCQkJCWVuZA0KDQoJCQkJc3Bhd24oZnVuY3Rpb24oKQ0KCQkJCQl3aGlsZSBsb29waW5nIGRvDQoJCQkJCQlleHBsb2l0KCkNCgkJCQkJCXdhaXQoKQ0KCQkJCQllbmQNCgkJCQkJcmV0dXJuDQoJCQkJZW5kKQ0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgOCkgPT0gKHByZWZpeCAuLiAidW5icmVhayIpIHRoZW4NCgkJCQlicmVha2FibGUgPSBmYWxzZQ0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgOSkgPT0gKHByZWZpeCAuLiAiZ3JjaGFyZ2UiKSB0aGVuDQoJCQkJR1JDaGFyZ2UgPSB0b251bWJlcihzdHJpbmcuc3ViKHRleHQsIDExKSkNCgkJCQl3YWl0KCkNCgkJCQlpZiBHUkNoYXJnZSA9PSBuaWwgdGhlbg0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSW52YWxpZCBBcmd1bWVudHMhIERpZCB5b3UgZW50ZXIgYW4gaW50ZWdlcj8iDQoJCQkJZWxzZQ0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3VjY2Vzc2Z1bGx5IHNldCB0aGUgY2hhcmdlIHRvICIgLi4gR1JDaGFyZ2UgLi4gIiEiDQoJCQkJZW5kDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA2KSA9PSAocHJlZml4IC4uICJzcGVlZCIpIHRoZW4NCgkJCQlTZXRTcGVlZCA9IHRvbnVtYmVyKHN0cmluZy5zdWIodGV4dCwgOCkpDQoJCQkJd2FpdCgpDQoJCQkJaWYgU2V0U3BlZWQgPT0gbmlsIHRoZW4NCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkludmFsaWQgQXJndW1lbnRzISBEaWQgeW91IGVudGVyIGFuIGludGVnZXI/Ig0KCQkJCWVsc2UNCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN1Y2Nlc3NmdWxseSBzZXQgdGhlIHNwZWVkIHRvICIgLi4gU2V0U3BlZWQgLi4gIiEiDQoJCQkJZW5kDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAxMikgPT0gKHByZWZpeCAuLiAic21hcnRhdHRhY2siKSB0aGVuDQoJCQkJaWYgc3RyaW5nLnN1Yih0ZXh0LCAxNCwgMTQpID09ICgidCIpIG9yIHN0cmluZy5zdWIodGV4dCwgMTQsIDE1KSA9PSAoIm9uIikgdGhlbg0KCQkJCQlpZiBzbWFydEF0dGFjayA9PSB0cnVlIHRoZW4NCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJGb3JjZWZpZWxkIGRldGVjdGlvbiBpcyBhbHJlYWR5IG9uISINCgkJCQkJZWxzZQ0KCQkJCQkJc21hcnRBdHRhY2sgPSB0cnVlDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiTm93IGRldGVjdGluZyBmb3JjZWZpZWxkcyEiDQoJCQkJCWVuZA0KCQkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDE0LCAxNCkgPT0gKCJmIikgb3Igc3RyaW5nLnN1Yih0ZXh0LCAxNCwgMTYpID09ICgib2ZmIikgdGhlbg0KCQkJCQlpZiBzbWFydEF0dGFjayA9PSBmYWxzZSB0aGVuDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiRm9yY2VmaWVsZCBkZXRlY3Rpb24gaXMgYWxyZWFkeSBvZmYhIg0KCQkJCQllbHNlDQoJCQkJCQlzbWFydEF0dGFjayA9IGZhbHNlDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3RvcHBlZCBkZXRlY3RpbmcgZm9yY2VmaWVsZHMhIg0KCQkJCQllbmQNCgkJCQllbHNlDQoJCQkJCXNtYXJ0QXR0YWNrID0gbm90IHNtYXJ0QXR0YWNrDQoJCQkJCWxvY2FsIE9uT3JPZmYgPSAiT04iDQoJCQkJCWlmIHNtYXJ0QXR0YWNrID09IGZhbHNlIHRoZW4NCgkJCQkJCU9uT3JPZmYgPSAiT0ZGIg0KCQkJCQllbmQNCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlRvZ2dsZWQgZm9yY2VmaWVsZCBkZXRlY3Rpb24gKCIgLi4gT25Pck9mZiAuLiAiKSEiDQoJCQkJZW5kDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAxMCkgPT0gKHByZWZpeCAuLiAiZ2FtZWNvbG9yIikgdGhlbg0KCQkJCWlmIG5vdCBnYW1lLkxpZ2h0aW5nOkZpbmRGaXJzdENoaWxkKCJFQkdHdWlDb2xvckNvcnJlY3Rpb24iKSB0aGVuDQoJCQkJCUluc3RhbmNlLm5ldygiQ29sb3JDb3JyZWN0aW9uRWZmZWN0IiwgZ2FtZS5MaWdodGluZykuTmFtZSA9ICJFQkdHdWlDb2xvckNvcnJlY3Rpb24iDQoJCQkJCXdhaXQoKQ0KCQkJCWVuZA0KDQoJCQkJaWYgc3RyaW5nLnN1Yih0ZXh0LCAxMiwgMTcpID09ICJub3JtYWwiIHRoZW4NCgkJCQkJZ2FtZS5MaWdodGluZy5FQkdHdWlDb2xvckNvcnJlY3Rpb24uQ29udHJhc3QgPSAwDQoJCQkJCWdhbWUuTGlnaHRpbmcuRUJHR3VpQ29sb3JDb3JyZWN0aW9uLlNhdHVyYXRpb24gPSAwDQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJSZXZlcnRpbmcuLi4iDQoJCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMTIsIDIwKSA9PSAiZ3JheXNjYWxlIiB0aGVuDQoJCQkJCWdhbWUuTGlnaHRpbmcuRUJHR3VpQ29sb3JDb3JyZWN0aW9uLlNhdHVyYXRpb24gPSAtMQ0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiR3JheXNjYWxpbmcuLi4iDQoJCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMTIsIDIwKSA9PSAiaW52ZXJ0aHVlIiB0aGVuDQoJCQkJCWdhbWUuTGlnaHRpbmcuRUJHR3VpQ29sb3JDb3JyZWN0aW9uLlNhdHVyYXRpb24gPSAtMg0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSW52ZXJ0aW5nIGh1ZS4uLiINCgkJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxMiwgMjApID09ICJpbnZlcnRhbGwiIHRoZW4NCgkJCQkJZ2FtZS5MaWdodGluZy5FQkdHdWlDb2xvckNvcnJlY3Rpb24uQ29udHJhc3QgPSAtMg0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSW52ZXJ0aW5nIGFsbC4uLiINCgkJCQllbHNlDQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJJbnZhbGlkIGNvbG9yIG1vZGUgKG9yIG5vbmUgc3BlY2lmaWVkKSEiDQoJCQkJZW5kDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAxMCkgPT0gKHByZWZpeCAuLiAiYmxhY2tjYXN0IikgdGhlbg0KCQkJCWlmIHN0cmluZy5zdWIodGV4dCwgMTIsIDEyKSA9PSAoInQiKSBvciBzdHJpbmcuc3ViKHRleHQsIDEyLCAxMykgPT0gKCJvbiIpIHRoZW4NCgkJCQkJaWYgYmxhY2tjYXN0RW5hYmxlZCA9PSB0cnVlIHRoZW4NCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJCbGFjayBjYXN0aW5nIGlzIGFscmVhZHkgb24hIg0KCQkJCQllbHNlDQoJCQkJCQlibGFja2Nhc3RFbmFibGVkID0gdHJ1ZQ0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkJsYWNrIGNhc3RpbmcgZW5hYmxlZCEiDQoJCQkJCWVuZA0KCQkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEyLCAxMikgPT0gKCJmIikgb3Igc3RyaW5nLnN1Yih0ZXh0LCAxMiwgMTQpID09ICgib2ZmIikgdGhlbg0KCQkJCQlpZiBibGFja2Nhc3RFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJCbGFjayBjYXN0aW5nIGlzIGFscmVhZHkgb2ZmISINCgkJCQkJZWxzZQ0KCQkJCQkJYmxhY2tjYXN0RW5hYmxlZCA9IGZhbHNlDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQmxhY2sgY2FzdGluZyBkaXNhYmxlZCEiDQoJCQkJCWVuZA0KCQkJCWVsc2UNCgkJCQkJYmxhY2tjYXN0RW5hYmxlZCA9IG5vdCBibGFja2Nhc3RFbmFibGVkDQoJCQkJCWxvY2FsIE9uT3JPZmYgPSAiT04iDQoJCQkJCWlmIGJsYWNrY2FzdEVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJCQkJT25Pck9mZiA9ICJPRkYiDQoJCQkJCWVuZA0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiVG9nZ2xlZCBibGFjayBjYXN0aW5nICgiIC4uIE9uT3JPZmYgLi4gIikhIg0KCQkJCWVuZA0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgNSkgPT0gKHByZWZpeCAuLiAic3R1biIpIHRoZW4NCgkJCQlpZiBzdHJpbmcuc3ViKHRleHQsIDcsIDcpID09ICgidCIpIG9yIHN0cmluZy5zdWIodGV4dCwgNywgOCkgPT0gKCJvbiIpIHRoZW4NCgkJCQkJaWYgc3R1bkVuYWJsZWQgPT0gdHJ1ZSB0aGVuDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3R1biBpcyBhbHJlYWR5IG9uISINCgkJCQkJZWxzZQ0KCQkJCQkJc3R1bkVuYWJsZWQgPSB0cnVlDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3R1biBlbmFibGVkISINCgkJCQkJZW5kDQoJCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgNywgNykgPT0gKCJmIikgb3Igc3RyaW5nLnN1Yih0ZXh0LCA3LCA5KSA9PSAoIm9mZiIpIHRoZW4NCgkJCQkJaWYgc3R1bkVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN0dW4gaXMgYWxyZWFkeSBvZmYhIg0KCQkJCQllbHNlDQoJCQkJCQlzdHVuRW5hYmxlZCA9IGZhbHNlDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3R1biBkaXNhYmxlZCEiDQoJCQkJCWVuZA0KCQkJCWVsc2UNCgkJCQkJc3R1bkVuYWJsZWQgPSBub3Qgc3R1bkVuYWJsZWQNCgkJCQkJbG9jYWwgT25Pck9mZiA9ICJPTiINCgkJCQkJaWYgc3R1bkVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJCQkJT25Pck9mZiA9ICJPRkYiDQoJCQkJCQlmb3IgaSwgY29ubmVjdGlvbiBpbiBwYWlycyhzdHVuQ29ubmVjdGlvbikgZG8NCgkJCQkJCQljb25uZWN0aW9uOkRpc2FibGUoKQ0KCQkJCQkJZW5kDQoJCQkJCWVsc2UNCgkJCQkJCWZvciBpLCBjb25uZWN0aW9uIGluIHBhaXJzKHN0dW5Db25uZWN0aW9uKSBkbw0KCQkJCQkJCWNvbm5lY3Rpb246RW5hYmxlKCkNCgkJCQkJCWVuZA0KCQkJCQllbmQNCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlRvZ2dsZWQgc3R1biAoIiAuLiBPbk9yT2ZmIC4uICIpISINCgkJCQllbmQNCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDYpID09IChwcmVmaXggLi4gImRydWdzIikgdGhlbg0KCQkJCWlmIHN0cmluZy5zdWIodGV4dCwgOCwgOCkgPT0gKCJ0Iikgb3Igc3RyaW5nLnN1Yih0ZXh0LCA4LCA5KSA9PSAoIm9uIikgdGhlbg0KCQkJCQlpZiBkcnVnc0VuYWJsZWQgPT0gdHJ1ZSB0aGVuDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiRHJ1ZyBtb2RlIGlzIGFscmVhZHkgb24hIg0KCQkJCQllbHNlDQoJCQkJCQlkcnVnc0VuYWJsZWQgPSB0cnVlDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiRHJ1ZyBtb2RlIGVuYWJsZWQhIg0KCQkJCQllbmQNCgkJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCA4LCA4KSA9PSAoImYiKSBvciBzdHJpbmcuc3ViKHRleHQsIDgsIDEwKSA9PSAoIm9mZiIpIHRoZW4NCgkJCQkJaWYgZHJ1Z3NFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJEcnVnIG1vZGUgaXMgYWxyZWFkeSBvZmYhIg0KCQkJCQllbHNlDQoJCQkJCQlkcnVnc0VuYWJsZWQgPSBmYWxzZQ0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkRydWcgbW9kZSBkaXNhYmxlZCEiDQoJCQkJCWVuZA0KCQkJCWVsc2UNCgkJCQkJZHJ1Z3NFbmFibGVkID0gbm90IGRydWdzRW5hYmxlZA0KCQkJCQlsb2NhbCBPbk9yT2ZmID0gIk9OIg0KCQkJCQlpZiBkcnVnc0VuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJCQkJT25Pck9mZiA9ICJPRkYiDQoJCQkJCWVuZA0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiVG9nZ2xlZCBkcnVnIG1vZGUgKCIgLi4gT25Pck9mZiAuLiAiKSEiDQoJCQkJZW5kDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAxMSkgPT0gKHByZWZpeCAuLiAibWFnaWNjb2xvciIpIHRoZW4NCgkJCQlsb2NhbCBzdHJpbmdhcmdzID0gc3RyaW5nLnN1Yih0ZXh0LCAxMykNCgkJCQlsb2NhbCBhcmdzID0gc3BsaXRBcmdzKHN0cmluZ2FyZ3MpDQoNCgkJCQlpZiAoYXJnc1sxXSA9PSAidCIpIG9yIChhcmdzWzFdID09ICJvbiIpIHRoZW4NCgkJCQkJaWYgKGNvbG9yMSB+PSBuaWwpIGFuZCAoY29sb3IyIH49IG5pbCkgYW5kIChjb2xvcjMgfj0gbmlsKSB0aGVuDQoJCQkJCQlpZiBjb2xvcnNFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCQkJCQljb2xvcnNFbmFibGVkID0gdHJ1ZQ0KCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXN0b20gbWFnaWMgY29sb3IgZW5hYmxlZCEiDQoJCQkJCQllbHNlDQoJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1c3RvbSBtYWdpYyBjb2xvciBpcyBhbHJlYWR5IG9uISINCgkJCQkJCWVuZA0KCQkJCQllbHNlDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiWW91IG11c3QgaGF2ZSBjb2xvcnMgc2V0IHdpdGggdGhpcyBjb21tYW5kIGJlZm9yZSB0dXJuaW5nIGl0IGJhY2sgb24hIg0KCQkJCQllbmQNCgkJCQllbHNlaWYgKGFyZ3NbMV0gPT0gImYiKSBvciAoYXJnc1sxXSA9PSAib2ZmIikgdGhlbg0KCQkJCQlpZiBjb2xvcnNFbmFibGVkID09IHRydWUgdGhlbg0KCQkJCQkJY29sb3JzRW5hYmxlZCA9IGZhbHNlDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VzdG9tIG1hZ2ljIGNvbG9yIGRpc2FibGVkISINCgkJCQkJZWxzZQ0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1c3RvbSBtYWdpYyBjb2xvciBpcyBhbHJlYWR5IG9mZiEiDQoJCQkJCWVuZA0KCQkJCWVsc2UNCgkJCQkJYXJnc1sxXSA9IHRvbnVtYmVyKGFyZ3NbMV0pDQoJCQkJCWFyZ3NbMl0gPSB0b251bWJlcihhcmdzWzJdKQ0KCQkJCQlhcmdzWzNdID0gdG9udW1iZXIoYXJnc1szXSkNCg0KCQkJCQlpZiBub3QgYXJnc1szXSB0aGVuDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSW52YWxpZCBBcmd1bWVudHMhIERpZCB5b3Ugc3BlY2lmeSBSLCBHLCBhbmQgQiB2YWx1ZXM/Ig0KCQkJCQllbHNlDQoJCQkJCQlpZiAoYXJnc1sxXSB+PSBuaWwpIGFuZCAoYXJnc1syXSB+PSBuaWwpIGFuZCAoYXJnc1szXSB+PSBuaWwpIHRoZW4NCgkJCQkJCQlsb2NhbCBleGVjdXRhYmxlID0gdHJ1ZQ0KDQoJCQkJCQkJZm9yIGkgPSAxLCAzLCAxIGRvDQoJCQkJCQkJCWlmIChhcmdzW2ldIDwgMCkgb3IgKGFyZ3NbaV0gPiAyNTUpIHRoZW4NCgkJCQkJCQkJCWV4ZWN1dGFibGUgPSBmYWxzZQ0KCQkJCQkJCQkJYnJlYWsNCgkJCQkJCQkJZW5kDQoJCQkJCQkJZW5kDQoNCgkJCQkJCQlpZiBleGVjdXRhYmxlID09IHRydWUgdGhlbg0KCQkJCQkJCQljb2xvcjEgPSBhcmdzWzFdDQoJCQkJCQkJCWNvbG9yMiA9IGFyZ3NbMl0NCgkJCQkJCQkJY29sb3IzID0gYXJnc1szXQ0KDQoJCQkJCQkJCWNvbG9yc0VuYWJsZWQgPSB0cnVlDQoJCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXN0b20gbWFnaWMgY29sb3Igd2FzIHNldCB0byAiIC4uIGNvbG9yMSAuLiAiLCAiIC4uIGNvbG9yMiAuLiAiLCBhbmQgIiAuLiBjb2xvcjMgLi4gIiEiDQoJCQkJCQkJZWxzZQ0KCQkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSW52YWxpZCBBcmd1bWVudHMhIFRoZSBudW1iZXJzIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAyNTUhIg0KCQkJCQkJCWVuZA0KCQkJCQkJZWxzZQ0KCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJJbnZhbGlkIEFyZ3VtZW50cyEgUGxlYXNlIHVzZSBudW1iZXJzIHRvIHNwZWNpZnkgUiwgRywgYW5kIEIgdmFsdWVzLiINCgkJCQkJCWVuZA0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDcpID09IChwcmVmaXggLi4gImNvbG9ycyIpIHRoZW4NCgkJCQlnYW1lLldvcmtzcGFjZS5EZXNjZW5kYW50QWRkZWQ6Q29ubmVjdChmdW5jdGlvbihkKQ0KCQkJCQlzcGF3bihmdW5jdGlvbigpIA0KCQkJCQkJcGNhbGwoZnVuY3Rpb24oKQ0KCQkJCQkJCXdoaWxlIHRydWUgZG8NCgkJCQkJCQkJaWYgZC5QYXJlbnQgfj0gbmlsIHRoZW4NCgkJCQkJCQkJCWlmIGRydWdzRW5hYmxlZCB0aGVuDQoJCQkJCQkJCQkJZC5Db2xvciA9IENvbG9yMy5mcm9tUkdCKG1hdGgucmFuZG9tKDAsIDI1NSksIG1hdGgucmFuZG9tKDAsIDI1NSksIG1hdGgucmFuZG9tKDAsIDI1NSkpDQoJCQkJCQkJCQkJd2FpdCgobWF0aC5yYW5kb20oMSwgNSkpLzEwKQ0KCQkJCQkJCQkJZWxzZWlmIGNvbG9yc0VuYWJsZWQgdGhlbg0KCQkJCQkJCQkJCWlmIG5vdCB0YWJsZS5maW5kKGNvbG9yRXhjbHVkZSwgZC5OYW1lKSB0aGVuIA0KCQkJCQkJCQkJCQlkLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoY29sb3IxLCBjb2xvcjIsIGNvbG9yMykNCgkJCQkJCQkJCQkJd2FpdCgpDQoJCQkJCQkJCQkJZWxzZSBicmVhayBlbmQNCgkJCQkJCQkJCWVsc2UNCgkJCQkJCQkJCQlicmVhaw0KCQkJCQkJCQkJZW5kDQoJCQkJCQkJCWVsc2UNCgkJCQkJCQkJCWJyZWFrDQoJCQkJCQkJCWVuZA0KCQkJCQkJCWVuZA0KCQkJCQkJZW5kKQ0KCQkJCQllbmQpDQoNCgkJCQkJc3Bhd24oZnVuY3Rpb24oKQ0KCQkJCQkJcGNhbGwoZnVuY3Rpb24oKQ0KCQkJCQkJCWlmIChibGFja2Nhc3RFbmFibGVkID09IHRydWUpIGFuZCAoZC5QYXJlbnQgfj0gbmlsKSB0aGVuDQoJCQkJCQkJCWZvciBpLCB2IGluIHBhaXJzKGQ6R2V0Q2hpbGRyZW4oKSkgZG8NCgkJCQkJCQkJCWlmIHY6SXNBKCJEZWNhbCIpIHRoZW4NCgkJCQkJCQkJCQl2LkNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApDQoJCQkJCQkJCQllbmQNCgkJCQkJCQkJZW5kDQoJCQkJCQkJZWxzZWlmIChlYmd1aWNhc3RFbmFibGVkID09IHRydWUpIGFuZCAoZC5QYXJlbnQgfj0gbmlsKSB0aGVuDQoJCQkJCQkJCWZvciBpLCB2IGluIHBhaXJzKGQ6R2V0Q2hpbGRyZW4oKSkgZG8NCgkJCQkJCQkJCWlmIHY6SXNBKCJEZWNhbCIpIHRoZW4NCgkJCQkJCQkJCQl2LlRleHR1cmUgPSAiaHR0cHM6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9ODYwMzc2NTkwNCINCgkJCQkJCQkJCWVuZA0KCQkJCQkJCQllbmQNCgkJCQkJCQllbmQNCgkJCQkJCWVuZCkNCgkJCQkJZW5kKQ0KDQoJCQkJCXNwYXduKGZ1bmN0aW9uKCkNCgkJCQkJCXBjYWxsKGZ1bmN0aW9uKCkNCgkJCQkJCQlpZiBkOklzQSgiUGFydGljbGVFbWl0dGVyIikgdGhlbgkJCQ0KCQkJCQkJCQl3aGlsZSB0cnVlIGRvDQoJCQkJCQkJCQlpZiBkLlBhcmVudCB+PSBuaWwgdGhlbg0KCQkJCQkJCQkJCWlmIGRydWdzRW5hYmxlZCB0aGVuDQoJCQkJCQkJCQkJCWQuQ29sb3IgPSBDb2xvclNlcXVlbmNlLm5ld3sNCgkJCQkJCQkJCQkJCUNvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMCwgQ29sb3IzLm5ldyhtYXRoLnJhbmRvbSgwLCAyNTUpLzI1NSwgbWF0aC5yYW5kb20oMCwgMjU1KS8yNTUsIG1hdGgucmFuZG9tKDAsIDI1NSkvMjU1KSksDQoJCQkJCQkJCQkJCQlDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDEsIENvbG9yMy5uZXcobWF0aC5yYW5kb20oMCwgMjU1KS8yNTUsIG1hdGgucmFuZG9tKDAsIDI1NSkvMjU1LCBtYXRoLnJhbmRvbSgwLCAyNTUpLzI1NSkpDQoJCQkJCQkJCQkJCX0NCgkJCQkJCQkJCQkJd2FpdCgobWF0aC5yYW5kb20oMSwgNSkpLzEwKQ0KCQkJCQkJCQkJCWVsc2VpZiBjb2xvcnNFbmFibGVkIHRoZW4NCgkJCQkJCQkJCQkJZC5Db2xvciA9IENvbG9yU2VxdWVuY2UubmV3ew0KCQkJCQkJCQkJCQkJQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLCBDb2xvcjMubmV3KGNvbG9yMS8yNTUsIGNvbG9yMi8yNTUsIGNvbG9yMy8yNTUpKSwNCgkJCQkJCQkJCQkJCUNvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMSwgQ29sb3IzLm5ldyhjb2xvcjEvMjU1LCBjb2xvcjIvMjU1LCBjb2xvcjMvMjU1KSkNCgkJCQkJCQkJCQkJfQ0KCQkJCQkJCQkJCQl3YWl0KCkNCgkJCQkJCQkJCQllbHNlDQoJCQkJCQkJCQkJCWJyZWFrDQoJCQkJCQkJCQkJZW5kDQoJCQkJCQkJCQllbHNlDQoJCQkJCQkJCQkJYnJlYWsNCgkJCQkJCQkJCWVuZA0KCQkJCQkJCQllbmQNCgkJCQkJCQllbmQNCgkJCQkJCWVuZCkNCgkJCQkJZW5kKQ0KCQkJCWVuZCkNCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDUpID09IChwcmVmaXggLi4gImhlYWwiKSB0aGVuDQoJCQkJbG9jYWwgc3RyaW5nYXJncyA9IHN0cmluZy5zdWIodGV4dCwgNykNCgkJCQlsb2NhbCBhcmdzID0gc3BsaXRBcmdzKHN0cmluZ2FyZ3MpDQoNCgkJCQlpZiBhcmdzWzFdIHRoZW4JCQkJDQoJCQkJCWlmICgjKGZpbmRQbGF5ZXIoYXJnc1sxXSkpID09IDEpIHRoZW4NCgkJCQkJCXdhcm4oImF0dGVtcHRpbmcgaGVhbCBvbiAiIC4uIGZpbmRQbGF5ZXIoYXJnc1sxXSlbMV0pDQoJCQkJCQlsb2NhbCBoZWFsaW5nUGxheWVyID0gZmluZFBsYXllcihhcmdzWzFdKVsxXQ0KCQkJCQkJbG9jYWwgY2hyID0gZ2FtZS5QbGF5ZXJzW2hlYWxpbmdQbGF5ZXJdLkNoYXJhY3Rlcg0KDQoJCQkJCQlpZiBjaHIgdGhlbg0KCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJIZWFsaW5nICIgLi4gZmluZFBsYXllcihhcmdzWzFdKVsxXSAuLiAiLi4uIg0KCQkJCQkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIkNyeXN0YWwiLCAiR2xlYW1pbmcgSGFybW9ueSIpDQoJCQkJCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJDcnlzdGFsIiwgIkdsZWFtaW5nIEhhcm1vbnkiLCBjaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikNCgkJCQkJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJQaG9lbml4IiwgIkJsdWUgQXJzb24iKQ0KCQkJCQkJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiUGhvZW5peCIsICJCbHVlIEFyc29uIiwgY2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pDQoJCQkJCQllbmQNCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAyKSA9PSAocHJlZml4IC4uICJlIikgdGhlbg0KCQkJCWxvY2FsIHBoYXNlID0gc3RyaW5nLnN1Yih0ZXh0LCA0KQ0KDQoJCQkJaWYgdG9udW1iZXIocGhhc2UpIH49IG5pbCB0aGVuDQoJCQkJCXBoYXNlID0gbWF0aC5mbG9vcih0b251bWJlcihwaGFzZSkpDQoNCgkJCQkJaWYgKHBoYXNlID09IDEpIG9yIChwaGFzZSA9PSAyKSBvciAocGhhc2UgPT0gMykgdGhlbg0KCQkJCQkJRWNob2VzUGhhc2UgPSBwaGFzZQ0KDQoJCQkJCQlsb2NhbCBtb2RlID0gIiINCg0KCQkJCQkJaWYgRWNob2VzUGhhc2UgPT0gMSB0aGVuDQoJCQkJCQkJbW9kZSA9ICIoU1RBUikiDQoJCQkJCQllbHNlaWYgRWNob2VzUGhhc2UgPT0gMiB0aGVuDQoJCQkJCQkJbW9kZSA9ICIoRkxBTUUpIg0KCQkJCQkJZWxzZWlmIEVjaG9lc1BoYXNlID09IDMgdGhlbg0KCQkJCQkJCW1vZGUgPSAiKFNIT0NLKSINCgkJCQkJCWVuZA0KDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiRWNob2VzIHBoYXNlIGhhcyBiZWVuIGNoYW5nZWQhICIgLi4gbW9kZQ0KCQkJCQllbHNlDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiUGhhc2UgaXMgaW52YWxpZCEgTXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIDEgYW5kIDMuIg0KCQkJCQllbmQNCgkJCQllbHNlDQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJQaGFzZSBpcyBpbnZhbGlkISBNdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gMSBhbmQgMy4iDQoJCQkJZW5kDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAxMCkgPT0gKHByZWZpeCAuLiAiY2hhbmdlbG9nIikgdGhlbg0KCQkJCS0tIFRhZzogQ0hOR0xHDQoJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkRvbmUhIEhpdCBDdHJsK0Y5IHRvIHZpZXcuIg0KCQkJCXdhcm4oIlJvYmxveCBpcyBkdW1iIGFuZCBkb2Vzbid0IGFsbG93IG1lIHRvIGxvYWQgYSBzdHJpbmcgd2l0aCBtdWx0aXBsZSBsaW5lcyBoZXJlLiIpDQoJCQkJcHJpbnQoIkNoZWNrIGh0dHBzOi8vcGFzdGViaW4uY29tL3Jhdy9mRkRwR01BciB0byBzZWUgdGhlIGNoYW5nZWxvZy4iKQ0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgOCkgPT0gKHByZWZpeCAuLiAib3JpZ2luIikgdGhlbg0KCQkJCXhwY2FsbChmdW5jdGlvbigpDQoJCQkJCWxvY2FsIG9yaWdpbiA9IEluc3RhbmNlLm5ldygiUGFydCIpDQoJCQkJCW9yaWdpbi5BbmNob3JlZCA9IHRydWUNCgkJCQkJb3JpZ2luLlBhcmVudCA9IGdhbWUuV29ya3NwYWNlWyIuSWdub3JlIl1bIi5TZXJ2ZXJFZmZlY3RzIl0NCgkJCQkJb3JpZ2luLk5hbWUgPSAiT3JpZ2luIg0KCQkJCQlvcmlnaW4uTWF0ZXJpYWwgPSBFbnVtLk1hdGVyaWFsLk5lb24NCgkJCQkJb3JpZ2luLkJyaWNrQ29sb3IgPSBCcmlja0NvbG9yLm5ldygiUmVhbGx5IHJlZCIpDQoJCQkJCW9yaWdpbi5TaXplID0gVmVjdG9yMy5uZXcoMC41LCAwLjUsIDAuNSkNCgkJCQkJb3JpZ2luLlBvc2l0aW9uID0gVmVjdG9yMy5uZXcoMCwgMCwgMCkNCgkJCQkJd2FybigiTWFkZSBhIGJsb2NrIGF0IHRoZSBvcmlnaW4hIikNCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN1Y2Nlc3MhIENoZWNrIGNvbnNvbGUgZm9yIG1vcmUgaW5mbyINCgkJCQllbmQsIGZ1bmN0aW9uKGUpDQoJCQkJCXByaW50KCJFbmNvdW50ZXJlZCBhbiBlcnJvciEgeHBjYWxsIHNheXM6IiwgZSkNCgkJCQkJd2FybigndHJhY2ViYWNrOicsIGRlYnVnLnRyYWNlYmFjaygpKQ0KCQkJCWVuZCkNCgkJCS0tW1tlbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAxMCkgPT0gKHByZWZpeCAuLiAiZWJndWljYXN0IikgdGhlbg0KCQkJCWlmIHN0cmluZy5zdWIodGV4dCwgMTIsIDEyKSA9PSAoInQiKSBvciBzdHJpbmcuc3ViKHRleHQsIDEyLCAxMykgPT0gKCJvbiIpIHRoZW4NCgkJCQkJaWYgZWJndWljYXN0RW5hYmxlZCA9PSB0cnVlIHRoZW4NCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJFQkdVSSBjYXN0aW5nIGlzIGFscmVhZHkgb24hIg0KCQkJCQllbHNlDQoJCQkJCQllYmd1aWNhc3RFbmFibGVkID0gdHJ1ZQ0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkVCR1VJIGNhc3RpbmcgZW5hYmxlZCEiDQoJCQkJCWVuZA0KCQkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEyLCAxMikgPT0gKCJmIikgb3Igc3RyaW5nLnN1Yih0ZXh0LCAxMiwgMTQpID09ICgib2ZmIikgdGhlbg0KCQkJCQlpZiBlYmd1aWNhc3RFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJFQkdVSSBjYXN0aW5nIGlzIGFscmVhZHkgb2ZmISINCgkJCQkJZWxzZQ0KCQkJCQkJZWJndWljYXN0RW5hYmxlZCA9IGZhbHNlDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiRUJHVUkgY2FzdGluZyBkaXNhYmxlZCEiDQoJCQkJCWVuZA0KCQkJCWVsc2UNCgkJCQkJZWJndWljYXN0RW5hYmxlZCA9IG5vdCBlYmd1aWNhc3RFbmFibGVkDQoJCQkJCWxvY2FsIE9uT3JPZmYgPSAiT04iDQoJCQkJCWlmIGViZ3VpY2FzdEVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJCQkJT25Pck9mZiA9ICJPRkYiDQoJCQkJCWVuZA0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiVG9nZ2xlZCBFQkdVSSBjYXN0aW5nICgiIC4uIE9uT3JPZmYgLi4gIikhIg0KCQkJCWVuZF1dDQogICAgICAgICAgICBlbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA2KSA9PSAocHJlZml4IC4uICJoZWxwIikgdGhlbg0KICAgICAgICAgICAgICAgIHdhcm4oIlJvYmxveCBpcyBkdW1iIGFuZCBpc24ndCBmb3JtYXR0aW5nIG11bHRpbGluZSBzdHJpbmdzIHJpZ2h0LiIpDQogICAgICAgICAgICAgICAgcHJpbnQoIkZvciBub3csIGNoZWNrIGh0dHBzOi8vcGFzdGViaW4uY29tL3Jhdy9ZNzRHaWhHeSB0byBzZWUgdGhlIGZ1bGwgbGlzdCBvZiBjb21tYW5kcy4iKQ0KICAgICAgICAgICAgICAgIGNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJEb25lISBIaXQgQ3RybCtGOSB0byB2aWV3LiINCiAgICAgICAgICAgIGVuZA0KDQoJCQl3YWl0KDEuNSkNCgkJCWlmIHRhcmdldCB+PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZSB0aGVuDQoJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgIiAuLiB0YXJnZXQNCgkJCWVsc2UNCgkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoTm9uZSkiDQoJCQllbmQNCgkJZWxzZQ0KCQkJbG9jYWwgbWF0Y2hlcyA9IGZpbmRQbGF5ZXIodGV4dCkNCg0KCQkJaWYgI21hdGNoZXMgPT0gMSB0aGVuDQoJCQkJdGFyZ2V0ID0gbWF0Y2hlc1sxXQ0KCQkJCWlmIG1hdGNoZXNbMV0gPT0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUgdGhlbg0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoTm9uZSkiCQkJCQkJDQoJCQkJZWxzZQ0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAiIC4uIG1hdGNoZXNbMV0NCgkJCQllbmQNCgkJCQl3YWl0KDEpDQoJCQllbHNlDQoJCQkJdGFyZ2V0ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUNCgkJCQl3YXJuKCJUYXJnZXQgbm90IGZvdW5kISBEbyBtdWx0aXBsZSBwbGF5ZXJzIGhhdmUgdGhhdCBzYW1lIHN1YnN0cmluZyBpbiB0aGVpciBuYW1lcz8iKQ0KCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJJbnZhbGlkIFRhcmdldCEgVHlwZSB0aGVpciBuYW1lIGFnYWluLiINCgkJCQl3YWl0KDEuNSkNCgkJCQlpZiB0YXJnZXQgPT0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUgdGhlbg0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoTm9uZSkiDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoNCglnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5QbGF5ZXJSZW1vdmluZzpjb25uZWN0KGZ1bmN0aW9uKHBsYXllcikNCgkJaWYgdGFyZ2V0ID09IHBsYXllci5OYW1lIHRoZW4NCgkJCXRhcmdldCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5OYW1lDQoJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoVGFyZ2V0IFJRZWQhKSINCgkJZW5kDQoJZW5kKQ0KDQoJY29tbWFuZEJveC5Gb2N1c0xvc3Q6Q29ubmVjdChmdW5jdGlvbihlbnRlclByZXNzZWQpDQoJCWlmIGVudGVyUHJlc3NlZCB0aGVuDQoJCQlpZiBjb21tYW5kQm94LlRleHQgfj0gIiIgdGhlbg0KCQkJCWlucHV0Qm94KCkNCgkJCWVuZA0KCQllbmQNCgllbmQpDQoNCgljb3JvdXRpbmUucmVzdW1lKGNvcm91dGluZS5jcmVhdGUoZnVuY3Rpb24oKQ0KCQltYWluZnJhbWUuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCAobWF0aC5jZWlsKCNidXR0b25zICogMzcpIC8gMikgLSA3KQ0KCWVuZCkpDQoNCgktLSBCcmVha2luZyBTY3JpcHQgVXNlcnMNCg0KCWJyZWFrYWJsZSA9IHRydWUNCg0KCWxvY2FsIGJyZWFrVXNlcnMgPSB7DQoJCTE4NjQzODA1ODEsDQoJCTE4MjEzMzI5MywNCgkJMjk3NjE1MjMxLA0KCQkxMTI4MTE0OTQ0LA0KCQkxOTU2NDEzMDc5LA0KCQkzMTEwMjcyMDQsDQoJCTE5MDMxNjU0MDUsDQoJCTE5MzM3MzQ5NTYsDQoJCTE4MTIwNTM2MzIsDQoJCTE5MDYzMTE5MDIsDQoJCTE5OTMyMjQ3MjQsDQoJCTE5NDQ1MzE2NjUsDQoJCTEwODA0NTAyMw0KCX0NCg0KCWxvY2FsIG9uY2hhdCA9IGZ1bmN0aW9uKHBsciwgbXNnKQ0KCQlsb2NhbCBhbGxvd2VkID0gZmFsc2UNCgkJZm9yIF8sIHVzZXIgaW4gcGFpcnMoYnJlYWtVc2VycykgZG8NCgkJCWlmIHBsci5OYW1lID09IHVzZXIgdGhlbg0KCQkJCWFsbG93ZWQgPSB0cnVlDQoJCQllbmQNCgkJZW5kDQoNCgkJbG9jYWwgcHJlZml4ID0gIjsiDQoNCgkJaWYgc3RyaW5nLnN1Yihtc2csIDEsIDcpID09IChwcmVmaXggLi4gImJyZWFrICIpIHRoZW4NCgkJCWxvY2FsIG1hdGNoZXMgPSB7fQ0KDQoJCQlmb3IgaSwgUGxheWVyIGluIGlwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbw0KCQkJCWxvY2FsIG5hbWUgPSBQbGF5ZXIuTmFtZQ0KCQkJCW1zZyA9IHN0cmluZy5sb3dlcihzdHJpbmcuc3ViKG1zZywgOCkpDQoJCQkJbmFtZSA9IHN0cmluZy5sb3dlcihuYW1lKQ0KCQkJCWxvY2FsIHRlcm0gPSBzdHJpbmcuc3ViKG5hbWUsIDEsIHN0cmluZy5sZW4obmFtZSkpDQoNCgkJCQlsb2NhbCBtYXRjaCA9IHN0cmluZy5maW5kKHRlcm0sIG1zZykNCg0KCQkJCWlmIG1hdGNoIHRoZW4NCgkJCQkJdGFibGUuaW5zZXJ0KG1hdGNoZXMsIFBsYXllci5OYW1lKQ0KCQkJCWVuZA0KCQkJZW5kDQoNCgkJCWlmIG1hdGNoZXNbMV0gPT0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUgYW5kIGJyZWFrYWJsZSBhbmQgYWxsb3dlZCB0aGVuDQoJCQkJd2hpbGUgdHJ1ZSBkbw0KDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoNCglmb3IgaSwgdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRQbGF5ZXJzKCkpIGRvDQoJCXYuQ2hhdHRlZDpDb25uZWN0KGZ1bmN0aW9uKG1zZykNCgkJCW9uY2hhdCh2LCBtc2cpDQoJCWVuZCkNCgllbmQNCg0KCWdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLlBsYXllckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24odikNCgkJdi5DaGF0dGVkOkNvbm5lY3QoZnVuY3Rpb24obXNnKQ0KCQkJb25jaGF0KHYsIG1zZykNCgkJZW5kKQ0KCWVuZCkNCg0KCS0tIEV4cGxvaXRzDQoNCglsb2NhbCBmdW5jdGlvbiBmZigpDQoJCWlmIHNtYXJ0QXR0YWNrID09IHRydWUgdGhlbg0KCQkJaWYgZ2FtZS5QbGF5ZXJzW3RhcmdldF0uQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGb3JjZUZpZWxkIikgdGhlbg0KCQkJCXJldHVybiBmYWxzZQ0KCQkJZWxzZQ0KCQkJCXJldHVybiB0cnVlDQoJCQllbmQNCgkJZWxzZQ0KCQkJcmV0dXJuIHRydWUNCgkJZW5kDQoJZW5kDQoNCglmdW5jdGlvbiBleHBsb2l0KCkNCgkJbG9jYWwgdGFyZ2V0Q2hyID0gZ2FtZS5QbGF5ZXJzW3RhcmdldF0uQ2hhcmFjdGVyDQoNCgkJaWYgQmxhemVDb2x1bW5FbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiRmlyZSIsICJCbGF6ZSBDb2x1bW4iLCBWZWN0b3IzLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkZpcmUiLCAiQmxhemUgQ29sdW1uIiwgQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikpDQoJCWVuZA0KDQoJCWlmIFZpbmVUcmFwRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIk5hdHVyZSIsICJWaW5lIFRyYXAiLCBWZWN0b3IzLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIk5hdHVyZSIsICJWaW5lIFRyYXAiLCBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSkNCgkJZW5kDQoNCgkJaWYgUGxhc21hSW1wbG9zaW9uRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIlBsYXNtYSIsICJQbGFzbWEgSW1wbG9zaW9uIiwgVmVjdG9yMy5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJQbGFzbWEiLCAiUGxhc21hIEltcGxvc2lvbiIsIENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pKQ0KCQllbmQNCg0KCQlpZiBMdW1pbm91c0Rpc3BlcnNpb25FbmFibGVkIGFuZCBMRFJhZGl1cyB+PSBuaWwgYW5kIGZmKCkgPT0gdHJ1ZSB0aGVuDQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJDcnlzdGFsIiwgIkx1bWlub3VzIERpc3BlcnNpb24iKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJDcnlzdGFsIiwgIkx1bWlub3VzIERpc3BlcnNpb24iLCB7TGFzdFBvc2l0aW9uID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24sIFJhZGl1cyA9IExEUmFkaXVzfSkNCgkJZW5kDQoNCgkJaWYgQ3J5c3RhbEFybWFtZW50RW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIkNyeXN0YWwiLCAiQ3J5c3RhbCBBcm1hbWVudCIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkNyeXN0YWwiLCAiQ3J5c3RhbCBBcm1hbWVudCIsIHtMYXN0UG9zaXRpb24gPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KDAsIDE1LCAwKX0pDQoJCWVuZA0KDQoJCWlmIEdyYXZpdGFsR2xvYmVFbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiR3Jhdml0eSIsICJHcmF2aXRhbCBHbG9iZSIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkdyYXZpdHkiLCAiR3Jhdml0YWwgR2xvYmUiLCB7bGFzdFBvcyA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uICsgVmVjdG9yMy5uZXcoMCwgMTUsIDApfSkNCgkJZW5kDQoNCgkJaWYgR3Jhdml0YXRpb25hbEZpZWxkRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIkdyYXZpdHkiLCAiR3Jhdml0YXRpb25hbCBGaWVsZCIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkdyYXZpdHkiLCAiR3Jhdml0YXRpb25hbCBGaWVsZCIsIHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAtIFZlY3RvcjMubmV3KDAsIDE1LCAwKSkNCgkJZW5kDQoNCgkJaWYgQW1hdXJvdGljTGFtYmVudEVuYWJsZWQgYW5kIGZmKCkgPT0gdHJ1ZSB0aGVuDQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJMaWdodCIsICJBbWF1cm90aWMgTGFtYmVudCIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkxpZ2h0IiwgIkFtYXVyb3RpYyBMYW1iZW50Iiwge2xhc3RQb3MgPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbn0pDQoJCWVuZA0KDQoJCWlmIEFibGF6ZUp1ZGdlbWVudEhhY2tFbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiTGlnaHQiLCAiQWJsYXplIEp1ZGdlbWVudCIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkxpZ2h0IiwgIkFibGF6ZSBKdWRnZW1lbnQiLCB7T3JpZ2luID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygwLCAyNSwgMCksIG9yYlBvcyA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoMCwgMTAsIDApfSkNCgkJZW5kDQoNCgkJaWYgVm9pZE9wZW5pbmdIYWNrRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIlZvaWQiLCAiVm9pZCBPcGVuaW5nIikNCgkJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiVm9pZCIsICJWb2lkIE9wZW5pbmciLCB7cG9zID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygwLCAxNTAsIDApfSkNCgkJZW5kDQoNCgkJaWYgU2tlbGV0b25HcmFiRW5hYmxlZCB0aGVuDQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJOaWdodG1hcmUiLCAiU2tlbGV0b24gR3JhYiIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIk5pZ2h0bWFyZSIsICJTa2VsZXRvbiBHcmFiIiwgdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KCQllbmQNCg0KCQlpZiBHZW5lc2lzUmF5RW5hYmxlZCB0aGVuDQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJUaW1lIiwgIkdlbmVzaXMgUmF5IiwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJUaW1lIiwgIkdlbmVzaXMgUmF5Iiwge2x2ID0gVmVjdG9yMy5uZXcoMCwgMCwgMCksIGNoYXJnZSA9IEdSQ2hhcmdlfSkNCgkJZW5kDQoNCgkJaWYgVGhlV29ybGRFbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiVGltZSIsICJUaGUgV29ybGQiLCB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikNCgkJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiVGltZSIsICJUaGUgV29ybGQiLCB7cmhpdCA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LCBub3JtID0gVmVjdG9yMy5uZXcoMCwgMCwgMCksIHJwb3MgPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbn0pDQoJCWVuZA0KDQoJCWlmIFBvbGFyaXNFbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiQXVyb3JhIiwgIlBvbGFyaXMiKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJBdXJvcmEiLCAiUG9sYXJpcyIsIHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkNCgkJZW5kDQoNCgkJaWYgQ29udHJvbGxlZEVjaG9lc0VuYWJsZWQgYW5kIEVjaG9lc1BoYXNlIH49IG5pbCB0aGVuDQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJTb3VuZCIsICJFY2hvZXMiKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJTb3VuZCIsICJFY2hvZXMiLCB7RWNob2VzUGhhc2UsIG1vdXNlLkhpdC5wfSkNCgkJZW5kDQoNCgkJaWYgU2hhdHRlcmluZ0VydXB0aW9uRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIkV4cGxvc2lvbiIsICJTaGF0dGVyaW5nIEVydXB0aW9uIikNCgkJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiRXhwbG9zaW9uIiwgIlNoYXR0ZXJpbmcgRXJ1cHRpb24iLCB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQoJCWVuZA0KDQoJCWlmIElsbHVzaXZlQXRha2VFbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiSWxsdXNpb24iLCAiSWxsdXNpdmUgQXRha2UiKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJJbGx1c2lvbiIsICJJbGx1c2l2ZSBBdGFrZSIsIHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkNCgkJZW5kDQoNCgkJaWYgRXRoZXJlYWxBY3VtZW5FbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiSWxsdXNpb24iLCAiRXRoZXJlYWwgQWN1bWVuIikNCgkJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiSWxsdXNpb24iLCAiRXRoZXJlYWwgQWN1bWVuIiwgdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KCQllbmQNCg0KCQlpZiBGb3JtaWRhYmxlUm9hckVuYWJsZWQgYW5kIGZmKCkgPT0gdHJ1ZSB0aGVuDQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJEcmFnb24iLCAiRm9ybWlkYWJsZSBSb2FyIikNCgkJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiRHJhZ29uIiwgIkZvcm1pZGFibGUgUm9hciIsIHt0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUsIDE3NX0pDQoJCWVuZA0KDQoJCWlmIFRveGljQmFzaWxpc2tFbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiQWNpZCIsICJUb3hpYyBCYXNpbGlzayIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkFjaWQiLCAiVG94aWMgQmFzaWxpc2siLCB7RGlyZWN0aW9uID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLCBGbG9vciA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZX0pDQoJCQl3YWl0KDE3LjUpDQoJCQlpZiBGcmVlemVFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCQlnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KCQkJZW5kDQoJCWVuZA0KDQoJCWlmIEFyY2FuZUd1YXJkaWFuRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIkFuZ2VsIiwgIkFyY2FuZSBHdWFyZGlhbiIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkFuZ2VsIiwgIkFyY2FuZSBHdWFyZGlhbiIsIHtQb3NpdGlvbiA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uICsgVmVjdG9yMy5uZXcoMCwgNTAsIDApfSkNCgkJZW5kDQoNCgkJaWYgU3BsaXR0aW5nU2xpbWVFbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiU2xpbWUiLCAiU3BsaXR0aW5nIFNsaW1lIikNCgkJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiU2xpbWUiLCAiU3BsaXR0aW5nIFNsaW1lIiwgdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lIC0gVmVjdG9yMy5uZXcoMCwgMjAsIDApKQ0KCQllbmQNCg0KCQlpZiBWaXJ0dWFsWm9uZUVuYWJsZWQgYW5kIGZmKCkgPT0gdHJ1ZSB0aGVuDQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJUZWNobm9sb2d5IiwgIlZpcnR1YWwgWm9uZSIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIlRlY2hub2xvZ3kiLCAiVmlydHVhbCBab25lIiwge3RhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uLCBWZWN0b3IzLm5ldygwLCAwLCAwKX0pDQoJCWVuZA0KCWVuZA0KDQoJLS0gVUlTDQoNCglsb2NhbCBVSVMgPSBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKQ0KCWxvY2FsIHRlcm1pbmF0ZXVpcyA9IGZhbHNlDQoNCglVSVMuSW5wdXRCZWdhbjpjb25uZWN0KGZ1bmN0aW9uKGlucHV0LCBncCkNCgkJaWYgbm90IHRlcm1pbmF0ZXVpcyB0aGVuDQoJCQlpZiBub3QgZ3AgdGhlbg0KCQkJCWxvY2FsIHRhcmdldENociA9IGdhbWUuUGxheWVyc1t0YXJnZXRdLkNoYXJhY3Rlcg0KDQoJCQkJaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuQmFja1NsYXNoIHRoZW4NCgkJCQkJY29tbWFuZEJveDpDYXB0dXJlRm9jdXMoKQ0KCQkJCQl3YWl0KCkNCgkJCQkJaWYgc3RyaW5nLnN1Yihjb21tYW5kQm94LlRleHQsIHN0cmluZy5sZW4oY29tbWFuZEJveC5UZXh0KSwgc3RyaW5nLmxlbihjb21tYW5kQm94LlRleHQpKSA9PSAiXFwiIHRoZW4NCgkJCQkJCWNvbW1hbmRCb3guVGV4dCA9IHN0cmluZy5zdWIoY29tbWFuZEJveC5UZXh0LCAxLCBzdHJpbmcubGVuKGNvbW1hbmRCb3guVGV4dCkgLSAxKQ0KCQkJCQllbmQNCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuQyB0aGVuDQoJCQkJCWV4cGxvaXQoKQ0KCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5VIHRoZW4NCgkJCQkJVFBUb1RhcmdldCgpDQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLk0gdGhlbg0KCQkJCQlpZiBDQnJpbmdUYXJnZXRFbmFibGVkIHRoZW4NCgkJCQkJCWJyaW5nUGxheWVyKHRhcmdldCkNCgkJCQkJZW5kDQoJCQkJLS1lbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuRXF1YWxzIHRoZW4NCgkJCQktLQlwaW5nVHJhY2tlci5WaXNpYmxlID0gbm90KHBpbmdUcmFja2VyLlZpc2libGUpDQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLksgdGhlbg0KCQkJCQlBbnRpQmxpbmRGdW5jKCkNCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuVCB0aGVuDQoJCQkJCWJlZ2luU3BlZWQoKQ0KCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5YIHRoZW4NCgkJCQkJaWYgU3BlY3RyYWxFbWJvZGltZW50RW5hYmxlZCB0aGVuDQoJCQkJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJTcGlyaXQiLCAiU3BlY3RyYWwgRW1ib2RpbWVudCIpDQoJCQkJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIlNwaXJpdCIsICJTcGVjdHJhbCBFbWJvZGltZW50IikNCgkJCQkJZW5kDQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlAgdGhlbg0KCQkJCQlpZiBTYW5zVGVsZXBvcnRFbmFibGVkIGFuZCBub3QgZ2V0U2VydmVyVHlwZSgpID09ICJWSVBTZXJ2ZXIiIHRoZW4NCgkJCQkJCWlmIGdhbWUuUGxhY2VJZCA9PSA1NjYzOTkyNDQgb3IgZ2FtZS5QbGFjZUlkID09IDI1Njk2MjU4MDkgdGhlbg0KCQkJCQkJCWxvY2FsIFNhbnNQb3MgPSBDRnJhbWUubmV3KC0xNjg1LjkxMDUyLCAyMzAuMDM1MTI2LCAtMTgxLjc5ODI2NCkNCgkJCQkJCQlsb2NhbCBTYW5zQW5nbGVzID0gQ0ZyYW1lLkFuZ2xlcygwLCBtYXRoLnJhZCgyMCksIDApDQoNCgkJCQkJCQlnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gU2Fuc1BvcyAqIFNhbnNBbmdsZXMNCgkJCQkJCQlnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkNoYW5nZVN0YXRlKEVudW0uSHVtYW5vaWRTdGF0ZVR5cGUuQ2xpbWJpbmcpDQoJCQkJCQkJd2FpdCgpDQoJCQkJCQkJZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KCQkJCQkJCXdhaXQoMSkNCgkJCQkJCQlpZiBub3QgRnJlZXplRW5hYmxlZCB0aGVuDQoJCQkJCQkJCWdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IGZhbHNlDQoJCQkJCQkJZW5kDQoJCQkJCQllbmQNCgkJCQkJZW5kDQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlogdGhlbg0KCQkJCQliZWdpbk51bGxpZnlGb3JjZXMoKQ0KCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5HIHRoZW4NCgkJCQkJQW50aUdyYXZpdHlGdW5jKCkNCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuSiB0aGVuDQoJCQkJCWlmIENsaWNrVFBFbmFibGVkIHRoZW4NCgkJCQkJCWNsaWNrdHAobW91c2UuSGl0KQ0KCQkJCQllbmQNCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuRiB0aGVuDQoJCQkJCUZyZWV6ZUZ1bmMoKQ0KCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5CYWNrcXVvdGUgdGhlbg0KCQkJCQlpZiBGbGFzaEVuYWJsZWQgdGhlbg0KCQkJCQkJbG9uZ2ZsYXNoKCkNCgkJCQkJZW5kDQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlYgdGhlbg0KCQkJCQl2aWV3KCkNCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuQiB0aGVuDQoJCQkJCXRvZ2dsZUVTUCgpDQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkxlZnRCcmFja2V0IHRoZW4NCgkJCQkJaWYgbm90IGNsb3NlZGZvcmV2ZXIgdGhlbg0KCQkJCQkJaWYgbm90IGJ1dHRvbnNkZWJvdW5jZSB0aGVuDQoJCQkJCQkJYnV0dG9uc2RlYm91bmNlID0gdHJ1ZQ0KCQkJCQkJCWlmIGJ1dHRvbnNvcGVuZWQgPT0gZmFsc2UgdGhlbg0KCQkJCQkJCQlidXR0b25zb3BlbmVkID0gdHJ1ZQ0KCQkJCQkJCQlidXR0b25zbWFpbjpUd2VlblBvc2l0aW9uKA0KCQkJCQkJCQkJVURpbTIubmV3KDEsIDAsIDAuNjUsIDApLA0KCQkJCQkJCQkJIk91dCIsDQoJCQkJCQkJCQkiU2luZSIsDQoJCQkJCQkJCQkuNSwNCgkJCQkJCQkJCXRydWUNCgkJCQkJCQkJKQ0KCQkJCQkJCWVsc2UNCgkJCQkJCQkJYnV0dG9uc29wZW5lZCA9IGZhbHNlDQoJCQkJCQkJCWJ1dHRvbnNtYWluOlR3ZWVuUG9zaXRpb24oDQoJCQkJCQkJCQlVRGltMi5uZXcoMS4yNSwgMCwgMC42NSwgMCksDQoJCQkJCQkJCQkiSW4iLA0KCQkJCQkJCQkJIlNpbmUiLA0KCQkJCQkJCQkJLjUsDQoJCQkJCQkJCQl0cnVlDQoJCQkJCQkJCSkNCgkJCQkJCQllbmQNCgkJCQkJCQl3YWl0KDEpDQoJCQkJCQkJYnV0dG9uc2RlYm91bmNlID0gZmFsc2UNCgkJCQkJCWVuZA0KCQkJCQllbmQNCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuUmlnaHRCcmFja2V0IHRoZW4NCgkJCQkJY29tbWFuZGRlYm91bmNlID0gdHJ1ZQ0KCQkJCQlpZiBjb21tYW5kc29wZW5lZCA9PSBmYWxzZSB0aGVuDQoJCQkJCQljb21tYW5kc29wZW5lZCA9IHRydWUNCgkJCQkJCWNvbW1hbmRzbWFpbjpUd2VlblBvc2l0aW9uKA0KCQkJCQkJCVVEaW0yLm5ldygxLCAwLCAwLjQ1LCAwKSwNCgkJCQkJCQkiT3V0IiwNCgkJCQkJCQkiU2luZSIsDQoJCQkJCQkJLjUsDQoJCQkJCQkJdHJ1ZQ0KCQkJCQkJKQ0KCQkJCQllbHNlDQoJCQkJCQljb21tYW5kc29wZW5lZCA9IGZhbHNlDQoJCQkJCQljb21tYW5kc21haW46VHdlZW5Qb3NpdGlvbigNCgkJCQkJCQlVRGltMi5uZXcoMS4yNSwgMCwgMC40NSwgMCksDQoJCQkJCQkJIkluIiwNCgkJCQkJCQkiU2luZSIsDQoJCQkJCQkJLjUsDQoJCQkJCQkJdHJ1ZQ0KCQkJCQkJKQ0KCQkJCQllbmQNCgkJCQkJd2FpdCgxKQ0KCQkJCQljb21tYW5kZGVib3VuY2UgPSBmYWxzZQ0KCQkJCWVsc2VpZiBVSVM6SXNLZXlEb3duKEVudW0uS2V5Q29kZS5MZWZ0KSBhbmQgVUlTOklzS2V5RG93bihFbnVtLktleUNvZGUuUmlnaHQpIHRoZW4NCgkJCQkJaWYgYnV0dG9uc29wZW5lZCA9PSB0cnVlIHRoZW4NCgkJCQkJCWJ1dHRvbnNtYWluOlR3ZWVuUG9zaXRpb24oDQoJCQkJCQkJVURpbTIubmV3KDEuMjUsIDAsIDAuNjUsIDApLA0KCQkJCQkJCSJJbiIsDQoJCQkJCQkJIlNpbmUiLA0KCQkJCQkJCS41LA0KCQkJCQkJCXRydWUNCgkJCQkJCSkNCgkJCQkJCWNvbW1hbmRzbWFpbjpUd2VlblBvc2l0aW9uKA0KCQkJCQkJCVVEaW0yLm5ldygxLjI1LCAwLCAwLjQ1LCAwKSwNCgkJCQkJCQkiSW4iLA0KCQkJCQkJCSJTaW5lIiwNCgkJCQkJCQkuNSwNCgkJCQkJCQl0cnVlDQoJCQkJCQkpDQoJCQkJCQl3YWl0KDEpDQoJCQkJCQl0YXJnZXQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZQ0KCQkJCQkJdGVybWluYXRldWlzID0gdHJ1ZQ0KCQkJCQkJZWJndWk6RGVzdHJveSgpDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZCkNCg0KCS0tIFNjcmlwdHMgYW5kIEZ1bmN0aW9ucyBFTkQNCg0KCS0tIEVudHJhbmNlIEFuaW1hdGlvbg0KDQoJd2FpdCgwLjUpDQoNCglidXR0b25zbWFpbjpUd2VlblBvc2l0aW9uKA0KCQlVRGltMi5uZXcoMSwgMCwgMC42NSwgMCksDQoJCSJPdXQiLA0KCQkiU2luZSIsDQoJCS41LA0KCQl0cnVlDQoJKQ0KDQoJY29tbWFuZHNtYWluOlR3ZWVuUG9zaXRpb24oDQoJCVVEaW0yLm5ldygxLCAwLCAwLjQ1LCAwKSwNCgkJIk91dCIsDQoJCSJTaW5lIiwNCgkJLjUsDQoJCXRydWUNCgkpDQoNCgktLSBJbmZvDQoNCgl3YXJuKCJHVUkgc3VjY2Vzc2Z1bGx5IGxvYWRlZCEiKQ0KZW5k"