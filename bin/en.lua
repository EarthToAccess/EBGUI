encui = "aWYgbm90KGdhbWU6SXNMb2FkZWQoKSkgdGhlbgoJZ2FtZS5Mb2FkZWQ6V2FpdCgpCmVuZAoKaWYgKGdhbWUuQ29yZUd1aTpGaW5kRmlyc3RDaGlsZCgiZWJndWkiKSkgdGhlbgoJZ2FtZS5Db3JlR3VpLmViZ3VpOkRlc3Ryb3koKQplbmQKCmxvY2FsIGJsb2NrbGlzdCA9IHsKfQoKbG9jYWwgbWFzdGVybGlzdCA9IHsKCTMyNTczMzM0Cn0KCmxvY2FsIGdvbGRsaXN0ID0gewoJImdvbGRfMTAyMDIyX1NpbGx5VGVhY3VwXzE2ODU0OSIKfQoKbG9jYWwgcGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIHBsYXllciA9IHBsYXllcnMuTG9jYWxQbGF5ZXIKbG9jYWwgSUQgPSBwbGF5ZXIuVXNlcklkCmxvY2FsIGlzQmxvY2tlZCA9IGZhbHNlCmxvY2FsIGlzTWFzdGVyID0gZmFsc2UKbG9jYWwgaXNHb2xkID0gZmFsc2UKCmZvciBpLHYgaW4gcGFpcnMoYmxvY2tsaXN0KSBkbwogICAgaWYgdiA9PSBJRCB0aGVuCiAgICAgICAgaXNCbG9ja2VkID0gdHJ1ZQogICAgICAgIGJyZWFrCiAgICBlbmQKZW5kCgpmb3IgaSx2IGluIHBhaXJzKG1hc3Rlcmxpc3QpIGRvCiAgICBpZiB2ID09IElEIHRoZW4KICAgICAgICBpc01hc3RlciA9IHRydWUKICAgICAgICBicmVhawogICAgZW5kCmVuZAoKaWYgaXNCbG9ja2VkIHRoZW4KICAgIHdhcm4oIj09PT09PT09PT09PT09PT09PT09PT09W1sgQVRURU5USU9OIF1dPT09PT09PT09PT09PT09PT09PT09PT0iKQogICAgd2FybigifCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCIpCiAgICB3YXJuKCJ8ICAgICAgICAgICAgICBUaGlzIGFjY291bnQgaGFzIGJlZW4gYmxvY2tlZC4gICAgICAgICAgICAgICB8IikKICAgIHdhcm4oInwgICAgUGxlYXNlIHZpc2l0IHRoZSBFQkd1aSBEaXNjb3JkIGZvciBtb3JlIGluZm9ybWF0aW9uLiAgIHwiKQogICAgd2FybigifCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCIpCiAgICB3YXJuKCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IikKZWxzZWlmIG5vdCBFQkd1aUtleSBhbmQgbm90IGlzQmxvY2tlZCBhbmQgbm90IGlzTWFzdGVyIHRoZW4KICAgIHdhcm4oIj09PT09PT09PT09PT09PT09PT09PT09W1sgQVRURU5USU9OIF1dPT09PT09PT09PT09PT09PT09PT09PT0iKQogICAgd2FybigifCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCIpCiAgICB3YXJuKCJ8ICAgICAgIFlvdSBkb24ndCBoYXZlIHRoZSB1bmxvY2sga2V5IGluIHlvdXIgc2NyaXB0LiAgICAgICB8IikKICAgIHdhcm4oInwgICAgICAgWW91J2xsIG5lZWQgdG8gZmluZCB0aGUgYXBwcm9wcmlhdGUga2V5IGZpcnN0LiAgICAgIHwiKQogICAgd2FybigifCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCIpCiAgICB3YXJuKCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IikKZWxzZWlmIEVCR3VpS2V5IH49ICIxMDIwMjJfU291ckhhaXJiYW5kXzAyNDk0NyIgYW5kIG5vdCBpc0Jsb2NrZWQgYW5kIG5vdCBpc01hc3RlciB0aGVuCiAgICB3YXJuKCI9PT09PT09PT09PT09PT09PT09PT09PVtbIEFUVEVOVElPTiBdXT09PT09PT09PT09PT09PT09PT09PT09IikKICAgIHdhcm4oInwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwiKQogICAgd2FybigifCAgICAgICAgICAgICAgIFlvdXIgdW5sb2NrIGtleSBpcyBpbmNvcnJlY3QuICAgICAgICAgICAgICAgfCIpCiAgICB3YXJuKCJ8ICAgICAgIFlvdSdsbCBuZWVkIHRvIGZpbmQgdGhlIGFwcHJvcHJpYXRlIGtleSBmaXJzdC4gICAgICB8IikKICAgIHdhcm4oInwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwiKQogICAgd2FybigiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSIpCmVsc2UKCWxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vRWFydGhUb0FjY2Vzcy9FQkd1aS9tYWluL2Jpbi9pbmZvLmx1YScpKSgpCglsb2NhbCB2ZXJOdW0gPSAidjIuMTAiCglsb2NhbCBkdW1iUXVvdGVzID0gewoJCSJKZWV6LCB3aGVuJ2QgaXQgZ2V0IHNvIGhvdCBpbiBoZXJlPyIsCgkJIklzIGl0IGp1c3QgbWUgb3IgaXMgdGhhdCAqdG9vKiBibHVlPyIsCgkJIkxpa2UgdGFraW5nIGNhbmR5IGZyb20gYSBiYWJ5LiIsCgkJIkRlZXogbnV0cyBhcmUgdG9vIHNxdWFyZSEiLAoJCSJBbHNvIHRyeSBNaW5lY3JhZnQhIiwKCQkiQWxzbyB0cnkgVGVycmFyaWEhIiwKCQkiTWVoLCBJIGxpa2VkIFJpc2sgb2YgUmFpbiAyIGJldHRlci4iLAoJCSJZb3UgbmVlZCBhIGZhaXJseSBoaWdoIElRIHRvIHVuZGVyc3RhbmQgRUJHdWkuIiwKCQkiSmFrZSwgZnJvbSBTdGF0ZSBGYXJtPyEiLAoJCSJXaGF0IHdvdWxkICp5b3UqIGRvIGZvciBhIEtsb25kaWtlIGJhcj8iLAoJCSJOb3cgd2l0aCAxMDAlIG1vcmUgR29sZCEiLAoJCSJNYWRlIGluIEx1YSEiLAoJCSJJRiAlRVJST1JMRVZFTCUgRVFVIDEgR09UTzpFT0YiLAoJCSJicnVoIG5lcmYgc29sYXIgYWxyZWFkeSIsCgkJIkJlY2F1c2UgdGhlIGRldnMgd29uJ3QgZG8gaXQuIiwKCQkiUGV0aXRpb24gWU9VUiBsb2NhbCBkZXZlbG9wZXIgZm9yIG1vcmUgdXBkYXRlcyEiLAoJCSJ3aHkgYXJlIHlvdSBidXlpbmcgY2xvdGhlcyBhdCB0aGUgc291cCBzdG9yZSIsCgkJIkkganVzdCB3YW5uYSBiZSBhIG5vcm1hbCBHVUkgd2l0aCBub3JtYWwga25lZXMuIgoJfQoKICAgIHdhcm4oW1tfX19fX18gX19fX18gX19fX18gICAgICAgXyAKICAgICAgICAgICAgfCAgX19ffCBfX18gXCAgX18gXCAgICAgKF8pCiAgICAgICAgICAgIHwgfF9fIHwgfF8vIC8gfCAgXC9fICAgXyBfIAogICAgICAgICAgICB8ICBfX3x8IF9fXyBcIHwgX198IHwgfCB8IHwKICAgICAgICAgICAgfCB8X19ffCB8Xy8gLyB8X1wgXCB8X3wgfCB8CiAgICAgICAgICAgIFxfX19fL1xfX19fLyBcX19fXy9cX18sX3xffCBdXSAuLiB2ZXJOdW0pCglwcmludCgiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIikKCXByaW50KGR1bWJRdW90ZXNbbWF0aC5yYW5kb20oMSwjZHVtYlF1b3RlcyldKQoJcHJpbnQoIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSIpCgl3YXJuKCJXZWxjb21lIHRvIEVCR3VpLCAiIC4uIHBsYXllci5OYW1lIC4uICIhIikKCXdhcm4oIllvdSdyZSBvbiB0aGUgU3RhYmxlIGJyYW5jaCBvZiBFQkd1aSIpCgl3YXJuKCJRdWVzdGlvbnMgb3IgY29uY2VybnM/IExldCB1cyBrbm93IGluIHRoZSBEaXNjb3JkLCIpCgl3YXJuKCJvciBlbWFpbCBFYXJ0aCBoaW1zZWxmIGF0IGVhcnRodG9hY2Nlc3NAZ21haWwuY29tISIpCgl3YWl0KDAuNSkKCQoJaWYgaXNNYXN0ZXIgdGhlbgoJCXdhcm4oIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSIpICAgCgkJd2FybigiTG9hZGVkIGluIHVzaW5nIHRoZSBNYXN0ZXIgTGlzdCEgT3ZlcnJpZGluZyBhY2Nlc3MgZ2l2ZW4uIikKCQl3YXJuKCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iKQoJZW5kCgoJZm9yIGksdiBpbiBwYWlycyhnb2xkbGlzdCkgZG8KCQlpZiBub3QgRUJHdWlHb2xkIHRoZW4gZWxzZWlmIEVCR3VpR29sZCA9PSB2IHRoZW4KCQkJaXNHb2xkID0gdHJ1ZQoJCQlwcmludChbWwkJCQlfX19fICAgICAgICAgICAgIF9fXyAgICAgIF9fXyAKCQkJICAgICAgICAgICA2TU1NTWIvICAgICAgICAgICBgTU0gICAgICBgTU0gCgkJCSAgICAgICAgICA4UCAgICBZTSAgICAgICAgICAgIE1NICAgICAgIE1NIAoJCQkgICAgICAgICA2TSAgICAgIFkgICBfX19fXyAgICBNTSAgIF9fX19NTSAKCQkJICAgICAgICAgTU0gICAgICAgICA2TU1NTU1iICAgTU0gIDZNTU1NTU0gCgkJCSAgICAgICAgIE1NICAgICAgICA2TScgICBgTWIgIE1NIDZNJyAgYE1NIAoJCQkgICAgICAgICBNTSAgICAgX19fTU0gICAgIE1NICBNTSBNTSAgICBNTSAKCQkJICAgICAgICAgTU0gICAgIGBNJ01NICAgICBNTSAgTU0gTU0gICAgTU0gCgkJCSAgICAgICAgIFlNICAgICAgTSBNTSAgICAgTU0gIE1NIE1NICAgIE1NIAoJCQkgICAgICAgICAgOGIgICAgZDkgWU0uICAgLE05ICBNTSBZTS4gICxNTSAKCQkJICAgICAgICAgICBZTU1NTTkgICBZTU1NTU05ICBfTU1fIFlNTU1NTU1fXV0pCgkJCXdhcm4oIlRoYW5rIHlvdSBmb3IgYmVpbmcgYSBHT0xERU4gbWVtYmVyISIpCgkJCXdhcm4oJ0Vuam95IHRoZSB2YXJpb3VzICJvdmVycG93ZXJlZCIgc2NyaXB0cyB3ZSBoYXZlIGluIHN0b3JlIScpCgkJCWJyZWFrCgkJZWxzZSBlbmQKCWVuZAoKCS0tIEdVSSBJbnN0YW5jZXMsIEV2ZW50cyBhbmQgRnVuY3Rpb25zCgoJbG9jYWwgZWJndWkgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpCgllYmd1aS5OYW1lID0gImViZ3VpIgoJZWJndWkuUGFyZW50ID0gZ2FtZTpXYWl0Rm9yQ2hpbGQoIkNvcmVHdWkiKQoKCWdhbWUuQ29yZUd1aS5DaGlsZFJlbW92ZWQ6Y29ubmVjdChmdW5jdGlvbihjaGlsZCkKCQlpZiBjaGlsZC5OYW1lID09ICJlYmd1aSIgdGhlbgoJCQljbG9zZWRmb3JldmVyID0gdHJ1ZQoJCQlidXR0b25zb3BlbmVkID0gZmFsc2UKCQkJY29tbWFuZHNvcGVuZWQgPSBmYWxzZQoJCQlidXR0b25zZGVib3VuY2UgPSB0cnVlCgkJCWNvbW1hbmRkZWJvdW5jZSA9IHRydWUKCQkJdGVybWluYXRldWlzID0gdHJ1ZQoJCQlVSVMgPSBuaWwKCQkJYnJlYWthYmxlID0gdHJ1ZQoJCQlCbGF6ZUNvbHVtbkVuYWJsZWQgPSBuaWwKCQkJVmluZVRyYXBFbmFibGVkID0gbmlsCgkJCVBsYXNtYUltcGxvc2lvbkVuYWJsZWQgPSBuaWwKCQkJU2xpbWVCdWRkaWVzRW5hYmxlZCA9IG5pbAoJCQlDcnlzdGFsQXJtYW1lbnRFbmFibGVkID0gbmlsCgkJCUFtYXVyb3RpY0xhbWJlbnRFbmFibGVkID0gbmlsCgkJCUFibGF6ZUp1ZGdlbWVudEhhY2tFbmFibGVkID0gbmlsCgkJCVZvaWRPcGVuaW5nSGFja0VuYWJsZWQgPSBuaWwKCQkJU2tlbGV0b25HcmFiRW5hYmxlZCA9IG5pbAoJCQlUaGVXb3JsZEVuYWJsZWQgPSBuaWwKCQkJUG9sYXJpc0VuYWJsZWQgPSBuaWwKCQkJTGFnU2VydmVyRW5hYmxlZCA9IG5pbAoJCQlTaGF0dGVyaW5nRXJ1cHRpb25FbmFibGVkID0gbmlsCgkJCUlsbHVzaXZlQXRha2VFbmFibGVkID0gbmlsCgkJCUV0aGVyZWFsQWN1bWVuRW5hYmxlZCA9IG5pbAoJCQlGb3JtaWRhYmxlUm9hckVuYWJsZWQgPSBuaWwKCQkJU2V3ZXJCdXJzdEVuYWJsZWQgPSBuaWwKCQkJVG94aWNCYXNpbGlza0VuYWJsZWQgPSBuaWwKCQkJU3BsaXR0aW5nU2xpbWVFbmFibGVkID0gbmlsCgkJCVZpcnR1YWxab25lRW5hYmxlZCA9IG5pbAoJCQlBbnRpQmxpbmRFbmFibGVkID0gbmlsCgkJCUFudGlMYWdFbmFibGVkID0gbmlsCgkJCVNwZWVkaGFja0VuYWJsZWQgPSBuaWwKCQkJSG9sb2JlYW1FbmFibGVkID0gbmlsCgkJCVNldFNwZWVkID0gbmlsCgkJCUlnbm9yZVBoeXNpY3NFbmFibGVkID0gbmlsCgkJCUFudGlHcmF2aXR5RW5hYmxlZCA9IG5pbAoJCQlJbmVydGlhR3Jhdml0eUVuYWJsZWQgPSBuaWwKCQkJQ2xpY2tUUEVuYWJsZWQgPSBuaWwKCQkJRnJlZXplRW5hYmxlZCA9IG5pbAoJCQlUaHJ1c3RQb3dlciA9IG5pbAoJCQl2aWV3aW5nID0gbmlsCgkJCVRQVGFyZ2V0RW5hYmxlZCA9IG5pbAoJCQlMb29wVFBUYXJnZXRFbmFibGVkID0gbmlsCgkJCUVTUEVuYWJsZWQgPSBuaWwKCQkJVFBTaGFyZHNFbmFibGVkID0gbmlsCgkJCVRQRGlhbW9uZHNFbmFibGVkID0gbmlsCgkJCUZQU0Ryb3BwaW5nID0gbmlsCgkJCXNhbnNLaWxsZWQgPSAid2lwIgoJCQlBc3Rlcm9pZEJlbHRFbmFibGVkID0gbmlsCgkJCVZpZ29ySGFja0VuYWJsZWQgPSBuaWwKCQkJT3JiaXRhbEhhY2tFbmFibGVkID0gbmlsCgkJCVN0b3JtQnVsbGV0c0VuYWJsZWQgPSBuaWwKCQkJRG91YmxlUmF5RW5hYmxlZCA9IG5pbAoJCQlEaXNwZXJzaW9uRW5hYmxlZCA9IG5pbAoJCQlEYXJrQW9lRW5hYmxlZCA9IG5pbAoJCQlIeXBlcmFuZ0VuYWJsZWQgPSBuaWwKCQkJQ3JlYXRpb25Ib2xkRW5hYmxlZCA9IG5pbAoJCQlSZWFwZXJVbHRFbmFibGVkID0gbmlsCgkJCUFpbWJvdEVuYWJsZWQgPSBuaWwKCQllbmQKCWVuZCkKCglsb2NhbCBtb3VzZSA9IHBsYXllcjpHZXRNb3VzZSgpCgoJbG9jYWwgYm9yZGVycyA9IHt9CgoJbG9jYWwgYnV0dG9uc21haW4gPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKCWJ1dHRvbnNtYWluLk5hbWUgPSAiYnV0dG9uc21haW4iCglidXR0b25zbWFpbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLjI1LCAwLCAwLjY1LCAwKQoJYnV0dG9uc21haW4uU2l6ZSA9IFVEaW0yLm5ldygwLjQsIDAsIDAuMjI1LCAwKQoJdGFibGUuaW5zZXJ0KGJvcmRlcnMsIGJ1dHRvbnNtYWluKQoKCWJ1dHRvbnNkZWJvdW5jZSA9IGZhbHNlCglidXR0b25zb3BlbmVkID0gdHJ1ZQoKCgktLWlmIChpbml0aWF0aW9uTW9kZSA9PSAiTW9kZXJuIikgdGhlbgoJbG9jYWwgY29tbWFuZHNtYWluID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCgljb21tYW5kc21haW4uTmFtZSA9ICJjb21tYW5kc21haW4iCgljb21tYW5kc21haW4uUG9zaXRpb24gPSBVRGltMi5uZXcoMS4yNSwgMCwgMC40NSwgMCkKCWNvbW1hbmRzbWFpbi5TaXplID0gVURpbTIubmV3KDAuMywgMCwgMC4xNzUsIDApCgl0YWJsZS5pbnNlcnQoYm9yZGVycywgY29tbWFuZHNtYWluKQoJLS1lbmQKCgljb21tYW5kZGVib3VuY2UgPSBmYWxzZQoJY29tbWFuZHNvcGVuZWQgPSB0cnVlCgoJY2xvc2VkZm9yZXZlciA9IGZhbHNlCgoJbG9jYWwgZnJhbWVzID0ge30KCgktLSBGcmFtZSBmb3IgYXJvdW5kIHRoZSBidXR0b25zLgoJbG9jYWwgYnV0dG9uc2ZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCglidXR0b25zZnJhbWUuTmFtZSA9ICJidXR0b25zZnJhbWUiCglidXR0b25zZnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE4LCA1NCwgMTc5KQoJYnV0dG9uc2ZyYW1lLkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEyOCwgMTI4LCAxMjgpCglidXR0b25zZnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMgoJYnV0dG9uc2ZyYW1lLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpCglidXR0b25zZnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjUsIDApCglidXR0b25zZnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAuODUsIDApCgl0YWJsZS5pbnNlcnQoZnJhbWVzLCBidXR0b25zZnJhbWUpCglidXR0b25zZnJhbWUuUGFyZW50ID0gYnV0dG9uc21haW4KCgktLSBGcmFtZSBmb3IgYXJvdW5kIHRoZSBjb21tYW5kIGJveC4KCWxvY2FsIGNvbW1hbmRzZnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKCWNvbW1hbmRzZnJhbWUuTmFtZSA9ICJjb21tYW5kc2ZyYW1lIgoJY29tbWFuZHNmcmFtZS5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KQoJY29tbWFuZHNmcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTgsIDU0LCAxNzkpCgljb21tYW5kc2ZyYW1lLkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEyOCwgMTI4LCAxMjgpCgljb21tYW5kc2ZyYW1lLkJvcmRlclNpemVQaXhlbCA9IDIKCWNvbW1hbmRzZnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjUsIDApCgljb21tYW5kc2ZyYW1lLlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLjg1LCAwKQoJdGFibGUuaW5zZXJ0KGZyYW1lcywgY29tbWFuZHNmcmFtZSkKCWNvbW1hbmRzZnJhbWUuUGFyZW50ID0gY29tbWFuZHNtYWluCgoJLS0gQ29tbWFuZCBib3guIFRoaXMgaXMgd2hlcmUgdXNlcnMgdHlwZSBpbiBjb21tYW5kcyBhbmQgdGFyZ2V0cy4KCWxvY2FsIGNvbW1hbmRCb3ggPSBJbnN0YW5jZS5uZXcoIlRleHRCb3giKQoJY29tbWFuZEJveC5OYW1lID0gImNvbW1hbmRCb3giCgljb21tYW5kQm94LkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpCgljb21tYW5kQm94LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNSwgNDAsIDQwKQoJY29tbWFuZEJveC5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMjgsIDEyOCwgMTI4KQoJY29tbWFuZEJveC5Cb3JkZXJTaXplUGl4ZWwgPSAyCgljb21tYW5kQm94LlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgMCwgMC4zLCAwKQoJY29tbWFuZEJveC5TaXplID0gVURpbTIubmV3KDAuODUsIDAsIDAuMjAsIDApCgljb21tYW5kQm94LkZvbnQgPSBFbnVtLkZvbnQuU2FycGFuY2gKCWNvbW1hbmRCb3guVGV4dCA9ICIiCgljb21tYW5kQm94LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1MSwgMjU1KQoJY29tbWFuZEJveC5UZXh0U2NhbGVkID0gdHJ1ZQoJY29tbWFuZEJveC5UZXh0U2l6ZSA9IDE0LjAwMAoJY29tbWFuZEJveC5UZXh0V3JhcHBlZCA9IHRydWUKCWNvbW1hbmRCb3guQ2xlYXJUZXh0T25Gb2N1cyA9IGZhbHNlCgljb21tYW5kQm94LlBhcmVudCA9IGNvbW1hbmRzZnJhbWUKCglsb2NhbCBsYWJlbHMgPSB7fQoKCS0tIFRoZSBvdXRwdXQgZm9yIHRoZSBjb21tYW5kIGJveCwgQUtBIHRoZSB3aGl0ZSB0ZXh0IGJlbG93IHRoYXQgbGlzdHMgeW91ciB0YXJnZXQuCglsb2NhbCBjb21tYW5kQm94T3V0cHV0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQoJY29tbWFuZEJveE91dHB1dC5OYW1lID0gImNvbW1hbmRCb3hPdXRwdXQiCgljb21tYW5kQm94T3V0cHV0LkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpCgljb21tYW5kQm94T3V0cHV0LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQoJY29tbWFuZEJveE91dHB1dC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMS4wMDAKCWNvbW1hbmRCb3hPdXRwdXQuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkKCWNvbW1hbmRCb3hPdXRwdXQuQm9yZGVyU2l6ZVBpeGVsID0gMAoJY29tbWFuZEJveE91dHB1dC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNiwgMCkKCWNvbW1hbmRCb3hPdXRwdXQuU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAuMiwgMCkKCWNvbW1hbmRCb3hPdXRwdXQuRm9udCA9IEVudW0uRm9udC5TYXJwYW5jaAoJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgKE5vbmUpIgoJY29tbWFuZEJveE91dHB1dC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTEsIDI1NSkKCWNvbW1hbmRCb3hPdXRwdXQuVGV4dFNjYWxlZCA9IHRydWUKCWNvbW1hbmRCb3hPdXRwdXQuVGV4dFNpemUgPSAxNC4wMDAKCWNvbW1hbmRCb3hPdXRwdXQuVGV4dFdyYXBwZWQgPSB0cnVlCgl0YWJsZS5pbnNlcnQobGFiZWxzLCBjb21tYW5kQm94T3V0cHV0KQoJY29tbWFuZEJveE91dHB1dC5QYXJlbnQgPSBjb21tYW5kc2ZyYW1lCgoJLS0gVGhlIGluZm9ybWF0aW9uIGFib3ZlIHRoZSBidXR0b25zLCBlLmcuIHVzZXIncyBuYW1lLCBjaGFubmVsCglsb2NhbCBEZXRhaWxzID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQoJRGV0YWlscy5OYW1lID0gIkRldGFpbHMiCglEZXRhaWxzLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQoJRGV0YWlscy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMS4wMDAKCURldGFpbHMuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkKCURldGFpbHMuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMC4wMTUsIDApCglEZXRhaWxzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC4xNSwgMCkKCURldGFpbHMuRm9udCA9IEVudW0uRm9udC5TYXJwYW5jaAoJaWYgbm90IGlzR29sZCB0aGVuCgkJRGV0YWlscy5UZXh0ID0gcGxheWVyLk5hbWUgLi4gIiB8IEVCR3VpIHwgU3RhYmxlIgoJZWxzZQoJCURldGFpbHMuVGV4dCA9IHBsYXllci5OYW1lIC4uICIgfCBFQkd1aSBHb2xkIHwgU3RhYmxlIgoJZW5kCglEZXRhaWxzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1MSwgMjU1KQoJRGV0YWlscy5UZXh0U2NhbGVkID0gdHJ1ZQoJRGV0YWlscy5aSW5kZXggPSA1CglEZXRhaWxzLlRleHRTaXplID0gMTQuMDAwCglEZXRhaWxzLlRleHRXcmFwcGVkID0gdHJ1ZQoJdGFibGUuaW5zZXJ0KGxhYmVscywgRGV0YWlscykKCURldGFpbHMuUGFyZW50ID0gYnV0dG9uc2ZyYW1lCgoJLS0gIkNsb3NlIHRoaXMgR1VJIiBmb3IgdGhlIGNvbW1hbmQgYm94LgoJbG9jYWwgRGV0YWlsczIgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCglEZXRhaWxzMi5OYW1lID0gIkRldGFpbHMyIgoJRGV0YWlsczIuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkKCURldGFpbHMyLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQoJRGV0YWlsczIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEuMDAwCglEZXRhaWxzMi5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMjgsIDEyOCwgMTI4KQoJRGV0YWlsczIuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjksIDApCglEZXRhaWxzMi5TaXplID0gVURpbTIubmV3KDEsIDAsIDAuMTUsIDApCglEZXRhaWxzMi5Gb250ID0gRW51bS5Gb250LlNhcnBhbmNoCglEZXRhaWxzMi5UZXh0ID0gIlByZXNzIF0gdG8gb3BlbiBhbmQgY2xvc2UgdGhpcyBHVUkuIgoJRGV0YWlsczIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1MSwgMjUxLCAyNTUpCglEZXRhaWxzMi5UZXh0U2NhbGVkID0gdHJ1ZQoJRGV0YWlsczIuVGV4dFNpemUgPSAxNC4wMDAKCURldGFpbHMyLlRleHRXcmFwcGVkID0gdHJ1ZQoJdGFibGUuaW5zZXJ0KGxhYmVscywgRGV0YWlsczIpCglEZXRhaWxzMi5QYXJlbnQgPSBjb21tYW5kc2ZyYW1lCgoJLS0gIkNsb3NlIHRoaXMgR1VJIiBmb3IgdGhlIGJ1dHRvbnMuCglsb2NhbCBEZXRhaWxzMyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKCURldGFpbHMzLk5hbWUgPSAiRGV0YWlsczMiCglEZXRhaWxzMy5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKCURldGFpbHMzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMAoJRGV0YWlsczMuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkKCURldGFpbHMzLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAuODc1LCAwKQoJRGV0YWlsczMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLjE1LCAwKQoJRGV0YWlsczMuRm9udCA9IEVudW0uRm9udC5TYXJwYW5jaAoJRGV0YWlsczMuVGV4dCA9ICJQcmVzcyBbIHRvIG9wZW4gYW5kIGNsb3NlIHRoaXMgR1VJLiIKCURldGFpbHMzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1MSwgMjU1KQoJRGV0YWlsczMuVGV4dFNjYWxlZCA9IHRydWUKCURldGFpbHMzLlRleHRTaXplID0gMTQuMDAwCglEZXRhaWxzMy5UZXh0V3JhcHBlZCA9IHRydWUKCXRhYmxlLmluc2VydChsYWJlbHMsIERldGFpbHMzKQoJRGV0YWlsczMuUGFyZW50ID0gYnV0dG9uc2ZyYW1lCgoJLS0gU2NyaXB0IHRlcm1pbmF0aW9uIGluc3RydWN0aW9ucy4KCWxvY2FsIERldGFpbHM0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQoJRGV0YWlsczQuTmFtZSA9ICJEZXRhaWxzNCIKCURldGFpbHM0LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQoJRGV0YWlsczQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEuMDAwCglEZXRhaWxzNC5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMjgsIDEyOCwgMTI4KQoJRGV0YWlsczQuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMS4xLCAwKQoJRGV0YWlsczQuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLjE3NSwgMCkKCURldGFpbHM0LkZvbnQgPSBFbnVtLkZvbnQuU2FycGFuY2gKCURldGFpbHM0LlRleHQgPSAiSG9sZCB0aGUgTGVmdCBhbmQgUmlnaHQgYXJyb3cga2V5cywgdGhlbiBwcmVzcyBhbnkga2V5IHRvIHF1aXQgRUJHdWkuIgoJRGV0YWlsczQuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1MSwgMjUxLCAyNTUpCglEZXRhaWxzNC5UZXh0U2NhbGVkID0gdHJ1ZQoJRGV0YWlsczQuVGV4dFNpemUgPSAxNC4wMDAKCURldGFpbHM0LlRleHRXcmFwcGVkID0gdHJ1ZQoJRGV0YWlsczQuUGFyZW50ID0gYnV0dG9uc2ZyYW1lCgoJLS0gVGhlIHZlcnNpb24gbnVtYmVyIGFib3ZlIHRoZSBjb21tYW5kIGJveC4KCWxvY2FsIFZlcnNpb24gPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCglWZXJzaW9uLk5hbWUgPSAiVmVyc2lvbiIKCVZlcnNpb24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCglWZXJzaW9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMAoJVmVyc2lvbi5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMjgsIDEyOCwgMTI4KQoJVmVyc2lvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLjA1LCAwKQoJVmVyc2lvbi5TaXplID0gVURpbTIubmV3KDEsIDAsIDAuMSwgMCkKCVZlcnNpb24uRm9udCA9IEVudW0uRm9udC5TYXJwYW5jaAoJVmVyc2lvbi5UZXh0ID0gIlZlcnNpb24gIiAuLiB2ZXJOdW0KCVZlcnNpb24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1MSwgMjUxLCAyNTUpCglWZXJzaW9uLlRleHRTY2FsZWQgPSB0cnVlCglWZXJzaW9uLlRleHRTaXplID0gMTQuMDAwCglWZXJzaW9uLlRleHRXcmFwcGVkID0gdHJ1ZQoJdGFibGUuaW5zZXJ0KGxhYmVscywgVmVyc2lvbikKCVZlcnNpb24uUGFyZW50ID0gY29tbWFuZHNmcmFtZQoKCS0tIFRoZSBiYWNrZ3JvdW5kIGZvciB0aGUgVUkuCglsb2NhbCBtYWluZnJhbWUgPSBJbnN0YW5jZS5uZXcoIlNjcm9sbGluZ0ZyYW1lIikKCW1haW5mcmFtZS5OYW1lID0gIm1haW5mcmFtZSIKCW1haW5mcmFtZS5BY3RpdmUgPSB0cnVlCgltYWluZnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ5LCA4MywgODkpCgltYWluZnJhbWUuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkKCW1haW5mcmFtZS5Cb3JkZXJTaXplUGl4ZWwgPSAyCgltYWluZnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjUsIDApCgltYWluZnJhbWUuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkKCW1haW5mcmFtZS5TaXplID0gVURpbTIubmV3KDAuODY3NzY4NTg2LCAwLCAwLjYsIDApCgltYWluZnJhbWUuU2Nyb2xsQmFyVGhpY2tuZXNzID0gNgoJbWFpbmZyYW1lLlBhcmVudCA9IGJ1dHRvbnNtYWluCgoJLS0gR3JpZCBsYXlvdXQgZm9yIHRoZSBidXR0b25zLgoJbG9jYWwgVUlHcmlkTGF5b3V0ID0gSW5zdGFuY2UubmV3KCJVSUdyaWRMYXlvdXQiKQoJVUlHcmlkTGF5b3V0LkZpbGxEaXJlY3Rpb24gPSBFbnVtLkZpbGxEaXJlY3Rpb24uSG9yaXpvbnRhbAoJVUlHcmlkTGF5b3V0Lkhvcml6b250YWxBbGlnbm1lbnQgPSBFbnVtLkhvcml6b250YWxBbGlnbm1lbnQuQ2VudGVyCglVSUdyaWRMYXlvdXQuQ2VsbFBhZGRpbmcgPSBVRGltMi5uZXcoMCwgNywgMCwgNykKCVVJR3JpZExheW91dC5DZWxsU2l6ZSA9IFVEaW0yLm5ldygwLjQ1LCAwLCAwLCAzMCkKCVVJR3JpZExheW91dC5Tb3J0T3JkZXIgPSBFbnVtLlNvcnRPcmRlci5MYXlvdXRPcmRlcgoJVUlHcmlkTGF5b3V0LlBhcmVudCA9IG1haW5mcmFtZQoKCWxvY2FsIGJ1dHRvbnMgPSB7fQoKCS0tLS0tLSBCdXR0b25zIGZvciBoYWNrcy4KCgktLS0tIEFvRXMKCS0tIEluc3RhbnQgQmxhemUgQ29sdW1uCgoJbG9jYWwgQmxhemVDb2x1bW4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJQmxhemVDb2x1bW4uTmFtZSA9ICJCbGF6ZUNvbHVtbiIKCUJsYXplQ29sdW1uLlRleHQgPSAiSW5zdGFudCBCbGF6ZSBDb2x1bW4gKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQmxhemVDb2x1bW4pCgoJQmxhemVDb2x1bW5FbmFibGVkID0gZmFsc2UKCglCbGF6ZUNvbHVtbi5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIEJsYXplQ29sdW1uRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUJsYXplQ29sdW1uRW5hYmxlZCA9IHRydWUKCQkJQmxhemVDb2x1bW4uVGV4dCA9ICJJbnN0YW50IEJsYXplIENvbHVtbiAoT24pIgoJCWVsc2UKCQkJQmxhemVDb2x1bW5FbmFibGVkID0gZmFsc2UKCQkJQmxhemVDb2x1bW4uVGV4dCA9ICJJbnN0YW50IEJsYXplIENvbHVtbiAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBBbXBsaWZpZWQgR2VuZXNpcyBSYXkKCglsb2NhbCBHZW5lc2lzUmF5ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUdlbmVzaXNSYXkuTmFtZSA9ICJHZW5lc2lzUmF5IgoJR2VuZXNpc1JheS5UZXh0ID0gIkFtcGxpZmllZCBHZW5lc2lzIFJheSAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBHZW5lc2lzUmF5KQoKCWxvY2FsIEdlbmVzaXNSYXlFbmFibGVkID0gZmFsc2UKCWxvY2FsIEdSQ2hhcmdlID0gMSAtLSAxMDAwMDAwCgoJR2VuZXNpc1JheS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIEdlbmVzaXNSYXlFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJR2VuZXNpc1JheUVuYWJsZWQgPSB0cnVlCgkJCUdlbmVzaXNSYXkuVGV4dCA9ICJBbXBsaWZpZWQgR2VuZXNpcyBSYXkgKE9uKSIKCQllbHNlCgkJCUdlbmVzaXNSYXlFbmFibGVkID0gZmFsc2UKCQkJR2VuZXNpc1JheS5UZXh0ID0gIkFtcGxpZmllZCBHZW5lc2lzIFJheSAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBDcmVhdGlvbiBIb2xkIEhhY2sKCglsb2NhbCBDaGFpbkhvbGQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJQ2hhaW5Ib2xkLk5hbWUgPSAiQ2hhaW5Ib2xkIgoJQ2hhaW5Ib2xkLlRleHQgPSAiKEcpIEluc3RhbnQgQ2hhaW4gSGFjayAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBDaGFpbkhvbGQpCgoJbG9jYWwgQ3JlYXRpb25Ib2xkRW5hYmxlZCA9IGZhbHNlCgoJQ2hhaW5Ib2xkLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgaXNHb2xkIG9yIGlzTWFzdGVyIHRoZW4KCQkJaWYgbm90IENyZWF0aW9uSG9sZEVuYWJsZWQgdGhlbgoJCQkJQ3JlYXRpb25Ib2xkRW5hYmxlZCA9IHRydWUKCQkJCUNoYWluSG9sZC5UZXh0ID0gIihHKSBJbnN0YW50IENoYWluIEhhY2sgKE9uKSIKCQkJZWxzZQoJCQkJQ3JlYXRpb25Ib2xkRW5hYmxlZCA9IGZhbHNlCgkJCQlDaGFpbkhvbGQuVGV4dCA9ICIoRykgSW5zdGFudCBDaGFpbiBIYWNrIChPZmYpIgoJCQllbmQKCQllbHNlCgkJCUNoYWluSG9sZC5UZXh0ID0gIk1lbWJlciBOb3QgR29sZCIKCQkJd2FpdCgxKQoJCQlDaGFpbkhvbGQuVGV4dCA9ICIoRykgSW5zdGFudCBDaGFpbiBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIEluc3RhbnQgVmluZSBUcmFwCgoJbG9jYWwgVmluZVRyYXAgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJVmluZVRyYXAuTmFtZSA9ICJWaW5lVHJhcCIKCVZpbmVUcmFwLlRleHQgPSAiSW5zdGFudCBWaW5lIFRyYXAgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgVmluZVRyYXApCgoJVmluZVRyYXBFbmFibGVkID0gZmFsc2UKCglWaW5lVHJhcC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIFZpbmVUcmFwRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCVZpbmVUcmFwRW5hYmxlZCA9IHRydWUKCQkJVmluZVRyYXAuVGV4dCA9ICJJbnN0YW50IFZpbmUgVHJhcCAoT24pIgoJCWVsc2UKCQkJVmluZVRyYXBFbmFibGVkID0gZmFsc2UKCQkJVmluZVRyYXAuVGV4dCA9ICJJbnN0YW50IFZpbmUgVHJhcCAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBJbGx1c2l2ZSBBdGFrZSBIYWNrCgoJbG9jYWwgSWxsdXNpdmVBdGFrZSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglJbGx1c2l2ZUF0YWtlLk5hbWUgPSAiSWxsdXNpdmVBdGFrZSIKCUlsbHVzaXZlQXRha2UuVGV4dCA9ICJJbGx1c2l2ZSBBdGFrZSBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIElsbHVzaXZlQXRha2UpCgoJSWxsdXNpdmVBdGFrZUVuYWJsZWQgPSBmYWxzZQoKCUlsbHVzaXZlQXRha2UuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBJbGx1c2l2ZUF0YWtlRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUlsbHVzaXZlQXRha2VFbmFibGVkID0gdHJ1ZQoJCQlJbGx1c2l2ZUF0YWtlLlRleHQgPSAiSWxsdXNpdmUgQXRha2UgSGFjayAoT24pIgoJCWVsc2UKCQkJSWxsdXNpdmVBdGFrZUVuYWJsZWQgPSBmYWxzZQoJCQlJbGx1c2l2ZUF0YWtlLlRleHQgPSAiSWxsdXNpdmUgQXRha2UgSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBJbnN0YW50IE11cmt5IE1pc3NpbGVzCgoJbG9jYWwgRGFya0FvZSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglEYXJrQW9lLk5hbWUgPSAiRGFya0FvZSIKCURhcmtBb2UuVGV4dCA9ICJJbnN0YW50IE11cmt5IE1pc3NpbGVzIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIERhcmtBb2UpCgoJbG9jYWwgRGFya0FvZUVuYWJsZWQgPSBmYWxzZQoKCURhcmtBb2UuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBub3QgRGFya0FvZUVuYWJsZWQgdGhlbgoJCQlEYXJrQW9lRW5hYmxlZCA9IHRydWUKCQkJRGFya0FvZS5UZXh0ID0gIkluc3RhbnQgTXVya3kgTWlzc2lsZXMgKE9uKSIKCQllbHNlCgkJCURhcmtBb2VFbmFibGVkID0gZmFsc2UKCQkJRGFya0FvZS5UZXh0ID0gIkluc3RhbnQgTXVya3kgTWlzc2lsZXMgKE9mZikiCgkJZW5kCgllbmQpCgkKCS0tIEluc3RhbnQgQWlyIERpc3BlcnNpb24KCglsb2NhbCBTdG9ybUFvZSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglTdG9ybUFvZS5OYW1lID0gIlN0b3JtQW9lIgoJU3Rvcm1Bb2UuVGV4dCA9ICIoRykgSW5zdGFudCBTdG9ybSBBb0UgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgU3Rvcm1Bb2UpCgoJbG9jYWwgRGlzcGVyc2lvbkVuYWJsZWQgPSBmYWxzZQoKCVN0b3JtQW9lLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgaXNHb2xkIG9yIGlzTWFzdGVyIHRoZW4KCQkJaWYgbm90IERpc3BlcnNpb25FbmFibGVkIHRoZW4KCQkJCURpc3BlcnNpb25FbmFibGVkID0gdHJ1ZQoJCQkJU3Rvcm1Bb2UuVGV4dCA9ICIoRykgSW5zdGFudCBTdG9ybSBBb0UgKE9uKSIKCQkJZWxzZQoJCQkJRGlzcGVyc2lvbkVuYWJsZWQgPSBmYWxzZQoJCQkJU3Rvcm1Bb2UuVGV4dCA9ICIoRykgSW5zdGFudCBTdG9ybSBBb0UgKE9mZikiCgkJCWVuZAkKCQllbHNlCgkJCVN0b3JtQW9lLlRleHQgPSAiTWVtYmVyIE5vdCBHb2xkIgoJCQl3YWl0KDEpCgkJCVN0b3JtQW9lLlRleHQgPSAiKEcpIEluc3RhbnQgU3Rvcm0gQW9FIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIFNwbGl0dGluZyBTbGltZSBIYWNrCgoJbG9jYWwgU3BsaXR0aW5nU2xpbWUgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJU3BsaXR0aW5nU2xpbWUuTmFtZSA9ICJTcGxpdHRpbmdTbGltZSIKCVNwbGl0dGluZ1NsaW1lLlRleHQgPSAiU3BsaXR0aW5nIFNsaW1lIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgU3BsaXR0aW5nU2xpbWUpCgoJU3BsaXR0aW5nU2xpbWVFbmFibGVkID0gZmFsc2UKCglTcGxpdHRpbmdTbGltZS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIFNwbGl0dGluZ1NsaW1lRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCVNwbGl0dGluZ1NsaW1lRW5hYmxlZCA9IHRydWUKCQkJU3BsaXR0aW5nU2xpbWUuVGV4dCA9ICJTcGxpdHRpbmcgU2xpbWUgSGFjayAoT24pIgoJCWVsc2UKCQkJU3BsaXR0aW5nU2xpbWVFbmFibGVkID0gZmFsc2UKCQkJU3BsaXR0aW5nU2xpbWUuVGV4dCA9ICJTcGxpdHRpbmcgU2xpbWUgSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBBbWF1cm90aWMgTGFtYmVudCBIYWNrCgoJbG9jYWwgQW1hdXJvdGljTGFtYmVudCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglBbWF1cm90aWNMYW1iZW50Lk5hbWUgPSAiQW1hdXJvdGljTGFtYmVudCIKCUFtYXVyb3RpY0xhbWJlbnQuVGV4dCA9ICJBbWF1cm90aWMgTGFtYmVudCBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEFtYXVyb3RpY0xhbWJlbnQpCgoJQW1hdXJvdGljTGFtYmVudEVuYWJsZWQgPSBmYWxzZQoKCUFtYXVyb3RpY0xhbWJlbnQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBBbWF1cm90aWNMYW1iZW50RW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUFtYXVyb3RpY0xhbWJlbnRFbmFibGVkID0gdHJ1ZQoJCQlBbWF1cm90aWNMYW1iZW50LlRleHQgPSAiQW1hdXJvdGljIExhbWJlbnQgSGFjayAoT24pIgoJCWVsc2UKCQkJQW1hdXJvdGljTGFtYmVudEVuYWJsZWQgPSBmYWxzZQoJCQlBbWF1cm90aWNMYW1iZW50LlRleHQgPSAiQW1hdXJvdGljIExhbWJlbnQgSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBJbnN0YW50IFBsYXNtYSBJbXBsb3Npb24KCglsb2NhbCBQbGFzbWFJbXBsb3Npb24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJUGxhc21hSW1wbG9zaW9uLk5hbWUgPSAiUGxhc21hSW1wbG9zaW9uIgoJUGxhc21hSW1wbG9zaW9uLlRleHQgPSAiSW5zdGFudCBQbGFzbWEgSW1wbG9zaW9uIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFBsYXNtYUltcGxvc2lvbikKCglQbGFzbWFJbXBsb3Npb25FbmFibGVkID0gZmFsc2UKCglQbGFzbWFJbXBsb3Npb24uTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBQbGFzbWFJbXBsb3Npb25FbmFibGVkID09IGZhbHNlIHRoZW4KCQkJUGxhc21hSW1wbG9zaW9uRW5hYmxlZCA9IHRydWUKCQkJUGxhc21hSW1wbG9zaW9uLlRleHQgPSAiSW5zdGFudCBQbGFzbWEgSW1wbG9zaW9uIChPbikiCgkJZWxzZQoJCQlQbGFzbWFJbXBsb3Npb25FbmFibGVkID0gZmFsc2UKCQkJUGxhc21hSW1wbG9zaW9uLlRleHQgPSAiSW5zdGFudCBQbGFzbWEgSW1wbG9zaW9uIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIEZvcm1pZGFibGUgUm9hciBIYWNrCgoJbG9jYWwgRm9ybWlkYWJsZVJvYXIgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJRm9ybWlkYWJsZVJvYXIuTmFtZSA9ICJGb3JtaWRhYmxlUm9hciIKCUZvcm1pZGFibGVSb2FyLlRleHQgPSAiRm9ybWlkYWJsZSBSb2FyIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgRm9ybWlkYWJsZVJvYXIpCgoJRm9ybWlkYWJsZVJvYXJFbmFibGVkID0gZmFsc2UKCglGb3JtaWRhYmxlUm9hci5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIEZvcm1pZGFibGVSb2FyRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUZvcm1pZGFibGVSb2FyRW5hYmxlZCA9IHRydWUKCQkJRm9ybWlkYWJsZVJvYXIuVGV4dCA9ICJGb3JtaWRhYmxlIFJvYXIgSGFjayAoT24pIgoJCWVsc2UKCQkJRm9ybWlkYWJsZVJvYXJFbmFibGVkID0gZmFsc2UKCQkJRm9ybWlkYWJsZVJvYXIuVGV4dCA9ICJGb3JtaWRhYmxlIFJvYXIgSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBJbnN0YW50IFNrZWxldG9uIEdyYWIKCglsb2NhbCBTa2VsZXRvbkdyYWIgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJU2tlbGV0b25HcmFiLk5hbWUgPSAiU2tlbGV0b25HcmFiIgoJU2tlbGV0b25HcmFiLlRleHQgPSAiSW5zdGFudCBTa2VsZXRvbiBHcmFiIChPZmYpIFtBSU1FRF0iCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgU2tlbGV0b25HcmFiKQoKCVNrZWxldG9uR3JhYkVuYWJsZWQgPSBmYWxzZQoKCVNrZWxldG9uR3JhYi5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIFNrZWxldG9uR3JhYkVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlTa2VsZXRvbkdyYWJFbmFibGVkID0gdHJ1ZQoJCQlTa2VsZXRvbkdyYWIuVGV4dCA9ICJJbnN0YW50IFNrZWxldG9uIEdyYWIgKE9uKSBbQUlNRURdIgoJCWVsc2UKCQkJU2tlbGV0b25HcmFiRW5hYmxlZCA9IGZhbHNlCgkJCVNrZWxldG9uR3JhYi5UZXh0ID0gIkluc3RhbnQgU2tlbGV0b24gR3JhYiAoT2ZmKSBbQUlNRURdIgoJCWVuZAoJZW5kKQoKCS0tIEdyYXZpdGF0aW9uYWwgRmllbGQgSGFjawoKCWxvY2FsIEdyYXZpdGF0aW9uYWxGaWVsZCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglHcmF2aXRhdGlvbmFsRmllbGQuTmFtZSA9ICJHcmF2aXRhdGlvbmFsRmllbGQiCglHcmF2aXRhdGlvbmFsRmllbGQuVGV4dCA9ICJHcmF2aXRhdGlvbmFsIEZpZWxkIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgR3Jhdml0YXRpb25hbEZpZWxkKQoKCUdyYXZpdGF0aW9uYWxGaWVsZEVuYWJsZWQgPSBmYWxzZQoKCUdyYXZpdGF0aW9uYWxGaWVsZC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIEdyYXZpdGF0aW9uYWxGaWVsZEVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlHcmF2aXRhdGlvbmFsRmllbGRFbmFibGVkID0gdHJ1ZQoJCQlHcmF2aXRhdGlvbmFsRmllbGQuVGV4dCA9ICJHcmF2aXRhdGlvbmFsIEZpZWxkIEhhY2sgKE9uKSIKCQllbHNlCgkJCUdyYXZpdGF0aW9uYWxGaWVsZEVuYWJsZWQgPSBmYWxzZQoJCQlHcmF2aXRhdGlvbmFsRmllbGQuVGV4dCA9ICJHcmF2aXRhdGlvbmFsIEZpZWxkIEhhY2sgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gSW5zdGFudCBSb2NrIEFybW9yCgoJbG9jYWwgUm9ja0FybW9yID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCVJvY2tBcm1vci5OYW1lID0gIlJvY2tBcm1vciIKCVJvY2tBcm1vci5UZXh0ID0gIkluc3RhbnQgUm9jayBBcm1vciIKCXRhYmxlLmluc2VydChidXR0b25zLCBSb2NrQXJtb3IpCgoJUm9ja0FybW9yLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQm9keSBDb2xvcnMiKSB0aGVuCgkJCXBsYXllci5DaGFyYWN0ZXJbIkJvZHkgQ29sb3JzIl06RGVzdHJveSgpCgkJZW5kCgkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiRWFydGgiLCAiUm9jayBBcm1vciIpCgkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJFYXJ0aCIsICJSb2NrIEFybW9yIikKCWVuZCkKCgktLS0tIFBsYXllciBtb2RpZmljYXRpb25zCgktLSBTbGltZSBCdWRkaWVzIEhhY2sKCglsb2NhbCBTbGltZUJ1ZGRpZXMgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJU2xpbWVCdWRkaWVzLk5hbWUgPSAiU2xpbWVCdWRkaWVzIgoJU2xpbWVCdWRkaWVzLlRleHQgPSAiKEcpIFNsaW1lIEJ1ZGRpZXMgSGFjayAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBTbGltZUJ1ZGRpZXMpCgoJbG9jYWwgU2xpbWVCdWRkaWVzRW5hYmxlZCA9IGZhbHNlCgoJU2xpbWVCdWRkaWVzLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgaXNHb2xkIG9yIGlzTWFzdGVyIHRoZW4KCQkJaWYgU2xpbWVCdWRkaWVzRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCQlTbGltZUJ1ZGRpZXNFbmFibGVkID0gdHJ1ZQoJCQkJU2xpbWVCdWRkaWVzLlRleHQgPSAiKEcpIFNsaW1lIEJ1ZGRpZXMgSGFjayAoT24pIgoJCQllbHNlCgkJCQlTbGltZUJ1ZGRpZXNFbmFibGVkID0gZmFsc2UKCQkJCVNsaW1lQnVkZGllcy5UZXh0ID0gIihHKSBTbGltZSBCdWRkaWVzIEhhY2sgKE9mZikiCgkJCWVuZAoJCWVsc2UKCQkJU2xpbWVCdWRkaWVzLlRleHQgPSAiTWVtYmVyIE5vdCBHb2xkIgoJCQl3YWl0KDEpCgkJCVNsaW1lQnVkZGllcy5UZXh0ID0gIihHKSBTbGltZSBCdWRkaWVzIEhhY2sgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gSW5lcnRpYSBHcmF2aXR5CgoJbG9jYWwgSW5lcnRpYUdyYXZpdHkgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJSW5lcnRpYUdyYXZpdHkuTmFtZSA9ICJJbmVydGlhR3Jhdml0eSIKCUluZXJ0aWFHcmF2aXR5LlRleHQgPSAiSW5lcnRpYSBHcmF2aXR5IChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEluZXJ0aWFHcmF2aXR5KQoKCUluZXJ0aWFHcmF2aXR5RW5hYmxlZCA9IGZhbHNlCgoJSW5lcnRpYUdyYXZpdHkuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBJbmVydGlhR3Jhdml0eUVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlJbmVydGlhR3Jhdml0eUVuYWJsZWQgPSB0cnVlCgkJCUluZXJ0aWFHcmF2aXR5LlRleHQgPSAiSW5lcnRpYSBHcmF2aXR5IChPbikiCgkJCWxvY2FsIEJvZHlGb3JjZSA9IEluc3RhbmNlLm5ldygiQm9keUZvcmNlIikKCQkJQm9keUZvcmNlLlBhcmVudCA9IHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydAoJCQlCb2R5Rm9yY2UuTmFtZSA9ICJJbmVydGlhR3Jhdml0eUZvcmNlIgoJCQlCb2R5Rm9yY2UuRm9yY2UgPSBWZWN0b3IzLm5ldygwLCAxNjM4LCAwKQoJCWVsc2UKCQkJSW5lcnRpYUdyYXZpdHlFbmFibGVkID0gZmFsc2UKCQkJSW5lcnRpYUdyYXZpdHkuVGV4dCA9ICJJbmVydGlhIEdyYXZpdHkgKE9mZikiCgkJCWlmIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDpGaW5kRmlyc3RDaGlsZCgiSW5lcnRpYUdyYXZpdHlGb3JjZSIpIHRoZW4KCQkJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5JbmVydGlhR3Jhdml0eUZvcmNlOkRlc3Ryb3koKQoJCQllbmQKCQllbmQKCWVuZCkKCgktLSBTcGVjdHJhbCBFbWJvZGltZW50CgoJbG9jYWwgU3BlY3RyYWxFbWJvZGltZW50ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCVNwZWN0cmFsRW1ib2RpbWVudC5OYW1lID0gIlNwZWN0cmFsRW1ib2RpbWVudCIKCVNwZWN0cmFsRW1ib2RpbWVudC5UZXh0ID0gIlNwZWN0cmFsIEVtYm9kaW1lbnQgS2V5YmluZCAoT2ZmKSBbWF0iCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgU3BlY3RyYWxFbWJvZGltZW50KQoKCVNwZWN0cmFsRW1ib2RpbWVudEVuYWJsZWQgPSBmYWxzZQoKCVNwZWN0cmFsRW1ib2RpbWVudC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIFNwZWN0cmFsRW1ib2RpbWVudEVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlTcGVjdHJhbEVtYm9kaW1lbnRFbmFibGVkID0gdHJ1ZQoJCQlTcGVjdHJhbEVtYm9kaW1lbnQuVGV4dCA9ICJTcGVjdHJhbCBFbWJvZGltZW50IEtleWJpbmQgKE9uKSBbWF0iCgkJZWxzZQoJCQlTcGVjdHJhbEVtYm9kaW1lbnRFbmFibGVkID0gZmFsc2UKCQkJU3BlY3RyYWxFbWJvZGltZW50LlRleHQgPSAiU3BlY3RyYWwgRW1ib2RpbWVudCBLZXliaW5kIChPZmYpIFtYXSIKCQllbmQKCWVuZCkKCgktLSBBbnRpLUJsaW5kCgoJbG9jYWwgQW50aUJsaW5kID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUFudGlCbGluZC5OYW1lID0gIkFudGlCbGluZCIKCUFudGlCbGluZC5UZXh0ID0gIkFudGktQmxpbmQgKE9mZikgW0tdIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEFudGlCbGluZCkKCglBbnRpQmxpbmRFbmFibGVkID0gZmFsc2UKCglsb2NhbCBub3JtYWxGb2dDb2xvciA9IGdhbWUuTGlnaHRpbmcuRm9nQ29sb3IKCWxvY2FsIG5vcm1hbEZvZ0VuZCA9IGdhbWUuTGlnaHRpbmcuRm9nRW5kCglsb2NhbCBub3JtYWxCcmlnaHRuZXNzID0gZ2FtZS5MaWdodGluZy5CcmlnaHRuZXNzCglsb2NhbCBub3JtYWxDbG9ja1RpbWUgPSBnYW1lLkxpZ2h0aW5nLkNsb2NrVGltZQoKCWxvY2FsIGZ1bmN0aW9uIEFudGlCbGluZEZ1bmMoKQoJCWlmIEFudGlCbGluZEVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlBbnRpQmxpbmRFbmFibGVkID0gdHJ1ZQoJCQlBbnRpQmxpbmQuVGV4dCA9ICJBbnRpLUJsaW5kIChPbikgW0tdIgoJCQl3aGlsZSBBbnRpQmxpbmRFbmFibGVkIGRvCgkJCQl3YWl0KCkKCQkJCWdhbWUuTGlnaHRpbmcuRm9nQ29sb3IgPSBub3JtYWxGb2dDb2xvcgoJCQkJZ2FtZS5MaWdodGluZy5Gb2dFbmQgPSBub3JtYWxGb2dFbmQKCQkJCWdhbWUuTGlnaHRpbmcuQnJpZ2h0bmVzcyA9IG5vcm1hbEJyaWdodG5lc3MKCQkJCWdhbWUuTGlnaHRpbmcuQ2xvY2tUaW1lID0gbm9ybWFsQ2xvY2tUaW1lCgkJCWVuZAoJCWVsc2UKCQkJQW50aUJsaW5kRW5hYmxlZCA9IGZhbHNlCgkJCUFudGlCbGluZC5UZXh0ID0gIkFudGktQmxpbmQgKE9mZikgW0tdIgoJCWVuZAoJZW5kCgoJQW50aUJsaW5kLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChBbnRpQmxpbmRGdW5jKQoKCXBsYXllcjpXYWl0Rm9yQ2hpbGQoIlBsYXllckd1aSIpLkRlc2NlbmRhbnRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKGQpCgkJaWYgQW50aUJsaW5kRW5hYmxlZCB0aGVuCgkJCWlmIGQuTmFtZSA9PSAiU2NyZWVuR3VpIiB0aGVuCgkJCQl3YWl0KCkKCQkJCXBsYXllci5QbGF5ZXJHdWkuU2NyZWVuR3VpOkRlc3Ryb3koKQoJCQllbHNlaWYgZC5OYW1lID09ICJEaXN0b3J0IiB0aGVuCgkJCQl3YWl0KCkKCQkJCXBsYXllci5QbGF5ZXJHdWkuRGlzdG9ydDpEZXN0cm95KCkKCQkJZW5kCgkJZW5kCgllbmQpCgoJLS0gU3BlZWQgaGFjawoKCWxvY2FsIFNwZWVkaGFjayA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglTcGVlZGhhY2suTmFtZSA9ICJTcGVlZGhhY2siCglTcGVlZGhhY2suVGV4dCA9ICJTcGVlZGhhY2sgW2RlZmF1bHQgNjRdIChPZmYpIFtUXSIKCXRhYmxlLmluc2VydChidXR0b25zLCBTcGVlZGhhY2spCgoJU3BlZWRoYWNrRW5hYmxlZCA9IGZhbHNlCglTZXRTcGVlZCA9IDY0CgoJZnVuY3Rpb24gbW9kaWZ5U3BlZWQoKQoJCXBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikuQ2hhbmdlZDpjb25uZWN0KGZ1bmN0aW9uKCkKCQkJaWYgU3BlZWRoYWNrRW5hYmxlZCBhbmQgU2V0U3BlZWQgfj0gbmlsIHRoZW4KCQkJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuV2Fsa1NwZWVkID0gU2V0U3BlZWQKCQkJZWxzZQoJCQkJcmV0dXJuCgkJCWVuZAoJCWVuZCkKCWVuZAoKCWZ1bmN0aW9uIGJlZ2luU3BlZWQoKQoJCWlmIFNwZWVkaGFja0VuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlTcGVlZGhhY2tFbmFibGVkID0gdHJ1ZQoJCQlTcGVlZGhhY2suVGV4dCA9ICJTcGVlZGhhY2sgW2RlZmF1bHQgNjRdIChPbikgW1RdIgoJCQltb2RpZnlTcGVlZCgpCgkJCXdhaXQoKQoJCQlwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLldhbGtTcGVlZCA9IFNldFNwZWVkCgkJCXdoaWxlIFNwZWVkaGFja0VuYWJsZWQgZG8KCQkJCXdhaXQoKQoJCQkJaWYgcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPT0gMCB0aGVuCgkJCQkJcmVwZWF0IHdhaXQoKSB1bnRpbCBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCB+PSAwCgkJCQkJbW9kaWZ5U3BlZWQoKQoJCQkJCXdhaXQoKQoJCQkJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuV2Fsa1NwZWVkID0gU2V0U3BlZWQKCQkJCWVuZAoJCQllbmQKCQllbHNlCgkJCVNwZWVkaGFja0VuYWJsZWQgPSBmYWxzZQoJCQlTcGVlZGhhY2suVGV4dCA9ICJTcGVlZGhhY2sgW2RlZmF1bHQgNjRdIChPZmYpIFtUXSIKCQllbmQKCWVuZAoKCVNwZWVkaGFjay5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoYmVnaW5TcGVlZCkKCgktLS0tIEJ1bGxldHMKCS0tIEh5cGVyYW5nIEhhY2sKCglsb2NhbCBUZWNoUmFuZyA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglUZWNoUmFuZy5OYW1lID0gIlRlY2hSYW5nIgoJVGVjaFJhbmcuVGV4dCA9ICJIeXBlcmFuZyBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFRlY2hSYW5nKQoKCWxvY2FsIEh5cGVyYW5nRW5hYmxlZCA9IGZhbHNlCgoJVGVjaFJhbmcuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBub3QgSHlwZXJhbmdFbmFibGVkIHRoZW4KCQkJSHlwZXJhbmdFbmFibGVkID0gdHJ1ZQoJCQlUZWNoUmFuZy5UZXh0ID0gIkh5cGVyYW5nIEhhY2sgKE9uKSIKCQllbHNlCgkJCUh5cGVyYW5nRW5hYmxlZCA9IGZhbHNlCgkJCVRlY2hSYW5nLnRleHQgPSAiSHlwZXJhbmcgSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBBc3Rlcm9pZCBCZWx0IEhhY2sKCglsb2NhbCBBc3Rlcm9pZEJlbHRIYWNrID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUFzdGVyb2lkQmVsdEhhY2suTmFtZSA9ICJBc3Rlcm9pZEJlbHRIYWNrIgoJQXN0ZXJvaWRCZWx0SGFjay5UZXh0ID0gIkF0ZXJvaWRzIEJlbHQgSGFjayAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBBc3Rlcm9pZEJlbHRIYWNrKQoJCglsb2NhbCBBc3Rlcm9pZEJlbHRFbmFibGVkID0gZmFsc2UKCQoJQXN0ZXJvaWRCZWx0SGFjay5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIEFzdGVyb2lkQmVsdEVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlBc3Rlcm9pZEJlbHRFbmFibGVkID0gdHJ1ZQoJCQlBc3Rlcm9pZEJlbHRIYWNrLlRleHQgPSAiQXN0ZXJvaWQgQmVsdCBIYWNrIChPbikiCgkJZWxzZQoJCQlBc3Rlcm9pZEJlbHRFbmFibGVkID0gZmFsc2UKCQkJQXN0ZXJvaWRCZWx0SGFjay5UZXh0ID0gIkF0ZXJvaWRzIEJlbHQgSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBPcmJzIG9mIEVubGlnaHRlbm1lbnQgSGFjawoKCWxvY2FsIExpZ2h0T3Jic0hhY2sgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJTGlnaHRPcmJzSGFjay5OYW1lID0gIkxpZ2h0T3Jic0hhY2siCglMaWdodE9yYnNIYWNrLlRleHQgPSAiTGlnaHQgT3JicyBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIExpZ2h0T3Jic0hhY2spCgoJbG9jYWwgbE9yYnNFbmFibGVkID0gZmFsc2UKCglMaWdodE9yYnNIYWNrLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgbE9yYnNFbmFibGVkIHRoZW4KCQkJbE9yYnNFbmFibGVkID0gZmFsc2UKCQkJTGlnaHRPcmJzSGFjay5UZXh0ID0gIkxpZ2h0IE9yYnMgSGFjayAoT2ZmKSIKCQllbHNlCgkJCWxPcmJzRW5hYmxlZCA9IHRydWUKCQkJTGlnaHRPcmJzSGFjay5UZXh0ID0gIkxpZ2h0IE9yYnMgSGFjayAoT24pIgoJCWVuZAoJZW5kKQoKCS0tIFZpZ29yIEd5cmF0aW9uIEhhY2sKCglsb2NhbCBWaWdHeXJhdEhhY2sgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJVmlnR3lyYXRIYWNrLk5hbWUgPSAiVmlnR3lyYXRIYWNrIgoJVmlnR3lyYXRIYWNrLlRleHQgPSAiVmlnb3IgR3lyYXRpb24gSGFjayAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBWaWdHeXJhdEhhY2spCgkKCWxvY2FsIFZpZ29ySGFja0VuYWJsZWQgPSBmYWxzZQoJCglWaWdHeXJhdEhhY2suTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBWaWdvckhhY2tFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJVmlnb3JIYWNrRW5hYmxlZCA9IHRydWUKCQkJVmlnR3lyYXRIYWNrLlRleHQgPSAiVmlnb3IgR3lyYXRpb24gSGFjayAoT24pIgoJCWVsc2UKCQkJVmlnb3JIYWNrRW5hYmxlZCA9IGZhbHNlCgkJCVZpZ0d5cmF0SGFjay5UZXh0ID0gIlZpZ29yIEd5cmF0aW9uIEhhY2sgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gTGlnaHRuaW5nIEJhcnJhZ2UgSGFjawoKCWxvY2FsIEJhcnJhZ2UgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJQmFycmFnZS5OYW1lID0gIkJhcnJhZ2UiCglCYXJyYWdlLlRleHQgPSAiQmFycmFnZSBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEJhcnJhZ2UpCgoJQmFycmFnZS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIG5vdCBTdG9ybUJ1bGxldHNFbmFibGVkIHRoZW4KCQkJU3Rvcm1CdWxsZXRzRW5hYmxlZCA9IHRydWUKCQkJQmFycmFnZS5UZXh0ID0gIkJhcnJhZ2UgSGFjayAoT24pIgoJCWVsc2UKCQkJU3Rvcm1CdWxsZXRzRW5hYmxlZCA9IGZhbHNlCgkJCUJhcnJhZ2UuVGV4dCA9ICJCYXJyYWdlIEhhY2sgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gRHlpbmcgU3RhciBIYWNrCgoJbG9jYWwgRHlpbmdTdGFySGFjayA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglEeWluZ1N0YXJIYWNrLk5hbWUgPSAiRHlpbmdTdGFySGFjayIKCUR5aW5nU3RhckhhY2suVGV4dCA9ICIoRykgRHlpbmcgU3RhciBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIER5aW5nU3RhckhhY2spCgoJbG9jYWwgRHlpbmdTdGFyRW5hYmxlZCA9IGZhbHNlCgoJRHlpbmdTdGFySGFjay5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIGlzR29sZCBvciBpc01hc3RlciB0aGVuCgkJCWlmIER5aW5nU3RhckVuYWJsZWQgdGhlbgoJCQkJRHlpbmdTdGFyRW5hYmxlZCA9IGZhbHNlCgkJCQlEeWluZ1N0YXJIYWNrLlRleHQgPSAiKEcpIER5aW5nIFN0YXIgSGFjayAoT2ZmKSIKCQkJZWxzZQoJCQkJRHlpbmdTdGFyRW5hYmxlZCA9IHRydWUKCQkJCUR5aW5nU3RhckhhY2suVGV4dCA9ICIoRykgRHlpbmcgU3RhciBIYWNrIChPbikiCgkJCWVuZAoJCWVsc2UKCQkJRHlpbmdTdGFySGFjay5UZXh0ID0gIk1lbWJlciBOb3QgR29sZCIKCQkJd2FpdCgxKQoJCQlEeWluZ1N0YXJIYWNrLlRleHQgPSAiKEcpIER5aW5nIFN0YXIgSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLS0tIEJsYXN0cwoJLS0gT3JiaXRhbCBTdHJpa2UgSGFjawoKCWxvY2FsIE9yYml0YWwgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJT3JiaXRhbC5OYW1lID0gIk9yaWJ0YWwiCglPcmJpdGFsLlRleHQgPSAiKEcpIE9yYml0YWwgU3RyaWtlIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgT3JiaXRhbCkKCglsb2NhbCBPcmJpdGFsSGFja0VuYWJsZWQgPSBmYWxzZQoKCU9yYml0YWwuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBpc0dvbGQgb3IgaXNNYXN0ZXIgdGhlbgoJCQlpZiBub3QgT3JiaXRhbEhhY2tFbmFibGVkIHRoZW4KCQkJCU9yYml0YWxIYWNrRW5hYmxlZCA9IHRydWUKCQkJCU9yYml0YWwuVGV4dCA9ICIoRykgT3JiaXRhbCBTdHJpa2UgSGFjayAoT24pIgoJCQllbHNlCgkJCQlPcmJpdGFsSGFja0VuYWJsZWQgPSBmYWxzZQoJCQkJT3JiaXRhbC5UZXh0ID0gIihHKSBPcmJpdGFsIFN0cmlrZSBIYWNrIChPZmYpIgoJCQllbmQKCQllbHNlCgkJCU9yYml0YWwuVGV4dCA9ICJNZW1iZXIgTm90IEdvbGQiCgkJCXdhaXQoMSkKCQkJT3JiaXRhbC5UZXh0ID0gIihHKSBPcmJpdGFsIFN0cmlrZSBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIERvdWJsZSBSYXkgSGFjawoKCWxvY2FsIERvdWJsZVJheSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglEb3VibGVSYXkuTmFtZSA9ICJEb3VibGVSYXkiCglEb3VibGVSYXkuVGV4dCA9ICIoRykgRG91YmxlIFJheSBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIERvdWJsZVJheSkKCglEb3VibGVSYXkuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBpc0dvbGQgb3IgaXNNYXN0ZXIgdGhlbgoJCQlpZiBub3QgRG91YmxlUmF5RW5hYmxlZCB0aGVuCgkJCQlEb3VibGVSYXlFbmFibGVkID0gdHJ1ZQoJCQkJRG91YmxlUmF5LlRleHQgPSAiKEcpIERvdWJsZSBSYXkgSGFjayAoT24pIgoJCQllbHNlCgkJCQlEb3VibGVSYXlFbmFibGVkID0gZmFsc2UKCQkJCURvdWJsZVJheS5UZXh0ID0gIihHKSBEb3VibGUgUmF5IEhhY2sgKE9mZikiCgkJCWVuZAoJCWVsc2UKCQkJRG91YmxlUmF5LlRleHQgPSAiTWVtYmVyIE5vdCBHb2xkIgoJCQl3YWl0KDEpCgkJCURvdWJsZVJheS5UZXh0ID0gIihHKSBEb3VibGUgUmF5IEhhY2sgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gSG9sb2JlYW0gQ2FtZXJhIEF0dGFjaAoKCWxvY2FsIEhvbG9iZWFtID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUhvbG9iZWFtLk5hbWUgPSAiSG9sb2JlYW0iCglIb2xvYmVhbS5UZXh0ID0gIkhvbG9iZWFtIENhbWVyYSBBdHRhY2ggKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgSG9sb2JlYW0pCgoJSG9sb2JlYW1FbmFibGVkID0gZmFsc2UKCglmdW5jdGlvbiBhdHRhY2hDYW1lcmEodikKCQlpZiAodiB+PSBuaWwpIHRoZW4KCQkJaWYgbm90KHZpZXdpbmcpIGFuZCAodi5OYW1lID09ICJIb2xvYmVhbSIpIHRoZW4KCQkJCWdhbWUuV29ya3NwYWNlLkNhbWVyYS5DYW1lcmFTdWJqZWN0ID0gZ2FtZS5Xb3Jrc3BhY2VbJy5JZ25vcmUnXVsnLkF0dGFja3MnXVt2Lk5hbWVdCgkJCWVsc2UKCQkJCXY6RGVzdHJveSgpCgkJCQlyZXR1cm4KCQkJZW5kCgkJCQoJCQl2LlRyYW5zcGFyZW5jeSA9IDAKCgkJCXdhaXQoNCkKCQkJaWYgbm90KHZpZXdpbmcpIGFuZCBub3QoZ2FtZS5Xb3Jrc3BhY2UuQ2FtZXJhLkNhbWVyYVN1YmplY3QgPT0gcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZCkgdGhlbgoJCQkJZ2FtZS5Xb3Jrc3BhY2UuQ2FtZXJhLkNhbWVyYVN1YmplY3QgPSBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkCgkJCWVuZAoJCQkKCQkJdjpEZXN0cm95KCkKCQllbmQKCWVuZAoJCglnYW1lLldvcmtzcGFjZVsnLklnbm9yZSddWycuQXR0YWNrcyddLkRlc2NlbmRhbnRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHYpCgkJaWYgSG9sb2JlYW1FbmFibGVkIHRoZW4KCQkJaWYgKHYuTmFtZSA9PSAiUGFydCIpIGFuZCAocGxheWVyLkNoYXJhY3RlcikgdGhlbgoJCQkJbG9jYWwgZGlzdGFuY2UgPSAocGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdi5Qb3NpdGlvbikuTWFnbml0dWRlCgkJCQkKCQkJCWlmICh2LlNpemUgPT0gVmVjdG9yMy5uZXcoNSwgNSwgNSkpIGFuZCAoZGlzdGFuY2UgPCAxMCkgYW5kICh2OldhaXRGb3JDaGlsZCgiQm9keVZlbG9jaXR5IiwgMSkpIGFuZCAodjpXYWl0Rm9yQ2hpbGQoIkJvZHlHeXJvIiwgMSkpIGFuZCAodi5Cb2R5VmVsb2NpdHkuUCA+PSAxMjUwKSB0aGVuCgkJCQkKCQkJCQl2Lk5hbWUgPSAiSG9sb2JlYW0iCgkJCQkKCQkJCQlwY2FsbChmdW5jdGlvbigpCgkJCQkJCWNvcm91dGluZS5yZXN1bWUoY29yb3V0aW5lLmNyZWF0ZShmdW5jdGlvbigpIAoJCQkJCQkJYXR0YWNoQ2FtZXJhKHYpIAoJCQkJCQllbmQpKQoJCQkJCWVuZCkKCQkJCQkKCQkJCQlsb2NhbCBndWkgPSBwbGF5ZXIuUGxheWVyR3VpLk1haW4uU2tpbGxzQmFyCgkJCQkJCgkJCQkJd2FpdCgwLjUpCgkJCQkJCgkJCQkJd2hpbGUgd2FpdCgpIGRvCgkJCQkJCWlmIG5vdChndWlbJzEnXS5DRC5UZXh0ID09ICIuLi4iKSBhbmQgbm90KGd1aVsnMiddLkNELlRleHQgPT0gIi4uLiIpIGFuZCBub3QoZ3VpWyczJ10uQ0QuVGV4dCA9PSAiLi4uIikgYW5kIG5vdChndWlbJzQnXS5DRC5UZXh0ID09ICIuLi4iKSBhbmQgbm90KGd1aVsnNSddLkNELlRleHQgPT0gIi4uLiIpIHRoZW4KCQkJCQkJCXBjYWxsKGZ1bmN0aW9uKCkKCQkJCQkJCQlpZiBub3Qodmlld2luZykgYW5kIG5vdChnYW1lLldvcmtzcGFjZS5DYW1lcmEuQ2FtZXJhU3ViamVjdCA9PSBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkKSB0aGVuCgkJCQkJCQkJCWdhbWUuV29ya3NwYWNlLkNhbWVyYS5DYW1lcmFTdWJqZWN0ID0gcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZAoJCQkJCQkJCWVuZAoJCQkKCQkJCQkJCQl2OkRlc3Ryb3koKQoJCQkJCQkJZW5kKQoJCQkJCQkJCgkJCQkJCQlicmVhawoJCQkJCQllbmQKCQkJCQllbmQKCQkJCWVuZAoJCQllbmQKCQllbmQKCWVuZCkKCglIb2xvYmVhbS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIEhvbG9iZWFtRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUhvbG9iZWFtRW5hYmxlZCA9IHRydWUKCQkJSG9sb2JlYW0uVGV4dCA9ICJIb2xvYmVhbSBDYW1lcmEgQXR0YWNoIChPbikiCgkJCQoJCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZVsnLklnbm9yZSddWycuQXR0YWNrcyddOkdldENoaWxkcmVuKCkpIGRvCgkJCQlpZiAodi5OYW1lID09ICJQYXJ0IikgYW5kICh2OldhaXRGb3JDaGlsZCgiQm9keVZlbG9jaXR5IiwgMSkpIGFuZCAodjpXYWl0Rm9yQ2hpbGQoIkJvZHlHeXJvIiwgMSkpIGFuZCAodi5Cb2R5VmVsb2NpdHkuUCA+PSAxMjUwKSB0aGVuIHY6RGVzdHJveSgpIGVuZAoJCQllbmQKCQllbHNlCgkJCUhvbG9iZWFtRW5hYmxlZCA9IGZhbHNlCgkJCUhvbG9iZWFtLlRleHQgPSAiSG9sb2JlYW0gQ2FtZXJhIEF0dGFjaCAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBDb250cm9sbGVkIEVjaG9lcwoKCWxvY2FsIEVjaG9lcyA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglFY2hvZXMuTmFtZSA9ICJFY2hvZXMiCglFY2hvZXMuVGV4dCA9ICJDb250cm9sbGVkIEVjaG9lcyAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBFY2hvZXMpCgoJQ29udHJvbGxlZEVjaG9lc0VuYWJsZWQgPSBmYWxzZQoJRWNob2VzUGhhc2UgPSAxCgoJRWNob2VzLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgQ29udHJvbGxlZEVjaG9lc0VuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlDb250cm9sbGVkRWNob2VzRW5hYmxlZCA9IHRydWUKCQkJRWNob2VzLlRleHQgPSAiQ29udHJvbGxlZCBFY2hvZXMgKE9uKSIKCQllbHNlCgkJCUNvbnRyb2xsZWRFY2hvZXNFbmFibGVkID0gZmFsc2UKCQkJRWNob2VzLlRleHQgPSAiQ29udHJvbGxlZCBFY2hvZXMgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0tLSBTaGllbGRzCgktLSBDcnlzdGFsIEFybWFtZW50IEhhY2sKCglsb2NhbCBDcnlzdGFsQXJtYW1lbnQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJQ3J5c3RhbEFybWFtZW50Lk5hbWUgPSAiQ3J5c3RhbEFybWFtZW50IgoJQ3J5c3RhbEFybWFtZW50LlRleHQgPSAiSW5zdGFudCBDcnlzdGFsIEFybWFtZW50IChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIENyeXN0YWxBcm1hbWVudCkKCglDcnlzdGFsQXJtYW1lbnRFbmFibGVkID0gZmFsc2UKCglDcnlzdGFsQXJtYW1lbnQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBDcnlzdGFsQXJtYW1lbnRFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJQ3J5c3RhbEFybWFtZW50RW5hYmxlZCA9IHRydWUKCQkJQ3J5c3RhbEFybWFtZW50LlRleHQgPSAiSW5zdGFudCBDcnlzdGFsIEFybWFtZW50IChPbikiCgkJZWxzZQoJCQlDcnlzdGFsQXJtYW1lbnRFbmFibGVkID0gZmFsc2UKCQkJQ3J5c3RhbEFybWFtZW50LlRleHQgPSAiSW5zdGFudCBDcnlzdGFsIEFybWFtZW50IChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIEdyYXZpdGFsIEdsb2JlIEhhY2sKCglsb2NhbCBHcmF2aXRhbEdsb2JlID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUdyYXZpdGFsR2xvYmUuTmFtZSA9ICJHcmF2aXRhbEdsb2JlIgoJR3Jhdml0YWxHbG9iZS5UZXh0ID0gIkdyYXZpdGFsIEdsb2JlIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgR3Jhdml0YWxHbG9iZSkKCglHcmF2aXRhbEdsb2JlRW5hYmxlZCA9IGZhbHNlCgoJR3Jhdml0YWxHbG9iZS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIEdyYXZpdGFsR2xvYmVFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJR3Jhdml0YWxHbG9iZUVuYWJsZWQgPSB0cnVlCgkJCUdyYXZpdGFsR2xvYmUuVGV4dCA9ICJHcmF2aXRhbCBHbG9iZSBIYWNrIChPbikiCgkJZWxzZQoJCQlHcmF2aXRhbEdsb2JlRW5hYmxlZCA9IGZhbHNlCgkJCUdyYXZpdGFsR2xvYmUuVGV4dCA9ICJHcmF2aXRhbCBHbG9iZSBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tLS0gVWx0cwoJLS0gUmVhcGVyJ3MgUmFnZQoJbG9jYWwgUmVhcGVyVWx0ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCVJlYXBlclVsdC5OYW1lID0gIlJlYXBlclVsdCIKCVJlYXBlclVsdC5UZXh0ID0gIihHKSBSZWFwZXIncyBSYWdlIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgUmVhcGVyVWx0KQoKCWxvY2FsIFJlYXBlclVsdEVuYWJsZWQgPSBmYWxzZQoKCVJlYXBlclVsdC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIGlzR29sZCBvciBpc01hc3RlciB0aGVuCgkJCWlmIG5vdCBSZWFwZXJVbHRFbmFibGVkIHRoZW4KCQkJCVJlYXBlclVsdEVuYWJsZWQgPSB0cnVlCgkJCQlSZWFwZXJVbHQuVGV4dCA9ICIoRykgUmVhcGVyJ3MgUmFnZSBIYWNrIChPbikiCgkJCWVsc2UKCQkJCVJlYXBlclVsdEVuYWJsZWQgPSBmYWxzZQoJCQkJUmVhcGVyVWx0LlRleHQgPSAiKEcpIFJlYXBlcidzIFJhZ2UgSGFjayAoT2ZmKSIKCQkJZW5kCgkJZWxzZQoJCQlSZWFwZXJVbHQuVGV4dCA9ICJNZW1iZXIgTm90IEdvbGQiCgkJCXdhaXQoMSkKCQkJUmVhcGVyVWx0LlRleHQgPSAiKEcpIFJlYXBlcidzIFJhZ2UgSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBBYmxhemUgSnVkZ2VtZW50IEhhY2sKCglsb2NhbCBBYmxhemVKdWRnZW1lbnQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJQWJsYXplSnVkZ2VtZW50Lk5hbWUgPSAiQWJsYXplSnVkZ2VtZW50IgoJQWJsYXplSnVkZ2VtZW50LlRleHQgPSAiQWJsYXplIEp1ZGdlbWVudCBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEFibGF6ZUp1ZGdlbWVudCkKCglBYmxhemVKdWRnZW1lbnRIYWNrRW5hYmxlZCA9IGZhbHNlCgoJQWJsYXplSnVkZ2VtZW50Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgQWJsYXplSnVkZ2VtZW50SGFja0VuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlBYmxhemVKdWRnZW1lbnRIYWNrRW5hYmxlZCA9IHRydWUKCQkJQWJsYXplSnVkZ2VtZW50LlRleHQgPSAiQWJsYXplIEp1ZGdlbWVudCBIYWNrIChPbikiCgkJZWxzZQoJCQlBYmxhemVKdWRnZW1lbnRIYWNrRW5hYmxlZCA9IGZhbHNlCgkJCUFibGF6ZUp1ZGdlbWVudC5UZXh0ID0gIkFibGF6ZSBKdWRnZW1lbnQgSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBWb2lkIE9wZW5pbmcgSGFjawoKCWxvY2FsIFZvaWRPcGVuaW5nID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCVZvaWRPcGVuaW5nLk5hbWUgPSAiVm9pZE9wZW5pbmciCglWb2lkT3BlbmluZy5UZXh0ID0gIlZvaWQgT3BlbmluZyBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFZvaWRPcGVuaW5nKQoKCVZvaWRPcGVuaW5nSGFja0VuYWJsZWQgPSBmYWxzZQoKCVZvaWRPcGVuaW5nLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgVm9pZE9wZW5pbmdIYWNrRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCVZvaWRPcGVuaW5nSGFja0VuYWJsZWQgPSB0cnVlCgkJCVZvaWRPcGVuaW5nLlRleHQgPSAiVm9pZCBPcGVuaW5nIEhhY2sgKE9uKSIKCQllbHNlCgkJCVZvaWRPcGVuaW5nSGFja0VuYWJsZWQgPSBmYWxzZQoJCQlWb2lkT3BlbmluZy5UZXh0ID0gIlZvaWQgT3BlbmluZyBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIFRoZSBXb3JsZCBIYWNrCgoJbG9jYWwgVGhlV29ybGQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJVGhlV29ybGQuTmFtZSA9ICJUaGVXb3JsZCIKCVRoZVdvcmxkLlRleHQgPSAiVGhlIFdvcmxkIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgVGhlV29ybGQpCgoJVGhlV29ybGRFbmFibGVkID0gZmFsc2UKCglUaGVXb3JsZC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIFRoZVdvcmxkRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCVRoZVdvcmxkRW5hYmxlZCA9IHRydWUKCQkJVGhlV29ybGQuVGV4dCA9ICJUaGUgV29ybGQgSGFjayAoT24pIgoJCWVsc2UKCQkJVGhlV29ybGRFbmFibGVkID0gZmFsc2UKCQkJVGhlV29ybGQuVGV4dCA9ICJUaGUgV29ybGQgSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBQb2xhcmlzIEhhY2sKCglsb2NhbCBQb2xhcmlzID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCVBvbGFyaXMuTmFtZSA9ICJQb2xhcmlzIgoJUG9sYXJpcy5UZXh0ID0gIlBvbGFyaXMgSGFjayAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBQb2xhcmlzKQoKCVBvbGFyaXNFbmFibGVkID0gZmFsc2UKCglQb2xhcmlzLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgUG9sYXJpc0VuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlQb2xhcmlzRW5hYmxlZCA9IHRydWUKCQkJUG9sYXJpcy5UZXh0ID0gIlBvbGFyaXMgSGFjayAoT24pIgoJCWVsc2UKCQkJUG9sYXJpc0VuYWJsZWQgPSBmYWxzZQoJCQlQb2xhcmlzLlRleHQgPSAiUG9sYXJpcyBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIEluc3RhbnQgU2hhdHRlcmluZyBFcnVwdGlvbgoKCWxvY2FsIFNoYXR0ZXJpbmdFcnVwdGlvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglTaGF0dGVyaW5nRXJ1cHRpb24uTmFtZSA9ICJTaGF0dGVyaW5nRXJ1cHRpb24iCglTaGF0dGVyaW5nRXJ1cHRpb24uVGV4dCA9ICJJbnN0YW50IFNoYXR0ZXJpbmcgRXJ1cHRpb24gKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgU2hhdHRlcmluZ0VydXB0aW9uKQoKCVNoYXR0ZXJpbmdFcnVwdGlvbkVuYWJsZWQgPSBmYWxzZQoKCVNoYXR0ZXJpbmdFcnVwdGlvbi5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIFNoYXR0ZXJpbmdFcnVwdGlvbkVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlTaGF0dGVyaW5nRXJ1cHRpb25FbmFibGVkID0gdHJ1ZQoJCQlTaGF0dGVyaW5nRXJ1cHRpb24uVGV4dCA9ICJJbnN0YW50IFNoYXR0ZXJpbmcgRXJ1cHRpb24gKE9uKSIKCQllbHNlCgkJCVNoYXR0ZXJpbmdFcnVwdGlvbkVuYWJsZWQgPSBmYWxzZQoJCQlTaGF0dGVyaW5nRXJ1cHRpb24uVGV4dCA9ICJJbnN0YW50IFNoYXR0ZXJpbmcgRXJ1cHRpb24gKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gRXRoZXJlYWwgQWN1bWVuIEhhY2sKCglsb2NhbCBFdGhlcmVhbEFjdW1lbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglFdGhlcmVhbEFjdW1lbi5OYW1lID0gIkV0aGVyZWFsQWN1bWVuIgoJRXRoZXJlYWxBY3VtZW4uVGV4dCA9ICJFdGhlcmVhbCBBY3VtZW4gSGFjayAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBFdGhlcmVhbEFjdW1lbikKCglFdGhlcmVhbEFjdW1lbkVuYWJsZWQgPSBmYWxzZQoKCUV0aGVyZWFsQWN1bWVuLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgRXRoZXJlYWxBY3VtZW5FbmFibGVkID09IGZhbHNlIHRoZW4KCQkJRXRoZXJlYWxBY3VtZW5FbmFibGVkID0gdHJ1ZQoJCQlFdGhlcmVhbEFjdW1lbi5UZXh0ID0gIkV0aGVyZWFsIEFjdW1lbiBIYWNrIChPbikiCgkJZWxzZQoJCQlFdGhlcmVhbEFjdW1lbkVuYWJsZWQgPSBmYWxzZQoJCQlFdGhlcmVhbEFjdW1lbi5UZXh0ID0gIkV0aGVyZWFsIEFjdW1lbiBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIFRveGljIEJhc2lsaXNrIEhhY2sKCglsb2NhbCBUb3hpY0Jhc2lsaXNrID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCVRveGljQmFzaWxpc2suTmFtZSA9ICJUb3hpY0Jhc2lsaXNrIgoJVG94aWNCYXNpbGlzay5UZXh0ID0gIlRveGljIEJhc2lsaXNrIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgVG94aWNCYXNpbGlzaykKCglUb3hpY0Jhc2lsaXNrRW5hYmxlZCA9IGZhbHNlCgoJVG94aWNCYXNpbGlzay5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIFRveGljQmFzaWxpc2tFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJVG94aWNCYXNpbGlza0VuYWJsZWQgPSB0cnVlCgkJCVRveGljQmFzaWxpc2suVGV4dCA9ICJUb3hpYyBCYXNpbGlzayBIYWNrIChPbikiCgkJZWxzZQoJCQlUb3hpY0Jhc2lsaXNrRW5hYmxlZCA9IGZhbHNlCgkJCVRveGljQmFzaWxpc2suVGV4dCA9ICJUb3hpYyBCYXNpbGlzayBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIEFyY2FuZSBHdWFyZGlhbiBIYWNrCgoJbG9jYWwgQXJjYW5lR3VhcmRpYW4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJQXJjYW5lR3VhcmRpYW4uTmFtZSA9ICJBcmNhbmVHdWFyZGlhbiIKCUFyY2FuZUd1YXJkaWFuLlRleHQgPSAiQXJjYW5lIEd1YXJkaWFuIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQXJjYW5lR3VhcmRpYW4pCgoJQXJjYW5lR3VhcmRpYW5FbmFibGVkID0gZmFsc2UKCglBcmNhbmVHdWFyZGlhbi5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIEFyY2FuZUd1YXJkaWFuRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUFyY2FuZUd1YXJkaWFuRW5hYmxlZCA9IHRydWUKCQkJQXJjYW5lR3VhcmRpYW4uVGV4dCA9ICJBcmNhbmUgR3VhcmRpYW4gSGFjayAoT24pIgoJCWVsc2UKCQkJQXJjYW5lR3VhcmRpYW5FbmFibGVkID0gZmFsc2UKCQkJQXJjYW5lR3VhcmRpYW4uVGV4dCA9ICJBcmNhbmUgR3VhcmRpYW4gSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBWaXJ0dWFsIFpvbmUgSGFjawoKCWxvY2FsIFZpcnR1YWxab25lID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCVZpcnR1YWxab25lLk5hbWUgPSAiVmlydHVhbFpvbmUiCglWaXJ0dWFsWm9uZS5UZXh0ID0gIlZpcnR1YWwgWm9uZSBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFZpcnR1YWxab25lKQoKCVZpcnR1YWxab25lRW5hYmxlZCA9IGZhbHNlCgoJVmlydHVhbFpvbmUuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBWaXJ0dWFsWm9uZUVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlWaXJ0dWFsWm9uZUVuYWJsZWQgPSB0cnVlCgkJCVZpcnR1YWxab25lLlRleHQgPSAiVmlydHVhbCBab25lIEhhY2sgKE9uKSIKCQllbHNlCgkJCVZpcnR1YWxab25lRW5hYmxlZCA9IGZhbHNlCgkJCVZpcnR1YWxab25lLlRleHQgPSAiVmlydHVhbCBab25lIEhhY2sgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0tLSBNaXNjZWxsYW5lb3VzCgoJLS0gQWltYm90IHx8IEN1cnJlbnRseSB1bmRlciBkZXZlbG9wbWVudAoJLS1bWwoJbG9jYWwgQWltYm90ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUFpbWJvdC5OYW1lID0gIkFpbWJvdCIKCUFpbWJvdC5UZXh0ID0gIihHKSBBaW1ib3QgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQWltYm90KQoKCWZ1bmN0aW9uIHRvZ2dsZUFpbWJvdCgpCgkJaWYgKG5vdCBBaW1ib3RFbmFibGVkKSBhbmQgKGlzR29sZCBvciBpc01hc3RlcikgdGhlbgoJCQlBaW1ib3RFbmFibGVkID0gdHJ1ZQoJCQlBaW1ib3QuVGV4dCA9ICIoRykgQWltYm90IChPbikiCgkJCXdoaWxlIEFpbWJvdEVuYWJsZWQgZG8KCQkJCUJlZ2luVHJhY2tpbmcoKQoJCQllbmQKCQllbHNlaWYgQWltYm90RW5hYmxlZCBhbmQgKGlzR29sZCBvciBpc01hc3RlcikgdGhlbgoJCQlBaW1ib3RFbmFibGVkID0gZmFsc2UKCQkJQWltYm90LlRleHQgPSAiKEcpIEFpbWJvdCAoT2ZmKSIKCQllbHNlaWYgbm90IChpc0dvbGQgb3IgaXNNYXN0ZXIpIHRoZW4KCQkJQWltYm90LlRleHQgPSAiTWVtYmVyIE5vdCBHb2xkIgoJCQl3YWl0KDMpCgkJCUFpbWJvdC5UZXh0ID0gIihHKSBBaW1ib3QgKE9mZikiCgkJZW5kCgllbmQKCglBaW1ib3QuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KHRvZ2dsZUFpbWJvdCldXQoKCS0tIFNoYXJkIENvbG9ycwoKCWxvY2FsIFJhbmRvbUNvbG9ycyA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglSYW5kb21Db2xvcnMuTmFtZSA9ICJSYW5kb21Db2xvcnMiCglSYW5kb21Db2xvcnMuVGV4dCA9ICJSYW5kb20gU2hhcmQgQ29sb3JzIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFJhbmRvbUNvbG9ycykKCglsb2NhbCBDb2xvcnNMaXN0ID0geyJSZWFsbHkgcmVkIiwgIlJlYWxseSBibHVlIiwgIk5ldyBZZWxsZXIiLCAiSG90IHBpbmsiLCAiUm95YWwgcHVycGxlIiwgIkxpbWUgZ3JlZW4iLCAiRGVlcCBvcmFuZ2UiLCAiVG9vdGhwYXN0ZSIsICJJbnN0aXR1dGlvbmFsIHdoaXRlIn0KCWxvY2FsIFNoYXJkQ29sb3JFbmFibGVkID0gZmFsc2UKCglsb2NhbCBmdW5jdGlvbiBzaGFyZFJhbmRvbWl6ZXIoKQoJCWZvciBpLCB2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlWyIuSWdub3JlIl1bIi5TZXJ2ZXJFZmZlY3RzIl06R2V0Q2hpbGRyZW4oKSkgZG8KCQkJaWYgdi5OYW1lID09ICJTaGFyZCIgYW5kIG5vdCB2OkZpbmRGaXJzdENoaWxkKCJzaGFyZENoYW5nZWQiKSB0aGVuCgkJCQl2LkJyaWNrQ29sb3IgPSBCcmlja0NvbG9yLm5ldyhDb2xvcnNMaXN0W21hdGgucmFuZG9tKDEsOSldKQoJCQkJbG9jYWwgc2hhcmRDaGFuZ2VkID0gSW5zdGFuY2UubmV3KCJCb29sVmFsdWUiKQoJCQkJc2hhcmRDaGFuZ2VkLk5hbWUgPSAic2hhcmRDaGFuZ2VkIgoJCQkJc2hhcmRDaGFuZ2VkLlBhcmVudCA9IGNoaWxkCgkJCQlzaGFyZENoYW5nZWQuVmFsdWUgPSB0cnVlCgkJCWVsc2VpZiB2Lk5hbWUgPT0gIlNoYXJkIiBhbmQgdjpGaW5kRmlyc3RDaGlsZCgic2hhcmRDaGFuZ2VkIikuVmFsdWUgdGhlbiBlbmQKCQllbmQKCWVuZAoKCVJhbmRvbUNvbG9ycy5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIFNoYXJkQ29sb3JFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJU2hhcmRDb2xvckVuYWJsZWQgPSB0cnVlCgkJCVJhbmRvbUNvbG9ycy5UZXh0ID0gIlJhbmRvbSBTaGFyZCBDb2xvcnMgKE9uKSIKCQkJd2hpbGUgU2hhcmRDb2xvckVuYWJsZWQgZG8KCQkJCXNoYXJkUmFuZG9taXplcigpCgkJCQl3YWl0KC41KQoJCQllbmQKCQllbHNlCgkJCVNoYXJkQ29sb3JFbmFibGVkID0gZmFsc2UKCQkJUmFuZG9tQ29sb3JzLlRleHQgPSAiUmFuZG9tIFNoYXJkIENvbG9ycyAoT2ZmKSIKCQllbmQJCgllbmQpCgoJLS0gQW50aS1MYWcKCglsb2NhbCBBbnRpTGFnID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUFudGlMYWcuTmFtZSA9ICJBbnRpTGFnIgoJQW50aUxhZy5UZXh0ID0gIkFudGktTGFnIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEFudGlMYWcpCgoJQW50aUxhZ0VuYWJsZWQgPSBmYWxzZQoKCWZ1bmN0aW9uIHJlbW92ZUxhZygpCgkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2VbJy5JZ25vcmUnXVsnLkxvY2FsRWZmZWN0cyddOkdldENoaWxkcmVuKCkpIGRvCgkJCWlmIHY6RmluZEZpcnN0Q2hpbGQoIk1lc2giKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiRDEiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiRDIiKSB0aGVuCgkJCQlpZiB2LkQxLlRleHR1cmUgPT0gInJieGFzc2V0aWQ6Ly8yNjcxNjIyNjQ2IiB0aGVuCgkJCQkJdjpEZXN0cm95KCkKCQkJCWVuZAoJCQllbHNlaWYgdjpGaW5kRmlyc3RDaGlsZCgiRnJvbnREZWNhbCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJCYWNrRGVjYWwiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiU3BlY2lhbE1lc2giKSB0aGVuCgkJCQlpZiB2LkZyb250RGVjYWwuVGV4dHVyZSA9PSAicmJ4YXNzZXRpZDovLzk3OTAwNDI5MSIgdGhlbgoJCQkJCXY6RGVzdHJveSgpCgkJCQllbmQKCQkJZWxzZWlmICh2Lk5hbWUgPT0gIk9yYml0YWxTdHJpa2UiKSBvciAodi5OYW1lID09ICJCb2x0UGFydCIpIG9yIChzdHJpbmcuc3ViKHYuTmFtZSwgMSwgMTApID09ICJTb3VuZF9UZWNoIikgdGhlbgoJCQkJdjpEZXN0cm95KCkKCQkJZWxzZWlmICh2Lk5hbWUgPT0gIkxpZ2h0RGlzYyIpIHRoZW4KCQkJCXY6RGVzdHJveSgpCgkJCWVuZAoJCWVuZAoKCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZVsnLklnbm9yZSddWycuQXR0YWNrcyddOkdldENoaWxkcmVuKCkpIGRvCgkJCWlmIHYuQ29sb3IgPT0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKSB0aGVuCgkJCQlpZiB2Lk1lc2guTWVzaFR5cGUgPT0gIlNwaGVyZSIgdGhlbgoJCQkJCXdhaXQoKQoJCQkJCXY6RGVzdHJveSgpCgkJCQllbmQKCQkJZW5kCgkJZW5kCgoJCWZvciBpLCB2IGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCgkJCWZvciBfLCB4IGluIHBhaXJzKHYuQ2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCgkJCQlpZiB4Lk5hbWUgPT0gIkFuZ2VsU3dvcmQiIHRoZW4KCQkJCQl4OkRlc3Ryb3koKQoJCQkJZW5kCgkJCWVuZAoJCWVuZAoJZW5kCgoJZ2FtZS5Xb3Jrc3BhY2UuRGVzY2VuZGFudEFkZGVkOmNvbm5lY3QoZnVuY3Rpb24odikKCQlpZiBBbnRpTGFnRW5hYmxlZCB0aGVuCgkJCWlmIHY6RmluZEZpcnN0Q2hpbGQoIk1lc2giKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiRDEiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiRDIiKSB0aGVuCgkJCQlpZiB2LkQxLlRleHR1cmUgPT0gInJieGFzc2V0aWQ6Ly8yNjcxNjIyNjQ2IiB0aGVuCgkJCQkJd2FpdCgpCgkJCQkJdjpEZXN0cm95KCkKCQkJCWVuZAoJCQllbHNlaWYgdi5OYW1lID09ICJBbmdlbFN3b3JkIiB0aGVuCgkJCQl3YWl0KCkKCQkJCXY6RGVzdHJveSgpCgkJCWVsc2VpZiB2OkZpbmRGaXJzdENoaWxkKCJGcm9udERlY2FsIikgdGhlbgoJCQkJaWYgdi5Gcm9udERlY2FsLlRleHR1cmUgPT0gInJieGFzc2V0aWQ6Ly85NzkwMDQyOTEiIHRoZW4KCQkJCQl3YWl0KCkKCQkJCQl2OkRlc3Ryb3koKQoJCQkJZW5kCgkJCWVsc2VpZiB2LkNvbG9yID09IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCkgdGhlbgoJCQkJaWYgdi5NZXNoLk1lc2hUeXBlID09ICJTcGhlcmUiIHRoZW4KCQkJCQl3YWl0KCkKCQkJCQl2OkRlc3Ryb3koKQoJCQkJZW5kCgkJCWVsc2VpZiAodi5OYW1lID09ICJPcmJpdGFsU3RyaWtlIikgb3IgKHYuTmFtZSA9PSAiQm9sdFBhcnQiKSBvciAoc3RyaW5nLnN1Yih2Lk5hbWUsIDEsIDEwKSA9PSAiU291bmRfVGVjaCIpIHRoZW4KCQkJCXdhaXQoKQoJCQkJdjpEZXN0cm95KCkKCQkJZW5kCgkJZW5kCgllbmQpCgoJQW50aUxhZy5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIEFudGlMYWdFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJQW50aUxhZ0VuYWJsZWQgPSB0cnVlCgkJCUFudGlMYWcuVGV4dCA9ICJBbnRpLUxhZyAoT24pIgoJCQlyZW1vdmVMYWcoKQoJCWVsc2UKCQkJQW50aUxhZ0VuYWJsZWQgPSBmYWxzZQoJCQlBbnRpTGFnLlRleHQgPSAiQW50aS1MYWcgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gSWdub3JlIFBoeXNpY3MKCglsb2NhbCBJZ25vcmVQaHlzaWNzID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUlnbm9yZVBoeXNpY3MuTmFtZSA9ICJmSWdub3JlUGh5c2ljcyIKCUlnbm9yZVBoeXNpY3MuVGV4dCA9ICJJZ25vcmUgUGh5c2ljcyAoT2ZmKSBbWl0iCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgSWdub3JlUGh5c2ljcykKCglJZ25vcmVQaHlzaWNzRW5hYmxlZCA9IGZhbHNlCgoJbG9jYWwgZnVuY3Rpb24gaW5pdGlhbE51bGxpZnlGb3JjZXMoKQoJCWZvciBpLCB2IGluIHBhaXJzKHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDpHZXRDaGlsZHJlbigpKSBkbwoJCQlpZiB2OklzQSgiQm9keUd5cm8iKSB0aGVuCgkJCQl3YWl0KCkKCQkJCXY6RGVzdHJveSgpCgkJCWVsc2VpZiB2OklzQSgiQm9keVBvc2l0aW9uIikgdGhlbgoJCQkJd2FpdCgpCgkJCQl2OkRlc3Ryb3koKQoJCQllbHNlaWYgdjpJc0EoIkJvZHlWZWxvY2l0eSIpIHRoZW4KCQkJCXdhaXQoKQoJCQkJdjpEZXN0cm95KCkKCQkJZWxzZWlmIHY6SXNBKCJCb2R5QW5ndWxhclZlbG9jaXR5IikgdGhlbgoJCQkJd2FpdCgpCgkJCQl2OkRlc3Ryb3koKQoJCQllbHNlaWYgdjpJc0EoIkJvZHlGb3JjZSIpIHRoZW4KCQkJCXdhaXQoKQoJCQkJdjpEZXN0cm95KCkKCQkJZWxzZWlmIHY6SXNBKCJCb2R5VGhydXN0IikgdGhlbgoJCQkJd2FpdCgpCgkJCQl2OkRlc3Ryb3koKQoJCQllbHNlaWYgdjpJc0EoIlJvY2tldFByb3B1bHNpb24iKSB0aGVuCgkJCQl3YWl0KCkKCQkJCXY6RGVzdHJveSgpCgkJCWVuZAoJCWVuZAoKCQlmb3IgaSwgdiBpbiBwYWlycyhwbGF5ZXIuQ2hhcmFjdGVyLkZsaXBzSG9sZGVyOkdldENoaWxkcmVuKCkpIGRvCgkJCWlmIHY6SXNBKCJCb2R5R3lybyIpIHRoZW4KCQkJCXdhaXQoKQoJCQkJdjpEZXN0cm95KCkKCQkJZWxzZWlmIHY6SXNBKCJCb2R5UG9zaXRpb24iKSB0aGVuCgkJCQl3YWl0KCkKCQkJCXY6RGVzdHJveSgpCgkJCWVsc2VpZiB2OklzQSgiQm9keVZlbG9jaXR5IikgdGhlbgoJCQkJd2FpdCgpCgkJCQl2OkRlc3Ryb3koKQoJCQllbHNlaWYgdjpJc0EoIkJvZHlBbmd1bGFyVmVsb2NpdHkiKSB0aGVuCgkJCQl3YWl0KCkKCQkJCXY6RGVzdHJveSgpCgkJCWVsc2VpZiB2OklzQSgiQm9keUZvcmNlIikgdGhlbgoJCQkJd2FpdCgpCgkJCQl2OkRlc3Ryb3koKQoJCQllbHNlaWYgdjpJc0EoIkJvZHlUaHJ1c3QiKSB0aGVuCgkJCQl3YWl0KCkKCQkJCXY6RGVzdHJveSgpCgkJCWVsc2VpZiB2OklzQSgiUm9ja2V0UHJvcHVsc2lvbiIpIHRoZW4KCQkJCXdhaXQoKQoJCQkJdjpEZXN0cm95KCkKCQkJZW5kCgkJZW5kCgllbmQKCglsb2NhbCBmdW5jdGlvbiBBZnRlck51bGxpZnlGb3JjZXMoKQoJCXBsYXllci5DaGFyYWN0ZXIuRGVzY2VuZGFudEFkZGVkOmNvbm5lY3QoZnVuY3Rpb24odikKCQkJaWYgSWdub3JlUGh5c2ljc0VuYWJsZWQgdGhlbgoJCQkJaWYgdjpJc0EoIkJvZHlHeXJvIikgdGhlbgoJCQkJCXdhaXQoKQoJCQkJCXY6RGVzdHJveSgpCgkJCQllbHNlaWYgdjpJc0EoIkJvZHlQb3NpdGlvbiIpIHRoZW4KCQkJCQl3YWl0KCkKCQkJCQl2OkRlc3Ryb3koKQoJCQkJZWxzZWlmIHY6SXNBKCJCb2R5VmVsb2NpdHkiKSB0aGVuCgkJCQkJd2FpdCgpCgkJCQkJdjpEZXN0cm95KCkKCQkJCWVsc2VpZiB2OklzQSgiQm9keUFuZ3VsYXJWZWxvY2l0eSIpIHRoZW4KCQkJCQl3YWl0KCkKCQkJCQl2OkRlc3Ryb3koKQoJCQkJZWxzZWlmIHY6SXNBKCJCb2R5Rm9yY2UiKSB0aGVuCgkJCQkJd2FpdCgpCgkJCQkJdjpEZXN0cm95KCkKCQkJCWVsc2VpZiB2OklzQSgiQm9keVRocnVzdCIpIHRoZW4KCQkJCQl3YWl0KCkKCQkJCQl2OkRlc3Ryb3koKQoJCQkJZWxzZWlmIHY6SXNBKCJSb2NrZXRQcm9wdWxzaW9uIikgdGhlbgoJCQkJCXdhaXQoKQoJCQkJCXY6RGVzdHJveSgpCgkJCQllbmQKCQkJZW5kCgkJZW5kKQoJZW5kCgoJZnVuY3Rpb24gYmVnaW5OdWxsaWZ5Rm9yY2VzKCkKCQlpZiBJZ25vcmVQaHlzaWNzRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUlnbm9yZVBoeXNpY3NFbmFibGVkID0gdHJ1ZQoJCQlJZ25vcmVQaHlzaWNzLlRleHQgPSAiSWdub3JlIFBoeXNpY3MgKE9uKSBbWl0iCgkJCWluaXRpYWxOdWxsaWZ5Rm9yY2VzKCkKCQkJQWZ0ZXJOdWxsaWZ5Rm9yY2VzKCkKCQkJd2hpbGUgSWdub3JlUGh5c2ljc0VuYWJsZWQgZG8KCQkJCXdhaXQoKQoJCQkJaWYgcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPT0gMCB0aGVuCgkJCQkJcmVwZWF0IHdhaXQoKSB1bnRpbCBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCB+PSAwCgkJCQkJQWZ0ZXJOdWxsaWZ5Rm9yY2VzKCkKCQkJCWVuZAoJCQllbmQKCQllbHNlCgkJCUlnbm9yZVBoeXNpY3NFbmFibGVkID0gZmFsc2UKCQkJSWdub3JlUGh5c2ljcy5UZXh0ID0gIklnbm9yZSBQaHlzaWNzIChPZmYpIFtaXSIKCQllbmQKCWVuZAoKCUlnbm9yZVBoeXNpY3MuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGJlZ2luTnVsbGlmeUZvcmNlcykKCgktLSBBbnRpLUdyYXZpdHkKCglsb2NhbCBBbnRpR3Jhdml0eSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglBbnRpR3Jhdml0eS5OYW1lID0gIkFudGlHcmF2aXR5IgoJQW50aUdyYXZpdHkuVGV4dCA9ICJBbnRpLUdyYXZpdHkgKE9mZikgW0ddIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEFudGlHcmF2aXR5KQoKCUFudGlHcmF2aXR5RW5hYmxlZCA9IGZhbHNlCgoJZnVuY3Rpb24gQW50aUdyYXZpdHlGdW5jKCkKCQlpZiBBbnRpR3Jhdml0eUVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlBbnRpR3Jhdml0eUVuYWJsZWQgPSB0cnVlCgkJCUFudGlHcmF2aXR5LlRleHQgPSAiQW50aS1HcmF2aXR5IChPbikgW0ddIgoJCQlsb2NhbCBCb2R5Rm9yY2UgPSBJbnN0YW5jZS5uZXcoIkJvZHlGb3JjZSIpCgkJCUJvZHlGb3JjZS5QYXJlbnQgPSBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQKCQkJQm9keUZvcmNlLk5hbWUgPSAiQW50aUdyYXZpdHlGb3JjZSIKCQkJQm9keUZvcmNlLkZvcmNlID0gVmVjdG9yMy5uZXcoMCwgNTAwMCwgMCkKCQllbHNlCgkJCUFudGlHcmF2aXR5RW5hYmxlZCA9IGZhbHNlCgkJCUFudGlHcmF2aXR5LlRleHQgPSAiQW50aS1HcmF2aXR5IChPZmYpIFtHXSIKCQkJaWYgcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkZpbmRGaXJzdENoaWxkKCJBbnRpR3Jhdml0eUZvcmNlIikgdGhlbgoJCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFudGlHcmF2aXR5Rm9yY2U6RGVzdHJveSgpCgkJCWVuZAoJCWVuZAoJZW5kCgoJQW50aUdyYXZpdHkuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KEFudGlHcmF2aXR5RnVuYykKCgktLSBDbGljay1UUAoKCWxvY2FsIENsaWNrVFAgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJQ2xpY2tUUC5OYW1lID0gIkNsaWNrVFAiCglDbGlja1RQLlRleHQgPSAiQ2xpY2stVFAgKE9mZikgW0ogdG8gdHAgdG8gbW91c2VdIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIENsaWNrVFApCgoJQ2xpY2tUUEVuYWJsZWQgPSBmYWxzZQoKCUNsaWNrVFAuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBDbGlja1RQRW5hYmxlZCA9PSB0cnVlIHRoZW4KCQkJQ2xpY2tUUEVuYWJsZWQgPSBmYWxzZQoJCQlDbGlja1RQLlRleHQgPSAiQ2xpY2stVFAgKE9mZikgW0ogdG8gQ2xpY2stVFBdIgoJCWVsc2UKCQkJQ2xpY2tUUEVuYWJsZWQgPSB0cnVlCgkJCUNsaWNrVFAuVGV4dCA9ICJDbGljay1UUCAoT24pIFtKIHRvIENsaWNrLVRQXSIKCQllbmQKCWVuZCkKCglmdW5jdGlvbiBjbGlja3RwKHBvc2l0aW9uKQoJCWlmIHBsYXllciA9PSBuaWwgb3IgcGxheWVyLkNoYXJhY3RlciA9PSBuaWwgdGhlbiByZXR1cm4gZW5kCgkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoVmVjdG9yMy5uZXcocG9zaXRpb24ueCwgcG9zaXRpb24ueSArIDMsIHBvc2l0aW9uLnopKQoJZW5kCgoJLS0gRnJlZXplCgoJbG9jYWwgRnJlZXplID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUZyZWV6ZS5OYW1lID0gIkZyZWV6ZSIKCUZyZWV6ZS5UZXh0ID0gIkZyZWV6ZSAoT2ZmKSBbRl0iCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgRnJlZXplKQoKCUZyZWV6ZUVuYWJsZWQgPSBmYWxzZQoKCWZ1bmN0aW9uIEZyZWV6ZUZ1bmMoKQoJCWlmIEZyZWV6ZUVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlGcmVlemVFbmFibGVkID0gdHJ1ZQoJCQlGcmVlemUuVGV4dCA9ICJGcmVlemUgKE9uKSBbRl0iCgkJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IHRydWUKCQllbHNlCgkJCUZyZWV6ZUVuYWJsZWQgPSBmYWxzZQoJCQlGcmVlemUuVGV4dCA9ICJGcmVlemUgKE9mZikgW0ZdIgoJCQlwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSBmYWxzZQoJCWVuZAoJZW5kCgoJRnJlZXplLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChGcmVlemVGdW5jKQoKCS0tIEluZmluaXRlIFNwcmludAoKCWxvY2FsIEluZlNwcmludCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglJbmZTcHJpbnQuTmFtZSA9ICJJbmZTcHJpbnQiCglJbmZTcHJpbnQuVGV4dCA9ICIoRykgSW5maW5pdGUgU3ByaW50IChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEluZlNwcmludCkKCglsb2NhbCBJbmZTcHJpbnRFbmFibGVkID0gZmFsc2UKCglsb2NhbCBmdW5jdGlvbiBTcHJpbnRSZW1vdGUoKQoJCXdoaWxlIHdhaXQoLjUpIGRvCgkJCXJlcGVhdCB3YWl0KCkgdW50aWwgcGxheWVyLkNoYXJhY3RlciB+PSBuaWwKCQkJbG9jYWwgYXJncyA9IHsKCQkJCVsxXSA9ICJSdW5uaW5nIiwKCQkJCVsyXSA9IGZhbHNlLAoJCQl9CgkJCWdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLlBsYXllckRhdGE6RmlyZVNlcnZlcih1bnBhY2soYXJncykpCgkJZW5kCgllbmQKCglJbmZTcHJpbnQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBpc0dvbGQgb3IgaXNNYXN0ZXIgdGhlbgoJCQlpZiBub3QgSW5mU3ByaW50RW5hYmxlZCB0aGVuCgkJCQlJbmZTcHJpbnRFbmFibGVkID0gdHJ1ZQoJCQkJSW5mU3ByaW50LlRleHQgPSAiKEcpIEluZmluaXRlIFNwcmludCAoT24pIgoJCQkJU3ByaW50UmVtb3RlKCkKCQkJZWxzZQoJCQkJSW5mU3ByaW50RW5hYmxlZCA9IGZhbHNlCgkJCQlJbmZTcHJpbnQuVGV4dCA9ICIoRykgSW5maW5pdGUgU3ByaW50IChPZmYpIgoJCQllbmQJCQkJCgkJZW5kCgllbmQpCgoJLS0gSW5zdGFudCBFeHBsb3NpdmUgTGVhcAoKCWxvY2FsIEV4cGxvc2lvbkhhY2sgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJRXhwbG9zaW9uSGFjay5OYW1lID0gIkV4cGxvc2lvbkhhY2siCglFeHBsb3Npb25IYWNrLlRleHQgPSAiSW5zdGFudCBMZWFwIFN0dW4gKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgRXhwbG9zaW9uSGFjaykKCglsb2NhbCBMZWFwU3R1bkVuYWJsZWQgPSBmYWxzZQoKCUV4cGxvc2lvbkhhY2suTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBMZWFwU3R1bkVuYWJsZWQgdGhlbgoJCQlMZWFwU3R1bkVuYWJsZWQgPSBmYWxzZQoJCQlFeHBsb3Npb25IYWNrLlRleHQgPSAiSW5zdGFudCBMZWFwIFN0dW4gKE9mZikiCgkJZWxzZQoJCQlMZWFwU3R1bkVuYWJsZWQgPSB0cnVlCgkJCUV4cGxvc2lvbkhhY2suVGV4dCA9ICJJbnN0YW50IExlYXAgU3R1biAoT24pIgoJCWVuZAoJZW5kKQoKCS0tIEluc3RhbnQgUm9jayBGaXN0CgoJbG9jYWwgUm9ja0Zpc3RIYWNrID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCVJvY2tGaXN0SGFjay5OYW1lID0gIlJvY2tGaXN0SGFjayIKCVJvY2tGaXN0SGFjay5UZXh0ID0gIkluc3RhbnQgUm9jayBGaXN0IChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFJvY2tGaXN0SGFjaykKCglsb2NhbCBJbnN0YW50RmlzdEVuYWJsZWQgPSBmYWxzZQoKCVJvY2tGaXN0SGFjay5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIEluc3RhbnRGaXN0RW5hYmxlZCB0aGVuCgkJCUluc3RhbnRGaXN0RW5hYmxlZCA9IGZhbHNlCgkJCVJvY2tGaXN0SGFjay5UZXh0ID0gIkluc3RhbnQgUm9jayBGaXN0IChPZmYpIgoJCWVsc2UKCQkJSW5zdGFudEZpc3RFbmFibGVkID0gdHJ1ZQoJCQlSb2NrRmlzdEhhY2suVGV4dCA9ICJJbnN0YW50IFJvY2sgRmlzdCAoT24pIgoJCWVuZAoJZW5kKQoKCS0tIExvbmcgRmxhc2gKCglsb2NhbCBMRmxhc2ggPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJTEZsYXNoLk5hbWUgPSAiRmxhc2giCglMRmxhc2guVGV4dCA9ICJMb25nIEZsYXNoIChPZmYpIFtgIHRvIHVzZV0iCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgTEZsYXNoKQoKCUZsYXNoRW5hYmxlZCA9IGZhbHNlCgoJZnVuY3Rpb24gbG9uZ2ZsYXNoKCkKCQlsb2NhbCBtb3VzZXBvcyA9IG1vdXNlLkhpdC5wCgkJbG9jYWwgYXJncyA9IHsKCQkJWzFdID0gIlN0b3JtIiwKCQkJWzJdID0gIkxpZ2h0bmluZyBGbGFzaCIKCQl9CgkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcih1bnBhY2soYXJncykpCgkJbG9jYWwgYXJncyA9IHsKCQkJWzFdID0gIlN0b3JtIiwKCQkJWzJdID0gIkxpZ2h0bmluZyBGbGFzaCIsCgkJCVszXSA9IHsKCQkJCVsiRW5kIl0gPSBtb3VzZXBvcywKCQkJCVsiT3JpZ2luIl0gPSBwbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZS5wCgkJCX0KCQl9CgkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKCWVuZAoKCUxGbGFzaC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIEZsYXNoRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUZsYXNoRW5hYmxlZCA9IHRydWUKCQkJTEZsYXNoLlRleHQgPSAiTG9uZyBGbGFzaCAoT24pIFtgIHRvIHVzZV0iCgkJZWxzZQoJCQlGbGFzaEVuYWJsZWQgPSBmYWxzZQoJCQlMRmxhc2guVGV4dCA9ICJMb25nIEZsYXNoIChPZmYpIFtgIHRvIHVzZV0iCgkJZW5kCgllbmQpCgoJLS0gVmlldyBUYXJnZXQKCglsb2NhbCBWaWV3VGFyZ2V0ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCVZpZXdUYXJnZXQuTmFtZSA9ICJWaWV3VGFyZ2V0IgoJVmlld1RhcmdldC5UZXh0ID0gIlZpZXcgVGFyZ2V0IChPZmYpIFtWXSIKCXRhYmxlLmluc2VydChidXR0b25zLCBWaWV3VGFyZ2V0KQoKCXZpZXdpbmcgPSBmYWxzZQoKCWZ1bmN0aW9uIHZpZXcoKQoJCWlmIHRhcmdldCB+PSBwbGF5ZXIuTmFtZSB0aGVuCgkJCWlmIHZpZXdpbmcgPT0gZmFsc2UgdGhlbgoJCQkJdmlld2luZyA9IHRydWUKCQkJCWdhbWUuV29ya3NwYWNlLkNhbWVyYS5DYW1lcmFTdWJqZWN0ID0gZ2FtZS5QbGF5ZXJzW3RhcmdldF0uQ2hhcmFjdGVyLkh1bWFub2lkCgkJCQlWaWV3VGFyZ2V0LlRleHQgPSAiVmlldyBUYXJnZXQgKE9uKSBbVl0iCgkJCWVsc2UKCQkJCXZpZXdpbmcgPSBmYWxzZQoJCQkJZ2FtZS5Xb3Jrc3BhY2UuQ2FtZXJhLkNhbWVyYVN1YmplY3QgPSBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkCgkJCQlWaWV3VGFyZ2V0LlRleHQgPSAiVmlldyBUYXJnZXQgKE9mZikgW1ZdIgoJCQllbmQKCQllbHNlaWYgdmlld2luZyA9PSB0cnVlIHRoZW4gCgkJCXZpZXdpbmcgPSBmYWxzZQoJCQlnYW1lLldvcmtzcGFjZS5DYW1lcmEuQ2FtZXJhU3ViamVjdCA9IHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQKCQkJVmlld1RhcmdldC5UZXh0ID0gIlZpZXcgVGFyZ2V0IChPZmYpIFtWXSIKCQllbmQKCWVuZAoKCVZpZXdUYXJnZXQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KHZpZXcpCgoJLS0gVGVsZXBvcnQgdG8gVGFyZ2V0CgoJbG9jYWwgVFBUYXJnZXQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJVFBUYXJnZXQuTmFtZSA9ICJUUFRhcmdldCIKCVRQVGFyZ2V0LlRleHQgPSAiVGVsZXBvcnQgVG8gVGFyZ2V0IChPZmYpIFtVXSIKCXRhYmxlLmluc2VydChidXR0b25zLCBUUFRhcmdldCkKCglUUFRhcmdldEVuYWJsZWQgPSBmYWxzZQoKCWxvY2FsIGZ1bmN0aW9uIFRQVG9UYXJnZXQoKQoJCWlmIFRQVGFyZ2V0RW5hYmxlZCBhbmQgdGFyZ2V0IH49IHBsYXllci5OYW1lIHRoZW4KCQkJcmVwZWF0IHdhaXQoKSB1bnRpbCBnZXRIUlAocGxheWVyLkNoYXJhY3RlcikgYW5kIGdldEhSUChnYW1lLlBsYXllcnNbdGFyZ2V0XS5DaGFyYWN0ZXIpCgoJCQlnZXRIUlAocGxheWVyLkNoYXJhY3RlcikuQ0ZyYW1lID0gZ2V0SFJQKGdhbWUuUGxheWVyc1t0YXJnZXRdLkNoYXJhY3RlcikuQ0ZyYW1lCgkJZW5kCgllbmQKCglUUFRhcmdldC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIFRQVGFyZ2V0RW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCVRQVGFyZ2V0RW5hYmxlZCA9IHRydWUKCQkJVFBUYXJnZXQuVGV4dCA9ICJUZWxlcG9ydCBUbyBUYXJnZXQgKE9uKSBbVV0iCgkJZWxzZQoJCQlUUFRhcmdldEVuYWJsZWQgPSBmYWxzZQoJCQlUUFRhcmdldC5UZXh0ID0gIlRlbGVwb3J0IFRvIFRhcmdldCAoT2ZmKSBbVV0iCgkJZW5kCgllbmQpCgoJLS0gTG9vcCBUZWxlcG9ydCB0byBUYXJnZXQKCglsb2NhbCBMb29wVFBUYXJnZXQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJTG9vcFRQVGFyZ2V0Lk5hbWUgPSAiTG9vcFRQVGFyZ2V0IgoJTG9vcFRQVGFyZ2V0LlRleHQgPSAiTG9vcCBUZWxlcG9ydCBUbyBUYXJnZXQgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgTG9vcFRQVGFyZ2V0KQoKCUxvb3BUUFRhcmdldEVuYWJsZWQgPSBmYWxzZQoKCUxvb3BUUFRhcmdldC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIExvb3BUUFRhcmdldEVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlMb29wVFBUYXJnZXRFbmFibGVkID0gdHJ1ZQoJCQlMb29wVFBUYXJnZXQuVGV4dCA9ICJMb29wIFRlbGVwb3J0IFRvIFRhcmdldCAoT24pIgoJCQl3aGlsZSBMb29wVFBUYXJnZXRFbmFibGVkIGRvCgkJCQl3YWl0KCkKCQkJCVRQVG9UYXJnZXQoKQoJCQllbmQKCQllbHNlCgkJCUxvb3BUUFRhcmdldEVuYWJsZWQgPSBmYWxzZQoJCQlMb29wVFBUYXJnZXQuVGV4dCA9ICJMb29wIFRlbGVwb3J0IFRvIFRhcmdldCAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBTdGFuZGFyZCBFU1AKCglsb2NhbCBFU1AgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJRVNQLk5hbWUgPSAiRVNQIgoJRVNQLlRleHQgPSAiRVNQIChPZmYpIFtCXSIKCXRhYmxlLmluc2VydChidXR0b25zLCBFU1ApCgoJRVNQRW5hYmxlZCA9IGZhbHNlCgoJbG9jYWwgSG9sZGVyID0gSW5zdGFuY2UubmV3KCJGb2xkZXIiLCBnYW1lLkNvcmVHdWkpCglIb2xkZXIuTmFtZSA9ICJFU1AiCgoJbG9jYWwgVXBkYXRlRnVuY3MgPSB7fQoKCWxvY2FsIEJveCA9IEluc3RhbmNlLm5ldygiQm94SGFuZGxlQWRvcm5tZW50IikKCUJveC5OYW1lID0gIm5pbEJveCIKCUJveC5TaXplID0gVmVjdG9yMy5uZXcoNCwgNywgNCkKCUJveC5Db2xvcjMgPSBDb2xvcjMubmV3KDEwMCAvIDI1NSwgMTAwIC8gMjU1LCAxMDAgLyAyNTUpCglCb3guVHJhbnNwYXJlbmN5ID0gMC43CglCb3guWkluZGV4ID0gMAoJQm94LkFsd2F5c09uVG9wID0gdHJ1ZQoJQm94LlZpc2libGUgPSB0cnVlCgoJbG9jYWwgTmFtZVRhZyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIikKCU5hbWVUYWcuTmFtZSA9ICJuaWxOYW1lVGFnIgoJTmFtZVRhZy5FbmFibGVkID0gdHJ1ZQoJTmFtZVRhZy5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApCglOYW1lVGFnLkFsd2F5c09uVG9wID0gdHJ1ZQoJTmFtZVRhZy5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDMuNiwgMCkKCglsb2NhbCBUYWcgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIE5hbWVUYWcpCglUYWcuTmFtZSA9ICJUYWciCglUYWcuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKCVRhZy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAtNTAsIDAsIDApCglUYWcuU2l6ZSA9IFVEaW0yLm5ldygwLCAzMDAsIDAsIDIwKQoJVGFnLlRleHRTaXplID0gMjAKCVRhZy5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxMDAgLyAyNTUsIDEwMCAvIDI1NSwgMTAwIC8gMjU1KQoJVGFnLlRleHRTdHJva2VDb2xvcjMgPSBDb2xvcjMubmV3KDAgLyAyNTUsIDAgLyAyNTUsIDAgLyAyNTUpCglUYWcuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNAoJVGFnLlRleHQgPSAiTm90IEF2YWlsYWJsZSIKCVRhZy5Gb250ID0gRW51bS5Gb250LlJvYm90b01vbm8KCVRhZy5UZXh0U2NhbGVkID0gZmFsc2UKCVRhZy5UZXh0VHJhbnNwYXJlbmN5ID0gMAoKCWZ1bmN0aW9uIExvYWRDaGFyYWN0ZXIodikKCQlpZiB2IH49IHBsYXllciB0aGVuCgkJCXJlcGVhdCB3YWl0KCkgdW50aWwgdi5DaGFyYWN0ZXIgfj0gbmlsCgkJCXYuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKQoJCQlsb2NhbCB2SG9sZGVyID0gSG9sZGVyOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkKCQkJdkhvbGRlcjpDbGVhckFsbENoaWxkcmVuKCkKCgkJCWxvY2FsIGIgPSBCb3g6Q2xvbmUoKQoJCQliLk5hbWUgPSB2Lk5hbWUgLi4gIkJveCIKCQkJYi5BZG9ybmVlID0gdi5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydAoJCQliLlBhcmVudCA9IHZIb2xkZXIKCgkJCWxvY2FsIHQgPSBOYW1lVGFnOkNsb25lKCkKCQkJdC5OYW1lID0gdi5OYW1lIC4uICJOYW1lVGFnIgoJCQl0LlBhcmVudCA9IHZIb2xkZXIKCQkJdC5BZG9ybmVlID0gdi5DaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IiwgNSkKCQkJaWYgbm90IHQuQWRvcm5lZSB0aGVuCgkJCQlyZXR1cm4gVW5sb2FkQ2hhcmFjdGVyKHYpCgkJCWVuZAoJCQl0LlRhZy5UZXh0ID0gdi5OYW1lCgkJCXQuRW5hYmxlZCA9IHRydWUKCQkJd2FpdCgpCgoJCQlsb2NhbCBmdW5jdGlvbiBVcGRhdGVOYW1lVGFnKCkKCQkJCWlmIG5vdCBwY2FsbChmdW5jdGlvbigpCgkJCQkJCS0tIHYuQ2hhcmFjdGVyLkh1bWFub2lkLkRpc3BsYXlEaXN0YW5jZVR5cGUgPSBFbnVtLkh1bWFub2lkRGlzcGxheURpc3RhbmNlVHlwZS5Ob25lCgkJCQkJCWxvY2FsIG1heGggPSBtYXRoLmNlaWwodi5DaGFyYWN0ZXIuSHVtYW5vaWQuTWF4SGVhbHRoICogMTApCgkJCQkJCWxvY2FsIGggPSBtYXRoLmNlaWwodi5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoICogMTApCgkJCQkJCXQuVGFnLlRleHQgPSB2Lk5hbWUgLi4gIlxuIiAuLiAoKG1heGggfj0gMCBhbmQgdG9zdHJpbmcobWF0aC5jZWlsKChoIC8gbWF4aCkgKiAxMDApKSkgb3IgIjAiKSAuLiAiJSAgIiAuLiB0b3N0cmluZyhoKSAuLiAiLyIgLi4gdG9zdHJpbmcobWF4aCkKCQkJCQkJaWYgRVNQRW5hYmxlZCB0aGVuCgkJCQkJCQl0LlRhZy5UZXh0VHJhbnNwYXJlbmN5ID0gMAoJCQkJCQkJYi5UcmFuc3BhcmVuY3kgPSAwLjcKCQkJCQkJZWxzZQoJCQkJCQkJdC5UYWcuVGV4dFRyYW5zcGFyZW5jeSA9IDEKCQkJCQkJCWIuVHJhbnNwYXJlbmN5ID0gMQoJCQkJCQllbmQKCQkJCQkJaWYgaCAvIG1heGggPT0gMSB0aGVuCgkJCQkJCQl0LlRhZy5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKCQkJCQkJCWIuQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKCQkJCQkJZWxzZWlmIGggLyBtYXhoID09IDAgdGhlbgoJCQkJCQkJdC5UYWcuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApCgkJCQkJCQliLkNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApCgkJCQkJCWVsc2UKCQkJCQkJCXQuVGFnLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxOTIsICgxOTIgKiAoaCAvIG1heGgpKSwgKDE5MiAqIChoIC8gbWF4aCkpKQoJCQkJCQkJYi5Db2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxOTIsICgxOTIgKiAoaCAvIG1heGgpKSwgKDE5MiAqIChoIC8gbWF4aCkpKQoJCQkJCQllbmQKCQkJCQllbmQpIHRoZW4KCQkJCQlVcGRhdGVGdW5jc1t2XSA9IG5pbAoJCQkJZW5kCgkJCWVuZAoJCQlVcGRhdGVOYW1lVGFnKCkKCQkJVXBkYXRlRnVuY3Nbdl0gPSBVcGRhdGVOYW1lVGFnCgkJZW5kCgllbmQKCglmdW5jdGlvbiBVbmxvYWRDaGFyYWN0ZXIodikKCQlsb2NhbCB2SG9sZGVyID0gSG9sZGVyOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkKCQlpZiB2SG9sZGVyIGFuZCAodkhvbGRlcjpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUgLi4gIkJveCIpIH49IG5pbCBvciB2SG9sZGVyOkZpbmRGaXJzdENoaWxkKHYuTmFtZSAuLiAiTmFtZVRhZyIpIH49IG5pbCkgdGhlbgoJCQl2SG9sZGVyOkNsZWFyQWxsQ2hpbGRyZW4oKQoJCWVuZAoJZW5kCgoJZnVuY3Rpb24gTG9hZFBsYXllcih2KQoJCWlmIHYgfj0gcGxheWVyIHRoZW4KCQkJbG9jYWwgdkhvbGRlciA9IEluc3RhbmNlLm5ldygiRm9sZGVyIiwgSG9sZGVyKQoJCQl2SG9sZGVyLk5hbWUgPSB2Lk5hbWUKCQkJdi5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKCQkJCWlmIEVTUEVuYWJsZWQgPT0gdHJ1ZSB0aGVuCgkJCQkJcGNhbGwoTG9hZENoYXJhY3RlciwgdikKCQkJCWVuZAoJCQllbmQpCgkJCXYuQ2hhcmFjdGVyUmVtb3Zpbmc6Q29ubmVjdChmdW5jdGlvbigpCgkJCQlwY2FsbChVbmxvYWRDaGFyYWN0ZXIsIHYpCgkJCWVuZCkKCQkJTG9hZENoYXJhY3Rlcih2KQoJCWVuZAoJZW5kCgoJZnVuY3Rpb24gVW5sb2FkUGxheWVyKHYpCgkJVW5sb2FkQ2hhcmFjdGVyKHYpCgkJbG9jYWwgdkhvbGRlciA9IEhvbGRlcjpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpCgkJaWYgdkhvbGRlciB0aGVuCgkJCXZIb2xkZXI6RGVzdHJveSgpCgkJZW5kCgllbmQKCglmb3IgaSwgdiBpbiBwYWlycyhwbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KCQlzcGF3bihmdW5jdGlvbigpIHBjYWxsKExvYWRQbGF5ZXIsIHYpIGVuZCkKCWVuZAoKCXBsYXllcnMuUGxheWVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbih2KQoJCXBjYWxsKExvYWRQbGF5ZXIsIHYpCgllbmQpCgoJcGxheWVycy5QbGF5ZXJSZW1vdmluZzpDb25uZWN0KGZ1bmN0aW9uKHYpCgkJcGNhbGwoVW5sb2FkUGxheWVyLCB2KQoJZW5kKQoKCWdhbWUuSXRlbUNoYW5nZWQ6Q29ubmVjdChmdW5jdGlvbihpKQoJCWlmIGk6SXNBKCJQbGF5ZXIiKSB0aGVuCgkJCWlmIEhvbGRlcjpGaW5kRmlyc3RDaGlsZChpLk5hbWUpIHRoZW4KCQkJCVVubG9hZENoYXJhY3RlcihpKQoJCQkJd2FpdCgpCgkJCQlMb2FkQ2hhcmFjdGVyKGkpCgkJCWVuZAoJCWVsc2VpZiBpOklzQSgiSHVtYW5vaWQiKSBhbmQgaS5QYXJlbnQgdGhlbgoJCQlsb2NhbCBwID0gcGxheWVyczpHZXRQbGF5ZXJGcm9tQ2hhcmFjdGVyKGkuUGFyZW50KQoJCQlpZiBwIH49IHBsYXllciBhbmQgcCB+PSBuaWwgYW5kIEhvbGRlcjpGaW5kRmlyc3RDaGlsZChwLk5hbWUpIHRoZW4KCQkJCXBjYWxsKGZ1bmN0aW9uKCkKCQkJCQlVcGRhdGVGdW5jc1twXSgpCgkJCQllbmQpCgkJCWVuZAoJCWVuZAoJZW5kKQoKCWZ1bmN0aW9uIHRvZ2dsZUVTUCgpCgkJaWYgRVNQRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCWlmIEdFU1BFbmFibGVkIHRoZW4KCQkJCUdFU1BFbmFibGVkID0gZmFsc2UKCQkJCUVTUEVuYWJsZWQgPSB0cnVlCgkJCQlFU1BHb2xkLlRleHQgPSAiU3RhbmRhcmQgRVNQIEVuYWJsZWQiCgkJCQl3YWl0KDEpCgkJCQlFU1BHb2xkLlRleHQgPSAiKEcpIERldGFpbGVkIEVTUCAoT2ZmKSBbTV0iCgkJCWVsc2UKCQkJCUVTUEVuYWJsZWQgPSB0cnVlCgkJCWVuZAoJCQlFU1AuVGV4dCA9ICJFU1AgKE9uKSBbQl0iCgkJCWZvciBpLHYgaW4gcGFpcnMocGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCgkJCQlzcGF3bihmdW5jdGlvbigpIHBjYWxsKExvYWRQbGF5ZXIsIHYpIGVuZCkKCQkJZW5kCgkJZWxzZQoJCQlFU1BFbmFibGVkID0gZmFsc2UKCQkJRVNQLlRleHQgPSAiRVNQIChPZmYpIFtCXSIKCQkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KCQkJCXNwYXduKGZ1bmN0aW9uKCkgcGNhbGwoVW5sb2FkUGxheWVyLCB2KSBlbmQpCgkJCWVuZAoJCWVuZAoJZW5kCgoJRVNQLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdCh0b2dnbGVFU1ApCgoJLS0gR29sZCBFU1AKCglsb2NhbCBFU1BHb2xkID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUVTUEdvbGQuTmFtZSA9ICJFU1BHb2xkIgoJRVNQR29sZC5UZXh0ID0gIihHKSBEZXRhaWxlZCBFU1AgKE9mZikgW01dIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEVTUEdvbGQpCgoJR0VTUEVuYWJsZWQgPSBmYWxzZQoKCWxvY2FsIEdIb2xkZXIgPSBJbnN0YW5jZS5uZXcoIkZvbGRlciIsIGdhbWUuQ29yZUd1aSkKCUdIb2xkZXIuTmFtZSA9ICJFU1BHb2xkIgoKCWxvY2FsIEdVcGRhdGVGdW5jcyA9IHt9CgoJbG9jYWwgR0JveCA9IEluc3RhbmNlLm5ldygiQm94SGFuZGxlQWRvcm5tZW50IikKCUdCb3guTmFtZSA9ICJuaWxCb3hHIgoJR0JveC5TaXplID0gVmVjdG9yMy5uZXcoNCwgNywgNCkKCUdCb3guQ29sb3IzID0gQ29sb3IzLm5ldygxMDAgLyAyNTUsIDEwMCAvIDI1NSwgMTAwIC8gMjU1KQoJR0JveC5UcmFuc3BhcmVuY3kgPSAwLjcKCUdCb3guWkluZGV4ID0gMAoJR0JveC5BbHdheXNPblRvcCA9IHRydWUKCUdCb3guVmlzaWJsZSA9IHRydWUKCglsb2NhbCBHTmFtZVRhZyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIikKCUdOYW1lVGFnLk5hbWUgPSAibmlsTmFtZVRhZ0ciCglHTmFtZVRhZy5FbmFibGVkID0gdHJ1ZQoJR05hbWVUYWcuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKQoJR05hbWVUYWcuQWx3YXlzT25Ub3AgPSB0cnVlCglHTmFtZVRhZy5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDMuNiwgMCkKCUdOYW1lVGFnLk1heERpc3RhbmNlID0gNzUwCgoJbG9jYWwgR1RhZyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgR05hbWVUYWcpCglHVGFnLk5hbWUgPSAiR1RhZyIKCUdUYWcuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKCUdUYWcuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgLTUwLCAwLCAtNSkKCUdUYWcuU2l6ZSA9IFVEaW0yLm5ldygwLCAzMDAsIDAsIDIwKQoJR1RhZy5UZXh0U2l6ZSA9IDIwCglHVGFnLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEwMCAvIDI1NSwgMTAwIC8gMjU1LCAxMDAgLyAyNTUpCglHVGFnLlRleHRTdHJva2VDb2xvcjMgPSBDb2xvcjMubmV3KDAgLyAyNTUsIDAgLyAyNTUsIDAgLyAyNTUpCglHVGFnLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjQKCUdUYWcuVGV4dCA9ICJOb3QgQXZhaWxhYmxlIgoJR1RhZy5Gb250ID0gRW51bS5Gb250LlJvYm90b01vbm8KCUdUYWcuVGV4dFNjYWxlZCA9IGZhbHNlCglHVGFnLlRleHRUcmFuc3BhcmVuY3kgPSAwCgoJZnVuY3Rpb24gR0xvYWRDaGFyYWN0ZXIodikKCQkKCQlsb2NhbCB0YmxQbGF5ZXJEYXRhID0ge30KCQlSU1I6V2FpdEZvckNoaWxkKCJQbGF5ZXJEYXRhIikuT25DbGllbnRFdmVudDpDb25uZWN0KGZ1bmN0aW9uKHYsIHRibERhdGEpCgkJCXRibFBsYXllckRhdGFbdl0gPSB0YmxEYXRhCgkJZW5kKQoJCQoJCWlmIHYgfj0gcGxheWVyIHRoZW4KCQkJcmVwZWF0IHdhaXQoKSB1bnRpbCB2LkNoYXJhY3RlciB+PSBuaWwKCQkJdi5DaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZCIpCgkJCWxvY2FsIHZIb2xkZXIgPSBHSG9sZGVyOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkKCQkJdkhvbGRlcjpDbGVhckFsbENoaWxkcmVuKCkKCgkJCWxvY2FsIGIgPSBHQm94OkNsb25lKCkKCQkJYi5OYW1lID0gdi5OYW1lIC4uICJHQm94IgoJCQliLkFkb3JuZWUgPSB2LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0CgkJCWIuUGFyZW50ID0gdkhvbGRlcgoKCQkJbG9jYWwgdCA9IEdOYW1lVGFnOkNsb25lKCkKCQkJdC5OYW1lID0gdi5OYW1lIC4uICJHTmFtZVRhZyIKCQkJdC5QYXJlbnQgPSB2SG9sZGVyCgkJCXQuQWRvcm5lZSA9IHYuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIsIDUpCgkJCWlmIG5vdCB0LkFkb3JuZWUgdGhlbgoJCQkJcmV0dXJuIEdVbmxvYWRDaGFyYWN0ZXIodikKCQkJZW5kCgkJCXQuR1RhZy5UZXh0ID0gdi5OYW1lCgkJCXQuRW5hYmxlZCA9IHRydWUKCQkJd2FpdCgpCgoJCQlsb2NhbCBmdW5jdGlvbiBHVXBkYXRlTmFtZVRhZygpCgkJCQlpZiBub3QgcGNhbGwoZnVuY3Rpb24oKQoJCQkJCQktLSB2LkNoYXJhY3Rlci5IdW1hbm9pZC5EaXNwbGF5RGlzdGFuY2VUeXBlID0gRW51bS5IdW1hbm9pZERpc3BsYXlEaXN0YW5jZVR5cGUuTm9uZQoJCQkJCQlsb2NhbCBtYXhoID0gbWF0aC5jZWlsKHYuQ2hhcmFjdGVyLkh1bWFub2lkLk1heEhlYWx0aCAqIDEwKQoJCQkJCQlsb2NhbCBoID0gbWF0aC5jZWlsKHYuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCAqIDEwKQoJCQkJCQlsb2NhbCBzdHJoID0gIkg6ICIgLi4gKG5vdChtYXhoID09IDApIGFuZCB0b3N0cmluZyhtYXRoLmNlaWwoMTAwICogaCAvIG1heGgpKSBvciAwKSAuLiAiJSAoIiAuLiB0b3N0cmluZyhoKSAuLiAiLyIgLi4gdG9zdHJpbmcobWF4aCkgLi4gIikiCgkJCQkJCS0tCgkJCQkJCWxvY2FsIG1heG0gPSB0YmxQbGF5ZXJEYXRhW3ZdIGFuZCBtYXRoLmNlaWwodGJsUGxheWVyRGF0YVt2XS5NYXhNYW5hICogMTApIG9yIDEwMDAKCQkJCQkJbG9jYWwgbSA9IHRibFBsYXllckRhdGFbdl0gYW5kIG1hdGguY2VpbCh0YmxQbGF5ZXJEYXRhW3ZdLk1hbmEgKiAxMCkgb3IgMTAwMAoJCQkJCQlsb2NhbCBzdHJtID0gIk06ICIgLi4gKG5vdChtYXhtID09IDApIGFuZCB0b3N0cmluZyhtYXRoLmNlaWwoMTAwICogbSAvIG1heG0pKSBvciAwKSAuLiAiJSAoIiAuLiB0b3N0cmluZyhtKSAuLiAiLyIgLi4gdG9zdHJpbmcobWF4bSkgLi4gIikiCgkJCQkJCS0tCgkJCQkJCWxvY2FsIG1heHMgPSB0YmxQbGF5ZXJEYXRhW3ZdIGFuZCBtYXRoLmNlaWwodGJsUGxheWVyRGF0YVt2XS5NYXhTdGFtaW5hICogMTApIG9yIDEwMDAKCQkJCQkJbG9jYWwgcyA9IHRibFBsYXllckRhdGFbdl0gYW5kIG1hdGguY2VpbCh0YmxQbGF5ZXJEYXRhW3ZdLlN0YW1pbmEgKiAxMCkgb3IgMTAwMAoJCQkJCQlsb2NhbCBzdHJzID0gICJTOiAiIC4uIChub3QobWF4cyA9PSAwKSBhbmQgdG9zdHJpbmcobWF0aC5jZWlsKDEwMCAqIHMgLyBtYXhzKSkgb3IgMCkgLi4gIiUgKCIgLi4gdG9zdHJpbmcocykgLi4gIi8iIC4uIHRvc3RyaW5nKG1heHMpIC4uICIpIgoKCQkJCQkJdC5HVGFnLlRleHQgPSB2Lk5hbWUgLi4gKCJcbiIgLi4gc3RyaCkgLi4gKCJcbiIgLi4gc3RybSkgLi4gKCJcbiIgLi4gc3RycykKCQkJCQkJCgkJCQkJCWlmIEdFU1BFbmFibGVkIHRoZW4KCQkJCQkJCXQuR1RhZy5UZXh0VHJhbnNwYXJlbmN5ID0gMAoJCQkJCQkJYi5UcmFuc3BhcmVuY3kgPSAwLjcKCQkJCQkJZWxzZQoJCQkJCQkJdC5HVGFnLlRleHRUcmFuc3BhcmVuY3kgPSAxCgkJCQkJCQliLlRyYW5zcGFyZW5jeSA9IDEKCQkJCQkJZW5kCgkJCQkJCWlmIGggLyBtYXhoID49IDAuNzUgdGhlbgoJCQkJCQkJdC5HVGFnLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig2MiwgMjU1LCA2MikKCQkJCQkJCWIuQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTUsIDE1MywgNjQpCgkJCQkJCWVsc2VpZiBoIC8gbWF4aCA8PSAwLjc1IGFuZCBoIC8gbWF4aCA+PSAwLjUgdGhlbgoJCQkJCQkJdC5HVGFnLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgNTUpCgkJCQkJCQliLkNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE3OSwgMTMyLCAxNSkKCQkJCQkJZWxzZWlmIGggLyBtYXhoID09IDAgdGhlbgoJCQkJCQkJdC5HVGFnLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDIsIDIpCgkJCQkJCQliLkNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEzNCwgMTIsIDY2KQoJCQkJCQllbHNlCgkJCQkJCQl0LkdUYWcuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgKDE5NiAqIChoIC8gbWF4aCkpLCAoMiAqIChoIC8gbWF4aCkpKQoJCQkJCQkJYi5Db2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNzksICgxMzIgKiAoaCAvIG1heGgpKSwgKDE1ICogKGggLyBtYXhoKSkpCgkJCQkJCWVuZAoJCQkJCWVuZCkgdGhlbgoJCQkJCUdVcGRhdGVGdW5jc1t2XSA9IG5pbAoJCQkJZW5kCgkJCWVuZAoJCQlHVXBkYXRlTmFtZVRhZygpCgkJCUdVcGRhdGVGdW5jc1t2XSA9IEdVcGRhdGVOYW1lVGFnCgkJZW5kCgllbmQKCglmdW5jdGlvbiBHVW5sb2FkQ2hhcmFjdGVyKHYpCgkJbG9jYWwgdkhvbGRlciA9IEdIb2xkZXI6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQoJCWlmIHZIb2xkZXIgYW5kICh2SG9sZGVyOkZpbmRGaXJzdENoaWxkKHYuTmFtZSAuLiAiR0JveCIpIH49IG5pbCBvciB2SG9sZGVyOkZpbmRGaXJzdENoaWxkKHYuTmFtZSAuLiAiR05hbWVUYWciKSB+PSBuaWwpIHRoZW4KCQkJdkhvbGRlcjpDbGVhckFsbENoaWxkcmVuKCkKCQllbmQKCWVuZAoKCWZ1bmN0aW9uIEdMb2FkUGxheWVyKHYpCgkJaWYgdiB+PSBwbGF5ZXIgdGhlbgoJCQlsb2NhbCB2SG9sZGVyID0gSW5zdGFuY2UubmV3KCJGb2xkZXIiLCBHSG9sZGVyKQoJCQl2SG9sZGVyLk5hbWUgPSB2Lk5hbWUKCQkJdi5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKCQkJCWlmIEdFU1BFbmFibGVkID09IHRydWUgdGhlbgoJCQkJCXBjYWxsKEdMb2FkQ2hhcmFjdGVyLCB2KQoJCQkJZW5kCgkJCWVuZCkKCQkJdi5DaGFyYWN0ZXJSZW1vdmluZzpDb25uZWN0KGZ1bmN0aW9uKCkKCQkJCXBjYWxsKEdVbmxvYWRDaGFyYWN0ZXIsIHYpCgkJCWVuZCkKCQkJR0xvYWRDaGFyYWN0ZXIodikKCQllbmQKCWVuZAoKCWZ1bmN0aW9uIEdVbmxvYWRQbGF5ZXIodikKCQlHVW5sb2FkQ2hhcmFjdGVyKHYpCgkJbG9jYWwgdkhvbGRlciA9IEdIb2xkZXI6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQoJCWlmIHZIb2xkZXIgdGhlbgoJCQl2SG9sZGVyOkRlc3Ryb3koKQoJCWVuZAoJZW5kCgoJZm9yIGksIHYgaW4gcGFpcnMocGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCgkJc3Bhd24oZnVuY3Rpb24oKSBwY2FsbChHTG9hZFBsYXllciwgdikgZW5kKQoJZW5kCgoJcGxheWVycy5QbGF5ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHYpCgkJcGNhbGwoR0xvYWRQbGF5ZXIsIHYpCgllbmQpCgoJcGxheWVycy5QbGF5ZXJSZW1vdmluZzpDb25uZWN0KGZ1bmN0aW9uKHYpCgkJcGNhbGwoR1VubG9hZFBsYXllciwgdikKCWVuZCkKCglnYW1lLkl0ZW1DaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24oaSkKCQlpZiBpOklzQSgiUGxheWVyIikgdGhlbgoJCQlpZiBHSG9sZGVyOkZpbmRGaXJzdENoaWxkKGkuTmFtZSkgdGhlbgoJCQkJR1VubG9hZENoYXJhY3RlcihpKQoJCQkJd2FpdCgpCgkJCQlHTG9hZENoYXJhY3RlcihpKQoJCQllbmQKCQllbHNlaWYgaTpJc0EoIkh1bWFub2lkIikgYW5kIGkuUGFyZW50IHRoZW4KCQkJbG9jYWwgcCA9IHBsYXllcnM6R2V0UGxheWVyRnJvbUNoYXJhY3RlcihpLlBhcmVudCkKCQkJaWYgcCB+PSBwbGF5ZXIgYW5kIHAgfj0gbmlsIGFuZCBHSG9sZGVyOkZpbmRGaXJzdENoaWxkKHAuTmFtZSkgdGhlbgoJCQkJcGNhbGwoZnVuY3Rpb24oKQoJCQkJCUdVcGRhdGVGdW5jc1twXSgpCgkJCQllbmQpCgkJCWVuZAoJCWVuZAoJZW5kKQoKCWZ1bmN0aW9uIHRvZ2dsZUVTUEdvbGQoKQoJCWlmIGlzR29sZCBvciBpc01hc3RlciB0aGVuCgkJCWlmIEdFU1BFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJCWlmIEVTUEVuYWJsZWQgdGhlbgoJCQkJCUVTUEVuYWJsZWQgPSBmYWxzZQoJCQkJCUdFU1BFbmFibGVkID0gdHJ1ZQoJCQkJCUVTUC5UZXh0ID0gIkRldGFpbGVkIEVTUCBFbmFibGVkIgoJCQkJCXdhaXQoMSkKCQkJCQlFU1AuVGV4dCA9ICJFU1AgKE9mZikgW0JdIgoJCQkJZWxzZQoJCQkJCUdFU1BFbmFibGVkID0gdHJ1ZQoJCQkJZW5kCgkJCQlFU1BHb2xkLlRleHQgPSAiKEcpIERldGFpbGVkIEVTUCAoT24pIFtNXSIKCQkJCWZvciBpLHYgaW4gcGFpcnMocGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCgkJCQkJc3Bhd24oZnVuY3Rpb24oKSBwY2FsbChHTG9hZFBsYXllciwgdikgZW5kKQoJCQkJZW5kCgkJCWVsc2UKCQkJCUdFU1BFbmFibGVkID0gZmFsc2UKCQkJCUVTUEdvbGQuVGV4dCA9ICIoRykgRGV0YWlsZWQgRVNQIChPZmYpIFtNXSIKCQkJCWZvciBpLCB2IGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCgkJCQkJc3Bhd24oZnVuY3Rpb24oKSBwY2FsbChHVW5sb2FkUGxheWVyLCB2KSBlbmQpCgkJCQllbmQKCQkJZW5kCgkJZWxzZQoJCQlFU1BHb2xkLlRleHQgPSAiTWVtYmVyIE5vdCBHb2xkIgoJCQl3YWl0KDMpCgkJCUVTUEdvbGQuVGV4dCA9ICIoRykgRGV0YWlsZWQgRVNQIChPZmYpIFtNXSIKCQllbmQKCWVuZAoKCUVTUEdvbGQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KHRvZ2dsZUVTUEdvbGQpCgoJLS0gVFAgdG8gRHJvcHMKCglsb2NhbCBUUFNoYXJkcyA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglUUFNoYXJkcy5OYW1lID0gIlRQU2hhcmRzIgoJVFBTaGFyZHMuVGV4dCA9ICJUZWxlcG9ydCB0byBTaGFyZHMgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgVFBTaGFyZHMpCgoJVFBTaGFyZHNFbmFibGVkID0gZmFsc2UJCgoJbG9jYWwgVFBEaWFtb25kcyA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglUUERpYW1vbmRzLk5hbWUgPSAiVFBEaWFtb25kcyIKCVRQRGlhbW9uZHMuVGV4dCA9ICJUZWxlcG9ydCB0byBEaWFtb25kcyAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBUUERpYW1vbmRzKQoKCVRQRGlhbW9uZHNFbmFibGVkID0gZmFsc2UKCglsb2NhbCBwbGF0ZSA9IEluc3RhbmNlLm5ldygiUGFydCIpCglwbGF0ZS5QYXJlbnQgPSBnYW1lLldvcmtzcGFjZQoJcGxhdGUuU2l6ZSA9IFZlY3RvcjMubmV3KDQwLCAxLCA0MCkKCXBsYXRlLlBvc2l0aW9uID0gVmVjdG9yMy5uZXcoMCwgMTAwMDAwLCAwKQoJcGxhdGUuQW5jaG9yZWQgPSB0cnVlCglwbGF0ZS5SZWZsZWN0YW5jZSA9IDAuNQoJcGxhdGUuVHJhbnNwYXJlbmN5ID0gMC41CgoJbG9jYWwgdGltZSA9IDAKCWxvY2FsIGNhbkludmlzID0gZmFsc2UKCglmdW5jdGlvbiB0ZWxlcG9ydFRvRHJvcHMoKQoJCWxvY2FsIGhycCA9IHBsYXllci5DaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZVsnLklnbm9yZSddWycuU2VydmVyRWZmZWN0cyddOkdldENoaWxkcmVuKCkpIGRvCgkJCWlmIFRQU2hhcmRzRW5hYmxlZCBhbmQgdi5OYW1lID09ICJTaGFyZCIgdGhlbgoJCQkJaHJwLkNGcmFtZSA9IHYuQ0ZyYW1lCgkJCQl3YWl0KC4yKQoJCQllbHNlaWYgVFBEaWFtb25kc0VuYWJsZWQgYW5kIHYuTmFtZSA9PSAiRGlhbW9uZCIgdGhlbgoJCQkJaHJwLkNGcmFtZSA9IHYuQ0ZyYW1lCgkJCQl3YWl0KC4yKQoJCQllbmQKCgkJCWlmIGNhbkludmlzIHRoZW4KCQkJCWlmIHRpbWUgPT0gNSB0aGVuIAoJCQkJCWJyZWFrCgkJCQllbmQKCQkJZW5kCgkJZW5kCgoJCWhycC5DRnJhbWUgPSBDRnJhbWUubmV3KFZlY3RvcjMubmV3KDAsIDEwMDAwMywgLTEwKSkKCgkJcmV0dXJuIAoJZW5kCgoKCWZ1bmN0aW9uIHN0YXJ0VGltZXIoKQoJCWxvY2FsIGhycCA9IHBsYXllci5DaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKCQl3aGlsZSB3YWl0KCkgZG8KCQkJaWYgVFBTaGFyZHNFbmFibGVkIG9yIFRQRGlhbW9uZHNFbmFibGVkIHRoZW4KCQkJCWlmIHRpbWUgfj0gMCB0aGVuIHJldHVybgoJCQkJZWxzZQoJCQkJCWlmIGNhbkludmlzIHRoZW4KCQkJCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiU3Bpcml0IiwgIlNwZWN0cmFsIEVtYm9kaW1lbnQiKQoJCQkJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIlNwaXJpdCIsICJTcGVjdHJhbCBFbWJvZGltZW50IikKCQkJCQkJd2FpdCgxKQoJCQkJCQlyZXBlYXQKCQkJCQkJCXNwYXduKGZ1bmN0aW9uKCkgcGNhbGwodGVsZXBvcnRUb0Ryb3BzKSBlbmQpCgkJCQkJCQl0aW1lID0gdGltZSArIDEKCQkJCQkJCXdhaXQoMSkKCQkJCQkJdW50aWwgdGltZSA9PSA2CgkJCQkJCWhycC5DRnJhbWUgPSBDRnJhbWUubmV3KFZlY3RvcjMubmV3KDAsIDEwMDAwMywgLTEwKSkKCQkJCQkJd2FpdCg3LjUpCgkJCQkJCXRpbWUgPSAwCgkJCQkJZWxzZQoJCQkJCQl3aGlsZSB0cnVlIGRvCgkJCQkJCQlpZiBub3QgVFBTaGFyZHNFbmFibGVkIGFuZCBub3QgVFBEaWFtb25kc0VuYWJsZWQgdGhlbgoJCQkJCQkJCWJyZWFrCgkJCQkJCQllbmQKCQkJCQkJCXNwYXduKGZ1bmN0aW9uKCkgcGNhbGwodGVsZXBvcnRUb0Ryb3BzKSBlbmQpCgkJCQkJCQl3YWl0KDEpCgkJCQkJCWVuZAoJCQkJCWVuZAoJCQkJZW5kCgkJCWVsc2UKCQkJCWJyZWFrCgkJCWVuZAoJCWVuZAoKCQlyZXR1cm4KCWVuZAoKCVRQU2hhcmRzLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgcGxheWVyOldhaXRGb3JDaGlsZCgiUGxheWVyR3VpIik6V2FpdEZvckNoaWxkKCJNYWluIikuQ2hhcmFjdGVyLkF2YWlsYWJsZS5TY3JvbGxpbmdGcmFtZS5GcmFtZTpGaW5kRmlyc3RDaGlsZCgiU3BlY3RyYWwgRW1ib2RpbWVudCIpIHRoZW4KCQkJY2FuSW52aXMgPSB0cnVlCgkJZW5kCgkJaWYgVFBTaGFyZHNFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJVFBTaGFyZHNFbmFibGVkID0gdHJ1ZQoJCQlUUFNoYXJkcy5UZXh0ID0gIlRlbGVwb3J0IHRvIFNoYXJkcyAoT24pIgoJCQlzdGFydFRpbWVyKCkKCQkJd2hpbGUgVFBTaGFyZHNFbmFibGVkIGRvCgkJCQl3YWl0KCkKCQkJCWlmIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID09IDAgdGhlbgoJCQkJCXJlcGVhdCB3YWl0KCkgdW50aWwgcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggfj0gMAoJCQkJCXN0YXJ0VGltZXIoKQoJCQkJZW5kCgkJCWVuZAoJCWVsc2UKCQkJVFBTaGFyZHNFbmFibGVkID0gZmFsc2UKCQkJVFBTaGFyZHMuVGV4dCA9ICJUZWxlcG9ydCB0byBTaGFyZHMgKE9mZikiCgkJZW5kCgllbmQpCgoJVFBEaWFtb25kcy5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIHBsYXllcjpXYWl0Rm9yQ2hpbGQoIlBsYXllckd1aSIpOldhaXRGb3JDaGlsZCgiTWFpbiIpLkNoYXJhY3Rlci5BdmFpbGFibGUuU2Nyb2xsaW5nRnJhbWUuRnJhbWU6RmluZEZpcnN0Q2hpbGQoIlNwZWN0cmFsIEVtYm9kaW1lbnQiKSB0aGVuCgkJCWNhbkludmlzID0gdHJ1ZQoJCWVuZAoJCWlmIFRQRGlhbW9uZHNFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJVFBEaWFtb25kc0VuYWJsZWQgPSB0cnVlCgkJCVRQRGlhbW9uZHMuVGV4dCA9ICJUZWxlcG9ydCB0byBEaWFtb25kcyAoT24pIgoJCQlzdGFydFRpbWVyKCkKCQkJd2hpbGUgVFBEaWFtb25kc0VuYWJsZWQgZG8KCQkJCXdhaXQoKQoJCQkJaWYgcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPT0gMCB0aGVuCgkJCQkJcmVwZWF0IHdhaXQoKSB1bnRpbCBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCB+PSAwCgkJCQkJc3RhcnRUaW1lcigpCgkJCQllbmQKCQkJZW5kCgkJZWxzZQoJCQlUUERpYW1vbmRzRW5hYmxlZCA9IGZhbHNlCgkJCVRQRGlhbW9uZHMuVGV4dCA9ICJUZWxlcG9ydCB0byBEaWFtb25kcyAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBSZWpvaW4gU2VydmVyIEZ1bmN0aW9uCgoJLS0gVGhpcyB3YXMgb25seSBwcmVzZXJ2ZWQgYXMgSSBjb3VsZG4ndCB0aGluayBvZiBhbnkgb3RoZXIgcGxhY2UgdG8gcHV0IHRoZSBmdW5jdGlvbiBmb3Igbm93LgoJLS0gTWlnaHQgZ2V0IG1vdmVkIGxhdGVyLCBpZHVubm8uCglmdW5jdGlvbiByZWpvaW4oKQoJCWxvY2FsIHRzID0gZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKQoJCWxvY2FsIHAgPSBwbGF5ZXJzLkxvY2FsUGxheWVyCgoJCXRzOlRlbGVwb3J0KGdhbWUuUGxhY2VJZCwgcCkKCWVuZAoKCS0tIEdVSSBUd2Vha2luZwoKCWZvciBpLCB2IGluIHBhaXJzKGJvcmRlcnMpIGRvCgkJdi5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDAuNSkKCQl2LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQoJCXYuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuNzUwCgkJdi5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQoJCXYuQm9yZGVyU2l6ZVBpeGVsID0gMAoJCXYuU2l6ZUNvbnN0cmFpbnQgPSBFbnVtLlNpemVDb25zdHJhaW50LlJlbGF0aXZlWVkKCQl2LkFjdGl2ZSA9IHRydWUKCQl2LlBhcmVudCA9IGViZ3VpCgllbmQKCglmb3IgaSwgdiBpbiBwYWlycyhidXR0b25zKSBkbwoJCXYuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIzNiwgMjAsIDExNSkKCQl2LkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApCgkJdi5Cb3JkZXJTaXplUGl4ZWwgPSAyCgkJdi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKQoJCXYuU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKQoJCXYuRm9udCA9IEVudW0uRm9udC5TYXJwYW5jaAoJCXYuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1MSwgMjUxLCAyNTUpCgkJdi5UZXh0U2NhbGVkID0gdHJ1ZQoJCXYuVGV4dFNpemUgPSAxNC4wMDAKCQl2LlRleHRXcmFwcGVkID0gdHJ1ZQoJCXYuTGF5b3V0T3JkZXIgPSBpCgkJdi5QYXJlbnQgPSBtYWluZnJhbWUKCWVuZAoKCS0tIGNvbW1hbmRCb3gKCgl0YXJnZXQgPSBwbGF5ZXIuTmFtZQoJdGFyZ2V0U2V0dGluZyA9ICJzZWxlY3QiCglsb29waW5nID0gZmFsc2UKCXNtYXJ0QXR0YWNrID0gdHJ1ZQoJSGVhbFNldHRpbmcgPSAxCglzdHVuRW5hYmxlZCA9IHRydWUKCUZQU0Ryb3BwaW5nID0gZmFsc2UKCWxvY2FsIGJ1dHRvbkhlaWdodCA9IDMwCglsb2NhbCBidXR0b25HYXAgPSA3CiAgICBsb2NhbCBoZWxwMSA9IFtbfHwgQmVsb3cgaXMgYSBmdWxsLCBjb21wcmVoZW5zaXZlIGxpc3Qgb2YgZWFjaCBjb21tYW5kIEVCR1VJIGhhcyB0byBvZmZlci4gfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIChQcmVmaXggaXMgOykKCiAgICAgICAgICAgICAgICAiaGVscCBbbnVtXSIgLSBTaG93cyB0aGlzIGNvbW1hbmRzIGxpc3QhIENob29zZSBiZXR3ZWVuIHBhZ2VzIDEgb3IgMi4KICAgICAgICAgICAgICAgICJjaGFuZ2Vsb2ciIC0gU2hvd3MgYSBsaW5rIHRvIHRoZSBjaGFuZ2Vsb2cgZm9yIEVCR1VJIGFuZCBpdHMgQ2FuYXJ5IGJyYW5jaC4KICAgICAgICAgICAgICAgICJyZSIgLSBSZWZyZXNoZXMgeW91ciBjaGFyYWN0ZXIuIFRoaXMgd2lsbCB0ZW1wb3JhcmlseSB2YW5pc2ggeW91LCBhbmQgYnJpbmcgeW91IGJhY2sgd2l0aCBmdWxsIHN0YXRzLgogICAgICAgICAgICAgICAgInRwIDxtYXA+IiAtIFRlbGVwb3J0cyB5b3UgdG8gdGhlIG1hcCBvZiB5b3VyIGNob2ljZS4gSGVhdmVuIGRvZXNuJ3Qgd29yayB3aXRob3V0IHRoZSBnYW1lcGFzcy4KICAgICAgICAgICAgICAgICJkZWNsdXR0ZXIiIC0gQ2xlYXJzIHRoZSBiYWNrZ3JvdW5kcyBvZiB0aGUgbWFpbiBHVUlzLCBhbmQgc2hyaW5rcyB0aGUgbW92ZXMvc3RhdHMuCiAgICAgICAgICAgICAgICAicmFpbiIgLSBFbmFibGVzIHRoZSByYWluIGZyb20gV2F0ZXIgbWFwLiBDYXJlZnVsLCB5b3UgaGF2ZSB0byByZWpvaW4gdG8gdHVybiBpdCBvZmYhCiAgICAgICAgICAgICAgICAiZml4IiAtIFJlbW92ZXMgdGhlICJMT0FESU5HIiBzY3JlZW4gd2hlbiB0ZWxlcG9ydGluZyB0byBjZXJ0YWluIG1hcHMuCiAgICAgICAgICAgICAgICAiYnV0dG9uaGVpZ2h0IDxudW0+IiAtIENoYW5nZXMgdGhlIGhlaWdodCwgaW4gcGl4ZWxzLCBvZiBFQkdVSSdzIGJ1dHRvbnMuCiAgICAgICAgICAgICAgICAiYnV0dG9uZ2FwIDxudW0+IiAtIENoYW5nZXMgdGhlIGdhcCwgaW4gcGl4ZWxzLCBiZXR3ZWVuIEVCR1VJJ3MgYnV0dG9ucy4KICAgICAgICAgICAgICAgICJyZWpvaW4iIC0gUmVqb2lucyB0aGUgc2VydmVyLgogICAgICAgICAgICAgICAgImF1cmEvb2ZmIiAtIEFuIGFsdGVybmF0ZSBtZXRob2Qgb2Ygc2lsZW50bHkgdHVybmluZyBvZmYgYXVyYS4KICAgICAgICAgICAgICAgICJ0YXJnZXRzZXR0aW5nIDxtb2RlPiIgLSBNb2RpZmllcyBob3cgRUJHVUkgc2VsZWN0cyB0YXJnZXRzLiBXb24ndCB0YXJnZXQgdGhvc2UgaW4gc2FmZXpvbmUsIGV4Y2VwdCBpbiAic2VsZWN0IiBtb2RlLgogICAgICAgICAgICAgICAgICAgIC0tICJzZWxlY3QiIGFsbG93cyB5b3UgdG8gY2hvb3NlIGJ5IHR5cGluZyBpbnRvIHRoZSBjb21tYW5kIGJveC4gU2V0IHRvIHRoaXMgYnkgZGVmYXVsdC4KICAgICAgICAgICAgICAgICAgICAtLSAiY2xvc2VzdCIgc2VsZWN0cyB0aGUgcGVyc29uIGNsb3Nlc3QgdG8geW91LgogICAgICAgICAgICAgICAgICAgIC0tICJmYXJ0aGVzdCIgc2VsZWN0cyB0aGUgcGVyc29uIGZhcnRoZXN0IGZyb20geW91LgogICAgICAgICAgICAgICAgICAgIC0tICJsb3docCIgc2VsZWN0cyB0aGUgcGVyc29uIHdpdGggdGhlIGxvd2VzdCBIUC4KICAgICAgICAgICAgICAgICAgICAtLSAiaGlnaGhwIiBzZWxlY3RzIHRoZSBjbG9zZXN0IHBlcnNvbiB3aXRoIHRoZSBoaWdoZXN0IEhQLl1dCgogICAgbG9jYWwgaGVscDIgPSBbWyJsb29wIiAtIExvb3BzIHRoZSB1c2FnZSBvZiBlbmFibGVkIGF0dGFjayBleHBsb2l0cy4KICAgICAgICAgICAgICAgICJncmNoYXJnZSA8bnVtPiIgLSBNdWx0aXBsaWVzIHRoZSB0aW1lIEFtcGxpZmllZCBHZW5lc2lzIFJheSBhdHRhY2sgZXhwbG9pdCBzdGF5cyBhbGl2ZSBmb3IuIERlZmF1bHQsIDEsIGxhc3RzIDYgc2Vjb25kcy4KICAgICAgICAgICAgICAgICJzcGVlZCA8bnVtPiIgLSBDaGFuZ2VzIHlvdXIgZGVmYXVsdCB3YWxrc3BlZWQuIERlZmF1bHQsIDY0LCBlcXVhbHMgbWF4LXNwZWVkIHNwcmludGluZy4KICAgICAgICAgICAgICAgICJzbWFydGF0dGFjayIgLSBUb2dnbGVzIGlmIGF0dGFjayBleHBsb2l0cyB3aWxsIGZpcmUgb24gcGVvcGxlIHdobyBhcmUgaW4gc2FmZXpvbmUuIERlZmF1bHQgb24uCiAgICAgICAgICAgICAgICAiZ2FtZWNvbG9yIDxtb2RlPiIgLSBDaGFuZ2VzIHRoZSBjb250cmFzdCBhbmQgc2F0dXJhdGlvbiBvZiB0aGUgZ2FtZS4KICAgICAgICAgICAgICAgICAgICAtLSAibm9ybWFsIiB3aWxsIHJlc2V0IGV2ZXJ5dGhpbmcgdG8gbm9ybWFsLgogICAgICAgICAgICAgICAgICAgIC0tICJncmF5c2NhbGUiIHR1cm5zIG9mZiB0aGUgc2F0dXJhdGlvbiBhbmQgbWFrZXMgZXZlcnl0aGluZyBncmF5LgogICAgICAgICAgICAgICAgICAgIC0tICJpbnZlcnRodWUiIGludmVydHMgdGhlIGh1ZSBvZiBldmVyeXRoaW5nLiBHcmVlbiBiZWNvbWVzIHB1cnBsZSwgYmx1ZSBiZWNvbWVzIHJlZC4KICAgICAgICAgICAgICAgICAgICAtLSAiaW52ZXJ0YWxsIiBpbnZlcnRzIHRoZSBodWUsIHNhdHVyYXRpb24sIGFuZCBjb250cmFzdCBvZiBldmVyeXRoaW5nLiBOZWdhdGl2ZSEKICAgICAgICAgICAgICAgICJibGFja2Nhc3QiIC0gQ2hhbmdlcyBhbGwgdGhlIG1lZGFscyB0byBibGFjayB3aGVuIGNhc3Rpbmcgc3BlbGxzLgogICAgICAgICAgICAgICAgInN0dW4iIC0gVG9nZ2xlcyB3aGV0aGVyIHlvdSB3YW50IHRvIGJlIHN0dW5uZWQgb3Igbm90LiBOb3QgdmVyeSBkaXNjcmVldC4KICAgICAgICAgICAgICAgICJkcnVncyIgLSBSYW5kb21pemVzIHRoZSBjb2xvcnMgb2YgYWxsIG1hZ2ljIHNwZWxscy4gUmVxdWlyZXMgeW91IHRvIHJ1biAiY29sb3JzIiBmaXJzdC4KICAgICAgICAgICAgICAgICJtYWdpY2NvbG9yIDxyPiA8Zz4gPGI+IiAtIENoYW5nZXMgdGhlIGNvbG9yIG9mIGFsbCBtYWdpYyBzcGVsbHMgdG8gYW4gUkdCIHZhbHVlLiBSZXF1aXJlcyB5b3UgdG8gcnVuICJjb2xvcnMiIGZpcnN0LgogICAgICAgICAgICAgICAgImNvbG9ycyIgLSBBbGxvd3MgeW91IHRvIHJ1biAiZHJ1Z3MiIGFuZCAibWFnaWNjb2xvciIuCiAgICAgICAgICAgICAgICAiaGVhbCA8cGxheWVyPiIgLSBQbGFjZXMgQmx1ZSBBcnNvbiBhbmQgR2xlYW1pbmcgSGFybW9ueSBhdCB0aGUgZmVldCBvZiBhIHBsYXllciBvZiB5b3VyIGNob2ljZS4KICAgICAgICAgICAgICAgICJlIDxudW0gMS0zPiIgLSBDaGFuZ2VzIHRoZSBwaGFzZSBvZiB0aGUgQ29udHJvbGxlZCBFY2hvZXMgYXR0YWNrIGV4cGxvaXQuCiAgICAgICAgICAgICAgICAgICAgLS0gIjEiIHdpbGwgY2hhbmdlIGl0IHRvIFBPVywgYW5kIGlzIHRoZSBkZWZhdWx0LgogICAgICAgICAgICAgICAgICAgIC0tICIyIiB3aWxsIGNoYW5nZSBpdCB0byBCVVJOLgogICAgICAgICAgICAgICAgICAgIC0tICIzIiB3aWxsIGNoYW5nZSBpdCB0byBTVFVOLgogICAgICAgICAgICAgICAgIm9yaWdpbiIgLSBDcmVhdGVzIGEgc21hbGwsIHJlZCBibG9jayBhdCAwLCAwLCAwIHdpdGhpbiB0aGUgd29ybGQuXV0KCglSU1IgPSBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOldhaXRGb3JDaGlsZCgiUmVtb3RlcyIpCgoJbG9jYWwgc3R1bkNvbm5lY3Rpb24gPSBnZXRjb25uZWN0aW9ucyhSU1I6V2FpdEZvckNoaWxkKCJDb21iYXQiKS5PbkNsaWVudEV2ZW50KQoJbG9jYWwgbGFnZ2VycyA9IHsKCQkiMUIwRjk4QkUtRTEwQi00Njc0LTlGQjQtNkY2NTE3MUEzNDdGIiwgLS0gbG9nCgkJIjZBMzMxMDRBLTFGRTktNEZBOC05Mzc0LUMxNjREMjhGODM1MSIsIC0tIGJyaWFuCgkJIjgzNzczNkFBLTAxOTItNDdGOS05OEM1LThERDBERjE4RkU3NCIsIC0tIGpldAoJCSI1NUMyMDQ5RC1DNkJELTQ1MjMtODgwNC1ENTM5QzM4NzkyQTMiLCAtLSBwZW50YXJhY3QKCQkiOTQ2NEI2OEEtMzYzQy00MUY4LUJCN0QtQjRCRUQ4QUMwOTYzIiwgLS0gdmFzdG9yaW8KCQktLSAiODMwQkQ0RTktNUVCRS00QTEzLUI0N0ItOUJFNjAwODNCODM2IiwgLS0gbG9sb2sKCQktLSAiNjNCMzlFMjctREExQi00ODJFLUIyOEMtNkEzMzk4Qzk1QTRDIiwgLS0gYWxleAoJCSI4NDZBNjVFMi1FOTYzLTRBMEEtOTAyNS1FOUI4RTk1ODk2MTMiLCAtLSBicmFtCgkJIjNGMTY4NDQwLUE1QzAtNEY3MS04RTUxLTNGREY5MDI1RjUxQiIsIC0tIHRvbWVrCgkJIjZBOTcwNTJBLTYzNEUtNDdFMS04RDkwLTVFRTNDQTRBOTZGQSIsIC0tIHJhdmVuCgkJIkY1OTc1RDdELTJBQzUtNDRBQS04MDFGLTgyNzYyNUQ2RDc2MyIsIC0tIGFsZXhpYQoJCSI0ODI4NzE4Mi05RTc3LTRGOTctQTY1NC05NzA2OUVEODE2NkMiLCAtLSBqZXNzCgkJIjc0ODlDQkFFLTc5ODYtNDVBOS1CRTQwLUEyMThFRENEMEYwMSIgLS0gY2VwaGFzCgl9CgoJbG9jYWwgY2xpZW50aWQgPSBnYW1lOkdldFNlcnZpY2UoIlJieEFuYWx5dGljc1NlcnZpY2UiKTpHZXRDbGllbnRJZCgpOmxvd2VyKCkKCWxvY2FsIGFsbG93ZWRUb0Ryb3BGUFMgPSB0cnVlCgoJZm9yIGksIHYgaW4gcGFpcnMobGFnZ2VycykgZG8KCQl2ID0gdjpsb3dlcigpCgoJCWlmICh2ID09IGNsaWVudGlkKSB0aGVuCgkJCWFsbG93ZWRUb0Ryb3BGUFMgPSB0cnVlCgkJZW5kCgllbmQKCglmdW5jdGlvbiBnZXRIUlAoY2hyKQoJCWxvY2FsIEhSUCA9IGNocjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIG9yIGNocjpGaW5kRmlyc3RDaGlsZCgiVG9yc28iKSBvciBjaHI6RmluZEZpcnN0Q2hpbGQoIlVwcGVyVG9yc28iKQoJCXJldHVybiBIUlAKCWVuZAoKCWZ1bmN0aW9uIGdldEhVTShjaHIpCgkJbG9jYWwgSFVNID0gY2hyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpCgkJcmV0dXJuIEhVTQoJZW5kCgoJbG9jYWwgZnVuY3Rpb24gcmVzcGF3bihwbHIpCgkJbG9jYWwgY2hyID0gcGxyLkNoYXJhY3RlcgoKCQlpZiAoY2hyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKSkgdGhlbiBjaHI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpOkNoYW5nZVN0YXRlKDE1KSBlbmQKCQljaHI6Q2xlYXJBbGxDaGlsZHJlbigpCgoJCWxvY2FsIG5ld2NociA9IEluc3RhbmNlLm5ldygiTW9kZWwiKQoJCW5ld2Noci5QYXJlbnQgPSB3b3Jrc3BhY2UKCQlwbHIuQ2hhcmFjdGVyID0gbmV3Y2hyCgoJCXdhaXQoKQoKCQlwbHIuQ2hhcmFjdGVyID0gY2hyCgkJbmV3Y2hyOkRlc3Ryb3koKQoJZW5kCgoJbG9jYWwgZnVuY3Rpb24gcmVmcmVzaChwbHIpCgkJbG9jYWwgaHVtID0gcGxyLkNoYXJhY3RlciBhbmQgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIiwgdHJ1ZSkKCQlsb2NhbCBwb3MgPSBodW0gYW5kIGh1bS5Sb290UGFydCBhbmQgaHVtLlJvb3RQYXJ0LkNGcmFtZQoJCWxvY2FsIHBvczEgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUKCgkJcmVzcGF3bihwbHIpCgoJCXNwYXduKGZ1bmN0aW9uKCkKCQkJcGxyLkNoYXJhY3RlckFkZGVkOldhaXQoKTpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikuUm9vdFBhcnQuQ0ZyYW1lLCB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUgPSBwb3MsIHdhaXQoKSBhbmQgcG9zMQoJCWVuZCkKCWVuZAoKCWxvY2FsIGZ1bmN0aW9uIHNwbGl0QXJncyhjb21tYW5kKQoJCWNvbW1hbmQgPSBzdHJpbmcuZ3N1Yihjb21tYW5kLCAiLCIsICIgIikKCQljb21tYW5kID0gc3RyaW5nLnNwbGl0KGNvbW1hbmQsICIgIikKCgkJZm9yIGksIHYgaW4gaXBhaXJzKGNvbW1hbmQpIGRvCgkJCXYgPSBzdHJpbmcuZ3N1Yih2LCAiJXMrIiwgIiIpCgkJCWlmIHYgPT0gIiIgdGhlbgoJCQkJdGFibGUucmVtb3ZlKGNvbW1hbmQsIGkpCgkJCWVuZAoJCWVuZAoKCQlyZXR1cm4gY29tbWFuZAoJZW5kCgoJbG9jYWwgZnVuY3Rpb24gZmluZFBsYXllcih0ZXh0KQoJCWxvY2FsIHBsYXllcnMgPSBnYW1lLlBsYXllcnM6R2V0UGxheWVycygpCgkJbG9jYWwgbWF0Y2hlcyA9IHt9CgoJCWZvciBpLCBQbGF5ZXIgaW4gaXBhaXJzKHBsYXllcnMpIGRvCgkJCWxvY2FsIG5hbWUgPSBQbGF5ZXIuTmFtZQoJCQl0ZXh0ID0gc3RyaW5nLmxvd2VyKHRleHQpCgkJCW5hbWUgPSBzdHJpbmcubG93ZXIobmFtZSkKCgkJCWxvY2FsIG1hdGNoID0gc3RyaW5nLmZpbmQobmFtZSwgdGV4dCkKCgkJCWlmIG1hdGNoIHRoZW4KCQkJCXRhYmxlLmluc2VydChtYXRjaGVzLCBQbGF5ZXIuTmFtZSkKCQkJZW5kCgkJZW5kCgoJCXJldHVybiBtYXRjaGVzCgllbmQKCglsb2NhbCBkcnVnc0VuYWJsZWQgPSBmYWxzZQoJbG9jYWwgY29sb3JzRW5hYmxlZCA9IGZhbHNlCglsb2NhbCBibGFja2Nhc3RFbmFibGVkID0gZmFsc2UKCWxvY2FsIGNvbG9yRXhjbHVkZSA9IHsiSGVhZCIsIlRvcnNvIiwiTGVmdCBBcm0iLCJMZWZ0IExlZyIsIlJpZ2h0IEFybSIsIlJpZ2h0IExlZyIsIlNoYXJkIiwiRGlhbW9uZCJ9CgoJLS1bWzk4LzI1NSwgMzcvMjU1LCAyMDkvMjU1XV0KCWxvY2FsIGNvbG9yMQoJbG9jYWwgY29sb3IyCglsb2NhbCBjb2xvcjMKCglsb2NhbCBmdW5jdGlvbiB0ZXJtRUJHdWkoKQoJCWJ1dHRvbnNtYWluOlR3ZWVuUG9zaXRpb24oCgkJCVVEaW0yLm5ldygxLjI1LCAwLCAwLjY1LCAwKSwKCQkJIkluIiwKCQkJIlNpbmUiLAoJCQkuNSwKCQkJdHJ1ZQoJCSkKCQljb21tYW5kc21haW46VHdlZW5Qb3NpdGlvbigKCQkJVURpbTIubmV3KDEuMjUsIDAsIDAuNDUsIDApLAoJCQkiSW4iLAoJCQkiU2luZSIsCgkJCS41LAoJCQl0cnVlCgkJKQoJCXdhaXQoMSkKCQl0YXJnZXQgPSBwbGF5ZXIuTmFtZQoJCWViZ3VpOkRlc3Ryb3koKQoJZW5kCgoJbG9jYWwgZnVuY3Rpb24gaW5wdXRCb3goKQoJCWxvY2FsIHRleHQgPSBjb21tYW5kQm94LlRleHQKCQl3YWl0KCkKCQljb21tYW5kQm94LlRleHQgPSAiIgoKCQlsb2NhbCBwcmVmaXggPSAiOyIKCQlpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDEpID09IChwcmVmaXgpIHRoZW4KCQkJdGV4dCA9IHN0cmluZy5sb3dlcih0ZXh0KQoKCQkJaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAzKSA9PSAocHJlZml4IC4uICJyZSIpIHRoZW4KCQkJCXJlZnJlc2gocGxheWVyKQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAzKSA9PSAocHJlZml4IC4uICJ0cCIpIHRoZW4KCQkJCWxvY2FsIHRlbGVwb3J0dG8KICAgICAgICAgICAgICAgIGxvY2FsIHRwbmFtZQoJCQkJbG9jYWwgcGxhY2UgPSBzdHJpbmcuc3ViKHRleHQsIDUpCgkJCQlsb2NhbCBwbGFjZXMgPSB7CgkJCQkJNTY2Mzk5MjQ0LAoJCQkJCTI1Njk2MjU4MDksCgkJCQkJNTcwMTU4MDgxLAoJCQkJCTUzNzYwMDIwNCwKCQkJCQk1MjA1NjgyNDAsCgkJCQkJNTU0OTU1NTYwLAoJCQkJCTYwMjA0ODU1MCwKCQkJCQk1NzU0NTY2NDYsCgkJCQkJMTcxMzk4NjExMiwKCQkJCQkxMjQzNjE1NjEyLAoJCQkJCTYzODA2NTMwMiwKCQkJCQk2MzQyNDA4MjYsCgkJCQkJNjMzMDQyNzMxCgkJCQl9CgoJCQkJaWYgcGxhY2UgPT0gInN0YW5kYXJkbG93IiBvciBwbGFjZSA9PSAiNTY2Mzk5MjQ0IiB0aGVuCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1sxXQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJMb3diaWUgU3RhbmRhcmQiCgkJCQllbHNlaWYgcGxhY2UgPT0gInN0YW5kYXJkNDAiIG9yIHBsYWNlID09ICIyNTY5NjI1ODA5IiB0aGVuCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1syXQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJTdGFuZGFyZCIKCQkJCWVsc2VpZiBwbGFjZSA9PSAibGlnaHQiIG9yIHBsYWNlID09ICI1NzAxNTgwODEiIHRoZW4KCQkJCQl0ZWxlcG9ydHRvID0gcGxhY2VzWzNdCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIkxpZ2h0IgoJCQkJZWxzZWlmIHBsYWNlID09ICJmaXJlIiBvciBwbGFjZSA9PSAiNTM3NjAwMjA0IiB0aGVuCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1s0XQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJGaXJlIgoJCQkJZWxzZWlmIHBsYWNlID09ICJ3YXRlciIgb3IgcGxhY2UgPT0gIjUyMDU2ODI0MCIgdGhlbgoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbNV0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiV2F0ZXIiCgkJCQllbHNlaWYgcGxhY2UgPT0gImdyYXNzIiBvciBwbGFjZSA9PSAiNTU0OTU1NTYwIiB0aGVuCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1s2XQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJHcmFzcyIKCQkJCWVsc2VpZiBwbGFjZSA9PSAiaGVhdmVuIiBvciBwbGFjZSA9PSAiNjAyMDQ4NTUwIiB0aGVuCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1s3XQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJIZWF2ZW4iCgkJCQllbHNlaWYgcGxhY2UgPT0gIm1pbmlsb3ZhbmlhIiBvciBwbGFjZSA9PSAic2FucyIgb3IgcGxhY2UgPT0gIjU3NTQ1NjY0NiIgdGhlbgoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbOF0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiTWluaWxvdmFuaWEiCgkJCQllbHNlaWYgcGxhY2UgPT0gImRlZmF1bHQiIG9yIHBsYWNlID09ICJ0b3VybmFtZW50IiBvciBwbGFjZSA9PSAiMTcxMzk4NjExMiIgdGhlbgoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbOV0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiVG91cm5hbWVudCIKCQkJCWVsc2VpZiBwbGFjZSA9PSAic3Vydml2YWwiIG9yIHBsYWNlID09ICIxMjQzNjE1NjEyIiB0aGVuCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1sxMF0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiU3Vydml2YWwiCgkJCQllbHNlaWYgcGxhY2UgPT0gIm1lZ2FzdGFuZGFyZCIgb3IgcGxhY2UgPT0gInN0YW5kYXJkbWVnYSIgb3IgcGxhY2UgPT0gIjYzODA2NTMwMiIgdGhlbgoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbMTFdCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIk1lZ2EgU3RhbmRhcmQiCgkJCQllbHNlaWYgcGxhY2UgPT0gIm1lZ2FmaXJlIiBvciBwbGFjZSA9PSAiZmlyZW1lZ2EiIG9yIHBsYWNlID09ICI2MzQyNDA4MjYiIHRoZW4KCQkJCQl0ZWxlcG9ydHRvID0gcGxhY2VzWzExXQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJNZWdhIEZpcmUiCgkJCQllbHNlaWYgcGxhY2UgPT0gIm1lZ2FncmFzcyIgb3IgcGxhY2UgPT0gImdyYXNzbWVnYSIgb3IgcGxhY2UgPT0gIjYzMzA0MjczMSIgdGhlbgoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbMTNdCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIk1lZ2EgR3Jhc3MiCgkJCQllbHNlCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlRoZSBwbGFjZSB3YXMgaW5jb3JyZWN0bHkgc3BlY2lmaWVkISIKCQkJCWVuZAoKCQkJCWlmIHRlbGVwb3J0dG8gdGhlbgoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJUZWxlcG9ydGluZyB0byAiIC4uIHRwbmFtZSAuLiAiISIKCQkJCQlnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0KHRlbGVwb3J0dG8pCgkJCQllbmQKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgOCkgPT0gKHByZWZpeCAuLiAiZGVjbHV0dGVyIikgdGhlbgoJCQkJcGxheWVyLlBsYXllckd1aS5NYWluLkZyYW1lMS5TaXplID0gVURpbTIubmV3KDAuMzc1LCAwLCAwLjM3NSwgMCkKCQkJCXBsYXllci5QbGF5ZXJHdWkuTWFpbi5GcmFtZTEuSW1hZ2VUcmFuc3BhcmVuY3kgPSAxCgkJCQlwbGF5ZXIuUGxheWVyR3VpLk1haW4uQ2hhcmFjdGVyLkltYWdlVHJhbnNwYXJlbmN5ID0gMQoJCQkJcGxheWVyLlBsYXllckd1aS5NYWluLkJvb2suSW1hZ2VUcmFuc3BhcmVuY3kgPSAxCgkJCQlwbGF5ZXIuUGxheWVyR3VpLk1haW4uU2hvcC5JbWFnZVRyYW5zcGFyZW5jeSA9IDEKCQkJCXBsYXllci5QbGF5ZXJHdWkuTWFpbi5Ta2lsbHNCYXIuU2l6ZSA9IFVEaW0yLm5ldygwLjM3NSwgMCwgMC4zNzUsIDApCgkJCQlwbGF5ZXIuUGxheWVyR3VpLk1haW4uU2tpbGxzQmFyLkltYWdlVHJhbnNwYXJlbmN5ID0gMQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA1KSA9PSAocHJlZml4IC4uICJyYWluIikgdGhlbgoJCQkJbG9jYWwgY3VycmVudENBTSA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhCgkJCQlsb2NhbCByYWluU291bmQgPSBJbnN0YW5jZS5uZXcoIlNvdW5kIikKCQkJCXJhaW5Tb3VuZC5Mb29wZWQgPSB0cnVlCgkJCQlyYWluU291bmQuU291bmRJZCA9ICJyYnhhc3NldGlkOi8vMjgzMTY0NTkzIgoJCQkJcmFpblNvdW5kLlZvbHVtZSA9IDEKCQkJCXJhaW5Tb3VuZC5QYXJlbnQgPSB3b3Jrc3BhY2UKCQkJCXJhaW5Tb3VuZDpQbGF5KCkKCgkJCQlsb2NhbCByYWluUGFydCA9IEluc3RhbmNlLm5ldygiUGFydCIpCgkJCQlyYWluUGFydC5TaXplID0gVmVjdG9yMy5uZXcoMzAwLCAzMDAsIDMwMCkKCQkJCXJhaW5QYXJ0LlRyYW5zcGFyZW5jeSA9IDEKCQkJCXJhaW5QYXJ0LkFuY2hvcmVkID0gdHJ1ZQoJCQkJcmFpblBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCgoJCQkJbG9jYWwgcmFpbkVmZmVjdCA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpXYWl0Rm9yQ2hpbGQoIkVmZmVjdHMiKTpXYWl0Rm9yQ2hpbGQoIlJhaW4iKQoJCQkJcmFpbkVmZmVjdC5SYXRlID0gcmFpblBhcnQuU2l6ZS5tYWduaXR1ZGUKCQkJCXJhaW5FZmZlY3QuUGFyZW50ID0gcmFpblBhcnQKCgkJCQlsb2NhbCBpZ25vcmUgPSB3b3Jrc3BhY2U6V2FpdEZvckNoaWxkKCIuSWdub3JlIikKCQkJCXJhaW5QYXJ0LlBhcmVudCA9IGlnbm9yZTpXYWl0Rm9yQ2hpbGQoIi5TZXJ2ZXJFZmZlY3RzIikKCgkJCQlsb2NhbCBmb3YgPSAyICogbWF0aC50YW4obWF0aC5yYWQoY3VycmVudENBTS5GaWVsZE9mVmlldykgLyAyKQoJCQkJbG9jYWwgbmV3UmF5ID0gUmF5Lm5ldwoJCQkJbG9jYWwgaGVpZ2h0ID0gVmVjdG9yMy5uZXcoMCwgNTAsIDApCgkJCQlsb2NhbCBkZXB0aCA9IENGcmFtZS5uZXcoMCwgZm92ICogNTAsIC02MCkKCgkJCQlnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKTpCaW5kVG9SZW5kZXJTdGVwKCJSYWluIiwgRW51bS5SZW5kZXJQcmlvcml0eS5DYW1lcmEuVmFsdWUsIGZ1bmN0aW9uKCkKCQkJCQlsb2NhbCByYyA9IHdvcmtzcGFjZTpGaW5kUGFydE9uUmF5V2l0aElnbm9yZUxpc3QobmV3UmF5KGN1cnJlbnRDQU0uQ0ZyYW1lLnAsIGhlaWdodCksIHtpZ25vcmV9KQoKCQkJCQlpZiAocmMpIHRoZW4KCQkJCQkJcmFpbkVmZmVjdC5FbmFibGVkID0gZmFsc2UKCQkJCQkJcmFpblNvdW5kLlZvbHVtZSA9IDAuNQoJCQkJCQlyZXR1cm4KCQkJCQllbmQKCgkJCQkJbG9jYWwgdmlld3BvcnQgPSBjdXJyZW50Q0FNLlZpZXdwb3J0U2l6ZQoJCgkJCQkJcmFpblBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KGZvdiAqIHZpZXdwb3J0LnggLyB2aWV3cG9ydC55ICogNTAsIDAuMiwgMTAwKQoJCQkJCXJhaW5QYXJ0LkNGcmFtZSA9IGN1cnJlbnRDQU0uQ0ZyYW1lICogZGVwdGgKCQoJCQkJCXJhaW5FZmZlY3QuUmF0ZSA9IHJhaW5QYXJ0LlNpemUubWFnbml0dWRlCgkJCQkJcmFpbkVmZmVjdC5FbmFibGVkID0gdHJ1ZQoJCgkJCQkJcmFpblNvdW5kLlZvbHVtZSA9IDEKCQkJCWVuZCkKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgNCkgPT0gKHByZWZpeCAuLiAiZml4IikgdGhlbgoJCQkJaWYgcGxheWVyLlBsYXllckd1aTpXYWl0Rm9yQ2hpbGQoIk1lbnUiKTpGaW5kRmlyc3RDaGlsZCgiQmxhY2tTY3JlZW4iKSB0aGVuCgkJCQkJcGxheWVyLlBsYXllckd1aTpXYWl0Rm9yQ2hpbGQoIk1lbnUiKTpGaW5kRmlyc3RDaGlsZCgiQmxhY2tTY3JlZW4iKS5WaXNpYmxlID0gZmFsc2UKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiRml4aW5nIHRoZSBNZW51IEdVSSEiCgkJCQllbmQKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMTMpID09IChwcmVmaXggLi4gImJ1dHRvbmhlaWdodCIpIHRoZW4KCQkJCWJ1dHRvbkhlaWdodCA9IHRvbnVtYmVyKHN0cmluZy5zdWIodGV4dCwgMTUpKQoJCQkJVUlHcmlkTGF5b3V0LkNlbGxTaXplID0gVURpbTIubmV3KDAuNDUsIDAsIDAsIGJ1dHRvbkhlaWdodCkKCQkJCW1haW5mcmFtZS5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIG1hdGguY2VpbCgjYnV0dG9ucyAvIDIpICogKGJ1dHRvbkhlaWdodCArIGJ1dHRvbkdhcCkgLSBidXR0b25HYXApCgoJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkJ1dHRvbiBoZWlnaHQgd2FzIHNldCB0byAiIC4uIHRvbnVtYmVyKHN0cmluZy5zdWIodGV4dCwgMTUpKSAuLiAiISIKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMTApID09IChwcmVmaXggLi4gImJ1dHRvbmdhcCIpIHRoZW4KCQkJCWJ1dHRvbkdhcCA9IHRvbnVtYmVyKHN0cmluZy5zdWIodGV4dCwgMTIpKQoJCQkJVUlHcmlkTGF5b3V0LkNlbGxQYWRkaW5nID0gVURpbTIubmV3KDAsIDcsIDAsIGJ1dHRvbkdhcCkKCQkJCW1haW5mcmFtZS5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIG1hdGguY2VpbCgjYnV0dG9ucyAvIDIpICogKGJ1dHRvbkhlaWdodCArIGJ1dHRvbkdhcCkgLSBidXR0b25HYXApCgoJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkJ1dHRvbiBnYXAgd2FzIHNldCB0byAiIC4uIHRvbnVtYmVyKHN0cmluZy5zdWIodGV4dCwgMTIpKSAuLiAiISIKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgNykgPT0gKHByZWZpeCAuLiAicmVqb2luIikgdGhlbgoJCQkJcmVqb2luKCkKCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJSZWpvaW5pbmcuLi4iCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDkpID09IChwcmVmaXggLi4gImF1cmEvb2ZmIikgdGhlbgoJCQkJcmVwZWF0IHdhaXQoKSB1bnRpbCBnZXRIUlAocGxheWVyLkNoYXJhY3RlcikKCgkJCQlpZiBnZXRIUlAocGxheWVyLkNoYXJhY3Rlcik6RmluZEZpcnN0Q2hpbGQoIkF1cmFHUCIpIHRoZW4KCQkJCQlnZXRIUlAocGxheWVyLkNoYXJhY3Rlcik6RmluZEZpcnN0Q2hpbGQoIkF1cmFHUCIpOkRlc3Ryb3koKQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJBdXJhIGhhcyBiZWVuIHJlbW92ZWQuIgoJCQkJZWxzZQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJBdXJhIGRvZXMgbm90IGV4aXN0ISIKCQkJCWVuZAoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAxNCkgPT0gKHByZWZpeCAuLiAidGFyZ2V0c2V0dGluZyIpIHRoZW4KCQkJCXRhcmdldFNldHRpbmcgPSBzdHJpbmcuc3ViKHRleHQsIDE2KQoKCQkJCXJlcGVhdAoJCQkJCWlmIHRhcmdldFNldHRpbmcgPT0gInNlbGVjdCIgdGhlbgoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3VjY2Vzc2Z1bGx5IHN3aXRjaGVkIHRoZSB0YXJnZXQgc2V0dGluZyB0byBzZWxlY3QhIgoJCQkJCWVsc2VpZiB0YXJnZXRTZXR0aW5nID09ICJjbG9zZXN0IiB0aGVuCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJTdWNjZXNzZnVsbHkgc3dpdGNoZWQgdGhlIHRhcmdldCBzZXR0aW5nIHRvIGNsb3Nlc3QhIgoJCQkJCQl3YWl0KDIpCgkJCQkJCXdoaWxlIHRhcmdldFNldHRpbmcgPT0gImNsb3Nlc3QiIGRvCgkJCQkJCQlsb2NhbCBuZWFyZXN0UGxheWVycyA9IHt9CgoJCQkJCQkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KCQkJCQkJCQlpZiBnZXRIUlAodi5DaGFyYWN0ZXIpIGFuZCBnZXRIUlAocGxheWVyLkNoYXJhY3RlcikgYW5kIHYgfj0gcGxheWVyIHRoZW4KCQkJCQkJCQkJaWYgc21hcnRBdHRhY2sgdGhlbgoJCQkJCQkJCQkJaWYgbm90IHYuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGb3JjZUZpZWxkIikgdGhlbgoJCQkJCQkJCQkJCWxvY2FsIGRpc3RhbmNlID0gKGdldEhSUCh2LkNoYXJhY3RlcikuUG9zaXRpb24gLSBnZXRIUlAocGxheWVyLkNoYXJhY3RlcikuUG9zaXRpb24pLk1hZ25pdHVkZQoKCQkJCQkJCQkJCQl0YWJsZS5pbnNlcnQobmVhcmVzdFBsYXllcnMsIHt2Lk5hbWUsIGRpc3RhbmNlfSkKCQkJCQkJCQkJCWVuZAoJCQkJCQkJCQllbHNlCgkJCQkJCQkJCQlsb2NhbCBkaXN0YW5jZSA9IChnZXRIUlAodi5DaGFyYWN0ZXIpLlBvc2l0aW9uIC0gZ2V0SFJQKHBsYXllci5DaGFyYWN0ZXIpLlBvc2l0aW9uKS5NYWduaXR1ZGUKCgkJCQkJCQkJCQl0YWJsZS5pbnNlcnQobmVhcmVzdFBsYXllcnMsIHt2Lk5hbWUsIGRpc3RhbmNlfSkKCQkJCQkJCQkJZW5kCgkJCQkJCQkJZW5kCgkJCQkJCQllbmQKCgkJCQkJCQl0YWJsZS5zb3J0KG5lYXJlc3RQbGF5ZXJzLCAKCQkJCQkJCQlmdW5jdGlvbihhLCBiKQoJCQkJCQkJCQlyZXR1cm4gYVsyXSA8IGJbMl0KCQkJCQkJCQllbmQKCQkJCQkJCSkKCgkJCQkJCQl0YXJnZXQgPSBuZWFyZXN0UGxheWVyc1sxXVsxXSBvciBwbGF5ZXIuTmFtZQoKCQkJCQkJCWlmIHRhcmdldCB+PSBwbGF5ZXIuTmFtZSB0aGVuCgkJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgIiAuLiB0YXJnZXQKCQkJCQkJCWVsc2UKCQkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoTm9uZSkiCgkJCQkJCQllbmQKCgkJCQkJCQl3YWl0KCkKCQkJCQkJZW5kCgkJCQkJZWxzZWlmIHRhcmdldFNldHRpbmcgPT0gImZhcnRoZXN0IiB0aGVuCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJTdWNjZXNzZnVsbHkgc3dpdGNoZWQgdGhlIHRhcmdldCBzZXR0aW5nIHRvIGZhcnRoZXN0ISIKCQkJCQkJd2FpdCgyKQoJCQkJCQl3aGlsZSB0YXJnZXRTZXR0aW5nID09ICJmYXJ0aGVzdCIgZG8KCQkJCQkJCWxvY2FsIG5lYXJlc3RQbGF5ZXJzID0ge30KCgkJCQkJCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbwoJCQkJCQkJCWlmIGdldEhSUCh2LkNoYXJhY3RlcikgYW5kIGdldEhSUChwbGF5ZXIuQ2hhcmFjdGVyKSBhbmQgdiB+PSBwbGF5ZXIgdGhlbgoJCQkJCQkJCQlpZiBzbWFydEF0dGFjayB0aGVuCgkJCQkJCQkJCQlpZiBub3Qgdi5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZvcmNlRmllbGQiKSB0aGVuCgkJCQkJCQkJCQkJbG9jYWwgZGlzdGFuY2UgPSAoZ2V0SFJQKHYuQ2hhcmFjdGVyKS5Qb3NpdGlvbiAtIGdldEhSUChwbGF5ZXIuQ2hhcmFjdGVyKS5Qb3NpdGlvbikuTWFnbml0dWRlCgoJCQkJCQkJCQkJCXRhYmxlLmluc2VydChuZWFyZXN0UGxheWVycywge3YuTmFtZSwgZGlzdGFuY2V9KQoJCQkJCQkJCQkJZW5kCgkJCQkJCQkJCWVsc2UKCQkJCQkJCQkJCWxvY2FsIGRpc3RhbmNlID0gKGdldEhSUCh2LkNoYXJhY3RlcikuUG9zaXRpb24gLSBnZXRIUlAocGxheWVyLkNoYXJhY3RlcikuUG9zaXRpb24pLk1hZ25pdHVkZQoKCQkJCQkJCQkJCXRhYmxlLmluc2VydChuZWFyZXN0UGxheWVycywge3YuTmFtZSwgZGlzdGFuY2V9KQoJCQkJCQkJCQllbmQKCQkJCQkJCQllbmQKCQkJCQkJCWVuZAoKCQkJCQkJCXRhYmxlLnNvcnQobmVhcmVzdFBsYXllcnMsIAoJCQkJCQkJCWZ1bmN0aW9uKGEsIGIpCgkJCQkJCQkJCXJldHVybiBhWzJdID4gYlsyXQoJCQkJCQkJCWVuZAoJCQkJCQkJKQoKCQkJCQkJCXRhcmdldCA9IG5lYXJlc3RQbGF5ZXJzWzFdWzFdIG9yIHBsYXllci5OYW1lCgoJCQkJCQkJaWYgdGFyZ2V0IH49IHBsYXllci5OYW1lIHRoZW4KCQkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAiIC4uIHRhcmdldAoJCQkJCQkJZWxzZQoJCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8IChOb25lKSIKCQkJCQkJCWVuZAoKCQkJCQkJCXdhaXQoKQoJCQkJCQllbmQKCQkJCQllbHNlaWYgdGFyZ2V0U2V0dGluZyA9PSAibG93aHAiIHRoZW4KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN1Y2Nlc3NmdWxseSBzd2l0Y2hlZCB0aGUgdGFyZ2V0IHNldHRpbmcgdG8gbG93aHAhIgoJCQkJCQl3YWl0KDIpCgkJCQkJCXdoaWxlIHRhcmdldFNldHRpbmcgPT0gImxvd2hwIiBkbwoJCQkJCQkJbG9jYWwgbmVhcmVzdFBsYXllcnMgPSB7fQoKCQkJCQkJCWZvciBpLCB2IGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCgkJCQkJCQkJaWYgZ2V0SFVNKHYuQ2hhcmFjdGVyKSBhbmQgZ2V0SFVNKHBsYXllci5DaGFyYWN0ZXIpIGFuZCB2IH49IHBsYXllciB0aGVuCgkJCQkJCQkJCWlmIHNtYXJ0QXR0YWNrIHRoZW4KCQkJCQkJCQkJCWlmIG5vdCB2LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRm9yY2VGaWVsZCIpIHRoZW4KCQkJCQkJCQkJCQlsb2NhbCBoZWFsdGggPSBnZXRIVU0odi5DaGFyYWN0ZXIpLkhlYWx0aAoKCQkJCQkJCQkJCQl0YWJsZS5pbnNlcnQobmVhcmVzdFBsYXllcnMsIHt2Lk5hbWUsIGhlYWx0aH0pCgkJCQkJCQkJCQllbmQKCQkJCQkJCQkJZWxzZQoJCQkJCQkJCQkJbG9jYWwgaGVhbHRoID0gZ2V0SFVNKHYuQ2hhcmFjdGVyKS5IZWFsdGgKCgkJCQkJCQkJCQl0YWJsZS5pbnNlcnQobmVhcmVzdFBsYXllcnMsIHt2Lk5hbWUsIGhlYWx0aH0pCgkJCQkJCQkJCWVuZAoJCQkJCQkJCWVuZAoJCQkJCQkJZW5kCgoJCQkJCQkJdGFibGUuc29ydChuZWFyZXN0UGxheWVycywgCgkJCQkJCQkJZnVuY3Rpb24oYSwgYikKCQkJCQkJCQkJcmV0dXJuIGFbMl0gPCBiWzJdCgkJCQkJCQkJZW5kCgkJCQkJCQkpCgoJCQkJCQkJdGFyZ2V0ID0gbmVhcmVzdFBsYXllcnNbMV1bMV0gb3IgcGxheWVyLk5hbWUKCgkJCQkJCQlpZiB0YXJnZXQgfj0gcGxheWVyLk5hbWUgdGhlbgoJCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8ICIgLi4gdGFyZ2V0CgkJCQkJCQllbHNlCgkJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgKE5vbmUpIgoJCQkJCQkJZW5kCgoJCQkJCQkJd2FpdCgpCgkJCQkJCWVuZAoJCQkJCWVsc2VpZiB0YXJnZXRTZXR0aW5nID09ICJoaWdoaHAiIHRoZW4KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN1Y2Nlc3NmdWxseSBzd2l0Y2hlZCB0aGUgdGFyZ2V0IHNldHRpbmcgdG8gaGlnaGhwISIKCQkJCQkJd2FpdCgyKQoJCQkJCQl3aGlsZSB0YXJnZXRTZXR0aW5nID09ICJoaWdoaHAiIGRvCgkJCQkJCQlsb2NhbCBuZWFyZXN0UGxheWVycyA9IHt9CgoJCQkJCQkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KCQkJCQkJCQlpZiBnZXRIVU0odi5DaGFyYWN0ZXIpIGFuZCBnZXRIVU0ocGxheWVyLkNoYXJhY3RlcikgYW5kIHYgfj0gcGxheWVyIHRoZW4KCQkJCQkJCQkJaWYgc21hcnRBdHRhY2sgdGhlbgoJCQkJCQkJCQkJaWYgbm90IHYuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGb3JjZUZpZWxkIikgdGhlbgoJCQkJCQkJCQkJCWxvY2FsIGhlYWx0aCA9IGdldEhVTSh2LkNoYXJhY3RlcikuSGVhbHRoCgoJCQkJCQkJCQkJCXRhYmxlLmluc2VydChuZWFyZXN0UGxheWVycywge3YuTmFtZSwgaGVhbHRofSkKCQkJCQkJCQkJCWVuZAoJCQkJCQkJCQllbHNlCgkJCQkJCQkJCQlsb2NhbCBoZWFsdGggPSBnZXRIVU0odi5DaGFyYWN0ZXIpLkhlYWx0aAoKCQkJCQkJCQkJCXRhYmxlLmluc2VydChuZWFyZXN0UGxheWVycywge3YuTmFtZSwgaGVhbHRofSkKCQkJCQkJCQkJZW5kCgkJCQkJCQkJZW5kCgkJCQkJCQllbmQKCgkJCQkJCQl0YWJsZS5zb3J0KG5lYXJlc3RQbGF5ZXJzLCAKCQkJCQkJCQlmdW5jdGlvbihhLCBiKQoJCQkJCQkJCQlyZXR1cm4gYVsyXSA+IGJbMl0KCQkJCQkJCQllbmQKCQkJCQkJCSkKCgkJCQkJCQl0YXJnZXQgPSBuZWFyZXN0UGxheWVyc1sxXVsxXSBvciBwbGF5ZXIuTmFtZQoKCQkJCQkJCWlmIHRhcmdldCB+PSBwbGF5ZXIuTmFtZSB0aGVuCgkJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgIiAuLiB0YXJnZXQKCQkJCQkJCWVsc2UKCQkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoTm9uZSkiCgkJCQkJCQllbmQKCgkJCQkJCQl3YWl0KCkKCQkJCQkJZW5kCgkJCQkJZWxzZQoJCQkJCQl0YXJnZXRTZXR0aW5nID0gInNlbGVjdCIKCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkludmFsaWQgdGFyZ2V0IHNldHRpbmchIERpZCB5b3Ugc3BlY2lmeSBzZWxlY3QsIGNsb3Nlc3QsIGZhcnRoZXN0LCBsb3docCwgb3IgaGlnaGhwPyBTZXR0aW5nIGhhcyBiZWVuIHNldCB0byBzZWxlY3QuIgoJCQkJCWVuZAoJCQkJdW50aWwgdGFyZ2V0U2V0dGluZyA9PSAic2VsZWN0IgoKCQkJCXRhcmdldCA9IHBsYXllci5OYW1lCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDUpID09IChwcmVmaXggLi4gImxvb3AiKSB0aGVuCgkJCQlpZiBzdHJpbmcuc3ViKHRleHQsIDcsIDcpID09ICgidCIpIG9yIHN0cmluZy5zdWIodGV4dCwgNywgOCkgPT0gKCJvbiIpIHRoZW4KCQkJCQlpZiBsb29waW5nID09IHRydWUgdGhlbgoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiTG9vcGluZyBhdHRhY2tzIGlzIGFscmVhZHkgb24hIgoJCQkJCWVsc2UKCQkJCQkJbG9vcGluZyA9IHRydWUKCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN0YXJ0ZWQgbG9vcGluZyBhdHRhY2tzISIKCQkJCQllbmQKCQkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDcsIDcpID09ICgiZiIpIG9yIHN0cmluZy5zdWIodGV4dCwgNywgOSkgPT0gKCJvZmYiKSB0aGVuCgkJCQkJaWYgbG9vcGluZyA9PSBmYWxzZSB0aGVuCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJMb29waW5nIGF0dGFja3MgaXMgYWxyZWFkeSBvZmYhIgoJCQkJCWVsc2UKCQkJCQkJbG9vcGluZyA9IGZhbHNlCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJTdG9wcGVkIGxvb3BpbmcgYXR0YWNrcyEiCgkJCQkJZW5kCgkJCQllbHNlCgkJCQkJbG9vcGluZyA9IG5vdCBsb29waW5nCgkJCQkJbG9jYWwgT25Pck9mZiA9ICJPbiIKCQkJCQlpZiBsb29waW5nID09IGZhbHNlIHRoZW4KCQkJCQkJT25Pck9mZiA9ICJPZmYiCgkJCQkJZW5kCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlRvZ2dsZWQgbG9vcGluZyBhdHRhY2tzICgiIC4uIE9uT3JPZmYgLi4gIikhIgoJCQkJZW5kCgoJCQkJc3Bhd24oZnVuY3Rpb24oKQoJCQkJCXdoaWxlIGxvb3BpbmcgZG8KCQkJCQkJZXhwbG9pdCgpCgkJCQkJCXdhaXQoKQoJCQkJCWVuZAoJCQkJCXJldHVybgoJCQkJZW5kKQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA4KSA9PSAocHJlZml4IC4uICJ1bmJyZWFrIikgdGhlbgoJCQkJYnJlYWthYmxlID0gZmFsc2UKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgOSkgPT0gKHByZWZpeCAuLiAiZ3JjaGFyZ2UiKSB0aGVuCgkJCQlHUkNoYXJnZSA9IHRvbnVtYmVyKHN0cmluZy5zdWIodGV4dCwgMTEpKQoJCQkJd2FpdCgpCgkJCQlpZiBHUkNoYXJnZSA9PSBuaWwgdGhlbgoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJJbnZhbGlkIEFyZ3VtZW50cyEgRGlkIHlvdSBlbnRlciBhbiBpbnRlZ2VyPyIKCQkJCWVsc2UKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3VjY2Vzc2Z1bGx5IHNldCB0aGUgY2hhcmdlIHRvICIgLi4gR1JDaGFyZ2UgLi4gIiEiCgkJCQllbmQKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgNikgPT0gKHByZWZpeCAuLiAic3BlZWQiKSB0aGVuCgkJCQlTZXRTcGVlZCA9IHRvbnVtYmVyKHN0cmluZy5zdWIodGV4dCwgOCkpCgkJCQl3YWl0KCkKCQkJCWlmIFNldFNwZWVkID09IG5pbCB0aGVuCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkludmFsaWQgQXJndW1lbnRzISBEaWQgeW91IGVudGVyIGFuIGludGVnZXI/IgoJCQkJZWxzZQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJTdWNjZXNzZnVsbHkgc2V0IHRoZSBzcGVlZCB0byAiIC4uIFNldFNwZWVkIC4uICIhIgoJCQkJZW5kCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDEyKSA9PSAocHJlZml4IC4uICJzbWFydGF0dGFjayIpIHRoZW4KCQkJCWlmIHN0cmluZy5zdWIodGV4dCwgMTQsIDE0KSA9PSAoInQiKSBvciBzdHJpbmcuc3ViKHRleHQsIDE0LCAxNSkgPT0gKCJvbiIpIHRoZW4KCQkJCQlpZiBzbWFydEF0dGFjayA9PSB0cnVlIHRoZW4KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkZvcmNlZmllbGQgZGV0ZWN0aW9uIGlzIGFscmVhZHkgb24hIgoJCQkJCWVsc2UKCQkJCQkJc21hcnRBdHRhY2sgPSB0cnVlCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJOb3cgZGV0ZWN0aW5nIGZvcmNlZmllbGRzISIKCQkJCQllbmQKCQkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDE0LCAxNCkgPT0gKCJmIikgb3Igc3RyaW5nLnN1Yih0ZXh0LCAxNCwgMTYpID09ICgib2ZmIikgdGhlbgoJCQkJCWlmIHNtYXJ0QXR0YWNrID09IGZhbHNlIHRoZW4KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkZvcmNlZmllbGQgZGV0ZWN0aW9uIGlzIGFscmVhZHkgb2ZmISIKCQkJCQllbHNlCgkJCQkJCXNtYXJ0QXR0YWNrID0gZmFsc2UKCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN0b3BwZWQgZGV0ZWN0aW5nIGZvcmNlZmllbGRzISIKCQkJCQllbmQKCQkJCWVsc2UKCQkJCQlzbWFydEF0dGFjayA9IG5vdCBzbWFydEF0dGFjawoJCQkJCWxvY2FsIE9uT3JPZmYgPSAiT24iCgkJCQkJaWYgc21hcnRBdHRhY2sgPT0gZmFsc2UgdGhlbgoJCQkJCQlPbk9yT2ZmID0gIk9mZiIKCQkJCQllbmQKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiVG9nZ2xlZCBmb3JjZWZpZWxkIGRldGVjdGlvbiAoIiAuLiBPbk9yT2ZmIC4uICIpISIKCQkJCWVuZAoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAxMCkgPT0gKHByZWZpeCAuLiAiZ2FtZWNvbG9yIikgdGhlbgoJCQkJaWYgbm90IGdhbWUuTGlnaHRpbmc6RmluZEZpcnN0Q2hpbGQoIkVCR0d1aUNvbG9yQ29ycmVjdGlvbiIpIHRoZW4KCQkJCQlJbnN0YW5jZS5uZXcoIkNvbG9yQ29ycmVjdGlvbkVmZmVjdCIsIGdhbWUuTGlnaHRpbmcpLk5hbWUgPSAiRUJHR3VpQ29sb3JDb3JyZWN0aW9uIgoJCQkJCXdhaXQoKQoJCQkJZW5kCgoJCQkJaWYgc3RyaW5nLnN1Yih0ZXh0LCAxMiwgMTcpID09ICJub3JtYWwiIHRoZW4KCQkJCQlnYW1lLkxpZ2h0aW5nLkVCR0d1aUNvbG9yQ29ycmVjdGlvbi5Db250cmFzdCA9IDAKCQkJCQlnYW1lLkxpZ2h0aW5nLkVCR0d1aUNvbG9yQ29ycmVjdGlvbi5TYXR1cmF0aW9uID0gMAoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJSZXZlcnRpbmcuLi4iCgkJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxMiwgMjApID09ICJncmF5c2NhbGUiIHRoZW4KCQkJCQlnYW1lLkxpZ2h0aW5nLkVCR0d1aUNvbG9yQ29ycmVjdGlvbi5TYXR1cmF0aW9uID0gLTEKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiR3JheXNjYWxpbmcuLi4iCgkJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxMiwgMjApID09ICJpbnZlcnRodWUiIHRoZW4KCQkJCQlnYW1lLkxpZ2h0aW5nLkVCR0d1aUNvbG9yQ29ycmVjdGlvbi5TYXR1cmF0aW9uID0gLTIKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSW52ZXJ0aW5nIGh1ZS4uLiIKCQkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEyLCAyMCkgPT0gImludmVydGFsbCIgdGhlbgoJCQkJCWdhbWUuTGlnaHRpbmcuRUJHR3VpQ29sb3JDb3JyZWN0aW9uLkNvbnRyYXN0ID0gLTIKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSW52ZXJ0aW5nIGFsbC4uLiIKCQkJCWVsc2UKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSW52YWxpZCBjb2xvciBtb2RlIChvciBub25lIHNwZWNpZmllZCkhIgoJCQkJZW5kCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDEwKSA9PSAocHJlZml4IC4uICJibGFja2Nhc3QiKSB0aGVuCgkJCQlpZiBzdHJpbmcuc3ViKHRleHQsIDEyLCAxMikgPT0gKCJ0Iikgb3Igc3RyaW5nLnN1Yih0ZXh0LCAxMiwgMTMpID09ICgib24iKSB0aGVuCgkJCQkJaWYgYmxhY2tjYXN0RW5hYmxlZCA9PSB0cnVlIHRoZW4KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkJsYWNrIGNhc3RpbmcgaXMgYWxyZWFkeSBvbiEiCgkJCQkJZWxzZQoJCQkJCQlibGFja2Nhc3RFbmFibGVkID0gdHJ1ZQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQmxhY2sgY2FzdGluZyBlbmFibGVkISIKCQkJCQllbmQKCQkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEyLCAxMikgPT0gKCJmIikgb3Igc3RyaW5nLnN1Yih0ZXh0LCAxMiwgMTQpID09ICgib2ZmIikgdGhlbgoJCQkJCWlmIGJsYWNrY2FzdEVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQmxhY2sgY2FzdGluZyBpcyBhbHJlYWR5IG9mZiEiCgkJCQkJZWxzZQoJCQkJCQlibGFja2Nhc3RFbmFibGVkID0gZmFsc2UKCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkJsYWNrIGNhc3RpbmcgZGlzYWJsZWQhIgoJCQkJCWVuZAoJCQkJZWxzZQoJCQkJCWJsYWNrY2FzdEVuYWJsZWQgPSBub3QgYmxhY2tjYXN0RW5hYmxlZAoJCQkJCWxvY2FsIE9uT3JPZmYgPSAiT24iCgkJCQkJaWYgYmxhY2tjYXN0RW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCQkJCU9uT3JPZmYgPSAiT2ZmIgoJCQkJCWVuZAoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJUb2dnbGVkIGJsYWNrIGNhc3RpbmcgKCIgLi4gT25Pck9mZiAuLiAiKSEiCgkJCQllbmQKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgNSkgPT0gKHByZWZpeCAuLiAic3R1biIpIHRoZW4KCQkJCWlmIHN0cmluZy5zdWIodGV4dCwgNywgNykgPT0gKCJ0Iikgb3Igc3RyaW5nLnN1Yih0ZXh0LCA3LCA4KSA9PSAoIm9uIikgdGhlbgoJCQkJCWlmIHN0dW5FbmFibGVkID09IHRydWUgdGhlbgoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3R1biBpcyBhbHJlYWR5IG9uISIKCQkJCQllbHNlCgkJCQkJCXN0dW5FbmFibGVkID0gdHJ1ZQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3R1biBlbmFibGVkISIKCQkJCQllbmQKCQkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDcsIDcpID09ICgiZiIpIG9yIHN0cmluZy5zdWIodGV4dCwgNywgOSkgPT0gKCJvZmYiKSB0aGVuCgkJCQkJaWYgc3R1bkVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3R1biBpcyBhbHJlYWR5IG9mZiEiCgkJCQkJZWxzZQoJCQkJCQlzdHVuRW5hYmxlZCA9IGZhbHNlCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJTdHVuIGRpc2FibGVkISIKCQkJCQllbmQKCQkJCWVsc2UKCQkJCQlzdHVuRW5hYmxlZCA9IG5vdCBzdHVuRW5hYmxlZAoJCQkJCWxvY2FsIE9uT3JPZmYgPSAiT24iCgkJCQkJaWYgc3R1bkVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQkJCQlPbk9yT2ZmID0gIk9mZiIKCQkJCQkJZm9yIGksIGNvbm5lY3Rpb24gaW4gcGFpcnMoc3R1bkNvbm5lY3Rpb24pIGRvCgkJCQkJCQljb25uZWN0aW9uOkRpc2FibGUoKQoJCQkJCQllbmQKCQkJCQllbHNlCgkJCQkJCWZvciBpLCBjb25uZWN0aW9uIGluIHBhaXJzKHN0dW5Db25uZWN0aW9uKSBkbwoJCQkJCQkJY29ubmVjdGlvbjpFbmFibGUoKQoJCQkJCQllbmQKCQkJCQllbmQKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiVG9nZ2xlZCBzdHVuICgiIC4uIE9uT3JPZmYgLi4gIikhIgoJCQkJZW5kCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDYpID09IChwcmVmaXggLi4gImRydWdzIikgdGhlbgoJCQkJaWYgc3RyaW5nLnN1Yih0ZXh0LCA4LCA4KSA9PSAoInQiKSBvciBzdHJpbmcuc3ViKHRleHQsIDgsIDkpID09ICgib24iKSB0aGVuCgkJCQkJaWYgZHJ1Z3NFbmFibGVkID09IHRydWUgdGhlbgoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiRHJ1ZyBtb2RlIGlzIGFscmVhZHkgb24hIgoJCQkJCWVsc2UKCQkJCQkJZHJ1Z3NFbmFibGVkID0gdHJ1ZQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiRHJ1ZyBtb2RlIGVuYWJsZWQhIgoJCQkJCWVuZAoJCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgOCwgOCkgPT0gKCJmIikgb3Igc3RyaW5nLnN1Yih0ZXh0LCA4LCAxMCkgPT0gKCJvZmYiKSB0aGVuCgkJCQkJaWYgZHJ1Z3NFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkRydWcgbW9kZSBpcyBhbHJlYWR5IG9mZiEiCgkJCQkJZWxzZQoJCQkJCQlkcnVnc0VuYWJsZWQgPSBmYWxzZQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiRHJ1ZyBtb2RlIGRpc2FibGVkISIKCQkJCQllbmQKCQkJCWVsc2UKCQkJCQlkcnVnc0VuYWJsZWQgPSBub3QgZHJ1Z3NFbmFibGVkCgkJCQkJbG9jYWwgT25Pck9mZiA9ICJPbiIKCQkJCQlpZiBkcnVnc0VuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQkJCQlPbk9yT2ZmID0gIk9mZiIKCQkJCQllbmQKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiVG9nZ2xlZCBkcnVnIG1vZGUgKCIgLi4gT25Pck9mZiAuLiAiKSEiCgkJCQllbmQKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMTEpID09IChwcmVmaXggLi4gIm1hZ2ljY29sb3IiKSB0aGVuCgkJCQlsb2NhbCBzdHJpbmdhcmdzID0gc3RyaW5nLnN1Yih0ZXh0LCAxMykKCQkJCWxvY2FsIGFyZ3MgPSBzcGxpdEFyZ3Moc3RyaW5nYXJncykKCgkJCQlpZiAoYXJnc1sxXSA9PSAidCIpIG9yIChhcmdzWzFdID09ICJvbiIpIHRoZW4KCQkJCQlpZiAoY29sb3IxIH49IG5pbCkgYW5kIChjb2xvcjIgfj0gbmlsKSBhbmQgKGNvbG9yMyB+PSBuaWwpIHRoZW4KCQkJCQkJaWYgY29sb3JzRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCQkJCQljb2xvcnNFbmFibGVkID0gdHJ1ZQoJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1c3RvbSBtYWdpYyBjb2xvciBlbmFibGVkISIKCQkJCQkJZWxzZQoJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1c3RvbSBtYWdpYyBjb2xvciBpcyBhbHJlYWR5IG9uISIKCQkJCQkJZW5kCgkJCQkJZWxzZQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiWW91IG11c3QgaGF2ZSBjb2xvcnMgc2V0IHdpdGggdGhpcyBjb21tYW5kIGJlZm9yZSB0dXJuaW5nIGl0IGJhY2sgb24hIgoJCQkJCWVuZAoJCQkJZWxzZWlmIChhcmdzWzFdID09ICJmIikgb3IgKGFyZ3NbMV0gPT0gIm9mZiIpIHRoZW4KCQkJCQlpZiBjb2xvcnNFbmFibGVkID09IHRydWUgdGhlbgoJCQkJCQljb2xvcnNFbmFibGVkID0gZmFsc2UKCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1c3RvbSBtYWdpYyBjb2xvciBkaXNhYmxlZCEiCgkJCQkJZWxzZQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VzdG9tIG1hZ2ljIGNvbG9yIGlzIGFscmVhZHkgb2ZmISIKCQkJCQllbmQKCQkJCWVsc2UKCQkJCQlhcmdzWzFdID0gdG9udW1iZXIoYXJnc1sxXSkKCQkJCQlhcmdzWzJdID0gdG9udW1iZXIoYXJnc1syXSkKCQkJCQlhcmdzWzNdID0gdG9udW1iZXIoYXJnc1szXSkKCgkJCQkJaWYgbm90IGFyZ3NbM10gdGhlbgoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSW52YWxpZCBBcmd1bWVudHMhIERpZCB5b3Ugc3BlY2lmeSBSLCBHLCBhbmQgQiB2YWx1ZXM/IgoJCQkJCWVsc2UKCQkJCQkJaWYgKGFyZ3NbMV0gfj0gbmlsKSBhbmQgKGFyZ3NbMl0gfj0gbmlsKSBhbmQgKGFyZ3NbM10gfj0gbmlsKSB0aGVuCgkJCQkJCQlsb2NhbCBleGVjdXRhYmxlID0gdHJ1ZQoKCQkJCQkJCWZvciBpID0gMSwgMywgMSBkbwoJCQkJCQkJCWlmIChhcmdzW2ldIDwgMCkgb3IgKGFyZ3NbaV0gPiAyNTUpIHRoZW4KCQkJCQkJCQkJZXhlY3V0YWJsZSA9IGZhbHNlCgkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJZW5kCgkJCQkJCQllbmQKCgkJCQkJCQlpZiBleGVjdXRhYmxlID09IHRydWUgdGhlbgoJCQkJCQkJCWNvbG9yMSA9IGFyZ3NbMV0KCQkJCQkJCQljb2xvcjIgPSBhcmdzWzJdCgkJCQkJCQkJY29sb3IzID0gYXJnc1szXQoKCQkJCQkJCQljb2xvcnNFbmFibGVkID0gdHJ1ZQoJCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXN0b20gbWFnaWMgY29sb3Igd2FzIHNldCB0byAiIC4uIGNvbG9yMSAuLiAiLCAiIC4uIGNvbG9yMiAuLiAiLCBhbmQgIiAuLiBjb2xvcjMgLi4gIiEiCgkJCQkJCQllbHNlCgkJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkludmFsaWQgQXJndW1lbnRzISBUaGUgbnVtYmVycyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMjU1ISIKCQkJCQkJCWVuZAoJCQkJCQllbHNlCgkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSW52YWxpZCBBcmd1bWVudHMhIFBsZWFzZSB1c2UgbnVtYmVycyB0byBzcGVjaWZ5IFIsIEcsIGFuZCBCIHZhbHVlcy4iCgkJCQkJCWVuZAoJCQkJCWVuZAoJCQkJZW5kCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDcpID09IChwcmVmaXggLi4gImNvbG9ycyIpIHRoZW4KCQkJCWdhbWUuV29ya3NwYWNlLkRlc2NlbmRhbnRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKGQpCgkJCQkJc3Bhd24oZnVuY3Rpb24oKSAKCQkJCQkJcGNhbGwoZnVuY3Rpb24oKQoJCQkJCQkJd2hpbGUgdHJ1ZSBkbwoJCQkJCQkJCWlmIGQuUGFyZW50IH49IG5pbCB0aGVuCgkJCQkJCQkJCWlmIGRydWdzRW5hYmxlZCB0aGVuCgkJCQkJCQkJCQlkLkNvbG9yID0gQ29sb3IzLmZyb21SR0IobWF0aC5yYW5kb20oMCwgMjU1KSwgbWF0aC5yYW5kb20oMCwgMjU1KSwgbWF0aC5yYW5kb20oMCwgMjU1KSkKCQkJCQkJCQkJCXdhaXQoKG1hdGgucmFuZG9tKDEsIDUpKS8xMCkKCQkJCQkJCQkJZWxzZWlmIGNvbG9yc0VuYWJsZWQgdGhlbgoJCQkJCQkJCQkJaWYgbm90IHRhYmxlLmZpbmQoY29sb3JFeGNsdWRlLCBkLk5hbWUpIHRoZW4gCgkJCQkJCQkJCQkJZC5Db2xvciA9IENvbG9yMy5mcm9tUkdCKGNvbG9yMSwgY29sb3IyLCBjb2xvcjMpCgkJCQkJCQkJCQkJd2FpdCgpCgkJCQkJCQkJCQllbHNlIGJyZWFrIGVuZAoJCQkJCQkJCQllbHNlCgkJCQkJCQkJCQlicmVhawoJCQkJCQkJCQllbmQKCQkJCQkJCQllbHNlCgkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJZW5kCgkJCQkJCQllbmQKCQkJCQkJZW5kKQoJCQkJCWVuZCkKCgkJCQkJc3Bhd24oZnVuY3Rpb24oKQoJCQkJCQlwY2FsbChmdW5jdGlvbigpCgkJCQkJCQlpZiAoYmxhY2tjYXN0RW5hYmxlZCA9PSB0cnVlKSBhbmQgKGQuUGFyZW50IH49IG5pbCkgdGhlbgoJCQkJCQkJCWZvciBpLCB2IGluIHBhaXJzKGQ6R2V0Q2hpbGRyZW4oKSkgZG8KCQkJCQkJCQkJaWYgdjpJc0EoIkRlY2FsIikgdGhlbgoJCQkJCQkJCQkJdi5Db2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQoJCQkJCQkJCQllbmQKCQkJCQkJCQllbmQKCQkJCQkJCWVuZAoJCQkJCQllbmQpCgkJCQkJZW5kKQoKCQkJCQlzcGF3bihmdW5jdGlvbigpCgkJCQkJCXBjYWxsKGZ1bmN0aW9uKCkKCQkJCQkJCWlmIGQ6SXNBKCJQYXJ0aWNsZUVtaXR0ZXIiKSB0aGVuCQkJCgkJCQkJCQkJd2hpbGUgdHJ1ZSBkbwoJCQkJCQkJCQlpZiBkLlBhcmVudCB+PSBuaWwgdGhlbgoJCQkJCQkJCQkJaWYgZHJ1Z3NFbmFibGVkIHRoZW4KCQkJCQkJCQkJCQlkLkNvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXd7CgkJCQkJCQkJCQkJCUNvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMCwgQ29sb3IzLm5ldyhtYXRoLnJhbmRvbSgwLCAyNTUpLzI1NSwgbWF0aC5yYW5kb20oMCwgMjU1KS8yNTUsIG1hdGgucmFuZG9tKDAsIDI1NSkvMjU1KSksCgkJCQkJCQkJCQkJCUNvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMSwgQ29sb3IzLm5ldyhtYXRoLnJhbmRvbSgwLCAyNTUpLzI1NSwgbWF0aC5yYW5kb20oMCwgMjU1KS8yNTUsIG1hdGgucmFuZG9tKDAsIDI1NSkvMjU1KSkKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJd2FpdCgobWF0aC5yYW5kb20oMSwgNSkpLzEwKQoJCQkJCQkJCQkJZWxzZWlmIGNvbG9yc0VuYWJsZWQgdGhlbgoJCQkJCQkJCQkJCWQuQ29sb3IgPSBDb2xvclNlcXVlbmNlLm5ld3sKCQkJCQkJCQkJCQkJQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLCBDb2xvcjMubmV3KGNvbG9yMS8yNTUsIGNvbG9yMi8yNTUsIGNvbG9yMy8yNTUpKSwKCQkJCQkJCQkJCQkJQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygxLCBDb2xvcjMubmV3KGNvbG9yMS8yNTUsIGNvbG9yMi8yNTUsIGNvbG9yMy8yNTUpKQoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQl3YWl0KCkKCQkJCQkJCQkJCWVsc2UKCQkJCQkJCQkJCQlicmVhawoJCQkJCQkJCQkJZW5kCgkJCQkJCQkJCWVsc2UKCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCWVuZAoJCQkJCQkJCWVuZAoJCQkJCQkJZW5kCgkJCQkJCWVuZCkKCQkJCQllbmQpCgkJCQllbmQpCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDUpID09IChwcmVmaXggLi4gImhlYWwiKSB0aGVuCgkJCQlsb2NhbCBzdHJpbmdhcmdzID0gc3RyaW5nLnN1Yih0ZXh0LCA3KQoJCQkJbG9jYWwgYXJncyA9IHNwbGl0QXJncyhzdHJpbmdhcmdzKQoKCQkJCWlmIGFyZ3NbMV0gdGhlbgkJCQkKCQkJCQlpZiAoIyhmaW5kUGxheWVyKGFyZ3NbMV0pKSA9PSAxKSB0aGVuCgkJCQkJCWxvY2FsIGhlYWxpbmdQbGF5ZXIgPSBmaW5kUGxheWVyKGFyZ3NbMV0pWzFdCgkJCQkJCWxvY2FsIGNociA9IGdhbWUuUGxheWVyc1toZWFsaW5nUGxheWVyXS5DaGFyYWN0ZXIKCgkJCQkJCWlmIGNociB0aGVuCgkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSGVhbGluZyAiIC4uIGZpbmRQbGF5ZXIoYXJnc1sxXSlbMV0gLi4gIi4uLiIKCQkJCQkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIkNyeXN0YWwiLCAiR2xlYW1pbmcgSGFybW9ueSIpCgkJCQkJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkNyeXN0YWwiLCAiR2xlYW1pbmcgSGFybW9ueSIsIGNoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKQoJCQkJCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiUGhvZW5peCIsICJCbHVlIEFyc29uIikKCQkJCQkJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiUGhvZW5peCIsICJCbHVlIEFyc29uIiwgY2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pCgkJCQkJCQlpZiBjaHIgPT0gcGxheWVyLkNoYXJhY3RlciB0aGVuCgkJCQkJCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiQW5nZWwiLCJBbmdlbGljIEF1cmEiKQoJCQkJCQkJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiQW5nZWwiLCJBbmdlbGljIEF1cmEiKQoJCQkJCQkJZW5kCgkJCQkJCWVuZAoJCQkJCWVuZAoJCQkJZW5kCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDIpID09IChwcmVmaXggLi4gImUiKSB0aGVuCgkJCQlsb2NhbCBwaGFzZSA9IHN0cmluZy5zdWIodGV4dCwgNCkKCgkJCQlpZiB0b251bWJlcihwaGFzZSkgfj0gbmlsIHRoZW4KCQkJCQlwaGFzZSA9IG1hdGguZmxvb3IodG9udW1iZXIocGhhc2UpKQoKCQkJCQlpZiAocGhhc2UgPT0gMSkgb3IgKHBoYXNlID09IDIpIG9yIChwaGFzZSA9PSAzKSB0aGVuCgkJCQkJCUVjaG9lc1BoYXNlID0gcGhhc2UKCgkJCQkJCWxvY2FsIG1vZGUgPSAiIgoKCQkJCQkJaWYgRWNob2VzUGhhc2UgPT0gMSB0aGVuCgkJCQkJCQltb2RlID0gIihTVEFSKSIKCQkJCQkJZWxzZWlmIEVjaG9lc1BoYXNlID09IDIgdGhlbgoJCQkJCQkJbW9kZSA9ICIoRkxBTUUpIgoJCQkJCQllbHNlaWYgRWNob2VzUGhhc2UgPT0gMyB0aGVuCgkJCQkJCQltb2RlID0gIihTSE9DSykiCgkJCQkJCWVuZAoKCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkVjaG9lcyBwaGFzZSBoYXMgYmVlbiBjaGFuZ2VkISAiIC4uIG1vZGUKCQkJCQllbHNlCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJQaGFzZSBpcyBpbnZhbGlkISBNdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gMSBhbmQgMy4iCgkJCQkJZW5kCgkJCQllbHNlCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlBoYXNlIGlzIGludmFsaWQhIE11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAxIGFuZCAzLiIKCQkJCWVuZAoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAxMCkgPT0gKHByZWZpeCAuLiAiY2hhbmdlbG9nIikgdGhlbgoJCQkJLS0gVGFnOiBDSE5HTEcKCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJEb25lISBIaXQgQ3RybCtGOSB0byB2aWV3LiIKCQkJCXdhcm4oIlJvYmxveCBpcyBkdW1iIGFuZCBkb2Vzbid0IGFsbG93IG1lIHRvIGxvYWQgYSBzdHJpbmcgd2l0aCBtdWx0aXBsZSBsaW5lcyBoZXJlLiIpCgkJCQlwcmludCgiQ2hlY2sgaHR0cHM6Ly9wYXN0ZWJpbi5jb20vcmF3L2ZGRHBHTUFyIHRvIHNlZSB0aGUgY2hhbmdlbG9nLiIpCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDgpID09IChwcmVmaXggLi4gIm9yaWdpbiIpIHRoZW4KCQkJCXhwY2FsbChmdW5jdGlvbigpCgkJCQkJbG9jYWwgb3JpZ2luID0gSW5zdGFuY2UubmV3KCJQYXJ0IikKCQkJCQlvcmlnaW4uQW5jaG9yZWQgPSB0cnVlCgkJCQkJb3JpZ2luLlBhcmVudCA9IGdhbWUuV29ya3NwYWNlWyIuSWdub3JlIl1bIi5TZXJ2ZXJFZmZlY3RzIl0KCQkJCQlvcmlnaW4uTmFtZSA9ICJPcmlnaW4iCgkJCQkJb3JpZ2luLk1hdGVyaWFsID0gRW51bS5NYXRlcmlhbC5OZW9uCgkJCQkJb3JpZ2luLkJyaWNrQ29sb3IgPSBCcmlja0NvbG9yLm5ldygiUmVhbGx5IHJlZCIpCgkJCQkJb3JpZ2luLlNpemUgPSBWZWN0b3IzLm5ldygwLjUsIDAuNSwgMC41KQoJCQkJCW9yaWdpbi5Qb3NpdGlvbiA9IFZlY3RvcjMubmV3KDAsIDAsIDApCgkJCQkJd2FybigiTWFkZSBhIGJsb2NrIGF0IHRoZSBvcmlnaW4hIikKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3VjY2VzcyEgQ2hlY2sgY29uc29sZSBmb3IgbW9yZSBpbmZvIgoJCQkJZW5kLCBmdW5jdGlvbihlKQoJCQkJCXByaW50KCJFbmNvdW50ZXJlZCBhbiBlcnJvciEgeHBjYWxsIHNheXM6IiwgZSkKCQkJCQl3YXJuKCd0cmFjZWJhY2s6JywgZGVidWcudHJhY2ViYWNrKCkpCgkJCQllbmQpCiAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDYpID09IChwcmVmaXggLi4gImhlbHAiKSB0aGVuCiAgICAgICAgICAgICAgICB3YXJuKCJSb2Jsb3ggaXMgZHVtYiBhbmQgaXNuJ3QgZm9ybWF0dGluZyBtdWx0aWxpbmUgc3RyaW5ncyByaWdodC4iKQogICAgICAgICAgICAgICAgcHJpbnQoIkZvciBub3csIGNoZWNrIGh0dHBzOi8vcGFzdGViaW4uY29tL3Jhdy9ZNzRHaWhHeSB0byBzZWUgdGhlIGZ1bGwgbGlzdCBvZiBjb21tYW5kcy4iKQogICAgICAgICAgICAgICAgY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkRvbmUhIEhpdCBDdHJsK0Y5IHRvIHZpZXcuIgoJCQktLVtbZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgNikgPT0gKHByZWZpeCAuLiAiZmFybSIpIHRoZW4KCQkJCWxvY2FsIEZhcm1BbmNob3IgPSBJbnN0YW5jZS5uZXcoIlBhcnQiKQoJCQkJRmFybUFuY2hvci5BbmNob3JlZCA9IHRydWUKCQkJCUZhcm1BbmNob3IuQ2FuQ29sbGlkZSA9IHRydWUKCQkJCUZhcm1BbmNob3IuUG9zaXRpb24gPSBWZWN0b3IzLm5ldygwLDE1MDAwMCwwKQoJCQkJRmFybUFuY2hvci5QYXJlbnQgPSBnYW1lLldvcmtzcGFjZQoJCQkJRmFybUFuY2hvci5OYW1lID0gIkZhcm1BbmNob3IiCgkJCQlGYXJtQW5jaG9yLkJyaWNrQ29sb3IgPSBCcmlja0NvbG9yLm5ldygiVG9vdGhwYXN0ZSIpCgkJCQlGYXJtQW5jaG9yLlNpemUgPSBWZWN0b3IzLm5ldyguNSwuNSwuNSkKCQkJCUZhcm1BbmNob3IuTWF0ZXJpYWwgPSBFbnVtLk1hdGVyaWFsLk5lb24KCQkJCUZhcm1BbmNob3IuU2hhcGUgPSBFbnVtLlBhcnRUeXBlLkJhbGwKCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJQcmVwYXJpbmcgZm9yIHRlbGVwb3J0Li4uIgoJCQkJd2FpdCgzKQoJCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoVmVjdG9yMy5uZXcoMCwxMDAwMDMsMCkpXV0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgNikgPT0gKHByZWZpeCAuLiAiaW5mbyIpIHRoZW4KCQkJCWlmIHN0cmluZy5zdWIodGV4dCwgNykgPT0gInN0YXR1cyIgdGhlbgoJCQkJCXByaW50KCJUaGUgY3VycmVudCBzdGF0dXMgb2YgRUJHdWkgaXMgIiAuLiBzdGF0dXMpCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkVCR3VpIFN0YXR1czogIiAuLiBzdGF0dXMKCQkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDcpID09ICJyZXBvIiBvciBzdHJpbmcuc3ViKHRleHQsIDcpID09ICJnaXRodWIiIHRoZW4KCQkJCQlwcmludCgiVGhlIEdpdEh1YiByZXBvc2l0b3J5IGxpbmsgaXMgIiAuLiByZXBvKQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDaGVjayB0aGUgY29uc29sZSBmb3IgbW9yZSBpbmZvISIKCQkJCWVuZAoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA4KSA9PSAocHJlZml4IC4uICJ1cGRhdGUiKSB0aGVuCgkJCQlpZiB2ZXJOdW0gPT0gY3VycmVudCB0aGVuCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIk5vIHVwZGF0ZSByZXF1aXJlZCEiCgkJCQllbHNlaWYgdmVyTnVtID09IGxhc3QgdGhlbgoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJWZXJzaW9uIG91dGRhdGVkISBDdXJyZW50OiAiIC4uIGN1cnJlbnQKCQkJCWVsc2UKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiYnJvIHVyIG9uIGEgZGV2IGJ1aWxkIG9yIHNtIgoJCQkJZW5kCiAgICAgICAgICAgIGVuZAoKCQkJd2FpdCgxLjUpCgkJCWlmIHRhcmdldCB+PSBwbGF5ZXIuTmFtZSB0aGVuCgkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAiIC4uIHRhcmdldAoJCQllbHNlCgkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoTm9uZSkiCgkJCWVuZAoJCWVsc2UKCQkJbG9jYWwgbWF0Y2hlcyA9IGZpbmRQbGF5ZXIodGV4dCkKCgkJCWlmICNtYXRjaGVzID09IDEgdGhlbgoJCQkJdGFyZ2V0ID0gbWF0Y2hlc1sxXQoJCQkJaWYgbWF0Y2hlc1sxXSA9PSBwbGF5ZXIuTmFtZSB0aGVuCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgKE5vbmUpIgkJCQkJCQoJCQkJZWxzZQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8ICIgLi4gbWF0Y2hlc1sxXQoJCQkJZW5kCgkJCQl3YWl0KDEpCgkJCWVsc2UKCQkJCXRhcmdldCA9IHBsYXllci5OYW1lCgkJCQl3YXJuKCJUYXJnZXQgbm90IGZvdW5kISBEbyBtdWx0aXBsZSBwbGF5ZXJzIGhhdmUgdGhhdCBzYW1lIHN1YnN0cmluZyBpbiB0aGVpciBuYW1lcz8iKQoJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkludmFsaWQgVGFyZ2V0ISBUeXBlIHRoZWlyIG5hbWUgYWdhaW4uIgoJCQkJd2FpdCgxLjUpCgkJCQlpZiB0YXJnZXQgPT0gcGxheWVyLk5hbWUgdGhlbgoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8IChOb25lKSIKCQkJCWVuZAoJCQllbmQKCQllbmQKCWVuZAoKCXBsYXllcnMuUGxheWVyUmVtb3Zpbmc6Y29ubmVjdChmdW5jdGlvbihwbGF5ZXIpCgkJaWYgdGFyZ2V0ID09IHBsYXllci5OYW1lIHRoZW4KCQkJdGFyZ2V0ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUKCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgKFRhcmdldCBSUWVkISkiCgkJZW5kCgllbmQpCgoJY29tbWFuZEJveC5Gb2N1c0xvc3Q6Q29ubmVjdChmdW5jdGlvbihlbnRlclByZXNzZWQpCgkJaWYgZW50ZXJQcmVzc2VkIHRoZW4KCQkJaWYgY29tbWFuZEJveC5UZXh0IH49ICIiIHRoZW4KCQkJCWlucHV0Qm94KCkKCQkJZW5kCgkJZW5kCgllbmQpCgoJY29yb3V0aW5lLnJlc3VtZShjb3JvdXRpbmUuY3JlYXRlKGZ1bmN0aW9uKCkKCQltYWluZnJhbWUuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCAobWF0aC5jZWlsKCNidXR0b25zICogMzcpIC8gMikgLSA3KQoJZW5kKSkKCgktLSBCcmVha2luZyBTY3JpcHQgVXNlcnMKCglicmVha2FibGUgPSB0cnVlCgoJbG9jYWwgYnJlYWtVc2VycyA9IHsKCQkxODY0MzgwNTgxLAoJCTE4MjEzMzI5MywKCQkyOTc2MTUyMzEsCgkJMTEyODExNDk0NCwKCQkxOTU2NDEzMDc5LAoJCTMxMTAyNzIwNCwKCQkxOTAzMTY1NDA1LAoJCTE5MzM3MzQ5NTYsCgkJMTgxMjA1MzYzMiwKCQkxOTA2MzExOTAyLAoJCTE5OTMyMjQ3MjQsCgkJMTk0NDUzMTY2NSwKCQkxMDgwNDUwMjMKCX0KCglsb2NhbCBvbmNoYXQgPSBmdW5jdGlvbihwbHIsIG1zZykKCQlsb2NhbCBhbGxvd2VkID0gZmFsc2UKCQlmb3IgXywgdXNlciBpbiBwYWlycyhicmVha1VzZXJzKSBkbwoJCQlpZiBwbHIuTmFtZSA9PSB1c2VyIHRoZW4KCQkJCWFsbG93ZWQgPSB0cnVlCgkJCWVuZAoJCWVuZAoKCQlsb2NhbCBwcmVmaXggPSAiOyIKCgkJaWYgc3RyaW5nLnN1Yihtc2csIDEsIDcpID09IChwcmVmaXggLi4gImJyZWFrICIpIHRoZW4KCQkJbG9jYWwgbWF0Y2hlcyA9IHt9CgoJCQlmb3IgaSwgUGxheWVyIGluIGlwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbwoJCQkJbG9jYWwgbmFtZSA9IFBsYXllci5OYW1lCgkJCQltc2cgPSBzdHJpbmcubG93ZXIoc3RyaW5nLnN1Yihtc2csIDgpKQoJCQkJbmFtZSA9IHN0cmluZy5sb3dlcihuYW1lKQoJCQkJbG9jYWwgdGVybSA9IHN0cmluZy5zdWIobmFtZSwgMSwgc3RyaW5nLmxlbihuYW1lKSkKCgkJCQlsb2NhbCBtYXRjaCA9IHN0cmluZy5maW5kKHRlcm0sIG1zZykKCgkJCQlpZiBtYXRjaCB0aGVuCgkJCQkJdGFibGUuaW5zZXJ0KG1hdGNoZXMsIFBsYXllci5OYW1lKQoJCQkJZW5kCgkJCWVuZAoKCQkJaWYgbWF0Y2hlc1sxXSA9PSBwbGF5ZXIuTmFtZSBhbmQgYnJlYWthYmxlIGFuZCBhbGxvd2VkIHRoZW4KCQkJCXdoaWxlIHRydWUgZG8KCgkJCQllbmQKCQkJZW5kCgkJZW5kCgllbmQKCglmb3IgaSwgdiBpbiBwYWlycyhwbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KCQl2LkNoYXR0ZWQ6Q29ubmVjdChmdW5jdGlvbihtc2cpCgkJCW9uY2hhdCh2LCBtc2cpCgkJZW5kKQoJZW5kCgoJcGxheWVycy5QbGF5ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHYpCgkJdi5DaGF0dGVkOkNvbm5lY3QoZnVuY3Rpb24obXNnKQoJCQlvbmNoYXQodiwgbXNnKQoJCWVuZCkKCWVuZCkKCgktLSBFeHBsb2l0cwoKCWxvY2FsIGZ1bmN0aW9uIGZmKCkKCQlpZiBzbWFydEF0dGFjayA9PSB0cnVlIHRoZW4KCQkJaWYgZ2FtZS5QbGF5ZXJzW3RhcmdldF0uQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGb3JjZUZpZWxkIikgdGhlbgoJCQkJcmV0dXJuIHRydWUKCQkJZWxzZQoJCQkJcmV0dXJuIGZhbHNlCgkJCWVuZAoJCWVsc2UKCQkJcmV0dXJuIGZhbHNlCgkJZW5kCgllbmQKCglmdW5jdGlvbiBleHBsb2l0KCkKCQktLSBFeHBsb2l0IGZ1bmN0aW9uLiBXaGVuIEMgaXMgcHJlc3NlZCBhbmQgb25lIG9mIHRoZXNlIGFyZSAidHJ1ZSIsIGl0IHdpbGwgZmlyZSBpdC4KCQlsb2NhbCB0YXJnZXRDaHIgPSBnYW1lLlBsYXllcnNbdGFyZ2V0XS5DaGFyYWN0ZXIKCQlsb2NhbCBEQ00gPSBSU1IuRG9DbGllbnRNYWdpYwoJCWxvY2FsIERNID0gUlNSLkRvTWFnaWMKCgkJaWYgTGVhcFN0dW5FbmFibGVkIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIkV4cGxvc2lvbiIsICJFeHBsb3NpdmUgTGVhcCIpCgkJCWxvY2FsIGFyZ3MgPSB7CgkJCQlbMV0gPSAiRXhwbG9zaW9uIiwKCQkJCVsyXSA9ICJFeHBsb3NpdmUgTGVhcCIsCgkJCQlbM10gPSB7CgkJCQkJWyJMYXN0UG9zIl0gPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbgoJCQkJfQoJCQl9CgkJCURNOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCgkJZW5kCgoJCWlmIER5aW5nU3RhckVuYWJsZWQgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiU29sYXIiLCAiRHlpbmcgU3RhciIpCgkJCURNOkludm9rZVNlcnZlcigiU29sYXIiLCAiRHlpbmcgU3RhciIsIHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkKCQllbmQKCgkJaWYgSW5zdGFudEZpc3RFbmFibGVkIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIkVhcnRoIiwgIlJvY2sgRmlzdCIpCgkJCWxvY2FsIGFyZ3MgPSB7CgkJCQlbMV0gPSAiRWFydGgiLAoJCQkJWzJdID0gIlJvY2sgRmlzdCIsCgkJCQlbM10gPSB7CgkJCQkJWyJHcm91bmRlZCJdID0gdHJ1ZQoJCQkJfQoJCQl9CgkJCURNOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCgkJZW5kCgoJCWlmIGxPcmJzRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJMaWdodCIsIk9yYnMgb2YgRW5saWdodGVubWVudCIpCgkJCWxvY2FsIGFyZ3MgPSB7CgkJCQlbMV0gPSAiTGlnaHQiLAoJCQkJWzJdID0gIk9yYnMgb2YgRW5saWdodGVubWVudCIsCgkJCQlbM10gPSB7CgkJCQkJWyJDb29yZGluYXRlcyJdID0gewoJCQkJCQlbMV0gPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUsCgkJCQkJCVsyXSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzNdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbNF0gPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUsCgkJCQkJCVs1XSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzZdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbN10gPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUsCgkJCQkJCVs4XSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzldID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbMTBdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbMTFdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbMTJdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbMTNdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbMTRdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbMTVdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbMTZdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbMTddID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbMThdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbMTldID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbMjBdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lCgkJCQkJfSwKCQkJCQlbIk9yaWdpbiJdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24KCQkJCX0KCQkJfQoJCQlETTpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQoJCWVuZAoKCQlpZiBSZWFwZXJVbHRFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIlJlYXBlciIsICJSZWFwZXIncyBSYWdlIikKCQkJbG9jYWwgYXJncyA9IHsKCQkJCVsxXSA9ICJSZWFwZXIiLAoJCQkJWzJdID0gIlJlYXBlcidzIFJhZ2UiLAoJCQkJWzNdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lCgkJCX0KCQkJRE06SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKCQllbmQJCQoKCQlpZiBDcmVhdGlvbkhvbGRFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIkNyZWF0aW9uIiwgIkNvbnRpbnVvdXMgU3RyaWtlcyIpCgkJCWxvY2FsIGFyZ3MgPSB7CgkJCQlbMV0gPSAiQ3JlYXRpb24iLAoJCQkJWzJdID0gIkNvbnRpbnVvdXMgU3RyaWtlcyIsCgkJCQlbM10gPSB7CgkJCQkJWyJDRiJdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCVsiQ2hhcmdlIl0gPSAiMiIKCQkJCX0KCQkJfQoJCQlETTpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQoJCWVuZAoKCQlpZiBIeXBlcmFuZ0VuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiVGVjaG5vbG9neSIsICJIeXBlcmFuZyIpCgkJCURNOkludm9rZVNlcnZlcigiVGVjaG5vbG9neSIsICJIeXBlcmFuZyIsIHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkKCQllbmQKCgkJaWYgRGFya0FvZUVuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiRGFya25lc3MiLCAiTXVya3kgTWlzc2lsZXMiKQoJCQlETTpJbnZva2VTZXJ2ZXIoIkRhcmtuZXNzIiwgIk11cmt5IE1pc3NpbGVzIiwge2xhc3RNb3VzZVBvc2l0aW9uID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbil9KQoJCWVuZAoKCQlpZiBEaXNwZXJzaW9uRW5hYmxlZCB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJTdG9ybSIsICJMaWdodG5pbmcgRGlzcGVyc2lvbiIpCgkJCURNOkludm9rZVNlcnZlcigiU3Rvcm0iLCAiTGlnaHRuaW5nIERpc3BlcnNpb24iLCB7R3JvdW5kZWQgPSB0cnVlfSkKCQllbmQKCgkJaWYgRG91YmxlUmF5RW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCWxvY2FsIGFyZ3MgPSB7CgkJCQlbMV0gPSAiU29sYXIiLAoJCQkJWzJdID0gIkRvdWJsZSBSYXkiCgkJCX0JCQkKCQkJRENNOkZpcmVTZXJ2ZXIodW5wYWNrKGFyZ3MpKQkJCQoJCQlsb2NhbCBhcmdzID0gewoJCQkJWzFdID0gIlNvbGFyIiwKCQkJCVsyXSA9ICJEb3VibGUgUmF5IiwKCQkJCVszXSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5BbmdsZXMobWF0aC5yYWQoOTApLCAwLCAwKQoJCQl9CQkJCgkJCURNOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCgkJZW5kCgoJCWlmIFN0b3JtQnVsbGV0c0VuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlsb2NhbCBhcmdzID0gewoJCQkJWzFdID0gIlN0b3JtIiwKCQkJCVsyXSA9ICJMaWdodG5pbmcgQmFycmFnZSIKCQkJfQkJCQoJCQlEQ006RmlyZVNlcnZlcih1bnBhY2soYXJncykpCQkJCgkJCWxvY2FsIGFyZ3MgPSB7CgkJCQlbMV0gPSAiU3Rvcm0iLAoJCQkJWzJdID0gIkxpZ2h0bmluZyBCYXJyYWdlIiwKCQkJCVszXSA9IHsKCQkJCQlbIkRpcmVjdGlvbiJdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCg5MCksIDAsIDApCgkJCQl9CgkJCX0JCQkKCQkJRE06SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKCQllbmQKCgkJaWYgT3JiaXRhbEhhY2tFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJbG9jYWwgYXJncyA9IHsKCQkJCVsxXSA9ICJUZWNobm9sb2d5IiwKCQkJCVsyXSA9ICJPcmJpdGFsIFN0cmlrZSIKCQkJfQoJCQlEQ006RmlyZVNlcnZlcih1bnBhY2soYXJncykpCgkJCWxvY2FsIGFyZ3MgPSB7CgkJCQlbMV0gPSAiVGVjaG5vbG9neSIsCgkJCQlbMl0gPSAiT3JiaXRhbCBTdHJpa2UiLAoJCQkJWzNdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikKCQkJfQoJCQlETTpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQoJCWVuZAoKCQlpZiBWaWdvckhhY2tFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJbG9jYWwgYXJncyA9IHsKCQkJCVsxXSA9ICJTcGlyaXQiLAoJCQkJWzJdID0gIlZpZ29yIEd5cmF0aW9uIgoJCQl9CgkJCURDTTpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkKCQkJbG9jYWwgYXJncyA9IHsKCQkJCVsxXSA9ICJTcGlyaXQiLAoJCQkJWzJdID0gIlZpZ29yIEd5cmF0aW9uIiwKCQkJCVszXSA9IHsKCQkJCQlbMV0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbMl0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbM10gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbNF0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbNV0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbNl0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbN10gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbOF0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbOV0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbMTBdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzExXSA9IENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pCgkJCQl9CgkJCX0KCQkJRE06SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKCQllbmQKCgkJaWYgQXN0ZXJvaWRCZWx0RW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCWxvY2FsIGFyZ3MgPSB7CgkJCQlbMV0gPSAiU3BhY2UiLAoJCQkJWzJdID0gIkFzdGVyb2lkIEJlbHQiCgkJCX0KCQkJRENNOkZpcmVTZXJ2ZXIodW5wYWNrKGFyZ3MpKQoJCQlsb2NhbCBhcmdzID0gewoJCQkJWzFdID0gIlNwYWNlIiwKCQkJCVsyXSA9ICJBc3Rlcm9pZCBCZWx0IiwKCQkJCVszXSA9IHsKCQkJCQlbMV0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbMl0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbM10gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbNF0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbNV0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbNl0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbN10gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbOF0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbOV0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwKCQkJCQlbMTBdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzExXSA9IENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pCgkJCQl9CgkJCX0KCQkJRE06SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKCQllbmQKCgkJaWYgQmxhemVDb2x1bW5FbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIkZpcmUiLCAiQmxhemUgQ29sdW1uIiwgVmVjdG9yMy5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pKQoJCQlETTpJbnZva2VTZXJ2ZXIoIkZpcmUiLCAiQmxhemUgQ29sdW1uIiwgQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikpCgkJZW5kCgoJCWlmIFZpbmVUcmFwRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJOYXR1cmUiLCAiVmluZSBUcmFwIiwgVmVjdG9yMy5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pKQoJCQlETTpJbnZva2VTZXJ2ZXIoIk5hdHVyZSIsICJWaW5lIFRyYXAiLCBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSkKCQllbmQKCgkJaWYgUGxhc21hSW1wbG9zaW9uRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJQbGFzbWEiLCAiUGxhc21hIEltcGxvc2lvbiIsIFZlY3RvcjMubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSkKCQkJRE06SW52b2tlU2VydmVyKCJQbGFzbWEiLCAiUGxhc21hIEltcGxvc2lvbiIsIENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pKQoJCWVuZAoKCQlpZiBTbGltZUJ1ZGRpZXNFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIlNsaW1lIiwgIlNsaW1lIEJ1ZGRpZXMiKQoJCQlETTpJbnZva2VTZXJ2ZXIoIlNsaW1lIiwgIlNsaW1lIEJ1ZGRpZXMiLCB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpCgkJZW5kCgoJCWlmIENyeXN0YWxBcm1hbWVudEVuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiQ3J5c3RhbCIsICJDcnlzdGFsIEFybWFtZW50IikKCQkJRE06SW52b2tlU2VydmVyKCJDcnlzdGFsIiwgIkNyeXN0YWwgQXJtYW1lbnQiLCB7TGFzdFBvc2l0aW9uID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gKyBWZWN0b3IzLm5ldygwLCAxNSwgMCl9KQoJCWVuZAoKCQlpZiBHcmF2aXRhbEdsb2JlRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJHcmF2aXR5IiwgIkdyYXZpdGFsIEdsb2JlIikKCQkJRE06SW52b2tlU2VydmVyKCJHcmF2aXR5IiwgIkdyYXZpdGFsIEdsb2JlIiwge2xhc3RQb3MgPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KDAsIDE1LCAwKX0pCgkJZW5kCgoJCWlmIEdyYXZpdGF0aW9uYWxGaWVsZEVuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiR3Jhdml0eSIsICJHcmF2aXRhdGlvbmFsIEZpZWxkIikKCQkJRE06SW52b2tlU2VydmVyKCJHcmF2aXR5IiwgIkdyYXZpdGF0aW9uYWwgRmllbGQiLCB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgLSBWZWN0b3IzLm5ldygwLCAxNSwgMCkpCgkJZW5kCgoJCWlmIEFtYXVyb3RpY0xhbWJlbnRFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIkxpZ2h0IiwgIkFtYXVyb3RpYyBMYW1iZW50IikKCQkJRE06SW52b2tlU2VydmVyKCJMaWdodCIsICJBbWF1cm90aWMgTGFtYmVudCIsIHtsYXN0UG9zID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb259KQoJCWVuZAoKCQlpZiBBYmxhemVKdWRnZW1lbnRIYWNrRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJMaWdodCIsICJBYmxhemUgSnVkZ2VtZW50IikKCQkJRE06SW52b2tlU2VydmVyKCJMaWdodCIsICJBYmxhemUgSnVkZ2VtZW50Iiwge09yaWdpbiA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoMCwgMjUsIDApLCBvcmJQb3MgPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KDAsIDEwLCAwKX0pCgkJZW5kCgoJCWlmIFZvaWRPcGVuaW5nSGFja0VuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiVm9pZCIsICJWb2lkIE9wZW5pbmciKQoJCQlETTpJbnZva2VTZXJ2ZXIoIlZvaWQiLCAiVm9pZCBPcGVuaW5nIiwge3BvcyA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoMCwgMTUwLCAwKX0pCgkJZW5kCgoJCWlmIFNrZWxldG9uR3JhYkVuYWJsZWQgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiTmlnaHRtYXJlIiwgIlNrZWxldG9uIEdyYWIiKQoJCQlETTpJbnZva2VTZXJ2ZXIoIk5pZ2h0bWFyZSIsICJTa2VsZXRvbiBHcmFiIiwgdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQoJCWVuZAoKCQlpZiBHZW5lc2lzUmF5RW5hYmxlZCB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJUaW1lIiwgIkdlbmVzaXMgUmF5IiwgcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKQoJCQlETTpJbnZva2VTZXJ2ZXIoIlRpbWUiLCAiR2VuZXNpcyBSYXkiLCB7bHYgPSBWZWN0b3IzLm5ldygwLCAwLCAwKSwgY2hhcmdlID0gR1JDaGFyZ2V9KQoJCWVuZAoKCQlpZiBUaGVXb3JsZEVuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiVGltZSIsICJUaGUgV29ybGQiLCB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikKCQkJRE06SW52b2tlU2VydmVyKCJUaW1lIiwgIlRoZSBXb3JsZCIsIHtyaGl0ID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQsIG5vcm0gPSBWZWN0b3IzLm5ldygwLCAwLCAwKSwgcnBvcyA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9ufSkKCQllbmQKCgkJaWYgUG9sYXJpc0VuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiQXVyb3JhIiwgIlBvbGFyaXMiKQoJCQlETTpJbnZva2VTZXJ2ZXIoIkF1cm9yYSIsICJQb2xhcmlzIiwgdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQoJCWVuZAoKCQlpZiBDb250cm9sbGVkRWNob2VzRW5hYmxlZCBhbmQgRWNob2VzUGhhc2Ugfj0gbmlsIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIlNvdW5kIiwgIkVjaG9lcyIpCgkJCURNOkludm9rZVNlcnZlcigiU291bmQiLCAiRWNob2VzIiwge0VjaG9lc1BoYXNlLCBtb3VzZS5IaXQucH0pCgkJZW5kCgoJCWlmIFNoYXR0ZXJpbmdFcnVwdGlvbkVuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiRXhwbG9zaW9uIiwgIlNoYXR0ZXJpbmcgRXJ1cHRpb24iKQoJCQlETTpJbnZva2VTZXJ2ZXIoIkV4cGxvc2lvbiIsICJTaGF0dGVyaW5nIEVydXB0aW9uIiwgdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQoJCWVuZAoKCQlpZiBJbGx1c2l2ZUF0YWtlRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJJbGx1c2lvbiIsICJJbGx1c2l2ZSBBdGFrZSIpCgkJCURNOkludm9rZVNlcnZlcigiSWxsdXNpb24iLCAiSWxsdXNpdmUgQXRha2UiLCB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpCgkJZW5kCgoJCWlmIEV0aGVyZWFsQWN1bWVuRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJJbGx1c2lvbiIsICJFdGhlcmVhbCBBY3VtZW4iKQoJCQlETTpJbnZva2VTZXJ2ZXIoIklsbHVzaW9uIiwgIkV0aGVyZWFsIEFjdW1lbiIsIHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkKCQllbmQKCgkJaWYgRm9ybWlkYWJsZVJvYXJFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIkRyYWdvbiIsICJGb3JtaWRhYmxlIFJvYXIiKQoJCQlETTpJbnZva2VTZXJ2ZXIoIkRyYWdvbiIsICJGb3JtaWRhYmxlIFJvYXIiLCB7dGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLCAxNzV9KQoJCWVuZAoKCQlpZiBUb3hpY0Jhc2lsaXNrRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IHRydWUKCQkJRENNOkZpcmVTZXJ2ZXIoIkFjaWQiLCAiVG94aWMgQmFzaWxpc2siKQoJCQlETTpJbnZva2VTZXJ2ZXIoIkFjaWQiLCAiVG94aWMgQmFzaWxpc2siLCB7RGlyZWN0aW9uID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLCBGbG9vciA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZX0pCgkJCXdhaXQoMTcuNSkKCQkJaWYgRnJlZXplRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCQlwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSBmYWxzZQoJCQllbmQKCQllbmQKCgkJaWYgQXJjYW5lR3VhcmRpYW5FbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIkFuZ2VsIiwgIkFyY2FuZSBHdWFyZGlhbiIpCgkJCURNOkludm9rZVNlcnZlcigiQW5nZWwiLCAiQXJjYW5lIEd1YXJkaWFuIiwge1Bvc2l0aW9uID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gKyBWZWN0b3IzLm5ldygwLCA1MCwgMCl9KQoJCWVuZAoKCQlpZiBTcGxpdHRpbmdTbGltZUVuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiU2xpbWUiLCAiU3BsaXR0aW5nIFNsaW1lIikKCQkJRE06SW52b2tlU2VydmVyKCJTbGltZSIsICJTcGxpdHRpbmcgU2xpbWUiLCB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgLSBWZWN0b3IzLm5ldygwLCAyMCwgMCkpCgkJZW5kCgoJCWlmIFZpcnR1YWxab25lRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJUZWNobm9sb2d5IiwgIlZpcnR1YWwgWm9uZSIpCgkJCURNOkludm9rZVNlcnZlcigiVGVjaG5vbG9neSIsICJWaXJ0dWFsIFpvbmUiLCB7dGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24sIFZlY3RvcjMubmV3KDAsIDAsIDApfSkKCQllbmQKCWVuZAoKCS0tW1tsb2NhbCBmdW5jdGlvbiBCZWdpblRyYWNraW5nKCkKCQlsb2NhbCBjID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5DdXJyZW50Q2FtZXJhCgkJbG9jYWwgaGIgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQKCQlsb2NhbCBtID0gcGxheWVyOkdldE1vdXNlKCkKCQlsb2NhbCBwID0gYzpXb3JsZFRvU2NyZWVuUG9pbnQocGxheWVyc1t0YXJnZXRdLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKQoJCWhiOmNvbm5lY3QoZnVuY3Rpb24oc3RlcCkKCQkJbW91c2Vtb3ZlYWJzKHAuWCwgKHAuWSArIDI1KSkKCQllbmQpCgllbmRdXSAtLSBGb3IgQWltYm90LCBjdXJyZW50bHkgdW5kZXIgZGV2ZWxvcG1lbnQKCgktLSBVSVMKCglsb2NhbCBVSVMgPSBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKQoJbG9jYWwgdGVybWluYXRldWlzID0gZmFsc2UKCglVSVMuSW5wdXRCZWdhbjpjb25uZWN0KGZ1bmN0aW9uKGlucHV0LCBncCkKCQlpZiBub3QgdGVybWluYXRldWlzIHRoZW4KCQkJaWYgbm90IGdwIHRoZW4KCQkJCWxvY2FsIHRhcmdldENociA9IGdhbWUuUGxheWVyc1t0YXJnZXRdLkNoYXJhY3RlcgoKCQkJCWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkJhY2tTbGFzaCB0aGVuCgkJCQkJY29tbWFuZEJveDpDYXB0dXJlRm9jdXMoKQoJCQkJCXdhaXQoKQoJCQkJCWlmIHN0cmluZy5zdWIoY29tbWFuZEJveC5UZXh0LCBzdHJpbmcubGVuKGNvbW1hbmRCb3guVGV4dCksIHN0cmluZy5sZW4oY29tbWFuZEJveC5UZXh0KSkgPT0gIlxcIiB0aGVuCgkJCQkJCWNvbW1hbmRCb3guVGV4dCA9IHN0cmluZy5zdWIoY29tbWFuZEJveC5UZXh0LCAxLCBzdHJpbmcubGVuKGNvbW1hbmRCb3guVGV4dCkgLSAxKQoJCQkJCWVuZAoJCQkJLS1bW2Vsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5MIHRoZW4KCQkJCQl0b2dnbGVBaW1ib3QoKV1dCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuQyB0aGVuCgkJCQkJZXhwbG9pdCgpCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuVSB0aGVuCgkJCQkJVFBUb1RhcmdldCgpCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuSyB0aGVuCgkJCQkJQW50aUJsaW5kRnVuYygpCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuVCB0aGVuCgkJCQkJYmVnaW5TcGVlZCgpCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuWCB0aGVuCgkJCQkJaWYgU3BlY3RyYWxFbWJvZGltZW50RW5hYmxlZCB0aGVuCgkJCQkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIlNwaXJpdCIsICJTcGVjdHJhbCBFbWJvZGltZW50IikKCQkJCQkJRE06SW52b2tlU2VydmVyKCJTcGlyaXQiLCAiU3BlY3RyYWwgRW1ib2RpbWVudCIpCgkJCQkJZW5kCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuUCB0aGVuCgkJCQkJaWYgU2Fuc1RlbGVwb3J0RW5hYmxlZCB0aGVuCgkJCQkJCWlmIGdhbWUuUGxhY2VJZCA9PSA1NjYzOTkyNDQgb3IgZ2FtZS5QbGFjZUlkID09IDI1Njk2MjU4MDkgdGhlbgoJCQkJCQkJbG9jYWwgU2Fuc1BvcyA9IENGcmFtZS5uZXcoLTE2ODUuOTEwNTIsIDIzMC4wMzUxMjYsIC0xODEuNzk4MjY0KQoJCQkJCQkJbG9jYWwgU2Fuc0FuZ2xlcyA9IENGcmFtZS5BbmdsZXMoMCwgbWF0aC5yYWQoMjApLCAwKQoKCQkJCQkJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBTYW5zUG9zICogU2Fuc0FuZ2xlcwoJCQkJCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpDaGFuZ2VTdGF0ZShFbnVtLkh1bWFub2lkU3RhdGVUeXBlLkNsaW1iaW5nKQoJCQkJCQkJd2FpdCgpCgkJCQkJCQlwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSB0cnVlCgkJCQkJCQl3YWl0KDEpCgkJCQkJCQlpZiBub3QgRnJlZXplRW5hYmxlZCB0aGVuCgkJCQkJCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UKCQkJCQkJCWVuZAoJCQkJCQllbmQKCQkJCQllbmQKCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5aIHRoZW4KCQkJCQliZWdpbk51bGxpZnlGb3JjZXMoKQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkcgdGhlbgoJCQkJCUFudGlHcmF2aXR5RnVuYygpCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuSiB0aGVuCgkJCQkJaWYgQ2xpY2tUUEVuYWJsZWQgdGhlbgoJCQkJCQljbGlja3RwKG1vdXNlLkhpdCkKCQkJCQllbmQKCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5GIHRoZW4KCQkJCQlGcmVlemVGdW5jKCkKCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5CYWNrcXVvdGUgdGhlbgoJCQkJCWlmIEZsYXNoRW5hYmxlZCB0aGVuCgkJCQkJCWxvbmdmbGFzaCgpCgkJCQkJZW5kCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuViB0aGVuCgkJCQkJdmlldygpCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuQiB0aGVuCgkJCQkJdG9nZ2xlRVNQKCkKCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5NIHRoZW4KCQkJCQl0b2dnbGVFU1BHb2xkKCkKCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5MZWZ0QnJhY2tldCB0aGVuCgkJCQkJaWYgbm90IGNsb3NlZGZvcmV2ZXIgdGhlbgoJCQkJCQlpZiBub3QgYnV0dG9uc2RlYm91bmNlIHRoZW4KCQkJCQkJCWJ1dHRvbnNkZWJvdW5jZSA9IHRydWUKCQkJCQkJCWlmIGJ1dHRvbnNvcGVuZWQgPT0gZmFsc2UgdGhlbgoJCQkJCQkJCWJ1dHRvbnNvcGVuZWQgPSB0cnVlCgkJCQkJCQkJYnV0dG9uc21haW46VHdlZW5Qb3NpdGlvbigKCQkJCQkJCQkJVURpbTIubmV3KDEsIDAsIDAuNjUsIDApLAoJCQkJCQkJCQkiT3V0IiwKCQkJCQkJCQkJIlNpbmUiLAoJCQkJCQkJCQkuNSwKCQkJCQkJCQkJdHJ1ZQoJCQkJCQkJCSkKCQkJCQkJCWVsc2UKCQkJCQkJCQlidXR0b25zb3BlbmVkID0gZmFsc2UKCQkJCQkJCQlidXR0b25zbWFpbjpUd2VlblBvc2l0aW9uKAoJCQkJCQkJCQlVRGltMi5uZXcoMS4yNSwgMCwgMC42NSwgMCksCgkJCQkJCQkJCSJJbiIsCgkJCQkJCQkJCSJTaW5lIiwKCQkJCQkJCQkJLjUsCgkJCQkJCQkJCXRydWUKCQkJCQkJCQkpCgkJCQkJCQllbmQKCQkJCQkJCXdhaXQoMSkKCQkJCQkJCWJ1dHRvbnNkZWJvdW5jZSA9IGZhbHNlCgkJCQkJCWVuZAoJCQkJCWVuZAoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlJpZ2h0QnJhY2tldCB0aGVuCgkJCQkJY29tbWFuZGRlYm91bmNlID0gdHJ1ZQoJCQkJCWlmIGNvbW1hbmRzb3BlbmVkID09IGZhbHNlIHRoZW4KCQkJCQkJY29tbWFuZHNvcGVuZWQgPSB0cnVlCgkJCQkJCWNvbW1hbmRzbWFpbjpUd2VlblBvc2l0aW9uKAoJCQkJCQkJVURpbTIubmV3KDEsIDAsIDAuNDUsIDApLAoJCQkJCQkJIk91dCIsCgkJCQkJCQkiU2luZSIsCgkJCQkJCQkuNSwKCQkJCQkJCXRydWUKCQkJCQkJKQoJCQkJCWVsc2UKCQkJCQkJY29tbWFuZHNvcGVuZWQgPSBmYWxzZQoJCQkJCQljb21tYW5kc21haW46VHdlZW5Qb3NpdGlvbigKCQkJCQkJCVVEaW0yLm5ldygxLjI1LCAwLCAwLjQ1LCAwKSwKCQkJCQkJCSJJbiIsCgkJCQkJCQkiU2luZSIsCgkJCQkJCQkuNSwKCQkJCQkJCXRydWUKCQkJCQkJKQoJCQkJCWVuZAoJCQkJCXdhaXQoMSkKCQkJCQljb21tYW5kZGVib3VuY2UgPSBmYWxzZQoJCQkJZWxzZWlmIFVJUzpJc0tleURvd24oRW51bS5LZXlDb2RlLkxlZnQpIGFuZCBVSVM6SXNLZXlEb3duKEVudW0uS2V5Q29kZS5SaWdodCkgdGhlbgoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJUaGFua3MgZm9yIHVzaW5nIEVCR3VpISIKCQkJCQl3YWl0KDIpCgkJCQkJaWYgYnV0dG9uc29wZW5lZCA9PSB0cnVlIHRoZW4KCQkJCQkJdGVybWluYXRldWlzID0gdHJ1ZQoJCQkJCQl0ZXJtRUJHdWkoKQoJCQkJCWVuZAoJCQkJZW5kCgkJCWVuZAoJCWVuZAoJZW5kKQoKCS0tIFNjcmlwdHMgYW5kIEZ1bmN0aW9ucyBFTkQKCgktLSBFbnRyYW5jZSBBbmltYXRpb24KCgl3YWl0KDAuNSkKCglidXR0b25zbWFpbjpUd2VlblBvc2l0aW9uKAoJCVVEaW0yLm5ldygxLCAwLCAwLjY1LCAwKSwKCQkiT3V0IiwKCQkiU2luZSIsCgkJLjUsCgkJdHJ1ZQoJKQoKCWNvbW1hbmRzbWFpbjpUd2VlblBvc2l0aW9uKAoJCVVEaW0yLm5ldygxLCAwLCAwLjQ1LCAwKSwKCQkiT3V0IiwKCQkiU2luZSIsCgkJLjUsCgkJdHJ1ZQoJKQoKCS0tIEluZm8KCglwcmludChbWwoKCV1dKQoJd2FybigiR1VJIHN1Y2Nlc3NmdWxseSBsb2FkZWQhIikKCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJXZWxjb21lIHRvIEVCR3VpISIKCXdhaXQoMikKCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8IChOb25lKSIKZW5k"