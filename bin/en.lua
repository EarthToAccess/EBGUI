encui = "aWYgbm90KGdhbWU6SXNMb2FkZWQoKSkgdGhlbg0KCWdhbWUuTG9hZGVkOldhaXQoKQ0KZW5kDQoNCmlmIChnYW1lLkNvcmVHdWk6RmluZEZpcnN0Q2hpbGQoImViZ3VpIikpIHRoZW4NCglnYW1lLkNvcmVHdWkuZWJndWk6RGVzdHJveSgpDQplbmQNCg0KbG9jYWwgYmxvY2tsaXN0ID0gew0KfQ0KDQpsb2NhbCBtYXN0ZXJsaXN0ID0gew0KCTMyNTczMzM0DQp9DQoNCmxvY2FsIGdvbGRsaXN0ID0gew0KCSJnb2xkX0VsZW1lbnRhbEZpcnN0XzM5NzY3OCINCn0NCg0KbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyDQpsb2NhbCBJRCA9IHBsYXllci5Vc2VySWQNCmxvY2FsIGlzQmxvY2tlZCA9IGZhbHNlDQpsb2NhbCBpc01hc3RlciA9IGZhbHNlDQpsb2NhbCBpc0dvbGQgPSBmYWxzZQ0KDQpmb3IgaSx2IGluIHBhaXJzKGJsb2NrbGlzdCkgZG8NCiAgICBpZiB2ID09IElEIHRoZW4NCiAgICAgICAgaXNCbG9ja2VkID0gdHJ1ZQ0KICAgICAgICBicmVhaw0KICAgIGVuZA0KZW5kDQoNCmZvciBpLHYgaW4gcGFpcnMobWFzdGVybGlzdCkgZG8NCiAgICBpZiB2ID09IElEIHRoZW4NCiAgICAgICAgaXNNYXN0ZXIgPSB0cnVlDQogICAgICAgIGJyZWFrDQogICAgZW5kDQplbmQNCg0KaWYgaXNCbG9ja2VkIHRoZW4NCiAgICB3YXJuKCI9PT09PT09PT09PT09PT09PT09PT09PVtbIEFUVEVOVElPTiBdXT09PT09PT09PT09PT09PT09PT09PT09IikNCiAgICB3YXJuKCJ8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IikNCiAgICB3YXJuKCJ8ICAgICAgICAgICAgICBUaGlzIGFjY291bnQgaGFzIGJlZW4gYmxvY2tlZC4gICAgICAgICAgICAgICB8IikNCiAgICB3YXJuKCJ8ICAgIFBsZWFzZSB2aXNpdCB0aGUgRUJHdWkgRGlzY29yZCBmb3IgbW9yZSBpbmZvcm1hdGlvbi4gICB8IikNCiAgICB3YXJuKCJ8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IikNCiAgICB3YXJuKCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IikNCmVsc2VpZiBub3QgRUJHdWlLZXkgYW5kIG5vdCBpc0Jsb2NrZWQgYW5kIG5vdCBpc01hc3RlciB0aGVuDQogICAgd2FybigiPT09PT09PT09PT09PT09PT09PT09PT1bWyBBVFRFTlRJT04gXV09PT09PT09PT09PT09PT09PT09PT09PSIpDQogICAgd2FybigifCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCIpDQogICAgd2FybigifCAgICAgICBZb3UgZG9uJ3QgaGF2ZSB0aGUgdW5sb2NrIGtleSBpbiB5b3VyIHNjcmlwdC4gICAgICAgfCIpDQogICAgd2FybigifCAgICAgICBZb3UnbGwgbmVlZCB0byBmaW5kIHRoZSBhcHByb3ByaWF0ZSBrZXkgZmlyc3QuICAgICAgfCIpDQogICAgd2FybigifCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCIpDQogICAgd2FybigiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSIpDQplbHNlaWYgRUJHdWlLZXkgfj0gInNjcmlwdF9FbGVtZW50YWwwODIwMjJfMjIwNTAzIiBhbmQgbm90IGlzQmxvY2tlZCBhbmQgbm90IGlzTWFzdGVyIHRoZW4NCiAgICB3YXJuKCI9PT09PT09PT09PT09PT09PT09PT09PVtbIEFUVEVOVElPTiBdXT09PT09PT09PT09PT09PT09PT09PT09IikNCiAgICB3YXJuKCJ8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IikNCiAgICB3YXJuKCJ8ICAgICAgICAgICAgICAgWW91ciB1bmxvY2sga2V5IGlzIGluY29ycmVjdC4gICAgICAgICAgICAgICB8IikNCiAgICB3YXJuKCJ8ICAgICAgIFlvdSdsbCBuZWVkIHRvIGZpbmQgdGhlIGFwcHJvcHJpYXRlIGtleSBmaXJzdC4gICAgICB8IikNCiAgICB3YXJuKCJ8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IikNCiAgICB3YXJuKCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IikNCmVsc2UNCglsb2NhbCBkdW1iUXVvdGVzID0gew0KCQkiSmVleiwgd2hlbidkIGl0IGdldCBzbyBob3QgaW4gaGVyZT8iLA0KCQkiSXMgaXQganVzdCBtZSBvciBpcyB0aGF0ICp0b28qIGJsdWU/IiwNCgkJIkxpa2UgdGFraW5nIGNhbmR5IGZyb20gYSBiYWJ5LiIsDQoJCSJEZWV6IG51dHMgYXJlIHRvbyBzcXVhcmUhIiwNCgkJIkFsc28gdHJ5IE1pbmVjcmFmdCEiLA0KCQkiQWxzbyB0cnkgVGVycmFyaWEhIiwNCgkJIk1laCwgSSBsaWtlZCBSaXNrIG9mIFJhaW4gMiBiZXR0ZXIuIiwNCgkJIllvdSBuZWVkIGEgZmFpcmx5IGhpZ2ggSVEgdG8gdW5kZXJzdGFuZCBFQkd1aS4iLA0KCQkiSmFrZSwgZnJvbSBTdGF0ZSBGYXJtPyEiLA0KCQkiV2hhdCB3b3VsZCAqeW91KiBkbyBmb3IgYSBLbG9uZGlrZSBiYXI/IiwNCgkJIk5vdyB3aXRoIDEwMCUgbW9yZSBHb2xkISIsDQoJCSJNYWRlIGluIEx1YSEiLA0KCQkiSUYgJUVSUk9STEVWRUwlIEVRVSAxIEdPVE86RU9GIiwNCgkJImJydWggbmVyZiBzb2xhciBhbHJlYWR5IiwNCgkJIkJlY2F1c2UgdGhlIGRldnMgd29uJ3QgZG8gaXQuIiwNCgkJIlBldGl0aW9uIFlPVVIgbG9jYWwgZGV2ZWxvcGVyIGZvciBtb3JlIHVwZGF0ZXMhIiwNCgkJIndoeSBhcmUgeW91IGJ1eWluZyBjbG90aGVzIGF0IHRoZSBzb3VwIHN0b3JlIiwNCgkJIkkganVzdCB3YW5uYSBiZSBhIG5vcm1hbCBHVUkgd2l0aCBub3JtYWwga25lZXMuIg0KCX0NCg0KICAgIHdhcm4oW1tfX19fX18gX19fX18gX19fX18gICAgICAgXyANCiAgICAgICAgICAgIHwgIF9fX3wgX19fIFwgIF9fIFwgICAgIChfKQ0KICAgICAgICAgICAgfCB8X18gfCB8Xy8gLyB8ICBcL18gICBfIF8gDQogICAgICAgICAgICB8ICBfX3x8IF9fXyBcIHwgX198IHwgfCB8IHwNCiAgICAgICAgICAgIHwgfF9fX3wgfF8vIC8gfF9cIFwgfF98IHwgfA0KICAgICAgICAgICAgXF9fX18vXF9fX18vIFxfX19fL1xfXyxffF98IHYyLjMuMV1dKQ0KCXByaW50KCIgIikNCglwcmludChkdW1iUXVvdGVzW21hdGgucmFuZG9tKDEsMTgpXSkNCglwcmludCgiICIpDQoJd2FybigiV2VsY29tZSB0byBFQkd1aSwgIiAuLiBwbGF5ZXIuTmFtZSAuLiAiISIpDQoJd2FybigiWW91J3JlIG9uIHRoZSBTdGFibGUgYnJhbmNoIG9mIEVCR3VpIikNCgl3YXJuKCJRdWVzdGlvbnMgb3IgY29uY2VybnM/IExldCB1cyBrbm93IGluIHRoZSBEaXNjb3JkLCIpDQoJd2Fybigib3IgZW1haWwgRWFydGggaGltc2VsZiBhdCBlYXJ0aHRvYWNjZXNzQGdtYWlsLmNvbSEiKQ0KCXdhaXQoMC41KQ0KCQ0KCWlmIGlzTWFzdGVyIHRoZW4NCgkJd2FybihbWyAgIA0KCQkJTG9hZGVkIGluIHVzaW5nIHRoZSBNYXN0ZXIgTGlzdCEgT3ZlcnJpZGluZyBhY2Nlc3MgZ2l2ZW4uDQoJCQkgIF1dKQ0KCWVuZA0KDQoJZm9yIGksdiBpbiBwYWlycyhnb2xkbGlzdCkgZG8NCgkJaWYgbm90IEVCR3VpR29sZCB0aGVuIGVsc2VpZiBFQkd1aUdvbGQgPT0gdiB0aGVuDQoJCQlpc0dvbGQgPSB0cnVlDQoJCQlwcmludChbWw0KCQkJCV9fX18gICAgICAgICAgICAgX19fICAgICAgX19fIA0KCQkJICAgNk1NTU1iLyAgICAgICAgICAgYE1NICAgICAgYE1NIA0KCQkJICA4UCAgICBZTSAgICAgICAgICAgIE1NICAgICAgIE1NIA0KCQkJIDZNICAgICAgWSAgIF9fX19fICAgIE1NICAgX19fX01NIA0KCQkJIE1NICAgICAgICAgNk1NTU1NYiAgIE1NICA2TU1NTU1NIA0KCQkJIE1NICAgICAgICA2TScgICBgTWIgIE1NIDZNJyAgYE1NIA0KCQkJIE1NICAgICBfX19NTSAgICAgTU0gIE1NIE1NICAgIE1NIA0KCQkJIE1NICAgICBgTSdNTSAgICAgTU0gIE1NIE1NICAgIE1NIA0KCQkJIFlNICAgICAgTSBNTSAgICAgTU0gIE1NIE1NICAgIE1NIA0KCQkJICA4YiAgICBkOSBZTS4gICAsTTkgIE1NIFlNLiAgLE1NIA0KCQkJICAgWU1NTU05ICAgWU1NTU1NOSAgX01NXyBZTU1NTU1NX11dKQ0KCQkJd2FybigiVGhhbmsgeW91IGZvciBiZWluZyBhIEdPTERFTiBtZW1iZXIhIikNCgkJCXdhcm4oJ0Vuam95IHRoZSB2YXJpb3VzICJvdmVycG93ZXJlZCIgc2NyaXB0cyB3ZSBoYXZlIGluIHN0b3JlIScpDQoJCQlicmVhaw0KCQllbHNlIGVuZA0KCWVuZA0KDQoJLS0gR1VJIEluc3RhbmNlcywgRXZlbnRzIGFuZCBGdW5jdGlvbnMNCg0KCWxvY2FsIGViZ3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQ0KCWViZ3VpLk5hbWUgPSAiZWJndWkiDQoJZWJndWkuUGFyZW50ID0gZ2FtZTpXYWl0Rm9yQ2hpbGQoIkNvcmVHdWkiKQ0KDQoJZ2FtZS5Db3JlR3VpLkNoaWxkUmVtb3ZlZDpjb25uZWN0KGZ1bmN0aW9uKGNoaWxkKQ0KCQlpZiBjaGlsZC5OYW1lID09ICJlYmd1aSIgdGhlbg0KCQkJY2xvc2VkZm9yZXZlciA9IHRydWUNCgkJCWJ1dHRvbnNvcGVuZWQgPSBmYWxzZQ0KCQkJY29tbWFuZHNvcGVuZWQgPSBmYWxzZQ0KCQkJYnV0dG9uc2RlYm91bmNlID0gdHJ1ZQ0KCQkJY29tbWFuZGRlYm91bmNlID0gdHJ1ZQ0KCQkJdGVybWluYXRldWlzID0gdHJ1ZQ0KCQkJVUlTID0gbmlsDQoJCQlicmVha2FibGUgPSB0cnVlDQoJCQlCbGF6ZUNvbHVtbkVuYWJsZWQgPSBuaWwNCgkJCVZpbmVUcmFwRW5hYmxlZCA9IG5pbA0KCQkJUGxhc21hSW1wbG9zaW9uRW5hYmxlZCA9IG5pbA0KCQkJU2xpbWVCdWRkaWVzRW5hYmxlZCA9IG5pbA0KCQkJQ3J5c3RhbEFybWFtZW50RW5hYmxlZCA9IG5pbA0KCQkJQW1hdXJvdGljTGFtYmVudEVuYWJsZWQgPSBuaWwNCgkJCUFibGF6ZUp1ZGdlbWVudEhhY2tFbmFibGVkID0gbmlsDQoJCQlWb2lkT3BlbmluZ0hhY2tFbmFibGVkID0gbmlsDQoJCQlTa2VsZXRvbkdyYWJFbmFibGVkID0gbmlsDQoJCQlUaGVXb3JsZEVuYWJsZWQgPSBuaWwNCgkJCVBvbGFyaXNFbmFibGVkID0gbmlsDQoJCQlMYWdTZXJ2ZXJFbmFibGVkID0gbmlsDQoJCQlTaGF0dGVyaW5nRXJ1cHRpb25FbmFibGVkID0gbmlsDQoJCQlJbGx1c2l2ZUF0YWtlRW5hYmxlZCA9IG5pbA0KCQkJRXRoZXJlYWxBY3VtZW5FbmFibGVkID0gbmlsDQoJCQlGb3JtaWRhYmxlUm9hckVuYWJsZWQgPSBuaWwNCgkJCVNld2VyQnVyc3RFbmFibGVkID0gbmlsDQoJCQlUb3hpY0Jhc2lsaXNrRW5hYmxlZCA9IG5pbA0KCQkJU3BsaXR0aW5nU2xpbWVFbmFibGVkID0gbmlsDQoJCQlWaXJ0dWFsWm9uZUVuYWJsZWQgPSBuaWwNCgkJCUFudGlCbGluZEVuYWJsZWQgPSBuaWwNCgkJCUFudGlMYWdFbmFibGVkID0gbmlsDQoJCQlTcGVlZGhhY2tFbmFibGVkID0gbmlsDQoJCQlIb2xvYmVhbUVuYWJsZWQgPSBuaWwNCgkJCVNldFNwZWVkID0gbmlsDQoJCQlJZ25vcmVQaHlzaWNzRW5hYmxlZCA9IG5pbA0KCQkJQW50aUdyYXZpdHlFbmFibGVkID0gbmlsDQoJCQlJbmVydGlhR3Jhdml0eUVuYWJsZWQgPSBuaWwNCgkJCUNsaWNrVFBFbmFibGVkID0gbmlsDQoJCQlGcmVlemVFbmFibGVkID0gbmlsDQoJCQlUaHJ1c3RFbmFibGVkID0gbmlsDQoJCQlUaHJ1c3RQb3dlciA9IG5pbA0KCQkJdmlld2luZyA9IG5pbA0KCQkJVFBUYXJnZXRFbmFibGVkID0gbmlsDQoJCQlMb29wVFBUYXJnZXRFbmFibGVkID0gbmlsDQoJCQlFU1BFbmFibGVkID0gbmlsDQoJCQlUUFNoYXJkc0VuYWJsZWQgPSBuaWwNCgkJCVRQRGlhbW9uZHNFbmFibGVkID0gbmlsDQoJCQlGUFNEcm9wcGluZyA9IG5pbA0KCQkJc2Fuc0tpbGxlZCA9ICJ3aXAiDQoJCQlBc3Rlcm9pZEJlbHRFbmFibGVkID0gbmlsDQoJCQlWaWdvckhhY2tFbmFibGVkID0gbmlsDQoJCQlPcmJpdGFsSGFja0VuYWJsZWQgPSBuaWwNCgkJCVN0b3JtQnVsbGV0c0VuYWJsZWQgPSBuaWwNCgkJCURvdWJsZVJheUVuYWJsZWQgPSBuaWwNCgkJCURpc3BlcnNpb25FbmFibGVkID0gbmlsDQoJCQlEYXJrQW9lRW5hYmxlZCA9IG5pbA0KCQkJSHlwZXJhbmdFbmFibGVkID0gbmlsDQoJCQlDcmVhdGlvbkhvbGRFbmFibGVkID0gbmlsDQoJCQlSZWFwZXJVbHRFbmFibGVkID0gbmlsDQoJCWVuZA0KCWVuZCkNCg0KCWxvY2FsIG1vdXNlID0gcGxheWVyOkdldE1vdXNlKCkNCg0KCWxvY2FsIGJvcmRlcnMgPSB7fQ0KDQoJbG9jYWwgYnV0dG9uc21haW4gPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikNCglidXR0b25zbWFpbi5OYW1lID0gImJ1dHRvbnNtYWluIg0KCWJ1dHRvbnNtYWluLlBvc2l0aW9uID0gVURpbTIubmV3KDEuMjUsIDAsIDAuNjUsIDApDQoJYnV0dG9uc21haW4uU2l6ZSA9IFVEaW0yLm5ldygwLjQsIDAsIDAuMjI1LCAwKQ0KCXRhYmxlLmluc2VydChib3JkZXJzLCBidXR0b25zbWFpbikNCg0KCWJ1dHRvbnNkZWJvdW5jZSA9IGZhbHNlDQoJYnV0dG9uc29wZW5lZCA9IHRydWUNCg0KDQoJLS1pZiAoaW5pdGlhdGlvbk1vZGUgPT0gIk1vZGVybiIpIHRoZW4NCglsb2NhbCBjb21tYW5kc21haW4gPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikNCgljb21tYW5kc21haW4uTmFtZSA9ICJjb21tYW5kc21haW4iDQoJY29tbWFuZHNtYWluLlBvc2l0aW9uID0gVURpbTIubmV3KDEuMjUsIDAsIDAuNDUsIDApDQoJY29tbWFuZHNtYWluLlNpemUgPSBVRGltMi5uZXcoMC4zLCAwLCAwLjE3NSwgMCkNCgl0YWJsZS5pbnNlcnQoYm9yZGVycywgY29tbWFuZHNtYWluKQ0KCS0tZW5kDQoNCgljb21tYW5kZGVib3VuY2UgPSBmYWxzZQ0KCWNvbW1hbmRzb3BlbmVkID0gdHJ1ZQ0KDQoJY2xvc2VkZm9yZXZlciA9IGZhbHNlDQoNCglsb2NhbCBmcmFtZXMgPSB7fQ0KDQoJLS0gRnJhbWUgZm9yIGFyb3VuZCB0aGUgYnV0dG9ucy4NCglsb2NhbCBidXR0b25zZnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikNCglidXR0b25zZnJhbWUuTmFtZSA9ICJidXR0b25zZnJhbWUiDQoJYnV0dG9uc2ZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxOCwgNTQsIDE3OSkNCglidXR0b25zZnJhbWUuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkNCglidXR0b25zZnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMg0KCWJ1dHRvbnNmcmFtZS5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KQ0KCWJ1dHRvbnNmcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNSwgMCkNCglidXR0b25zZnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAuODUsIDApDQoJdGFibGUuaW5zZXJ0KGZyYW1lcywgYnV0dG9uc2ZyYW1lKQ0KCWJ1dHRvbnNmcmFtZS5QYXJlbnQgPSBidXR0b25zbWFpbg0KDQoJLS0gRnJhbWUgZm9yIGFyb3VuZCB0aGUgY29tbWFuZCBib3guDQoJbG9jYWwgY29tbWFuZHNmcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQ0KCWNvbW1hbmRzZnJhbWUuTmFtZSA9ICJjb21tYW5kc2ZyYW1lIg0KCWNvbW1hbmRzZnJhbWUuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkNCgljb21tYW5kc2ZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxOCwgNTQsIDE3OSkNCgljb21tYW5kc2ZyYW1lLkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEyOCwgMTI4LCAxMjgpDQoJY29tbWFuZHNmcmFtZS5Cb3JkZXJTaXplUGl4ZWwgPSAyDQoJY29tbWFuZHNmcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNSwgMCkNCgljb21tYW5kc2ZyYW1lLlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLjg1LCAwKQ0KCXRhYmxlLmluc2VydChmcmFtZXMsIGNvbW1hbmRzZnJhbWUpDQoJY29tbWFuZHNmcmFtZS5QYXJlbnQgPSBjb21tYW5kc21haW4NCg0KCS0tIENvbW1hbmQgYm94LiBUaGlzIGlzIHdoZXJlIHVzZXJzIHR5cGUgaW4gY29tbWFuZHMgYW5kIHRhcmdldHMuDQoJbG9jYWwgY29tbWFuZEJveCA9IEluc3RhbmNlLm5ldygiVGV4dEJveCIpDQoJY29tbWFuZEJveC5OYW1lID0gImNvbW1hbmRCb3giDQoJY29tbWFuZEJveC5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KQ0KCWNvbW1hbmRCb3guQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1LCA0MCwgNDApDQoJY29tbWFuZEJveC5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMjgsIDEyOCwgMTI4KQ0KCWNvbW1hbmRCb3guQm9yZGVyU2l6ZVBpeGVsID0gMg0KCWNvbW1hbmRCb3guUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjMsIDApDQoJY29tbWFuZEJveC5TaXplID0gVURpbTIubmV3KDAuODUsIDAsIDAuMjAsIDApDQoJY29tbWFuZEJveC5Gb250ID0gRW51bS5Gb250LlNhcnBhbmNoDQoJY29tbWFuZEJveC5UZXh0ID0gIiINCgljb21tYW5kQm94LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1MSwgMjU1KQ0KCWNvbW1hbmRCb3guVGV4dFNjYWxlZCA9IHRydWUNCgljb21tYW5kQm94LlRleHRTaXplID0gMTQuMDAwDQoJY29tbWFuZEJveC5UZXh0V3JhcHBlZCA9IHRydWUNCgljb21tYW5kQm94LkNsZWFyVGV4dE9uRm9jdXMgPSBmYWxzZQ0KCWNvbW1hbmRCb3guUGFyZW50ID0gY29tbWFuZHNmcmFtZQ0KDQoJbG9jYWwgbGFiZWxzID0ge30NCg0KCS0tIFRoZSBvdXRwdXQgZm9yIHRoZSBjb21tYW5kIGJveCwgQUtBIHRoZSB3aGl0ZSB0ZXh0IGJlbG93IHRoYXQgbGlzdHMgeW91ciB0YXJnZXQuDQoJbG9jYWwgY29tbWFuZEJveE91dHB1dCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikNCgljb21tYW5kQm94T3V0cHV0Lk5hbWUgPSAiY29tbWFuZEJveE91dHB1dCINCgljb21tYW5kQm94T3V0cHV0LkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpDQoJY29tbWFuZEJveE91dHB1dC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkNCgljb21tYW5kQm94T3V0cHV0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMA0KCWNvbW1hbmRCb3hPdXRwdXQuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkNCgljb21tYW5kQm94T3V0cHV0LkJvcmRlclNpemVQaXhlbCA9IDANCgljb21tYW5kQm94T3V0cHV0LlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgMCwgMC42LCAwKQ0KCWNvbW1hbmRCb3hPdXRwdXQuU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAuMiwgMCkNCgljb21tYW5kQm94T3V0cHV0LkZvbnQgPSBFbnVtLkZvbnQuU2FycGFuY2gNCgljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoTm9uZSkiDQoJY29tbWFuZEJveE91dHB1dC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTEsIDI1NSkNCgljb21tYW5kQm94T3V0cHV0LlRleHRTY2FsZWQgPSB0cnVlDQoJY29tbWFuZEJveE91dHB1dC5UZXh0U2l6ZSA9IDE0LjAwMA0KCWNvbW1hbmRCb3hPdXRwdXQuVGV4dFdyYXBwZWQgPSB0cnVlDQoJdGFibGUuaW5zZXJ0KGxhYmVscywgY29tbWFuZEJveE91dHB1dCkNCgljb21tYW5kQm94T3V0cHV0LlBhcmVudCA9IGNvbW1hbmRzZnJhbWUNCg0KCS0tIFRoZSBpbmZvcm1hdGlvbiBhYm92ZSB0aGUgYnV0dG9ucywgZS5nLiB1c2VyJ3MgbmFtZSwgY2hhbm5lbA0KCWxvY2FsIERldGFpbHMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpDQoJRGV0YWlscy5OYW1lID0gIkRldGFpbHMiDQoJRGV0YWlscy5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkNCglEZXRhaWxzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMA0KCURldGFpbHMuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkNCglEZXRhaWxzLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAuMDE0MTQxNDE0MywgMCkNCglEZXRhaWxzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC4xNSwgMCkNCglEZXRhaWxzLkZvbnQgPSBFbnVtLkZvbnQuU2FycGFuY2gNCglpZiBub3QgaXNHb2xkIHRoZW4NCgkJRGV0YWlscy5UZXh0ID0gcGxheWVyLk5hbWUgLi4gIiB8IEVCR3VpIHwgU3RhYmxlIg0KCWVsc2UNCgkJRGV0YWlscy5UZXh0ID0gcGxheWVyLk5hbWUgLi4gIiB8IEVCR3VpIEdvbGQgfCBTdGFibGUiDQoJZW5kDQoJRGV0YWlscy5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTEsIDI1NSkNCglEZXRhaWxzLlRleHRTY2FsZWQgPSB0cnVlDQoJRGV0YWlscy5aSW5kZXggPSA1DQoJRGV0YWlscy5UZXh0U2l6ZSA9IDE0LjAwMA0KCURldGFpbHMuVGV4dFdyYXBwZWQgPSB0cnVlDQoJdGFibGUuaW5zZXJ0KGxhYmVscywgRGV0YWlscykNCglEZXRhaWxzLlBhcmVudCA9IGJ1dHRvbnNmcmFtZQ0KDQoJLS0gIkNsb3NlIHRoaXMgR1VJIiBmb3IgdGhlIGNvbW1hbmQgYm94Lg0KCWxvY2FsIERldGFpbHMyID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQ0KCURldGFpbHMyLk5hbWUgPSAiRGV0YWlsczIiDQoJRGV0YWlsczIuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkNCglEZXRhaWxzMi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkNCglEZXRhaWxzMi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMS4wMDANCglEZXRhaWxzMi5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMjgsIDEyOCwgMTI4KQ0KCURldGFpbHMyLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgMCwgMC45LCAwKQ0KCURldGFpbHMyLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC4xNSwgMCkNCglEZXRhaWxzMi5Gb250ID0gRW51bS5Gb250LlNhcnBhbmNoDQoJRGV0YWlsczIuVGV4dCA9ICJQcmVzcyBdIHRvIG9wZW4gYW5kIGNsb3NlIHRoaXMgR1VJLiINCglEZXRhaWxzMi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTEsIDI1NSkNCglEZXRhaWxzMi5UZXh0U2NhbGVkID0gdHJ1ZQ0KCURldGFpbHMyLlRleHRTaXplID0gMTQuMDAwDQoJRGV0YWlsczIuVGV4dFdyYXBwZWQgPSB0cnVlDQoJdGFibGUuaW5zZXJ0KGxhYmVscywgRGV0YWlsczIpDQoJRGV0YWlsczIuUGFyZW50ID0gY29tbWFuZHNmcmFtZQ0KDQoJLS0gIkNsb3NlIHRoaXMgR1VJIiBmb3IgdGhlIGJ1dHRvbnMuDQoJbG9jYWwgRGV0YWlsczMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpDQoJRGV0YWlsczMuTmFtZSA9ICJEZXRhaWxzMyINCglEZXRhaWxzMy5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkNCglEZXRhaWxzMy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMS4wMDANCglEZXRhaWxzMy5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMjgsIDEyOCwgMTI4KQ0KCURldGFpbHMzLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAuODc1LCAwKQ0KCURldGFpbHMzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC4xNSwgMCkNCglEZXRhaWxzMy5Gb250ID0gRW51bS5Gb250LlNhcnBhbmNoDQoJRGV0YWlsczMuVGV4dCA9ICJQcmVzcyBbIHRvIG9wZW4gYW5kIGNsb3NlIHRoaXMgR1VJLiINCglEZXRhaWxzMy5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTEsIDI1NSkNCglEZXRhaWxzMy5UZXh0U2NhbGVkID0gdHJ1ZQ0KCURldGFpbHMzLlRleHRTaXplID0gMTQuMDAwDQoJRGV0YWlsczMuVGV4dFdyYXBwZWQgPSB0cnVlDQoJdGFibGUuaW5zZXJ0KGxhYmVscywgRGV0YWlsczMpDQoJRGV0YWlsczMuUGFyZW50ID0gYnV0dG9uc2ZyYW1lDQoNCgktLSBTY3JpcHQgdGVybWluYXRpb24gaW5zdHJ1Y3Rpb25zLg0KCWxvY2FsIERldGFpbHM0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQ0KCURldGFpbHM0Lk5hbWUgPSAiRGV0YWlsczQiDQoJRGV0YWlsczQuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpDQoJRGV0YWlsczQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEuMDAwDQoJRGV0YWlsczQuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkNCglEZXRhaWxzNC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAxLjEsIDApDQoJRGV0YWlsczQuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLjE3NSwgMCkNCglEZXRhaWxzNC5Gb250ID0gRW51bS5Gb250LlNhcnBhbmNoDQoJRGV0YWlsczQuVGV4dCA9ICJIb2xkIHRoZSBMZWZ0IGFuZCBSaWdodCBhcnJvdyBrZXlzLCB0aGVuIHByZXNzIGFueSBrZXkgdG8gcXVpdCBFQkd1aS4iDQoJRGV0YWlsczQuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1MSwgMjUxLCAyNTUpDQoJRGV0YWlsczQuVGV4dFNjYWxlZCA9IHRydWUNCglEZXRhaWxzNC5UZXh0U2l6ZSA9IDE0LjAwMA0KCURldGFpbHM0LlRleHRXcmFwcGVkID0gdHJ1ZQ0KCURldGFpbHM0LlBhcmVudCA9IGJ1dHRvbnNmcmFtZQ0KDQoJLS0gVGhlIHZlcnNpb24gbnVtYmVyIGFib3ZlIHRoZSBjb21tYW5kIGJveC4NCglsb2NhbCBWZXJzaW9uID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQ0KCVZlcnNpb24uTmFtZSA9ICJWZXJzaW9uIg0KCVZlcnNpb24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpDQoJVmVyc2lvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMS4wMDANCglWZXJzaW9uLkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEyOCwgMTI4LCAxMjgpDQoJVmVyc2lvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLjA1LCAwKQ0KCVZlcnNpb24uU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLjEsIDApDQoJVmVyc2lvbi5Gb250ID0gRW51bS5Gb250LlNhcnBhbmNoDQoJVmVyc2lvbi5UZXh0ID0gIlZlcnNpb24gdjIuMy4xIg0KCVZlcnNpb24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1MSwgMjUxLCAyNTUpDQoJVmVyc2lvbi5UZXh0U2NhbGVkID0gdHJ1ZQ0KCVZlcnNpb24uVGV4dFNpemUgPSAxNC4wMDANCglWZXJzaW9uLlRleHRXcmFwcGVkID0gdHJ1ZQ0KCXRhYmxlLmluc2VydChsYWJlbHMsIFZlcnNpb24pDQoJVmVyc2lvbi5QYXJlbnQgPSBjb21tYW5kc2ZyYW1lDQoNCgktLSBUaGUgYmFja2dyb3VuZCBmb3IgdGhlIFVJLg0KCWxvY2FsIG1haW5mcmFtZSA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQ0KCW1haW5mcmFtZS5OYW1lID0gIm1haW5mcmFtZSINCgltYWluZnJhbWUuQWN0aXZlID0gdHJ1ZQ0KCW1haW5mcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDksIDgzLCA4OSkNCgltYWluZnJhbWUuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkNCgltYWluZnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMg0KCW1haW5mcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNSwgMCkNCgltYWluZnJhbWUuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkNCgltYWluZnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygwLjg2Nzc2ODU4NiwgMCwgMC42LCAwKQ0KCW1haW5mcmFtZS5TY3JvbGxCYXJUaGlja25lc3MgPSA2DQoJbWFpbmZyYW1lLlBhcmVudCA9IGJ1dHRvbnNtYWluDQoNCgktLSBHcmlkIGxheW91dCBmb3IgdGhlIGJ1dHRvbnMuDQoJbG9jYWwgVUlHcmlkTGF5b3V0ID0gSW5zdGFuY2UubmV3KCJVSUdyaWRMYXlvdXQiKQ0KCVVJR3JpZExheW91dC5GaWxsRGlyZWN0aW9uID0gRW51bS5GaWxsRGlyZWN0aW9uLkhvcml6b250YWwNCglVSUdyaWRMYXlvdXQuSG9yaXpvbnRhbEFsaWdubWVudCA9IEVudW0uSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXINCglVSUdyaWRMYXlvdXQuQ2VsbFBhZGRpbmcgPSBVRGltMi5uZXcoMCwgNywgMCwgNykNCglVSUdyaWRMYXlvdXQuQ2VsbFNpemUgPSBVRGltMi5uZXcoMC40NSwgMCwgMCwgMzApDQoJVUlHcmlkTGF5b3V0LlNvcnRPcmRlciA9IEVudW0uU29ydE9yZGVyLkxheW91dE9yZGVyDQoJVUlHcmlkTGF5b3V0LlBhcmVudCA9IG1haW5mcmFtZQ0KDQoJbG9jYWwgYnV0dG9ucyA9IHt9DQoNCgktLS0tLS0gQnV0dG9ucyBmb3IgaGFja3MuDQoNCgktLS0tIEFvRXMNCgktLSBJbnN0YW50IEJsYXplIENvbHVtbg0KDQoJbG9jYWwgQmxhemVDb2x1bW4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUJsYXplQ29sdW1uLk5hbWUgPSAiQmxhemVDb2x1bW4iDQoJQmxhemVDb2x1bW4uVGV4dCA9ICJJbnN0YW50IEJsYXplIENvbHVtbiAoT2ZmKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQmxhemVDb2x1bW4pDQoNCglCbGF6ZUNvbHVtbkVuYWJsZWQgPSBmYWxzZQ0KDQoJQmxhemVDb2x1bW4uTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgQmxhemVDb2x1bW5FbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUJsYXplQ29sdW1uRW5hYmxlZCA9IHRydWUNCgkJCUJsYXplQ29sdW1uLlRleHQgPSAiSW5zdGFudCBCbGF6ZSBDb2x1bW4gKE9uKSINCgkJZWxzZQ0KCQkJQmxhemVDb2x1bW5FbmFibGVkID0gZmFsc2UNCgkJCUJsYXplQ29sdW1uLlRleHQgPSAiSW5zdGFudCBCbGF6ZSBDb2x1bW4gKE9mZikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEFtcGxpZmllZCBHZW5lc2lzIFJheQ0KDQoJbG9jYWwgR2VuZXNpc1JheSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJR2VuZXNpc1JheS5OYW1lID0gIkdlbmVzaXNSYXkiDQoJR2VuZXNpc1JheS5UZXh0ID0gIkFtcGxpZmllZCBHZW5lc2lzIFJheSAoT2ZmKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgR2VuZXNpc1JheSkNCg0KCWxvY2FsIEdlbmVzaXNSYXlFbmFibGVkID0gZmFsc2UNCglsb2NhbCBHUkNoYXJnZSA9IDEgLS0gMTAwMDAwMA0KDQoJR2VuZXNpc1JheS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBHZW5lc2lzUmF5RW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlHZW5lc2lzUmF5RW5hYmxlZCA9IHRydWUNCgkJCUdlbmVzaXNSYXkuVGV4dCA9ICJBbXBsaWZpZWQgR2VuZXNpcyBSYXkgKE9uKSINCgkJZWxzZQ0KCQkJR2VuZXNpc1JheUVuYWJsZWQgPSBmYWxzZQ0KCQkJR2VuZXNpc1JheS5UZXh0ID0gIkFtcGxpZmllZCBHZW5lc2lzIFJheSAoT2ZmKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gQ3JlYXRpb24gSG9sZCBIYWNrDQoNCglsb2NhbCBDaGFpbkhvbGQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUNoYWluSG9sZC5OYW1lID0gIkNoYWluSG9sZCINCglDaGFpbkhvbGQuVGV4dCA9ICIoRykgSW5zdGFudCBDaGFpbiBIYWNrIChPZmYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBDaGFpbkhvbGQpDQoNCglsb2NhbCBDcmVhdGlvbkhvbGRFbmFibGVkID0gZmFsc2UNCg0KCUNoYWluSG9sZC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBpc0dvbGQgb3IgaXNNYXN0ZXIgdGhlbg0KCQkJaWYgbm90IENyZWF0aW9uSG9sZEVuYWJsZWQgdGhlbg0KCQkJCUNyZWF0aW9uSG9sZEVuYWJsZWQgPSB0cnVlDQoJCQkJQ2hhaW5Ib2xkLlRleHQgPSAiKEcpIEluc3RhbnQgQ2hhaW4gSGFjayAoT24pIg0KCQkJZWxzZQ0KCQkJCUNyZWF0aW9uSG9sZEVuYWJsZWQgPSBmYWxzZQ0KCQkJCUNoYWluSG9sZC5UZXh0ID0gIihHKSBJbnN0YW50IENoYWluIEhhY2sgKE9mZikiDQoJCQllbmQNCgkJZWxzZQ0KCQkJQ2hhaW5Ib2xkLlRleHQgPSAiTWVtYmVyIE5vdCBHb2xkIg0KCQkJd2FpdCgxKQ0KCQkJQ2hhaW5Ib2xkLlRleHQgPSAiKEcpIEluc3RhbnQgQ2hhaW4gSGFjayAoT2ZmKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gSW5zdGFudCBWaW5lIFRyYXANCg0KCWxvY2FsIFZpbmVUcmFwID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglWaW5lVHJhcC5OYW1lID0gIlZpbmVUcmFwIg0KCVZpbmVUcmFwLlRleHQgPSAiSW5zdGFudCBWaW5lIFRyYXAgKE9mZikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFZpbmVUcmFwKQ0KDQoJVmluZVRyYXBFbmFibGVkID0gZmFsc2UNCg0KCVZpbmVUcmFwLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIFZpbmVUcmFwRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlWaW5lVHJhcEVuYWJsZWQgPSB0cnVlDQoJCQlWaW5lVHJhcC5UZXh0ID0gIkluc3RhbnQgVmluZSBUcmFwIChPbikiDQoJCWVsc2UNCgkJCVZpbmVUcmFwRW5hYmxlZCA9IGZhbHNlDQoJCQlWaW5lVHJhcC5UZXh0ID0gIkluc3RhbnQgVmluZSBUcmFwIChPZmYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBJbGx1c2l2ZSBBdGFrZSBIYWNrDQoNCglsb2NhbCBJbGx1c2l2ZUF0YWtlID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglJbGx1c2l2ZUF0YWtlLk5hbWUgPSAiSWxsdXNpdmVBdGFrZSINCglJbGx1c2l2ZUF0YWtlLlRleHQgPSAiSWxsdXNpdmUgQXRha2UgSGFjayAoT2ZmKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgSWxsdXNpdmVBdGFrZSkNCg0KCUlsbHVzaXZlQXRha2VFbmFibGVkID0gZmFsc2UNCg0KCUlsbHVzaXZlQXRha2UuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgSWxsdXNpdmVBdGFrZUVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJSWxsdXNpdmVBdGFrZUVuYWJsZWQgPSB0cnVlDQoJCQlJbGx1c2l2ZUF0YWtlLlRleHQgPSAiSWxsdXNpdmUgQXRha2UgSGFjayAoT24pIg0KCQllbHNlDQoJCQlJbGx1c2l2ZUF0YWtlRW5hYmxlZCA9IGZhbHNlDQoJCQlJbGx1c2l2ZUF0YWtlLlRleHQgPSAiSWxsdXNpdmUgQXRha2UgSGFjayAoT2ZmKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gSW5zdGFudCBNdXJreSBNaXNzaWxlcw0KDQoJbG9jYWwgRGFya0FvZSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJRGFya0FvZS5OYW1lID0gIkRhcmtBb2UiDQoJRGFya0FvZS5UZXh0ID0gIkluc3RhbnQgTXVya3kgTWlzc2lsZXMgKE9mZikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIERhcmtBb2UpDQoNCglsb2NhbCBEYXJrQW9lRW5hYmxlZCA9IGZhbHNlDQoNCglEYXJrQW9lLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIG5vdCBEYXJrQW9lRW5hYmxlZCB0aGVuDQoJCQlEYXJrQW9lRW5hYmxlZCA9IHRydWUNCgkJCURhcmtBb2UuVGV4dCA9ICJJbnN0YW50IE11cmt5IE1pc3NpbGVzIChPbikiDQoJCWVsc2UNCgkJCURhcmtBb2VFbmFibGVkID0gZmFsc2UNCgkJCURhcmtBb2UuVGV4dCA9ICJJbnN0YW50IE11cmt5IE1pc3NpbGVzIChPZmYpIg0KCQllbmQNCgllbmQpDQoJDQoJLS0gSW5zdGFudCBBaXIgRGlzcGVyc2lvbg0KDQoJbG9jYWwgU3Rvcm1Bb2UgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCVN0b3JtQW9lLk5hbWUgPSAiU3Rvcm1Bb2UiDQoJU3Rvcm1Bb2UuVGV4dCA9ICIoRykgSW5zdGFudCBTdG9ybSBBb0UgKE9mZikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFN0b3JtQW9lKQ0KDQoJbG9jYWwgRGlzcGVyc2lvbkVuYWJsZWQgPSBmYWxzZQ0KDQoJU3Rvcm1Bb2UuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgaXNHb2xkIG9yIGlzTWFzdGVyIHRoZW4NCgkJCWlmIG5vdCBEaXNwZXJzaW9uRW5hYmxlZCB0aGVuDQoJCQkJRGlzcGVyc2lvbkVuYWJsZWQgPSB0cnVlDQoJCQkJU3Rvcm1Bb2UuVGV4dCA9ICIoRykgSW5zdGFudCBTdG9ybSBBb0UgKE9uKSINCgkJCWVsc2UNCgkJCQlEaXNwZXJzaW9uRW5hYmxlZCA9IGZhbHNlDQoJCQkJU3Rvcm1Bb2UuVGV4dCA9ICIoRykgSW5zdGFudCBTdG9ybSBBb0UgKE9mZikiDQoJCQllbmQJDQoJCWVsc2UNCgkJCVN0b3JtQW9lLlRleHQgPSAiTWVtYmVyIE5vdCBHb2xkIg0KCQkJd2FpdCgxKQ0KCQkJU3Rvcm1Bb2UuVGV4dCA9ICIoRykgSW5zdGFudCBTdG9ybSBBb0UgKE9mZikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIFNwbGl0dGluZyBTbGltZSBIYWNrDQoNCglsb2NhbCBTcGxpdHRpbmdTbGltZSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJU3BsaXR0aW5nU2xpbWUuTmFtZSA9ICJTcGxpdHRpbmdTbGltZSINCglTcGxpdHRpbmdTbGltZS5UZXh0ID0gIlNwbGl0dGluZyBTbGltZSBIYWNrIChPZmYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBTcGxpdHRpbmdTbGltZSkNCg0KCVNwbGl0dGluZ1NsaW1lRW5hYmxlZCA9IGZhbHNlDQoNCglTcGxpdHRpbmdTbGltZS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBTcGxpdHRpbmdTbGltZUVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJU3BsaXR0aW5nU2xpbWVFbmFibGVkID0gdHJ1ZQ0KCQkJU3BsaXR0aW5nU2xpbWUuVGV4dCA9ICJTcGxpdHRpbmcgU2xpbWUgSGFjayAoT24pIg0KCQllbHNlDQoJCQlTcGxpdHRpbmdTbGltZUVuYWJsZWQgPSBmYWxzZQ0KCQkJU3BsaXR0aW5nU2xpbWUuVGV4dCA9ICJTcGxpdHRpbmcgU2xpbWUgSGFjayAoT2ZmKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gQW1hdXJvdGljIExhbWJlbnQgSGFjaw0KDQoJbG9jYWwgQW1hdXJvdGljTGFtYmVudCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJQW1hdXJvdGljTGFtYmVudC5OYW1lID0gIkFtYXVyb3RpY0xhbWJlbnQiDQoJQW1hdXJvdGljTGFtYmVudC5UZXh0ID0gIkFtYXVyb3RpYyBMYW1iZW50IEhhY2sgKE9mZikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEFtYXVyb3RpY0xhbWJlbnQpDQoNCglBbWF1cm90aWNMYW1iZW50RW5hYmxlZCA9IGZhbHNlDQoNCglBbWF1cm90aWNMYW1iZW50Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIEFtYXVyb3RpY0xhbWJlbnRFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUFtYXVyb3RpY0xhbWJlbnRFbmFibGVkID0gdHJ1ZQ0KCQkJQW1hdXJvdGljTGFtYmVudC5UZXh0ID0gIkFtYXVyb3RpYyBMYW1iZW50IEhhY2sgKE9uKSINCgkJZWxzZQ0KCQkJQW1hdXJvdGljTGFtYmVudEVuYWJsZWQgPSBmYWxzZQ0KCQkJQW1hdXJvdGljTGFtYmVudC5UZXh0ID0gIkFtYXVyb3RpYyBMYW1iZW50IEhhY2sgKE9mZikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEluc3RhbnQgUGxhc21hIEltcGxvc2lvbg0KDQoJbG9jYWwgUGxhc21hSW1wbG9zaW9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglQbGFzbWFJbXBsb3Npb24uTmFtZSA9ICJQbGFzbWFJbXBsb3Npb24iDQoJUGxhc21hSW1wbG9zaW9uLlRleHQgPSAiSW5zdGFudCBQbGFzbWEgSW1wbG9zaW9uIChPZmYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBQbGFzbWFJbXBsb3Npb24pDQoNCglQbGFzbWFJbXBsb3Npb25FbmFibGVkID0gZmFsc2UNCg0KCVBsYXNtYUltcGxvc2lvbi5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBQbGFzbWFJbXBsb3Npb25FbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCVBsYXNtYUltcGxvc2lvbkVuYWJsZWQgPSB0cnVlDQoJCQlQbGFzbWFJbXBsb3Npb24uVGV4dCA9ICJJbnN0YW50IFBsYXNtYSBJbXBsb3Npb24gKE9uKSINCgkJZWxzZQ0KCQkJUGxhc21hSW1wbG9zaW9uRW5hYmxlZCA9IGZhbHNlDQoJCQlQbGFzbWFJbXBsb3Npb24uVGV4dCA9ICJJbnN0YW50IFBsYXNtYSBJbXBsb3Npb24gKE9mZikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEZvcm1pZGFibGUgUm9hciBIYWNrDQoNCglsb2NhbCBGb3JtaWRhYmxlUm9hciA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJRm9ybWlkYWJsZVJvYXIuTmFtZSA9ICJGb3JtaWRhYmxlUm9hciINCglGb3JtaWRhYmxlUm9hci5UZXh0ID0gIkZvcm1pZGFibGUgUm9hciBIYWNrIChPZmYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBGb3JtaWRhYmxlUm9hcikNCg0KCUZvcm1pZGFibGVSb2FyRW5hYmxlZCA9IGZhbHNlDQoNCglGb3JtaWRhYmxlUm9hci5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBGb3JtaWRhYmxlUm9hckVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJRm9ybWlkYWJsZVJvYXJFbmFibGVkID0gdHJ1ZQ0KCQkJRm9ybWlkYWJsZVJvYXIuVGV4dCA9ICJGb3JtaWRhYmxlIFJvYXIgSGFjayAoT24pIg0KCQllbHNlDQoJCQlGb3JtaWRhYmxlUm9hckVuYWJsZWQgPSBmYWxzZQ0KCQkJRm9ybWlkYWJsZVJvYXIuVGV4dCA9ICJGb3JtaWRhYmxlIFJvYXIgSGFjayAoT2ZmKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gSW5zdGFudCBTa2VsZXRvbiBHcmFiDQoNCglsb2NhbCBTa2VsZXRvbkdyYWIgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCVNrZWxldG9uR3JhYi5OYW1lID0gIlNrZWxldG9uR3JhYiINCglTa2VsZXRvbkdyYWIuVGV4dCA9ICJJbnN0YW50IFNrZWxldG9uIEdyYWIgKE9mZikgW0FJTUVEXSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgU2tlbGV0b25HcmFiKQ0KDQoJU2tlbGV0b25HcmFiRW5hYmxlZCA9IGZhbHNlDQoNCglTa2VsZXRvbkdyYWIuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgU2tlbGV0b25HcmFiRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlTa2VsZXRvbkdyYWJFbmFibGVkID0gdHJ1ZQ0KCQkJU2tlbGV0b25HcmFiLlRleHQgPSAiSW5zdGFudCBTa2VsZXRvbiBHcmFiIChPbikgW0FJTUVEXSINCgkJZWxzZQ0KCQkJU2tlbGV0b25HcmFiRW5hYmxlZCA9IGZhbHNlDQoJCQlTa2VsZXRvbkdyYWIuVGV4dCA9ICJJbnN0YW50IFNrZWxldG9uIEdyYWIgKE9mZikgW0FJTUVEXSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gR3Jhdml0YXRpb25hbCBGaWVsZCBIYWNrDQoNCglsb2NhbCBHcmF2aXRhdGlvbmFsRmllbGQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUdyYXZpdGF0aW9uYWxGaWVsZC5OYW1lID0gIkdyYXZpdGF0aW9uYWxGaWVsZCINCglHcmF2aXRhdGlvbmFsRmllbGQuVGV4dCA9ICJHcmF2aXRhdGlvbmFsIEZpZWxkIEhhY2sgKE9mZikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEdyYXZpdGF0aW9uYWxGaWVsZCkNCg0KCUdyYXZpdGF0aW9uYWxGaWVsZEVuYWJsZWQgPSBmYWxzZQ0KDQoJR3Jhdml0YXRpb25hbEZpZWxkLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIEdyYXZpdGF0aW9uYWxGaWVsZEVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJR3Jhdml0YXRpb25hbEZpZWxkRW5hYmxlZCA9IHRydWUNCgkJCUdyYXZpdGF0aW9uYWxGaWVsZC5UZXh0ID0gIkdyYXZpdGF0aW9uYWwgRmllbGQgSGFjayAoT24pIg0KCQllbHNlDQoJCQlHcmF2aXRhdGlvbmFsRmllbGRFbmFibGVkID0gZmFsc2UNCgkJCUdyYXZpdGF0aW9uYWxGaWVsZC5UZXh0ID0gIkdyYXZpdGF0aW9uYWwgRmllbGQgSGFjayAoT2ZmKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gSW5zdGFudCBSb2NrIEFybW9yDQoNCglsb2NhbCBSb2NrQXJtb3IgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCVJvY2tBcm1vci5OYW1lID0gIlJvY2tBcm1vciINCglSb2NrQXJtb3IuVGV4dCA9ICJJbnN0YW50IFJvY2sgQXJtb3IiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFJvY2tBcm1vcikNCg0KCVJvY2tBcm1vci5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJCb2R5IENvbG9ycyIpIHRoZW4NCgkJCXBsYXllci5DaGFyYWN0ZXJbIkJvZHkgQ29sb3JzIl06RGVzdHJveSgpDQoJCWVuZA0KCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJFYXJ0aCIsICJSb2NrIEFybW9yIikNCgkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJFYXJ0aCIsICJSb2NrIEFybW9yIikNCgllbmQpDQoNCgktLS0tIFBsYXllciBtb2RpZmljYXRpb25zDQoJLS0gU2xpbWUgQnVkZGllcyBIYWNrDQoNCglsb2NhbCBTbGltZUJ1ZGRpZXMgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCVNsaW1lQnVkZGllcy5OYW1lID0gIlNsaW1lQnVkZGllcyINCglTbGltZUJ1ZGRpZXMuVGV4dCA9ICIoRykgU2xpbWUgQnVkZGllcyBIYWNrIChPZmYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBTbGltZUJ1ZGRpZXMpDQoNCglsb2NhbCBTbGltZUJ1ZGRpZXNFbmFibGVkID0gZmFsc2UNCg0KCVNsaW1lQnVkZGllcy5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBpc0dvbGQgb3IgaXNNYXN0ZXIgdGhlbg0KCQkJaWYgU2xpbWVCdWRkaWVzRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQkJU2xpbWVCdWRkaWVzRW5hYmxlZCA9IHRydWUNCgkJCQlTbGltZUJ1ZGRpZXMuVGV4dCA9ICIoRykgU2xpbWUgQnVkZGllcyBIYWNrIChPbikiDQoJCQllbHNlDQoJCQkJU2xpbWVCdWRkaWVzRW5hYmxlZCA9IGZhbHNlDQoJCQkJU2xpbWVCdWRkaWVzLlRleHQgPSAiKEcpIFNsaW1lIEJ1ZGRpZXMgSGFjayAoT2ZmKSINCgkJCWVuZA0KCQllbHNlDQoJCQlTbGltZUJ1ZGRpZXMuVGV4dCA9ICJNZW1iZXIgTm90IEdvbGQiDQoJCQl3YWl0KDEpDQoJCQlTbGltZUJ1ZGRpZXMuVGV4dCA9ICIoRykgU2xpbWUgQnVkZGllcyBIYWNrIChPZmYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBJbmVydGlhIEdyYXZpdHkNCg0KCWxvY2FsIEluZXJ0aWFHcmF2aXR5ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglJbmVydGlhR3Jhdml0eS5OYW1lID0gIkluZXJ0aWFHcmF2aXR5Ig0KCUluZXJ0aWFHcmF2aXR5LlRleHQgPSAiSW5lcnRpYSBHcmF2aXR5IChPZmYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBJbmVydGlhR3Jhdml0eSkNCg0KCUluZXJ0aWFHcmF2aXR5RW5hYmxlZCA9IGZhbHNlDQoNCglJbmVydGlhR3Jhdml0eS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBJbmVydGlhR3Jhdml0eUVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJSW5lcnRpYUdyYXZpdHlFbmFibGVkID0gdHJ1ZQ0KCQkJSW5lcnRpYUdyYXZpdHkuVGV4dCA9ICJJbmVydGlhIEdyYXZpdHkgKE9uKSINCgkJCWxvY2FsIEJvZHlGb3JjZSA9IEluc3RhbmNlLm5ldygiQm9keUZvcmNlIikNCgkJCUJvZHlGb3JjZS5QYXJlbnQgPSBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQNCgkJCUJvZHlGb3JjZS5OYW1lID0gIkluZXJ0aWFHcmF2aXR5Rm9yY2UiDQoJCQlCb2R5Rm9yY2UuRm9yY2UgPSBWZWN0b3IzLm5ldygwLCAxNjM4LCAwKQ0KCQllbHNlDQoJCQlJbmVydGlhR3Jhdml0eUVuYWJsZWQgPSBmYWxzZQ0KCQkJSW5lcnRpYUdyYXZpdHkuVGV4dCA9ICJJbmVydGlhIEdyYXZpdHkgKE9mZikiDQoJCQlpZiBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIkluZXJ0aWFHcmF2aXR5Rm9yY2UiKSB0aGVuDQoJCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkluZXJ0aWFHcmF2aXR5Rm9yY2U6RGVzdHJveSgpDQoJCQllbmQNCgkJZW5kDQoJZW5kKQ0KDQoJLS0gU3BlY3RyYWwgRW1ib2RpbWVudA0KDQoJbG9jYWwgU3BlY3RyYWxFbWJvZGltZW50ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglTcGVjdHJhbEVtYm9kaW1lbnQuTmFtZSA9ICJTcGVjdHJhbEVtYm9kaW1lbnQiDQoJU3BlY3RyYWxFbWJvZGltZW50LlRleHQgPSAiU3BlY3RyYWwgRW1ib2RpbWVudCBLZXliaW5kIChPZmYpIFtYXSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgU3BlY3RyYWxFbWJvZGltZW50KQ0KDQoJU3BlY3RyYWxFbWJvZGltZW50RW5hYmxlZCA9IGZhbHNlDQoNCglTcGVjdHJhbEVtYm9kaW1lbnQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgU3BlY3RyYWxFbWJvZGltZW50RW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlTcGVjdHJhbEVtYm9kaW1lbnRFbmFibGVkID0gdHJ1ZQ0KCQkJU3BlY3RyYWxFbWJvZGltZW50LlRleHQgPSAiU3BlY3RyYWwgRW1ib2RpbWVudCBLZXliaW5kIChPbikgW1hdIg0KCQllbHNlDQoJCQlTcGVjdHJhbEVtYm9kaW1lbnRFbmFibGVkID0gZmFsc2UNCgkJCVNwZWN0cmFsRW1ib2RpbWVudC5UZXh0ID0gIlNwZWN0cmFsIEVtYm9kaW1lbnQgS2V5YmluZCAoT2ZmKSBbWF0iDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEFudGktQmxpbmQNCg0KCWxvY2FsIEFudGlCbGluZCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJQW50aUJsaW5kLk5hbWUgPSAiQW50aUJsaW5kIg0KCUFudGlCbGluZC5UZXh0ID0gIkFudGktQmxpbmQgKE9mZikgW0tdIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBBbnRpQmxpbmQpDQoNCglBbnRpQmxpbmRFbmFibGVkID0gZmFsc2UNCg0KCWxvY2FsIG5vcm1hbEZvZ0NvbG9yID0gZ2FtZS5MaWdodGluZy5Gb2dDb2xvcg0KCWxvY2FsIG5vcm1hbEZvZ0VuZCA9IGdhbWUuTGlnaHRpbmcuRm9nRW5kDQoJbG9jYWwgbm9ybWFsQnJpZ2h0bmVzcyA9IGdhbWUuTGlnaHRpbmcuQnJpZ2h0bmVzcw0KCWxvY2FsIG5vcm1hbENsb2NrVGltZSA9IGdhbWUuTGlnaHRpbmcuQ2xvY2tUaW1lDQoNCglsb2NhbCBmdW5jdGlvbiBBbnRpQmxpbmRGdW5jKCkNCgkJaWYgQW50aUJsaW5kRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlBbnRpQmxpbmRFbmFibGVkID0gdHJ1ZQ0KCQkJQW50aUJsaW5kLlRleHQgPSAiQW50aS1CbGluZCAoT24pIFtLXSINCgkJCXdoaWxlIEFudGlCbGluZEVuYWJsZWQgZG8NCgkJCQl3YWl0KCkNCgkJCQlnYW1lLkxpZ2h0aW5nLkZvZ0NvbG9yID0gbm9ybWFsRm9nQ29sb3INCgkJCQlnYW1lLkxpZ2h0aW5nLkZvZ0VuZCA9IG5vcm1hbEZvZ0VuZA0KCQkJCWdhbWUuTGlnaHRpbmcuQnJpZ2h0bmVzcyA9IG5vcm1hbEJyaWdodG5lc3MNCgkJCQlnYW1lLkxpZ2h0aW5nLkNsb2NrVGltZSA9IG5vcm1hbENsb2NrVGltZQ0KCQkJZW5kDQoJCWVsc2UNCgkJCUFudGlCbGluZEVuYWJsZWQgPSBmYWxzZQ0KCQkJQW50aUJsaW5kLlRleHQgPSAiQW50aS1CbGluZCAoT2ZmKSBbS10iDQoJCWVuZA0KCWVuZA0KDQoJQW50aUJsaW5kLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChBbnRpQmxpbmRGdW5jKQ0KDQoJcGxheWVyOldhaXRGb3JDaGlsZCgiUGxheWVyR3VpIikuRGVzY2VuZGFudEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oZCkNCgkJaWYgQW50aUJsaW5kRW5hYmxlZCB0aGVuDQoJCQlpZiBkLk5hbWUgPT0gIlNjcmVlbkd1aSIgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCXBsYXllci5QbGF5ZXJHdWkuU2NyZWVuR3VpOkRlc3Ryb3koKQ0KCQkJZWxzZWlmIGQuTmFtZSA9PSAiRGlzdG9ydCIgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCXBsYXllci5QbGF5ZXJHdWkuRGlzdG9ydDpEZXN0cm95KCkNCgkJCWVuZA0KCQllbmQNCgllbmQpDQoNCgktLSBTcGVlZCBoYWNrDQoNCglsb2NhbCBTcGVlZGhhY2sgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCVNwZWVkaGFjay5OYW1lID0gIlNwZWVkaGFjayINCglTcGVlZGhhY2suVGV4dCA9ICJTcGVlZGhhY2sgW2RlZmF1bHQgNjRdIChPZmYpIFtUXSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgU3BlZWRoYWNrKQ0KDQoJU3BlZWRoYWNrRW5hYmxlZCA9IGZhbHNlDQoJU2V0U3BlZWQgPSA2NA0KDQoJZnVuY3Rpb24gbW9kaWZ5U3BlZWQoKQ0KCQlwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpLkNoYW5nZWQ6Y29ubmVjdChmdW5jdGlvbigpDQoJCQlpZiBTcGVlZGhhY2tFbmFibGVkIGFuZCBTZXRTcGVlZCB+PSBuaWwgdGhlbg0KCQkJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuV2Fsa1NwZWVkID0gU2V0U3BlZWQNCgkJCWVsc2UNCgkJCQlyZXR1cm4NCgkJCWVuZA0KCQllbmQpDQoJZW5kDQoNCglmdW5jdGlvbiBiZWdpblNwZWVkKCkNCgkJaWYgU3BlZWRoYWNrRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlTcGVlZGhhY2tFbmFibGVkID0gdHJ1ZQ0KCQkJU3BlZWRoYWNrLlRleHQgPSAiU3BlZWRoYWNrIFtkZWZhdWx0IDY0XSAoT24pIFtUXSINCgkJCW1vZGlmeVNwZWVkKCkNCgkJCXdhaXQoKQ0KCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5XYWxrU3BlZWQgPSBTZXRTcGVlZA0KCQkJd2hpbGUgU3BlZWRoYWNrRW5hYmxlZCBkbw0KCQkJCXdhaXQoKQ0KCQkJCWlmIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID09IDAgdGhlbg0KCQkJCQlyZXBlYXQgd2FpdCgpIHVudGlsIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoIH49IDANCgkJCQkJbW9kaWZ5U3BlZWQoKQ0KCQkJCQl3YWl0KCkNCgkJCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5XYWxrU3BlZWQgPSBTZXRTcGVlZA0KCQkJCWVuZA0KCQkJZW5kDQoJCWVsc2UNCgkJCVNwZWVkaGFja0VuYWJsZWQgPSBmYWxzZQ0KCQkJU3BlZWRoYWNrLlRleHQgPSAiU3BlZWRoYWNrIFtkZWZhdWx0IDY0XSAoT2ZmKSBbVF0iDQoJCWVuZA0KCWVuZA0KDQoJU3BlZWRoYWNrLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChiZWdpblNwZWVkKQ0KDQoJLS0tLSBCdWxsZXRzDQoJLS0gSHlwZXJhbmcgSGFjaw0KDQoJbG9jYWwgVGVjaFJhbmcgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCVRlY2hSYW5nLk5hbWUgPSAiVGVjaFJhbmciDQoJVGVjaFJhbmcuVGV4dCA9ICJIeXBlcmFuZyBIYWNrIChPZmYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBUZWNoUmFuZykNCg0KCWxvY2FsIEh5cGVyYW5nRW5hYmxlZCA9IGZhbHNlDQoNCglUZWNoUmFuZy5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBub3QgSHlwZXJhbmdFbmFibGVkIHRoZW4NCgkJCUh5cGVyYW5nRW5hYmxlZCA9IHRydWUNCgkJCVRlY2hSYW5nLlRleHQgPSAiSHlwZXJhbmcgSGFjayAoT24pIg0KCQllbHNlDQoJCQlIeXBlcmFuZ0VuYWJsZWQgPSBmYWxzZQ0KCQkJVGVjaFJhbmcudGV4dCA9ICJIeXBlcmFuZyBIYWNrIChPZmYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBBc3Rlcm9pZCBCZWx0IEhhY2sNCg0KCWxvY2FsIEFzdGVyb2lkQmVsdEhhY2sgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUFzdGVyb2lkQmVsdEhhY2suTmFtZSA9ICJBc3Rlcm9pZEJlbHRIYWNrIg0KCUFzdGVyb2lkQmVsdEhhY2suVGV4dCA9ICJBdGVyb2lkcyBCZWx0IEhhY2sgKE9mZikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEFzdGVyb2lkQmVsdEhhY2spDQoJDQoJbG9jYWwgQXN0ZXJvaWRCZWx0RW5hYmxlZCA9IGZhbHNlDQoJDQoJQXN0ZXJvaWRCZWx0SGFjay5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBBc3Rlcm9pZEJlbHRFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUFzdGVyb2lkQmVsdEVuYWJsZWQgPSB0cnVlDQoJCQlBc3Rlcm9pZEJlbHRIYWNrLlRleHQgPSAiQXN0ZXJvaWQgQmVsdCBIYWNrIChPbikiDQoJCWVsc2UNCgkJCUFzdGVyb2lkQmVsdEVuYWJsZWQgPSBmYWxzZQ0KCQkJQXN0ZXJvaWRCZWx0SGFjay5UZXh0ID0gIkF0ZXJvaWRzIEJlbHQgSGFjayAoT2ZmKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gVmlnb3IgR3lyYXRpb24gSGFjaw0KDQoJbG9jYWwgVmlnR3lyYXRIYWNrID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglWaWdHeXJhdEhhY2suTmFtZSA9ICJWaWdHeXJhdEhhY2siDQoJVmlnR3lyYXRIYWNrLlRleHQgPSAiVmlnb3IgR3lyYXRpb24gSGFjayAoT2ZmKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgVmlnR3lyYXRIYWNrKQ0KCQ0KCWxvY2FsIFZpZ29ySGFja0VuYWJsZWQgPSBmYWxzZQ0KCQ0KCVZpZ0d5cmF0SGFjay5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBWaWdvckhhY2tFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCVZpZ29ySGFja0VuYWJsZWQgPSB0cnVlDQoJCQlWaWdHeXJhdEhhY2suVGV4dCA9ICJWaWdvciBHeXJhdGlvbiBIYWNrIChPbikiDQoJCWVsc2UNCgkJCVZpZ29ySGFja0VuYWJsZWQgPSBmYWxzZQ0KCQkJVmlnR3lyYXRIYWNrLlRleHQgPSAiVmlnb3IgR3lyYXRpb24gSGFjayAoT2ZmKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gTGlnaHRuaW5nIEJhcnJhZ2UgSGFjaw0KDQoJbG9jYWwgQmFycmFnZSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJQmFycmFnZS5OYW1lID0gIkJhcnJhZ2UiDQoJQmFycmFnZS5UZXh0ID0gIkJhcnJhZ2UgSGFjayAoT2ZmKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQmFycmFnZSkNCg0KCUJhcnJhZ2UuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgbm90IFN0b3JtQnVsbGV0c0VuYWJsZWQgdGhlbg0KCQkJU3Rvcm1CdWxsZXRzRW5hYmxlZCA9IHRydWUNCgkJCUJhcnJhZ2UuVGV4dCA9ICJCYXJyYWdlIEhhY2sgKE9uKSINCgkJZWxzZQ0KCQkJU3Rvcm1CdWxsZXRzRW5hYmxlZCA9IGZhbHNlDQoJCQlCYXJyYWdlLlRleHQgPSAiQmFycmFnZSBIYWNrIChPZmYpIg0KCQllbmQNCgllbmQpDQoNCgktLS0tIEJsYXN0cw0KCS0tIE9yYml0YWwgU3RyaWtlIEhhY2sNCg0KCWxvY2FsIE9yYml0YWwgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCU9yYml0YWwuTmFtZSA9ICJPcmlidGFsIg0KCU9yYml0YWwuVGV4dCA9ICIoRykgT3JiaXRhbCBTdHJpa2UgSGFjayAoT2ZmKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgT3JiaXRhbCkNCg0KCWxvY2FsIE9yYml0YWxIYWNrRW5hYmxlZCA9IGZhbHNlDQoNCglPcmJpdGFsLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIGlzR29sZCBvciBpc01hc3RlciB0aGVuDQoJCQlpZiBub3QgT3JiaXRhbEhhY2tFbmFibGVkIHRoZW4NCgkJCQlPcmJpdGFsSGFja0VuYWJsZWQgPSB0cnVlDQoJCQkJT3JiaXRhbC5UZXh0ID0gIihHKSBPcmJpdGFsIFN0cmlrZSBIYWNrIChPbikiDQoJCQllbHNlDQoJCQkJT3JiaXRhbEhhY2tFbmFibGVkID0gZmFsc2UNCgkJCQlPcmJpdGFsLlRleHQgPSAiKEcpIE9yYml0YWwgU3RyaWtlIEhhY2sgKE9mZikiDQoJCQllbmQNCgkJZWxzZQ0KCQkJT3JiaXRhbC5UZXh0ID0gIk1lbWJlciBOb3QgR29sZCINCgkJCXdhaXQoMSkNCgkJCU9yYml0YWwuVGV4dCA9ICIoRykgT3JiaXRhbCBTdHJpa2UgSGFjayAoT2ZmKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gRG91YmxlIFJheSBIYWNrDQoNCglsb2NhbCBEb3VibGVSYXkgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCURvdWJsZVJheS5OYW1lID0gIkRvdWJsZVJheSINCglEb3VibGVSYXkuVGV4dCA9ICIoRykgRG91YmxlIFJheSBIYWNrIChPZmYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBEb3VibGVSYXkpDQoNCglEb3VibGVSYXkuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgaXNHb2xkIG9yIGlzTWFzdGVyIHRoZW4NCgkJCWlmIG5vdCBEb3VibGVSYXlFbmFibGVkIHRoZW4NCgkJCQlEb3VibGVSYXlFbmFibGVkID0gdHJ1ZQ0KCQkJCURvdWJsZVJheS5UZXh0ID0gIihHKSBEb3VibGUgUmF5IEhhY2sgKE9uKSINCgkJCWVsc2UNCgkJCQlEb3VibGVSYXlFbmFibGVkID0gZmFsc2UNCgkJCQlEb3VibGVSYXkuVGV4dCA9ICIoRykgRG91YmxlIFJheSBIYWNrIChPZmYpIg0KCQkJZW5kDQoJCWVsc2UNCgkJCURvdWJsZVJheS5UZXh0ID0gIk1lbWJlciBOb3QgR29sZCINCgkJCXdhaXQoMSkNCgkJCURvdWJsZVJheS5UZXh0ID0gIihHKSBEb3VibGUgUmF5IEhhY2sgKE9mZikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEhvbG9iZWFtIENhbWVyYSBBdHRhY2gNCg0KCWxvY2FsIEhvbG9iZWFtID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglIb2xvYmVhbS5OYW1lID0gIkhvbG9iZWFtIg0KCUhvbG9iZWFtLlRleHQgPSAiSG9sb2JlYW0gQ2FtZXJhIEF0dGFjaCAoT2ZmKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgSG9sb2JlYW0pDQoNCglIb2xvYmVhbUVuYWJsZWQgPSBmYWxzZQ0KDQoJZnVuY3Rpb24gYXR0YWNoQ2FtZXJhKHYpDQoJCWlmICh2IH49IG5pbCkgdGhlbg0KCQkJaWYgbm90KHZpZXdpbmcpIGFuZCAodi5OYW1lID09ICJIb2xvYmVhbSIpIHRoZW4NCgkJCQlnYW1lLldvcmtzcGFjZS5DYW1lcmEuQ2FtZXJhU3ViamVjdCA9IGdhbWUuV29ya3NwYWNlWycuSWdub3JlJ11bJy5BdHRhY2tzJ11bdi5OYW1lXQ0KCQkJZWxzZQ0KCQkJCXY6RGVzdHJveSgpDQoJCQkJcmV0dXJuDQoJCQllbmQNCgkJCQ0KCQkJdi5UcmFuc3BhcmVuY3kgPSAwDQoNCgkJCXdhaXQoNCkNCgkJCWlmIG5vdCh2aWV3aW5nKSBhbmQgbm90KGdhbWUuV29ya3NwYWNlLkNhbWVyYS5DYW1lcmFTdWJqZWN0ID09IHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQpIHRoZW4NCgkJCQlnYW1lLldvcmtzcGFjZS5DYW1lcmEuQ2FtZXJhU3ViamVjdCA9IHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQNCgkJCWVuZA0KCQkJDQoJCQl2OkRlc3Ryb3koKQ0KCQllbmQNCgllbmQNCgkNCglnYW1lLldvcmtzcGFjZVsnLklnbm9yZSddWycuQXR0YWNrcyddLkRlc2NlbmRhbnRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHYpDQoJCWlmIEhvbG9iZWFtRW5hYmxlZCB0aGVuDQoJCQlpZiAodi5OYW1lID09ICJQYXJ0IikgYW5kIChwbGF5ZXIuQ2hhcmFjdGVyKSB0aGVuDQoJCQkJbG9jYWwgZGlzdGFuY2UgPSAocGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdi5Qb3NpdGlvbikuTWFnbml0dWRlDQoJCQkJDQoJCQkJaWYgKHYuU2l6ZSA9PSBWZWN0b3IzLm5ldyg1LCA1LCA1KSkgYW5kIChkaXN0YW5jZSA8IDEwKSBhbmQgKHY6V2FpdEZvckNoaWxkKCJCb2R5VmVsb2NpdHkiLCAxKSkgYW5kICh2OldhaXRGb3JDaGlsZCgiQm9keUd5cm8iLCAxKSkgYW5kICh2LkJvZHlWZWxvY2l0eS5QID49IDEyNTApIHRoZW4NCgkJCQkNCgkJCQkJdi5OYW1lID0gIkhvbG9iZWFtIg0KCQkJCQ0KCQkJCQlwY2FsbChmdW5jdGlvbigpDQoJCQkJCQljb3JvdXRpbmUucmVzdW1lKGNvcm91dGluZS5jcmVhdGUoZnVuY3Rpb24oKSANCgkJCQkJCQlhdHRhY2hDYW1lcmEodikgDQoJCQkJCQllbmQpKQ0KCQkJCQllbmQpDQoJCQkJCQ0KCQkJCQlsb2NhbCBndWkgPSBwbGF5ZXIuUGxheWVyR3VpLk1haW4uU2tpbGxzQmFyDQoJCQkJCQ0KCQkJCQl3YWl0KDAuNSkNCgkJCQkJDQoJCQkJCXdoaWxlIHdhaXQoKSBkbw0KCQkJCQkJaWYgbm90KGd1aVsnMSddLkNELlRleHQgPT0gIi4uLiIpIGFuZCBub3QoZ3VpWycyJ10uQ0QuVGV4dCA9PSAiLi4uIikgYW5kIG5vdChndWlbJzMnXS5DRC5UZXh0ID09ICIuLi4iKSBhbmQgbm90KGd1aVsnNCddLkNELlRleHQgPT0gIi4uLiIpIGFuZCBub3QoZ3VpWyc1J10uQ0QuVGV4dCA9PSAiLi4uIikgdGhlbg0KCQkJCQkJCXBjYWxsKGZ1bmN0aW9uKCkNCgkJCQkJCQkJaWYgbm90KHZpZXdpbmcpIGFuZCBub3QoZ2FtZS5Xb3Jrc3BhY2UuQ2FtZXJhLkNhbWVyYVN1YmplY3QgPT0gcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZCkgdGhlbg0KCQkJCQkJCQkJZ2FtZS5Xb3Jrc3BhY2UuQ2FtZXJhLkNhbWVyYVN1YmplY3QgPSBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkDQoJCQkJCQkJCWVuZA0KCQkJDQoJCQkJCQkJCXY6RGVzdHJveSgpDQoJCQkJCQkJZW5kKQ0KCQkJCQkJCQ0KCQkJCQkJCWJyZWFrDQoJCQkJCQllbmQNCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZW5kKQ0KDQoJSG9sb2JlYW0uTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgSG9sb2JlYW1FbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUhvbG9iZWFtRW5hYmxlZCA9IHRydWUNCgkJCUhvbG9iZWFtLlRleHQgPSAiSG9sb2JlYW0gQ2FtZXJhIEF0dGFjaCAoT24pIg0KCQkJDQoJCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZVsnLklnbm9yZSddWycuQXR0YWNrcyddOkdldENoaWxkcmVuKCkpIGRvDQoJCQkJaWYgKHYuTmFtZSA9PSAiUGFydCIpIGFuZCAodjpXYWl0Rm9yQ2hpbGQoIkJvZHlWZWxvY2l0eSIsIDEpKSBhbmQgKHY6V2FpdEZvckNoaWxkKCJCb2R5R3lybyIsIDEpKSBhbmQgKHYuQm9keVZlbG9jaXR5LlAgPj0gMTI1MCkgdGhlbiB2OkRlc3Ryb3koKSBlbmQNCgkJCWVuZA0KCQllbHNlDQoJCQlIb2xvYmVhbUVuYWJsZWQgPSBmYWxzZQ0KCQkJSG9sb2JlYW0uVGV4dCA9ICJIb2xvYmVhbSBDYW1lcmEgQXR0YWNoIChPZmYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBDb250cm9sbGVkIEVjaG9lcw0KDQoJbG9jYWwgRWNob2VzID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglFY2hvZXMuTmFtZSA9ICJFY2hvZXMiDQoJRWNob2VzLlRleHQgPSAiQ29udHJvbGxlZCBFY2hvZXMgKE9mZikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEVjaG9lcykNCg0KCUNvbnRyb2xsZWRFY2hvZXNFbmFibGVkID0gZmFsc2UNCglFY2hvZXNQaGFzZSA9IDENCg0KCUVjaG9lcy5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBDb250cm9sbGVkRWNob2VzRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlDb250cm9sbGVkRWNob2VzRW5hYmxlZCA9IHRydWUNCgkJCUVjaG9lcy5UZXh0ID0gIkNvbnRyb2xsZWQgRWNob2VzIChPbikiDQoJCWVsc2UNCgkJCUNvbnRyb2xsZWRFY2hvZXNFbmFibGVkID0gZmFsc2UNCgkJCUVjaG9lcy5UZXh0ID0gIkNvbnRyb2xsZWQgRWNob2VzIChPZmYpIg0KCQllbmQNCgllbmQpDQoNCgktLS0tIFNoaWVsZHMNCgktLSBDcnlzdGFsIEFybWFtZW50IEhhY2sNCg0KCWxvY2FsIENyeXN0YWxBcm1hbWVudCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJQ3J5c3RhbEFybWFtZW50Lk5hbWUgPSAiQ3J5c3RhbEFybWFtZW50Ig0KCUNyeXN0YWxBcm1hbWVudC5UZXh0ID0gIkluc3RhbnQgQ3J5c3RhbCBBcm1hbWVudCAoT2ZmKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQ3J5c3RhbEFybWFtZW50KQ0KDQoJQ3J5c3RhbEFybWFtZW50RW5hYmxlZCA9IGZhbHNlDQoNCglDcnlzdGFsQXJtYW1lbnQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgQ3J5c3RhbEFybWFtZW50RW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlDcnlzdGFsQXJtYW1lbnRFbmFibGVkID0gdHJ1ZQ0KCQkJQ3J5c3RhbEFybWFtZW50LlRleHQgPSAiSW5zdGFudCBDcnlzdGFsIEFybWFtZW50IChPbikiDQoJCWVsc2UNCgkJCUNyeXN0YWxBcm1hbWVudEVuYWJsZWQgPSBmYWxzZQ0KCQkJQ3J5c3RhbEFybWFtZW50LlRleHQgPSAiSW5zdGFudCBDcnlzdGFsIEFybWFtZW50IChPZmYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBHcmF2aXRhbCBHbG9iZSBIYWNrDQoNCglsb2NhbCBHcmF2aXRhbEdsb2JlID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglHcmF2aXRhbEdsb2JlLk5hbWUgPSAiR3Jhdml0YWxHbG9iZSINCglHcmF2aXRhbEdsb2JlLlRleHQgPSAiR3Jhdml0YWwgR2xvYmUgSGFjayAoT2ZmKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgR3Jhdml0YWxHbG9iZSkNCg0KCUdyYXZpdGFsR2xvYmVFbmFibGVkID0gZmFsc2UNCg0KCUdyYXZpdGFsR2xvYmUuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgR3Jhdml0YWxHbG9iZUVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJR3Jhdml0YWxHbG9iZUVuYWJsZWQgPSB0cnVlDQoJCQlHcmF2aXRhbEdsb2JlLlRleHQgPSAiR3Jhdml0YWwgR2xvYmUgSGFjayAoT24pIg0KCQllbHNlDQoJCQlHcmF2aXRhbEdsb2JlRW5hYmxlZCA9IGZhbHNlDQoJCQlHcmF2aXRhbEdsb2JlLlRleHQgPSAiR3Jhdml0YWwgR2xvYmUgSGFjayAoT2ZmKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0tLSBVbHRzDQoJLS0gUmVhcGVyJ3MgUmFnZQ0KCWxvY2FsIFJlYXBlclVsdCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJUmVhcGVyVWx0Lk5hbWUgPSAiUmVhcGVyVWx0Ig0KCVJlYXBlclVsdC5UZXh0ID0gIihHKSBSZWFwZXIncyBSYWdlIEhhY2sgKE9mZikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFJlYXBlclVsdCkNCg0KCWxvY2FsIFJlYXBlclVsdEVuYWJsZWQgPSBmYWxzZQ0KDQoJUmVhcGVyVWx0Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIGlzR29sZCBvciBpc01hc3RlciB0aGVuDQoJCQlpZiBub3QgUmVhcGVyVWx0RW5hYmxlZCB0aGVuDQoJCQkJUmVhcGVyVWx0RW5hYmxlZCA9IHRydWUNCgkJCQlSZWFwZXJVbHQuVGV4dCA9ICIoRykgUmVhcGVyJ3MgUmFnZSBIYWNrIChPbikiDQoJCQllbHNlDQoJCQkJUmVhcGVyVWx0RW5hYmxlZCA9IGZhbHNlDQoJCQkJUmVhcGVyVWx0LlRleHQgPSAiKEcpIFJlYXBlcidzIFJhZ2UgSGFjayAoT2ZmKSINCgkJCWVuZA0KCQllbHNlDQoJCQlSZWFwZXJVbHQuVGV4dCA9ICJNZW1iZXIgTm90IEdvbGQiDQoJCQl3YWl0KDEpDQoJCQlSZWFwZXJVbHQuVGV4dCA9ICIoRykgUmVhcGVyJ3MgUmFnZSBIYWNrIChPZmYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBBYmxhemUgSnVkZ2VtZW50IEhhY2sNCg0KCWxvY2FsIEFibGF6ZUp1ZGdlbWVudCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJQWJsYXplSnVkZ2VtZW50Lk5hbWUgPSAiQWJsYXplSnVkZ2VtZW50Ig0KCUFibGF6ZUp1ZGdlbWVudC5UZXh0ID0gIkFibGF6ZSBKdWRnZW1lbnQgSGFjayAoT2ZmKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQWJsYXplSnVkZ2VtZW50KQ0KDQoJQWJsYXplSnVkZ2VtZW50SGFja0VuYWJsZWQgPSBmYWxzZQ0KDQoJQWJsYXplSnVkZ2VtZW50Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIEFibGF6ZUp1ZGdlbWVudEhhY2tFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUFibGF6ZUp1ZGdlbWVudEhhY2tFbmFibGVkID0gdHJ1ZQ0KCQkJQWJsYXplSnVkZ2VtZW50LlRleHQgPSAiQWJsYXplIEp1ZGdlbWVudCBIYWNrIChPbikiDQoJCWVsc2UNCgkJCUFibGF6ZUp1ZGdlbWVudEhhY2tFbmFibGVkID0gZmFsc2UNCgkJCUFibGF6ZUp1ZGdlbWVudC5UZXh0ID0gIkFibGF6ZSBKdWRnZW1lbnQgSGFjayAoT2ZmKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gVm9pZCBPcGVuaW5nIEhhY2sNCg0KCWxvY2FsIFZvaWRPcGVuaW5nID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglWb2lkT3BlbmluZy5OYW1lID0gIlZvaWRPcGVuaW5nIg0KCVZvaWRPcGVuaW5nLlRleHQgPSAiVm9pZCBPcGVuaW5nIEhhY2sgKE9mZikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFZvaWRPcGVuaW5nKQ0KDQoJVm9pZE9wZW5pbmdIYWNrRW5hYmxlZCA9IGZhbHNlDQoNCglWb2lkT3BlbmluZy5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBWb2lkT3BlbmluZ0hhY2tFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCVZvaWRPcGVuaW5nSGFja0VuYWJsZWQgPSB0cnVlDQoJCQlWb2lkT3BlbmluZy5UZXh0ID0gIlZvaWQgT3BlbmluZyBIYWNrIChPbikiDQoJCWVsc2UNCgkJCVZvaWRPcGVuaW5nSGFja0VuYWJsZWQgPSBmYWxzZQ0KCQkJVm9pZE9wZW5pbmcuVGV4dCA9ICJWb2lkIE9wZW5pbmcgSGFjayAoT2ZmKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gVGhlIFdvcmxkIEhhY2sNCg0KCWxvY2FsIFRoZVdvcmxkID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglUaGVXb3JsZC5OYW1lID0gIlRoZVdvcmxkIg0KCVRoZVdvcmxkLlRleHQgPSAiVGhlIFdvcmxkIEhhY2sgKE9mZikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFRoZVdvcmxkKQ0KDQoJVGhlV29ybGRFbmFibGVkID0gZmFsc2UNCg0KCVRoZVdvcmxkLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIFRoZVdvcmxkRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlUaGVXb3JsZEVuYWJsZWQgPSB0cnVlDQoJCQlUaGVXb3JsZC5UZXh0ID0gIlRoZSBXb3JsZCBIYWNrIChPbikiDQoJCWVsc2UNCgkJCVRoZVdvcmxkRW5hYmxlZCA9IGZhbHNlDQoJCQlUaGVXb3JsZC5UZXh0ID0gIlRoZSBXb3JsZCBIYWNrIChPZmYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBQb2xhcmlzIEhhY2sNCg0KCWxvY2FsIFBvbGFyaXMgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCVBvbGFyaXMuTmFtZSA9ICJQb2xhcmlzIg0KCVBvbGFyaXMuVGV4dCA9ICJQb2xhcmlzIEhhY2sgKE9mZikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFBvbGFyaXMpDQoNCglQb2xhcmlzRW5hYmxlZCA9IGZhbHNlDQoNCglQb2xhcmlzLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIFBvbGFyaXNFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCVBvbGFyaXNFbmFibGVkID0gdHJ1ZQ0KCQkJUG9sYXJpcy5UZXh0ID0gIlBvbGFyaXMgSGFjayAoT24pIg0KCQllbHNlDQoJCQlQb2xhcmlzRW5hYmxlZCA9IGZhbHNlDQoJCQlQb2xhcmlzLlRleHQgPSAiUG9sYXJpcyBIYWNrIChPZmYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBJbnN0YW50IFNoYXR0ZXJpbmcgRXJ1cHRpb24NCg0KCWxvY2FsIFNoYXR0ZXJpbmdFcnVwdGlvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJU2hhdHRlcmluZ0VydXB0aW9uLk5hbWUgPSAiU2hhdHRlcmluZ0VydXB0aW9uIg0KCVNoYXR0ZXJpbmdFcnVwdGlvbi5UZXh0ID0gIkluc3RhbnQgU2hhdHRlcmluZyBFcnVwdGlvbiAoT2ZmKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgU2hhdHRlcmluZ0VydXB0aW9uKQ0KDQoJU2hhdHRlcmluZ0VydXB0aW9uRW5hYmxlZCA9IGZhbHNlDQoNCglTaGF0dGVyaW5nRXJ1cHRpb24uTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgU2hhdHRlcmluZ0VydXB0aW9uRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlTaGF0dGVyaW5nRXJ1cHRpb25FbmFibGVkID0gdHJ1ZQ0KCQkJU2hhdHRlcmluZ0VydXB0aW9uLlRleHQgPSAiSW5zdGFudCBTaGF0dGVyaW5nIEVydXB0aW9uIChPbikiDQoJCWVsc2UNCgkJCVNoYXR0ZXJpbmdFcnVwdGlvbkVuYWJsZWQgPSBmYWxzZQ0KCQkJU2hhdHRlcmluZ0VydXB0aW9uLlRleHQgPSAiSW5zdGFudCBTaGF0dGVyaW5nIEVydXB0aW9uIChPZmYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBFdGhlcmVhbCBBY3VtZW4gSGFjaw0KDQoJbG9jYWwgRXRoZXJlYWxBY3VtZW4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUV0aGVyZWFsQWN1bWVuLk5hbWUgPSAiRXRoZXJlYWxBY3VtZW4iDQoJRXRoZXJlYWxBY3VtZW4uVGV4dCA9ICJFdGhlcmVhbCBBY3VtZW4gSGFjayAoT2ZmKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgRXRoZXJlYWxBY3VtZW4pDQoNCglFdGhlcmVhbEFjdW1lbkVuYWJsZWQgPSBmYWxzZQ0KDQoJRXRoZXJlYWxBY3VtZW4uTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgRXRoZXJlYWxBY3VtZW5FbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUV0aGVyZWFsQWN1bWVuRW5hYmxlZCA9IHRydWUNCgkJCUV0aGVyZWFsQWN1bWVuLlRleHQgPSAiRXRoZXJlYWwgQWN1bWVuIEhhY2sgKE9uKSINCgkJZWxzZQ0KCQkJRXRoZXJlYWxBY3VtZW5FbmFibGVkID0gZmFsc2UNCgkJCUV0aGVyZWFsQWN1bWVuLlRleHQgPSAiRXRoZXJlYWwgQWN1bWVuIEhhY2sgKE9mZikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIFRveGljIEJhc2lsaXNrIEhhY2sNCg0KCWxvY2FsIFRveGljQmFzaWxpc2sgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCVRveGljQmFzaWxpc2suTmFtZSA9ICJUb3hpY0Jhc2lsaXNrIg0KCVRveGljQmFzaWxpc2suVGV4dCA9ICJUb3hpYyBCYXNpbGlzayBIYWNrIChPZmYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBUb3hpY0Jhc2lsaXNrKQ0KDQoJVG94aWNCYXNpbGlza0VuYWJsZWQgPSBmYWxzZQ0KDQoJVG94aWNCYXNpbGlzay5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBUb3hpY0Jhc2lsaXNrRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlUb3hpY0Jhc2lsaXNrRW5hYmxlZCA9IHRydWUNCgkJCVRveGljQmFzaWxpc2suVGV4dCA9ICJUb3hpYyBCYXNpbGlzayBIYWNrIChPbikiDQoJCWVsc2UNCgkJCVRveGljQmFzaWxpc2tFbmFibGVkID0gZmFsc2UNCgkJCVRveGljQmFzaWxpc2suVGV4dCA9ICJUb3hpYyBCYXNpbGlzayBIYWNrIChPZmYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBBcmNhbmUgR3VhcmRpYW4gSGFjaw0KDQoJbG9jYWwgQXJjYW5lR3VhcmRpYW4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUFyY2FuZUd1YXJkaWFuLk5hbWUgPSAiQXJjYW5lR3VhcmRpYW4iDQoJQXJjYW5lR3VhcmRpYW4uVGV4dCA9ICJBcmNhbmUgR3VhcmRpYW4gSGFjayAoT2ZmKSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQXJjYW5lR3VhcmRpYW4pDQoNCglBcmNhbmVHdWFyZGlhbkVuYWJsZWQgPSBmYWxzZQ0KDQoJQXJjYW5lR3VhcmRpYW4uTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgQXJjYW5lR3VhcmRpYW5FbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUFyY2FuZUd1YXJkaWFuRW5hYmxlZCA9IHRydWUNCgkJCUFyY2FuZUd1YXJkaWFuLlRleHQgPSAiQXJjYW5lIEd1YXJkaWFuIEhhY2sgKE9uKSINCgkJZWxzZQ0KCQkJQXJjYW5lR3VhcmRpYW5FbmFibGVkID0gZmFsc2UNCgkJCUFyY2FuZUd1YXJkaWFuLlRleHQgPSAiQXJjYW5lIEd1YXJkaWFuIEhhY2sgKE9mZikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIFZpcnR1YWwgWm9uZSBIYWNrDQoNCglsb2NhbCBWaXJ0dWFsWm9uZSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJVmlydHVhbFpvbmUuTmFtZSA9ICJWaXJ0dWFsWm9uZSINCglWaXJ0dWFsWm9uZS5UZXh0ID0gIlZpcnR1YWwgWm9uZSBIYWNrIChPZmYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBWaXJ0dWFsWm9uZSkNCg0KCVZpcnR1YWxab25lRW5hYmxlZCA9IGZhbHNlDQoNCglWaXJ0dWFsWm9uZS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBWaXJ0dWFsWm9uZUVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJVmlydHVhbFpvbmVFbmFibGVkID0gdHJ1ZQ0KCQkJVmlydHVhbFpvbmUuVGV4dCA9ICJWaXJ0dWFsIFpvbmUgSGFjayAoT24pIg0KCQllbHNlDQoJCQlWaXJ0dWFsWm9uZUVuYWJsZWQgPSBmYWxzZQ0KCQkJVmlydHVhbFpvbmUuVGV4dCA9ICJWaXJ0dWFsIFpvbmUgSGFjayAoT2ZmKSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0tLSBNaXNjZWxsYW5lb3VzDQoJLS0gU2hhcmQgQ29sb3JzDQoNCglsb2NhbCBSYW5kb21Db2xvcnMgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCVJhbmRvbUNvbG9ycy5OYW1lID0gIlJhbmRvbUNvbG9ycyINCglSYW5kb21Db2xvcnMuVGV4dCA9ICJSYW5kb20gU2hhcmQgQ29sb3JzIChPZmYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBSYW5kb21Db2xvcnMpDQoNCglsb2NhbCBDb2xvcnNMaXN0ID0geyJSZWFsbHkgcmVkIiwgIlJlYWxseSBibHVlIiwgIk5ldyBZZWxsZXIiLCAiSG90IHBpbmsiLCAiUm95YWwgcHVycGxlIiwgIkxpbWUgZ3JlZW4iLCAiRGVlcCBvcmFuZ2UiLCAiVG9vdGhwYXN0ZSIsICJJbnN0aXR1dGlvbmFsIHdoaXRlIn0NCglsb2NhbCBTaGFyZENvbG9yRW5hYmxlZCA9IGZhbHNlDQoNCglsb2NhbCBmdW5jdGlvbiBzaGFyZFJhbmRvbWl6ZXIoKQ0KCQlmb3IgaSwgY2hpbGQgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2VbIi5JZ25vcmUiXVsiLlNlcnZlckVmZmVjdHMiXTpHZXRDaGlsZHJlbigpKSBkbw0KCQkJaWYgbm90IGNoaWxkLk5hbWUgPT0gIlNoYXJkIiB0aGVuIHByaW50KCJDaGlsZCBub3QgYSBTaGFyZCIpDQoJCQllbHNlaWYgY2hpbGQuTmFtZSA9PSAiU2hhcmQiIGFuZCBub3QgY2hpbGQ6RmluZEZpcnN0Q2hpbGQoIkNDQm9vbCIpIHRoZW4NCgkJCQl4cGNhbGwoZnVuY3Rpb24oKQ0KCQkJCQljaGlsZC5Ccmlja0NvbG9yID0gQnJpY2tDb2xvci5uZXcoQ29sb3JzTGlzdFttYXRoLnJhbmRvbSgxLDkpXSkNCgkJCQllbmQsIGZ1bmN0aW9uKGUpDQoJCQkJCXByaW50KCJFbmNvdW50ZXJlZCBhbiBlcnJvciEgeHBjYWxsIHNheXM6IiwgZSkNCgkJCQkJd2FybigiW3RyYWNlYmFja10gIiwgZGVidWcudHJhY2ViYWNrKCkpDQoJCQkJZW5kKQ0KCQkJCWxvY2FsIENDQm9vbCA9IEluc3RhbmNlLm5ldygiQm9vbFZhbHVlIikNCgkJCQlDQ0Jvb2wuTmFtZSA9ICJDQ0Jvb2wiDQoJCQkJQ0NCb29sLlBhcmVudCA9IGNoaWxkDQoJCQkJQ0NCb29sLlZhbHVlID0gdHJ1ZQ0KCQkJZWxzZWlmIGNoaWxkLk5hbWUgPT0gIlNoYXJkIiBhbmQgY2hpbGQ6RmluZEZpcnN0Q2hpbGQoIkNDQm9vbCIpLlZhbHVlIHRoZW4gZW5kDQoJCWVuZA0KCWVuZA0KDQoJUmFuZG9tQ29sb3JzLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIFNoYXJkQ29sb3JFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCVNoYXJkQ29sb3JFbmFibGVkID0gdHJ1ZQ0KCQkJcHJpbnQoIlR1cm5lZCBvbiBSYW5kb20gU2hhcmQgQ29sb3JzIikNCgkJCVJhbmRvbUNvbG9ycy5UZXh0ID0gIlJhbmRvbSBTaGFyZCBDb2xvcnMgKE9uKSINCgkJCXdoaWxlIFNoYXJkQ29sb3JFbmFibGVkIGRvDQoJCQkJc2hhcmRSYW5kb21pemVyKCkNCgkJCQl3YWl0KDEpDQoJCQllbmQNCgkJZWxzZQ0KCQkJU2hhcmRDb2xvckVuYWJsZWQgPSBmYWxzZQ0KCQkJUmFuZG9tQ29sb3JzLlRleHQgPSAiUmFuZG9tIFNoYXJkIENvbG9ycyAoT2ZmKSINCgkJZW5kCQ0KCWVuZCkNCg0KCS0tIEFudGktTGFnDQoNCglsb2NhbCBBbnRpTGFnID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglBbnRpTGFnLk5hbWUgPSAiQW50aUxhZyINCglBbnRpTGFnLlRleHQgPSAiQW50aS1MYWcgKE9mZikiDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEFudGlMYWcpDQoNCglBbnRpTGFnRW5hYmxlZCA9IGZhbHNlDQoNCglmdW5jdGlvbiByZW1vdmVMYWcoKQ0KCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZVsnLklnbm9yZSddWycuTG9jYWxFZmZlY3RzJ106R2V0Q2hpbGRyZW4oKSkgZG8NCgkJCWlmIHY6RmluZEZpcnN0Q2hpbGQoIk1lc2giKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiRDEiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiRDIiKSB0aGVuDQoJCQkJaWYgdi5EMS5UZXh0dXJlID09ICJyYnhhc3NldGlkOi8vMjY3MTYyMjY0NiIgdGhlbg0KCQkJCQl2OkRlc3Ryb3koKQ0KCQkJCWVuZA0KCQkJZWxzZWlmIHY6RmluZEZpcnN0Q2hpbGQoIkZyb250RGVjYWwiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiQmFja0RlY2FsIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIlNwZWNpYWxNZXNoIikgdGhlbg0KCQkJCWlmIHYuRnJvbnREZWNhbC5UZXh0dXJlID09ICJyYnhhc3NldGlkOi8vOTc5MDA0MjkxIiB0aGVuDQoJCQkJCXY6RGVzdHJveSgpDQoJCQkJZW5kDQoJCQllbHNlaWYgKHYuTmFtZSA9PSAiT3JiaXRhbFN0cmlrZSIpIG9yICh2Lk5hbWUgPT0gIkJvbHRQYXJ0Iikgb3IgKHN0cmluZy5zdWIodi5OYW1lLCAxLCAxMCkgPT0gIlNvdW5kX1RlY2giKSB0aGVuDQoJCQkJdjpEZXN0cm95KCkNCgkJCWVsc2VpZiAodi5OYW1lID09ICJMaWdodERpc2MiKSB0aGVuDQoJCQkJdjpEZXN0cm95KCkNCgkJCWVuZA0KCQllbmQNCg0KCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZVsnLklnbm9yZSddWycuQXR0YWNrcyddOkdldENoaWxkcmVuKCkpIGRvDQoJCQlpZiB2LkNvbG9yID09IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCkgdGhlbg0KCQkJCWlmIHYuTWVzaC5NZXNoVHlwZSA9PSAiU3BoZXJlIiB0aGVuDQoJCQkJCXdhaXQoKQ0KCQkJCQl2OkRlc3Ryb3koKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KDQoJCWZvciBpLCB2IGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvDQoJCQlmb3IgXywgeCBpbiBwYWlycyh2LkNoYXJhY3RlcjpHZXRDaGlsZHJlbigpKSBkbw0KCQkJCWlmIHguTmFtZSA9PSAiQW5nZWxTd29yZCIgdGhlbg0KCQkJCQl4OkRlc3Ryb3koKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KDQoJZ2FtZS5Xb3Jrc3BhY2UuRGVzY2VuZGFudEFkZGVkOmNvbm5lY3QoZnVuY3Rpb24odikNCgkJaWYgQW50aUxhZ0VuYWJsZWQgdGhlbg0KCQkJaWYgdjpGaW5kRmlyc3RDaGlsZCgiTWVzaCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJEMSIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJEMiIpIHRoZW4NCgkJCQlpZiB2LkQxLlRleHR1cmUgPT0gInJieGFzc2V0aWQ6Ly8yNjcxNjIyNjQ2IiB0aGVuDQoJCQkJCXdhaXQoKQ0KCQkJCQl2OkRlc3Ryb3koKQ0KCQkJCWVuZA0KCQkJZWxzZWlmIHYuTmFtZSA9PSAiQW5nZWxTd29yZCIgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCXY6RGVzdHJveSgpDQoJCQllbHNlaWYgdjpGaW5kRmlyc3RDaGlsZCgiRnJvbnREZWNhbCIpIHRoZW4NCgkJCQlpZiB2LkZyb250RGVjYWwuVGV4dHVyZSA9PSAicmJ4YXNzZXRpZDovLzk3OTAwNDI5MSIgdGhlbg0KCQkJCQl3YWl0KCkNCgkJCQkJdjpEZXN0cm95KCkNCgkJCQllbmQNCgkJCWVsc2VpZiB2LkNvbG9yID09IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCkgdGhlbg0KCQkJCWlmIHYuTWVzaC5NZXNoVHlwZSA9PSAiU3BoZXJlIiB0aGVuDQoJCQkJCXdhaXQoKQ0KCQkJCQl2OkRlc3Ryb3koKQ0KCQkJCWVuZA0KCQkJZWxzZWlmICh2Lk5hbWUgPT0gIk9yYml0YWxTdHJpa2UiKSBvciAodi5OYW1lID09ICJCb2x0UGFydCIpIG9yIChzdHJpbmcuc3ViKHYuTmFtZSwgMSwgMTApID09ICJTb3VuZF9UZWNoIikgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCXY6RGVzdHJveSgpDQoJCQllbmQNCgkJZW5kDQoJZW5kKQ0KDQoJQW50aUxhZy5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBBbnRpTGFnRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlBbnRpTGFnRW5hYmxlZCA9IHRydWUNCgkJCUFudGlMYWcuVGV4dCA9ICJBbnRpLUxhZyAoT24pIg0KCQkJcmVtb3ZlTGFnKCkNCgkJZWxzZQ0KCQkJQW50aUxhZ0VuYWJsZWQgPSBmYWxzZQ0KCQkJQW50aUxhZy5UZXh0ID0gIkFudGktTGFnIChPZmYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBJZ25vcmUgUGh5c2ljcw0KDQoJbG9jYWwgSWdub3JlUGh5c2ljcyA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJSWdub3JlUGh5c2ljcy5OYW1lID0gImZJZ25vcmVQaHlzaWNzIg0KCUlnbm9yZVBoeXNpY3MuVGV4dCA9ICJJZ25vcmUgUGh5c2ljcyAoT2ZmKSBbWl0iDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIElnbm9yZVBoeXNpY3MpDQoNCglJZ25vcmVQaHlzaWNzRW5hYmxlZCA9IGZhbHNlDQoNCglsb2NhbCBmdW5jdGlvbiBpbml0aWFsTnVsbGlmeUZvcmNlcygpDQoJCWZvciBpLCB2IGluIHBhaXJzKHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDpHZXRDaGlsZHJlbigpKSBkbw0KCQkJaWYgdjpJc0EoIkJvZHlHeXJvIikgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCXY6RGVzdHJveSgpDQoJCQllbHNlaWYgdjpJc0EoIkJvZHlQb3NpdGlvbiIpIHRoZW4NCgkJCQl3YWl0KCkNCgkJCQl2OkRlc3Ryb3koKQ0KCQkJZWxzZWlmIHY6SXNBKCJCb2R5VmVsb2NpdHkiKSB0aGVuDQoJCQkJd2FpdCgpDQoJCQkJdjpEZXN0cm95KCkNCgkJCWVsc2VpZiB2OklzQSgiQm9keUFuZ3VsYXJWZWxvY2l0eSIpIHRoZW4NCgkJCQl3YWl0KCkNCgkJCQl2OkRlc3Ryb3koKQ0KCQkJZWxzZWlmIHY6SXNBKCJCb2R5Rm9yY2UiKSB0aGVuDQoJCQkJd2FpdCgpDQoJCQkJdjpEZXN0cm95KCkNCgkJCWVsc2VpZiB2OklzQSgiQm9keVRocnVzdCIpIHRoZW4NCgkJCQl3YWl0KCkNCgkJCQl2OkRlc3Ryb3koKQ0KCQkJZWxzZWlmIHY6SXNBKCJSb2NrZXRQcm9wdWxzaW9uIikgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCXY6RGVzdHJveSgpDQoJCQllbmQNCgkJZW5kDQoNCgkJZm9yIGksIHYgaW4gcGFpcnMocGxheWVyLkNoYXJhY3Rlci5GbGlwc0hvbGRlcjpHZXRDaGlsZHJlbigpKSBkbw0KCQkJaWYgdjpJc0EoIkJvZHlHeXJvIikgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCXY6RGVzdHJveSgpDQoJCQllbHNlaWYgdjpJc0EoIkJvZHlQb3NpdGlvbiIpIHRoZW4NCgkJCQl3YWl0KCkNCgkJCQl2OkRlc3Ryb3koKQ0KCQkJZWxzZWlmIHY6SXNBKCJCb2R5VmVsb2NpdHkiKSB0aGVuDQoJCQkJd2FpdCgpDQoJCQkJdjpEZXN0cm95KCkNCgkJCWVsc2VpZiB2OklzQSgiQm9keUFuZ3VsYXJWZWxvY2l0eSIpIHRoZW4NCgkJCQl3YWl0KCkNCgkJCQl2OkRlc3Ryb3koKQ0KCQkJZWxzZWlmIHY6SXNBKCJCb2R5Rm9yY2UiKSB0aGVuDQoJCQkJd2FpdCgpDQoJCQkJdjpEZXN0cm95KCkNCgkJCWVsc2VpZiB2OklzQSgiQm9keVRocnVzdCIpIHRoZW4NCgkJCQl3YWl0KCkNCgkJCQl2OkRlc3Ryb3koKQ0KCQkJZWxzZWlmIHY6SXNBKCJSb2NrZXRQcm9wdWxzaW9uIikgdGhlbg0KCQkJCXdhaXQoKQ0KCQkJCXY6RGVzdHJveSgpDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoNCglsb2NhbCBmdW5jdGlvbiBBZnRlck51bGxpZnlGb3JjZXMoKQ0KCQlwbGF5ZXIuQ2hhcmFjdGVyLkRlc2NlbmRhbnRBZGRlZDpjb25uZWN0KGZ1bmN0aW9uKHYpDQoJCQlpZiBJZ25vcmVQaHlzaWNzRW5hYmxlZCB0aGVuDQoJCQkJaWYgdjpJc0EoIkJvZHlHeXJvIikgdGhlbg0KCQkJCQl3YWl0KCkNCgkJCQkJdjpEZXN0cm95KCkNCgkJCQllbHNlaWYgdjpJc0EoIkJvZHlQb3NpdGlvbiIpIHRoZW4NCgkJCQkJd2FpdCgpDQoJCQkJCXY6RGVzdHJveSgpDQoJCQkJZWxzZWlmIHY6SXNBKCJCb2R5VmVsb2NpdHkiKSB0aGVuDQoJCQkJCXdhaXQoKQ0KCQkJCQl2OkRlc3Ryb3koKQ0KCQkJCWVsc2VpZiB2OklzQSgiQm9keUFuZ3VsYXJWZWxvY2l0eSIpIHRoZW4NCgkJCQkJd2FpdCgpDQoJCQkJCXY6RGVzdHJveSgpDQoJCQkJZWxzZWlmIHY6SXNBKCJCb2R5Rm9yY2UiKSB0aGVuDQoJCQkJCXdhaXQoKQ0KCQkJCQl2OkRlc3Ryb3koKQ0KCQkJCWVsc2VpZiB2OklzQSgiQm9keVRocnVzdCIpIHRoZW4NCgkJCQkJd2FpdCgpDQoJCQkJCXY6RGVzdHJveSgpDQoJCQkJZWxzZWlmIHY6SXNBKCJSb2NrZXRQcm9wdWxzaW9uIikgdGhlbg0KCQkJCQl3YWl0KCkNCgkJCQkJdjpEZXN0cm95KCkNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQpDQoJZW5kDQoNCglmdW5jdGlvbiBiZWdpbk51bGxpZnlGb3JjZXMoKQ0KCQlpZiBJZ25vcmVQaHlzaWNzRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlJZ25vcmVQaHlzaWNzRW5hYmxlZCA9IHRydWUNCgkJCUlnbm9yZVBoeXNpY3MuVGV4dCA9ICJJZ25vcmUgUGh5c2ljcyAoT24pIFtaXSINCgkJCWluaXRpYWxOdWxsaWZ5Rm9yY2VzKCkNCgkJCUFmdGVyTnVsbGlmeUZvcmNlcygpDQoJCQl3aGlsZSBJZ25vcmVQaHlzaWNzRW5hYmxlZCBkbw0KCQkJCXdhaXQoKQ0KCQkJCWlmIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID09IDAgdGhlbg0KCQkJCQlyZXBlYXQgd2FpdCgpIHVudGlsIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoIH49IDANCgkJCQkJQWZ0ZXJOdWxsaWZ5Rm9yY2VzKCkNCgkJCQllbmQNCgkJCWVuZA0KCQllbHNlDQoJCQlJZ25vcmVQaHlzaWNzRW5hYmxlZCA9IGZhbHNlDQoJCQlJZ25vcmVQaHlzaWNzLlRleHQgPSAiSWdub3JlIFBoeXNpY3MgKE9mZikgW1pdIg0KCQllbmQNCgllbmQNCg0KCUlnbm9yZVBoeXNpY3MuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGJlZ2luTnVsbGlmeUZvcmNlcykNCg0KCS0tIEFudGktR3Jhdml0eQ0KDQoJbG9jYWwgQW50aUdyYXZpdHkgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUFudGlHcmF2aXR5Lk5hbWUgPSAiQW50aUdyYXZpdHkiDQoJQW50aUdyYXZpdHkuVGV4dCA9ICJBbnRpLUdyYXZpdHkgKE9mZikgW0ddIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBBbnRpR3Jhdml0eSkNCg0KCUFudGlHcmF2aXR5RW5hYmxlZCA9IGZhbHNlDQoNCglmdW5jdGlvbiBBbnRpR3Jhdml0eUZ1bmMoKQ0KCQlpZiBBbnRpR3Jhdml0eUVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJQW50aUdyYXZpdHlFbmFibGVkID0gdHJ1ZQ0KCQkJQW50aUdyYXZpdHkuVGV4dCA9ICJBbnRpLUdyYXZpdHkgKE9uKSBbR10iDQoJCQlsb2NhbCBCb2R5Rm9yY2UgPSBJbnN0YW5jZS5uZXcoIkJvZHlGb3JjZSIpDQoJCQlCb2R5Rm9yY2UuUGFyZW50ID0gcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0DQoJCQlCb2R5Rm9yY2UuTmFtZSA9ICJBbnRpR3Jhdml0eUZvcmNlIg0KCQkJQm9keUZvcmNlLkZvcmNlID0gVmVjdG9yMy5uZXcoMCwgNTAwMCwgMCkNCgkJZWxzZQ0KCQkJQW50aUdyYXZpdHlFbmFibGVkID0gZmFsc2UNCgkJCUFudGlHcmF2aXR5LlRleHQgPSAiQW50aS1HcmF2aXR5IChPZmYpIFtHXSINCgkJCWlmIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDpGaW5kRmlyc3RDaGlsZCgiQW50aUdyYXZpdHlGb3JjZSIpIHRoZW4NCgkJCQlwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW50aUdyYXZpdHlGb3JjZTpEZXN0cm95KCkNCgkJCWVuZA0KCQllbmQNCgllbmQNCg0KCUFudGlHcmF2aXR5Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChBbnRpR3Jhdml0eUZ1bmMpDQoNCgktLSBDbGljay1UUA0KDQoJbG9jYWwgQ2xpY2tUUCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJQ2xpY2tUUC5OYW1lID0gIkNsaWNrVFAiDQoJQ2xpY2tUUC5UZXh0ID0gIkNsaWNrLVRQIChPZmYpIFtKIHRvIHRwIHRvIG1vdXNlXSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQ2xpY2tUUCkNCg0KCUNsaWNrVFBFbmFibGVkID0gZmFsc2UNCg0KCUNsaWNrVFAuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkNCgkJaWYgQ2xpY2tUUEVuYWJsZWQgPT0gdHJ1ZSB0aGVuDQoJCQlDbGlja1RQRW5hYmxlZCA9IGZhbHNlDQoJCQlDbGlja1RQLlRleHQgPSAiQ2xpY2stVFAgKE9mZikgW0ogdG8gQ2xpY2stVFBdIg0KCQllbHNlDQoJCQlDbGlja1RQRW5hYmxlZCA9IHRydWUNCgkJCUNsaWNrVFAuVGV4dCA9ICJDbGljay1UUCAoT24pIFtKIHRvIENsaWNrLVRQXSINCgkJZW5kDQoJZW5kKQ0KDQoJZnVuY3Rpb24gY2xpY2t0cChwb3NpdGlvbikNCgkJaWYgcGxheWVyID09IG5pbCBvciBwbGF5ZXIuQ2hhcmFjdGVyID09IG5pbCB0aGVuIHJldHVybiBlbmQNCgkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoVmVjdG9yMy5uZXcocG9zaXRpb24ueCwgcG9zaXRpb24ueSArIDMsIHBvc2l0aW9uLnopKQ0KCWVuZA0KDQoJLS0gRnJlZXplDQoNCglsb2NhbCBGcmVlemUgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQ0KCUZyZWV6ZS5OYW1lID0gIkZyZWV6ZSINCglGcmVlemUuVGV4dCA9ICJGcmVlemUgKE9mZikgW0ZdIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBGcmVlemUpDQoNCglGcmVlemVFbmFibGVkID0gZmFsc2UNCg0KCWZ1bmN0aW9uIEZyZWV6ZUZ1bmMoKQ0KCQlpZiBGcmVlemVFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUZyZWV6ZUVuYWJsZWQgPSB0cnVlDQoJCQlGcmVlemUuVGV4dCA9ICJGcmVlemUgKE9uKSBbRl0iDQoJCQlwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSB0cnVlDQoJCWVsc2UNCgkJCUZyZWV6ZUVuYWJsZWQgPSBmYWxzZQ0KCQkJRnJlZXplLlRleHQgPSAiRnJlZXplIChPZmYpIFtGXSINCgkJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IGZhbHNlDQoJCWVuZA0KCWVuZA0KDQoJRnJlZXplLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChGcmVlemVGdW5jKQ0KDQoJLS0gTG9uZyBGbGFzaA0KDQoJbG9jYWwgTEZsYXNoID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglMRmxhc2guTmFtZSA9ICJGbGFzaCINCglMRmxhc2guVGV4dCA9ICJMb25nIEZsYXNoIChPZmYpIFtgIHRvIHVzZV0iDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIExGbGFzaCkNCg0KCUZsYXNoRW5hYmxlZCA9IGZhbHNlDQoNCglmdW5jdGlvbiBsb25nZmxhc2goKQ0KCQlsb2NhbCBtb3VzZXBvcyA9IG1vdXNlLkhpdC5wDQoJCWxvY2FsIGFyZ3MgPSB7DQoJCQlbMV0gPSAiU3Rvcm0iLA0KCQkJWzJdID0gIkxpZ2h0bmluZyBGbGFzaCINCgkJfQ0KCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkNCgkJbG9jYWwgYXJncyA9IHsNCgkJCVsxXSA9ICJTdG9ybSIsDQoJCQlbMl0gPSAiTGlnaHRuaW5nIEZsYXNoIiwNCgkJCVszXSA9IHsNCgkJCQlbIkVuZCJdID0gbW91c2Vwb3MsDQoJCQkJWyJPcmlnaW4iXSA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZS5wDQoJCQl9DQoJCX0NCgkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCgllbmQNCg0KCUxGbGFzaC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBGbGFzaEVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJRmxhc2hFbmFibGVkID0gdHJ1ZQ0KCQkJTEZsYXNoLlRleHQgPSAiTG9uZyBGbGFzaCAoT24pIFtgIHRvIHVzZV0iDQoJCWVsc2UNCgkJCUZsYXNoRW5hYmxlZCA9IGZhbHNlDQoJCQlMRmxhc2guVGV4dCA9ICJMb25nIEZsYXNoIChPZmYpIFtgIHRvIHVzZV0iDQoJCWVuZA0KCWVuZCkNCg0KCS0tIFZpZXcgVGFyZ2V0DQoNCglsb2NhbCBWaWV3VGFyZ2V0ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglWaWV3VGFyZ2V0Lk5hbWUgPSAiVmlld1RhcmdldCINCglWaWV3VGFyZ2V0LlRleHQgPSAiVmlldyBUYXJnZXQgKE9mZikgW1ZdIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBWaWV3VGFyZ2V0KQ0KDQoJdmlld2luZyA9IGZhbHNlDQoNCglmdW5jdGlvbiB2aWV3KCkNCgkJaWYgdGFyZ2V0IH49IHBsYXllci5OYW1lIHRoZW4NCgkJCWlmIHZpZXdpbmcgPT0gZmFsc2UgdGhlbg0KCQkJCXZpZXdpbmcgPSB0cnVlDQoJCQkJZ2FtZS5Xb3Jrc3BhY2UuQ2FtZXJhLkNhbWVyYVN1YmplY3QgPSBnYW1lLlBsYXllcnNbdGFyZ2V0XS5DaGFyYWN0ZXIuSHVtYW5vaWQNCgkJCQlWaWV3VGFyZ2V0LlRleHQgPSAiVmlldyBUYXJnZXQgKE9uKSBbVl0iDQoJCQllbHNlDQoJCQkJdmlld2luZyA9IGZhbHNlDQoJCQkJZ2FtZS5Xb3Jrc3BhY2UuQ2FtZXJhLkNhbWVyYVN1YmplY3QgPSBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkDQoJCQkJVmlld1RhcmdldC5UZXh0ID0gIlZpZXcgVGFyZ2V0IChPZmYpIFtWXSINCgkJCWVuZA0KCQllbHNlaWYgdmlld2luZyA9PSB0cnVlIHRoZW4gDQoJCQl2aWV3aW5nID0gZmFsc2UNCgkJCWdhbWUuV29ya3NwYWNlLkNhbWVyYS5DYW1lcmFTdWJqZWN0ID0gcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZA0KCQkJVmlld1RhcmdldC5UZXh0ID0gIlZpZXcgVGFyZ2V0IChPZmYpIFtWXSINCgkJZW5kDQoJZW5kDQoNCglWaWV3VGFyZ2V0Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdCh2aWV3KQ0KDQoJLS0gVGVsZXBvcnQgdG8gVGFyZ2V0DQoNCglsb2NhbCBUUFRhcmdldCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJVFBUYXJnZXQuTmFtZSA9ICJUUFRhcmdldCINCglUUFRhcmdldC5UZXh0ID0gIlRlbGVwb3J0IFRvIFRhcmdldCAoT2ZmKSBbVV0iDQoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFRQVGFyZ2V0KQ0KDQoJVFBUYXJnZXRFbmFibGVkID0gZmFsc2UNCg0KCWxvY2FsIGZ1bmN0aW9uIFRQVG9UYXJnZXQoKQ0KCQlpZiBUUFRhcmdldEVuYWJsZWQgYW5kIHRhcmdldCB+PSBwbGF5ZXIuTmFtZSB0aGVuDQoJCQlyZXBlYXQgd2FpdCgpIHVudGlsIGdldEhSUChwbGF5ZXIuQ2hhcmFjdGVyKSBhbmQgZ2V0SFJQKGdhbWUuUGxheWVyc1t0YXJnZXRdLkNoYXJhY3RlcikNCg0KCQkJZ2V0SFJQKHBsYXllci5DaGFyYWN0ZXIpLkNGcmFtZSA9IGdldEhSUChnYW1lLlBsYXllcnNbdGFyZ2V0XS5DaGFyYWN0ZXIpLkNGcmFtZQ0KCQllbmQNCgllbmQNCg0KCVRQVGFyZ2V0Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIFRQVGFyZ2V0RW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlUUFRhcmdldEVuYWJsZWQgPSB0cnVlDQoJCQlUUFRhcmdldC5UZXh0ID0gIlRlbGVwb3J0IFRvIFRhcmdldCAoT24pIFtVXSINCgkJZWxzZQ0KCQkJVFBUYXJnZXRFbmFibGVkID0gZmFsc2UNCgkJCVRQVGFyZ2V0LlRleHQgPSAiVGVsZXBvcnQgVG8gVGFyZ2V0IChPZmYpIFtVXSINCgkJZW5kDQoJZW5kKQ0KDQoJLS0gTG9vcCBUZWxlcG9ydCB0byBUYXJnZXQNCg0KCWxvY2FsIExvb3BUUFRhcmdldCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJTG9vcFRQVGFyZ2V0Lk5hbWUgPSAiTG9vcFRQVGFyZ2V0Ig0KCUxvb3BUUFRhcmdldC5UZXh0ID0gIkxvb3AgVGVsZXBvcnQgVG8gVGFyZ2V0IChPZmYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBMb29wVFBUYXJnZXQpDQoNCglMb29wVFBUYXJnZXRFbmFibGVkID0gZmFsc2UNCg0KCUxvb3BUUFRhcmdldC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBMb29wVFBUYXJnZXRFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCUxvb3BUUFRhcmdldEVuYWJsZWQgPSB0cnVlDQoJCQlMb29wVFBUYXJnZXQuVGV4dCA9ICJMb29wIFRlbGVwb3J0IFRvIFRhcmdldCAoT24pIg0KCQkJd2hpbGUgTG9vcFRQVGFyZ2V0RW5hYmxlZCBkbw0KCQkJCXdhaXQoKQ0KCQkJCVRQVG9UYXJnZXQoKQ0KCQkJZW5kDQoJCWVsc2UNCgkJCUxvb3BUUFRhcmdldEVuYWJsZWQgPSBmYWxzZQ0KCQkJTG9vcFRQVGFyZ2V0LlRleHQgPSAiTG9vcCBUZWxlcG9ydCBUbyBUYXJnZXQgKE9mZikiDQoJCWVuZA0KCWVuZCkNCg0KCS0tIEVTUA0KDQoJbG9jYWwgRVNQID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglFU1AuTmFtZSA9ICJFU1AiDQoJRVNQLlRleHQgPSAiRVNQIChPZmYpIFtCXSINCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgRVNQKQ0KDQoJRVNQRW5hYmxlZCA9IGZhbHNlDQoNCglsb2NhbCBIb2xkZXIgPSBJbnN0YW5jZS5uZXcoIkZvbGRlciIsIGdhbWUuQ29yZUd1aSkNCglIb2xkZXIuTmFtZSA9ICJFU1AiDQoNCglsb2NhbCBVcGRhdGVGdW5jcyA9IHt9DQoNCglsb2NhbCBCb3ggPSBJbnN0YW5jZS5uZXcoIkJveEhhbmRsZUFkb3JubWVudCIpDQoJQm94Lk5hbWUgPSAibmlsQm94Ig0KCUJveC5TaXplID0gVmVjdG9yMy5uZXcoNCwgNywgNCkNCglCb3guQ29sb3IzID0gQ29sb3IzLm5ldygxMDAgLyAyNTUsIDEwMCAvIDI1NSwgMTAwIC8gMjU1KQ0KCUJveC5UcmFuc3BhcmVuY3kgPSAwLjcNCglCb3guWkluZGV4ID0gMA0KCUJveC5BbHdheXNPblRvcCA9IHRydWUNCglCb3guVmlzaWJsZSA9IHRydWUNCg0KCWxvY2FsIE5hbWVUYWcgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIpDQoJTmFtZVRhZy5OYW1lID0gIm5pbE5hbWVUYWciDQoJTmFtZVRhZy5FbmFibGVkID0gdHJ1ZQ0KCU5hbWVUYWcuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKQ0KCU5hbWVUYWcuQWx3YXlzT25Ub3AgPSB0cnVlDQoJTmFtZVRhZy5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDMuNiwgMCkNCg0KCWxvY2FsIFRhZyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgTmFtZVRhZykNCglUYWcuTmFtZSA9ICJUYWciDQoJVGFnLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxDQoJVGFnLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIC01MCwgMCwgMCkNCglUYWcuU2l6ZSA9IFVEaW0yLm5ldygwLCAzMDAsIDAsIDIwKQ0KCVRhZy5UZXh0U2l6ZSA9IDIwDQoJVGFnLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEwMCAvIDI1NSwgMTAwIC8gMjU1LCAxMDAgLyAyNTUpDQoJVGFnLlRleHRTdHJva2VDb2xvcjMgPSBDb2xvcjMubmV3KDAgLyAyNTUsIDAgLyAyNTUsIDAgLyAyNTUpDQoJVGFnLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjQNCglUYWcuVGV4dCA9ICJuaWwiDQoJVGFnLkZvbnQgPSBFbnVtLkZvbnQuU2FycGFuY2gNCglUYWcuVGV4dFNjYWxlZCA9IGZhbHNlDQoJVGFnLlRleHRUcmFuc3BhcmVuY3kgPSAwDQoNCglmdW5jdGlvbiBMb2FkQ2hhcmFjdGVyKHYpDQoJCWlmIHYgfj0gcGxheWVyIHRoZW4NCgkJCXJlcGVhdCB3YWl0KCkgdW50aWwgdi5DaGFyYWN0ZXIgfj0gbmlsDQoJCQl2LkNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikNCgkJCWxvY2FsIHZIb2xkZXIgPSBIb2xkZXI6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQ0KCQkJdkhvbGRlcjpDbGVhckFsbENoaWxkcmVuKCkNCg0KCQkJbG9jYWwgYiA9IEJveDpDbG9uZSgpDQoJCQliLk5hbWUgPSB2Lk5hbWUgLi4gIkJveCINCgkJCWIuQWRvcm5lZSA9IHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQNCgkJCWIuUGFyZW50ID0gdkhvbGRlcg0KDQoJCQlsb2NhbCB0ID0gTmFtZVRhZzpDbG9uZSgpDQoJCQl0Lk5hbWUgPSB2Lk5hbWUgLi4gIk5hbWVUYWciDQoJCQl0LlBhcmVudCA9IHZIb2xkZXINCgkJCXQuQWRvcm5lZSA9IHYuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIsIDUpDQoJCQlpZiBub3QgdC5BZG9ybmVlIHRoZW4NCgkJCQlyZXR1cm4gVW5sb2FkQ2hhcmFjdGVyKHYpDQoJCQllbmQNCgkJCXQuVGFnLlRleHQgPSB2Lk5hbWUNCgkJCXQuRW5hYmxlZCA9IHRydWUNCgkJCXdhaXQoKQ0KDQoJCQlsb2NhbCBmdW5jdGlvbiBVcGRhdGVOYW1lVGFnKCkNCgkJCQlpZiBub3QgcGNhbGwoZnVuY3Rpb24oKQ0KCQkJCQkJLS0gdi5DaGFyYWN0ZXIuSHVtYW5vaWQuRGlzcGxheURpc3RhbmNlVHlwZSA9IEVudW0uSHVtYW5vaWREaXNwbGF5RGlzdGFuY2VUeXBlLk5vbmUNCgkJCQkJCWxvY2FsIG1heGggPSBtYXRoLmNlaWwodi5DaGFyYWN0ZXIuSHVtYW5vaWQuTWF4SGVhbHRoICogMTApDQoJCQkJCQlsb2NhbCBoID0gbWF0aC5jZWlsKHYuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCAqIDEwKQ0KCQkJCQkJdC5UYWcuVGV4dCA9IHYuTmFtZSAuLiAiXG4iIC4uICgobWF4aCB+PSAwIGFuZCB0b3N0cmluZyhtYXRoLmNlaWwoKGggLyBtYXhoKSAqIDEwMCkpKSBvciAiMCIpIC4uICIlICAiIC4uIHRvc3RyaW5nKGgpIC4uICIvIiAuLiB0b3N0cmluZyhtYXhoKQ0KCQkJCQkJaWYgRVNQRW5hYmxlZCB0aGVuDQoJCQkJCQkJdC5UYWcuVGV4dFRyYW5zcGFyZW5jeSA9IDANCgkJCQkJCQliLlRyYW5zcGFyZW5jeSA9IDAuNw0KCQkJCQkJZWxzZQ0KCQkJCQkJCXQuVGFnLlRleHRUcmFuc3BhcmVuY3kgPSAxDQoJCQkJCQkJYi5UcmFuc3BhcmVuY3kgPSAxDQoJCQkJCQllbmQNCgkJCQkJCWlmIGggLyBtYXhoID09IDEgdGhlbg0KCQkJCQkJCXQuVGFnLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQ0KCQkJCQkJCWIuQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkNCgkJCQkJCWVsc2VpZiBoIC8gbWF4aCA9PSAwIHRoZW4NCgkJCQkJCQl0LlRhZy5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCkNCgkJCQkJCQliLkNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApDQoJCQkJCQllbHNlDQoJCQkJCQkJdC5UYWcuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE5MiwgKDE5MiAqIChoIC8gbWF4aCkpLCAoMTkyICogKGggLyBtYXhoKSkpDQoJCQkJCQkJYi5Db2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxOTIsICgxOTIgKiAoaCAvIG1heGgpKSwgKDE5MiAqIChoIC8gbWF4aCkpKQ0KCQkJCQkJZW5kDQoJCQkJCWVuZCkgdGhlbg0KCQkJCQlVcGRhdGVGdW5jc1t2XSA9IG5pbA0KCQkJCWVuZA0KCQkJZW5kDQoJCQlVcGRhdGVOYW1lVGFnKCkNCgkJCVVwZGF0ZUZ1bmNzW3ZdID0gVXBkYXRlTmFtZVRhZw0KCQllbmQNCgllbmQNCg0KCWZ1bmN0aW9uIFVubG9hZENoYXJhY3Rlcih2KQ0KCQlsb2NhbCB2SG9sZGVyID0gSG9sZGVyOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkNCgkJaWYgdkhvbGRlciBhbmQgKHZIb2xkZXI6RmluZEZpcnN0Q2hpbGQodi5OYW1lIC4uICJCb3giKSB+PSBuaWwgb3IgdkhvbGRlcjpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUgLi4gIk5hbWVUYWciKSB+PSBuaWwpIHRoZW4NCgkJCXZIb2xkZXI6Q2xlYXJBbGxDaGlsZHJlbigpDQoJCWVuZA0KCWVuZA0KDQoJZnVuY3Rpb24gTG9hZFBsYXllcih2KQ0KCQlpZiB2IH49IHBsYXllciB0aGVuDQoJCQlsb2NhbCB2SG9sZGVyID0gSW5zdGFuY2UubmV3KCJGb2xkZXIiLCBIb2xkZXIpDQoJCQl2SG9sZGVyLk5hbWUgPSB2Lk5hbWUNCgkJCXYuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbigpDQoJCQkJaWYgRVNQRW5hYmxlZCA9PSB0cnVlIHRoZW4NCgkJCQkJcGNhbGwoTG9hZENoYXJhY3RlciwgdikNCgkJCQllbmQNCgkJCWVuZCkNCgkJCXYuQ2hhcmFjdGVyUmVtb3Zpbmc6Q29ubmVjdChmdW5jdGlvbigpDQoJCQkJcGNhbGwoVW5sb2FkQ2hhcmFjdGVyLCB2KQ0KCQkJZW5kKQ0KCQkJTG9hZENoYXJhY3Rlcih2KQ0KCQllbmQNCgllbmQNCg0KCWZ1bmN0aW9uIFVubG9hZFBsYXllcih2KQ0KCQlVbmxvYWRDaGFyYWN0ZXIodikNCgkJbG9jYWwgdkhvbGRlciA9IEhvbGRlcjpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpDQoJCWlmIHZIb2xkZXIgdGhlbg0KCQkJdkhvbGRlcjpEZXN0cm95KCkNCgkJZW5kDQoJZW5kDQoNCglmb3IgaSwgdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRQbGF5ZXJzKCkpIGRvDQoJCXNwYXduKGZ1bmN0aW9uKCkgcGNhbGwoTG9hZFBsYXllciwgdikgZW5kKQ0KCWVuZA0KDQoJZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuUGxheWVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbih2KQ0KCQlwY2FsbChMb2FkUGxheWVyLCB2KQ0KCWVuZCkNCg0KCWdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLlBsYXllclJlbW92aW5nOkNvbm5lY3QoZnVuY3Rpb24odikNCgkJcGNhbGwoVW5sb2FkUGxheWVyLCB2KQ0KCWVuZCkNCg0KCWdhbWUuSXRlbUNoYW5nZWQ6Q29ubmVjdChmdW5jdGlvbihpKQ0KCQlpZiBpOklzQSgiUGxheWVyIikgdGhlbg0KCQkJaWYgSG9sZGVyOkZpbmRGaXJzdENoaWxkKGkuTmFtZSkgdGhlbg0KCQkJCVVubG9hZENoYXJhY3RlcihpKQ0KCQkJCXdhaXQoKQ0KCQkJCUxvYWRDaGFyYWN0ZXIoaSkNCgkJCWVuZA0KCQllbHNlaWYgaTpJc0EoIkh1bWFub2lkIikgYW5kIGkuUGFyZW50IHRoZW4NCgkJCWxvY2FsIHAgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRQbGF5ZXJGcm9tQ2hhcmFjdGVyKGkuUGFyZW50KQ0KCQkJaWYgcCB+PSBwbGF5ZXIgYW5kIHAgfj0gbmlsIGFuZCBIb2xkZXI6RmluZEZpcnN0Q2hpbGQocC5OYW1lKSB0aGVuDQoJCQkJcGNhbGwoZnVuY3Rpb24oKQ0KCQkJCQlVcGRhdGVGdW5jc1twXSgpDQoJCQkJZW5kKQ0KCQkJZW5kDQoJCWVuZA0KCWVuZCkNCg0KCWZ1bmN0aW9uIHRvZ2dsZUVTUCgpDQoJCWlmIEVTUEVuYWJsZWQgPT0gZmFsc2UgdGhlbg0KCQkJRVNQRW5hYmxlZCA9IHRydWUNCgkJCUVTUC5UZXh0ID0gIkVTUCAoT24pIFtCXSINCgkJCWZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0UGxheWVycygpKSBkbw0KCQkJCXNwYXduKGZ1bmN0aW9uKCkgcGNhbGwoTG9hZFBsYXllciwgdikgZW5kKQ0KCQkJZW5kDQoJCWVsc2UNCgkJCUVTUEVuYWJsZWQgPSBmYWxzZQ0KCQkJRVNQLlRleHQgPSAiRVNQIChPZmYpIFtCXSINCgkJCWZvciBpLCB2IGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvDQoJCQkJc3Bhd24oZnVuY3Rpb24oKSBwY2FsbChVbmxvYWRQbGF5ZXIsIHYpIGVuZCkNCgkJCWVuZA0KCQllbmQNCgllbmQNCg0KCUVTUC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QodG9nZ2xlRVNQKQ0KDQoJLS0gVFAgdG8gRHJvcHMNCg0KCWxvY2FsIFRQU2hhcmRzID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikNCglUUFNoYXJkcy5OYW1lID0gIlRQU2hhcmRzIg0KCVRQU2hhcmRzLlRleHQgPSAiVGVsZXBvcnQgdG8gU2hhcmRzIChPZmYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBUUFNoYXJkcykNCg0KCVRQU2hhcmRzRW5hYmxlZCA9IGZhbHNlCQ0KDQoJbG9jYWwgVFBEaWFtb25kcyA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQoJVFBEaWFtb25kcy5OYW1lID0gIlRQRGlhbW9uZHMiDQoJVFBEaWFtb25kcy5UZXh0ID0gIlRlbGVwb3J0IHRvIERpYW1vbmRzIChPZmYpIg0KCXRhYmxlLmluc2VydChidXR0b25zLCBUUERpYW1vbmRzKQ0KDQoJVFBEaWFtb25kc0VuYWJsZWQgPSBmYWxzZQ0KDQoJbG9jYWwgcGxhdGUgPSBJbnN0YW5jZS5uZXcoIlBhcnQiKQ0KCXBsYXRlLlBhcmVudCA9IGdhbWUuV29ya3NwYWNlDQoJcGxhdGUuU2l6ZSA9IFZlY3RvcjMubmV3KDQwLCAxLCA0MCkNCglwbGF0ZS5Qb3NpdGlvbiA9IFZlY3RvcjMubmV3KDAsIDEwMDAwMCwgMCkNCglwbGF0ZS5BbmNob3JlZCA9IHRydWUNCglwbGF0ZS5SZWZsZWN0YW5jZSA9IDAuNQ0KCXBsYXRlLlRyYW5zcGFyZW5jeSA9IDAuNQ0KDQoJbG9jYWwgdGltZSA9IDANCglsb2NhbCBjYW5JbnZpcyA9IGZhbHNlDQoNCglmdW5jdGlvbiB0ZWxlcG9ydFRvRHJvcHMoKQ0KCQlsb2NhbCBocnAgPSBwbGF5ZXIuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpDQoJCWZvciBpLCB2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlWycuSWdub3JlJ11bJy5TZXJ2ZXJFZmZlY3RzJ106R2V0Q2hpbGRyZW4oKSkgZG8NCgkJCWlmIFRQU2hhcmRzRW5hYmxlZCBhbmQgdi5OYW1lID09ICJTaGFyZCIgdGhlbg0KCQkJCWhycC5DRnJhbWUgPSB2LkNGcmFtZQ0KCQkJCXdhaXQoLjIpDQoJCQllbHNlaWYgVFBEaWFtb25kc0VuYWJsZWQgYW5kIHYuTmFtZSA9PSAiRGlhbW9uZCIgdGhlbg0KCQkJCWhycC5DRnJhbWUgPSB2LkNGcmFtZQ0KCQkJCXdhaXQoLjIpDQoJCQllbmQNCg0KCQkJaWYgY2FuSW52aXMgdGhlbg0KCQkJCWlmIHRpbWUgPT0gNSB0aGVuIA0KCQkJCQlicmVhaw0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KDQoJCWhycC5DRnJhbWUgPSBDRnJhbWUubmV3KFZlY3RvcjMubmV3KDAsIDEwMDAwMywgLTEwKSkNCg0KCQlyZXR1cm4gDQoJZW5kDQoNCg0KCWZ1bmN0aW9uIHN0YXJ0VGltZXIoKQ0KCQlsb2NhbCBocnAgPSBwbGF5ZXIuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpDQoJCXdoaWxlIHdhaXQoKSBkbw0KCQkJaWYgVFBTaGFyZHNFbmFibGVkIG9yIFRQRGlhbW9uZHNFbmFibGVkIHRoZW4NCgkJCQlpZiB0aW1lIH49IDAgdGhlbiByZXR1cm4NCgkJCQllbHNlDQoJCQkJCWlmIGNhbkludmlzIHRoZW4NCgkJCQkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIlNwaXJpdCIsICJTcGVjdHJhbCBFbWJvZGltZW50IikNCgkJCQkJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiU3Bpcml0IiwgIlNwZWN0cmFsIEVtYm9kaW1lbnQiKQ0KCQkJCQkJd2FpdCgxKQ0KCQkJCQkJcmVwZWF0DQoJCQkJCQkJc3Bhd24oZnVuY3Rpb24oKSBwY2FsbCh0ZWxlcG9ydFRvRHJvcHMpIGVuZCkNCgkJCQkJCQl0aW1lID0gdGltZSArIDENCgkJCQkJCQl3YWl0KDEpDQoJCQkJCQl1bnRpbCB0aW1lID09IDYNCgkJCQkJCWhycC5DRnJhbWUgPSBDRnJhbWUubmV3KFZlY3RvcjMubmV3KDAsIDEwMDAwMywgLTEwKSkNCgkJCQkJCXdhaXQoNy41KQ0KCQkJCQkJdGltZSA9IDANCgkJCQkJZWxzZQ0KCQkJCQkJd2hpbGUgdHJ1ZSBkbw0KCQkJCQkJCWlmIG5vdCBUUFNoYXJkc0VuYWJsZWQgYW5kIG5vdCBUUERpYW1vbmRzRW5hYmxlZCB0aGVuDQoJCQkJCQkJCWJyZWFrDQoJCQkJCQkJZW5kDQoJCQkJCQkJc3Bhd24oZnVuY3Rpb24oKSBwY2FsbCh0ZWxlcG9ydFRvRHJvcHMpIGVuZCkNCgkJCQkJCQl3YWl0KDEpDQoJCQkJCQllbmQNCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQllbHNlDQoJCQkJYnJlYWsNCgkJCWVuZA0KCQllbmQNCg0KCQlyZXR1cm4NCgllbmQNCg0KCVRQU2hhcmRzLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpDQoJCWlmIHBsYXllcjpXYWl0Rm9yQ2hpbGQoIlBsYXllckd1aSIpOldhaXRGb3JDaGlsZCgiTWFpbiIpLkNoYXJhY3Rlci5BdmFpbGFibGUuU2Nyb2xsaW5nRnJhbWUuRnJhbWU6RmluZEZpcnN0Q2hpbGQoIlNwZWN0cmFsIEVtYm9kaW1lbnQiKSB0aGVuDQoJCQljYW5JbnZpcyA9IHRydWUNCgkJZW5kDQoJCWlmIFRQU2hhcmRzRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlUUFNoYXJkc0VuYWJsZWQgPSB0cnVlDQoJCQlUUFNoYXJkcy5UZXh0ID0gIlRlbGVwb3J0IHRvIFNoYXJkcyAoT24pIg0KCQkJc3RhcnRUaW1lcigpDQoJCQl3aGlsZSBUUFNoYXJkc0VuYWJsZWQgZG8NCgkJCQl3YWl0KCkNCgkJCQlpZiBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA9PSAwIHRoZW4NCgkJCQkJcmVwZWF0IHdhaXQoKSB1bnRpbCBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCB+PSAwDQoJCQkJCXN0YXJ0VGltZXIoKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVsc2UNCgkJCVRQU2hhcmRzRW5hYmxlZCA9IGZhbHNlDQoJCQlUUFNoYXJkcy5UZXh0ID0gIlRlbGVwb3J0IHRvIFNoYXJkcyAoT2ZmKSINCgkJZW5kDQoJZW5kKQ0KDQoJVFBEaWFtb25kcy5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQ0KCQlpZiBwbGF5ZXI6V2FpdEZvckNoaWxkKCJQbGF5ZXJHdWkiKTpXYWl0Rm9yQ2hpbGQoIk1haW4iKS5DaGFyYWN0ZXIuQXZhaWxhYmxlLlNjcm9sbGluZ0ZyYW1lLkZyYW1lOkZpbmRGaXJzdENoaWxkKCJTcGVjdHJhbCBFbWJvZGltZW50IikgdGhlbg0KCQkJY2FuSW52aXMgPSB0cnVlDQoJCWVuZA0KCQlpZiBUUERpYW1vbmRzRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQlUUERpYW1vbmRzRW5hYmxlZCA9IHRydWUNCgkJCVRQRGlhbW9uZHMuVGV4dCA9ICJUZWxlcG9ydCB0byBEaWFtb25kcyAoT24pIg0KCQkJc3RhcnRUaW1lcigpDQoJCQl3aGlsZSBUUERpYW1vbmRzRW5hYmxlZCBkbw0KCQkJCXdhaXQoKQ0KCQkJCWlmIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID09IDAgdGhlbg0KCQkJCQlyZXBlYXQgd2FpdCgpIHVudGlsIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoIH49IDANCgkJCQkJc3RhcnRUaW1lcigpDQoJCQkJZW5kDQoJCQllbmQNCgkJZWxzZQ0KCQkJVFBEaWFtb25kc0VuYWJsZWQgPSBmYWxzZQ0KCQkJVFBEaWFtb25kcy5UZXh0ID0gIlRlbGVwb3J0IHRvIERpYW1vbmRzIChPZmYpIg0KCQllbmQNCgllbmQpDQoNCgktLSBSZWpvaW4gU2VydmVyIEZ1bmN0aW9uDQoNCgktLSBUaGlzIHdhcyBvbmx5IHByZXNlcnZlZCBhcyBJIGNvdWxkbid0IHRoaW5rIG9mIGFueSBvdGhlciBwbGFjZSB0byBwdXQgdGhlIGZ1bmN0aW9uIGZvciBub3cuDQoJLS0gTWlnaHQgZ2V0IG1vdmVkIGxhdGVyLCBpZHVubm8uDQoJZnVuY3Rpb24gcmVqb2luKCkNCgkJbG9jYWwgdHMgPSBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpDQoJCWxvY2FsIHAgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcg0KDQoJCXRzOlRlbGVwb3J0KGdhbWUuUGxhY2VJZCwgcCkNCgllbmQNCg0KCS0tIEdVSSBUd2Vha2luZw0KDQoJZm9yIGksIHYgaW4gcGFpcnMoYm9yZGVycykgZG8NCgkJdi5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDAuNSkNCgkJdi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkNCgkJdi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC43NTANCgkJdi5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQ0KCQl2LkJvcmRlclNpemVQaXhlbCA9IDANCgkJdi5TaXplQ29uc3RyYWludCA9IEVudW0uU2l6ZUNvbnN0cmFpbnQuUmVsYXRpdmVZWQ0KCQl2LkFjdGl2ZSA9IHRydWUNCgkJdi5QYXJlbnQgPSBlYmd1aQ0KCWVuZA0KDQoJZm9yIGksIHYgaW4gcGFpcnMoYnV0dG9ucykgZG8NCgkJdi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjM2LCAyMCwgMTE1KQ0KCQl2LkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApDQoJCXYuQm9yZGVyU2l6ZVBpeGVsID0gMg0KCQl2LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDApDQoJCXYuU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKQ0KCQl2LkZvbnQgPSBFbnVtLkZvbnQuU2FycGFuY2gNCgkJdi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTEsIDI1NSkNCgkJdi5UZXh0U2NhbGVkID0gdHJ1ZQ0KCQl2LlRleHRTaXplID0gMTQuMDAwDQoJCXYuVGV4dFdyYXBwZWQgPSB0cnVlDQoJCXYuTGF5b3V0T3JkZXIgPSBpDQoJCXYuUGFyZW50ID0gbWFpbmZyYW1lDQoJZW5kDQoNCgktLVtbZm9yIGksIHYgaW4gcGFpcnMoYnV0dG9ucykgZG8NCgkJdi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjM2LCAxNzUsIDIwKQ0KCQl2LkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApDQoJCXYuQm9yZGVyU2l6ZVBpeGVsID0gMg0KCQl2LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDApDQoJCXYuU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKQ0KCQl2LkZvbnQgPSBFbnVtLkZvbnQuU2FycGFuY2gNCgkJdi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTEsIDI1NSkNCgkJdi5UZXh0U2NhbGVkID0gdHJ1ZQ0KCQl2LlRleHRTaXplID0gMTQuMDAwDQoJCXYuVGV4dFdyYXBwZWQgPSB0cnVlDQoJCXYuTGF5b3V0T3JkZXIgPSBpDQoJCXYuUGFyZW50ID0gbWFpbmZyYW1lDQoJZW5kXV0NCg0KCS0tIGNvbW1hbmRCb3gNCg0KCXRhcmdldCA9IHBsYXllci5OYW1lDQoJdGFyZ2V0U2V0dGluZyA9ICJzZWxlY3QiDQoJbG9vcGluZyA9IGZhbHNlDQoJc21hcnRBdHRhY2sgPSB0cnVlDQoJSGVhbFNldHRpbmcgPSAxDQoJc3R1bkVuYWJsZWQgPSB0cnVlDQoJRlBTRHJvcHBpbmcgPSBmYWxzZQ0KCWxvY2FsIGJ1dHRvbkhlaWdodCA9IDMwDQoJbG9jYWwgYnV0dG9uR2FwID0gNw0KICAgIGxvY2FsIGhlbHAxID0gW1t8fCBCZWxvdyBpcyBhIGZ1bGwsIGNvbXByZWhlbnNpdmUgbGlzdCBvZiBlYWNoIGNvbW1hbmQgRUJHVUkgaGFzIHRvIG9mZmVyLiB8fA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAoUHJlZml4IGlzIDspDQoNCiAgICAgICAgICAgICAgICAiaGVscCBbbnVtXSIgLSBTaG93cyB0aGlzIGNvbW1hbmRzIGxpc3QhIENob29zZSBiZXR3ZWVuIHBhZ2VzIDEgb3IgMi4NCiAgICAgICAgICAgICAgICAiY2hhbmdlbG9nIiAtIFNob3dzIGEgbGluayB0byB0aGUgY2hhbmdlbG9nIGZvciBFQkdVSSBhbmQgaXRzIENhbmFyeSBicmFuY2guDQogICAgICAgICAgICAgICAgInJlIiAtIFJlZnJlc2hlcyB5b3VyIGNoYXJhY3Rlci4gVGhpcyB3aWxsIHRlbXBvcmFyaWx5IHZhbmlzaCB5b3UsIGFuZCBicmluZyB5b3UgYmFjayB3aXRoIGZ1bGwgc3RhdHMuDQogICAgICAgICAgICAgICAgInRwIDxtYXA+IiAtIFRlbGVwb3J0cyB5b3UgdG8gdGhlIG1hcCBvZiB5b3VyIGNob2ljZS4gSGVhdmVuIGRvZXNuJ3Qgd29yayB3aXRob3V0IHRoZSBnYW1lcGFzcy4NCiAgICAgICAgICAgICAgICAiZGVjbHV0dGVyIiAtIENsZWFycyB0aGUgYmFja2dyb3VuZHMgb2YgdGhlIG1haW4gR1VJcywgYW5kIHNocmlua3MgdGhlIG1vdmVzL3N0YXRzLg0KICAgICAgICAgICAgICAgICJyYWluIiAtIEVuYWJsZXMgdGhlIHJhaW4gZnJvbSBXYXRlciBtYXAuIENhcmVmdWwsIHlvdSBoYXZlIHRvIHJlam9pbiB0byB0dXJuIGl0IG9mZiENCiAgICAgICAgICAgICAgICAiZml4IiAtIFJlbW92ZXMgdGhlICJMT0FESU5HIiBzY3JlZW4gd2hlbiB0ZWxlcG9ydGluZyB0byBjZXJ0YWluIG1hcHMuDQogICAgICAgICAgICAgICAgImJ1dHRvbmhlaWdodCA8bnVtPiIgLSBDaGFuZ2VzIHRoZSBoZWlnaHQsIGluIHBpeGVscywgb2YgRUJHVUkncyBidXR0b25zLg0KICAgICAgICAgICAgICAgICJidXR0b25nYXAgPG51bT4iIC0gQ2hhbmdlcyB0aGUgZ2FwLCBpbiBwaXhlbHMsIGJldHdlZW4gRUJHVUkncyBidXR0b25zLg0KICAgICAgICAgICAgICAgICJyZWpvaW4iIC0gUmVqb2lucyB0aGUgc2VydmVyLg0KICAgICAgICAgICAgICAgICJhdXJhL29mZiIgLSBBbiBhbHRlcm5hdGUgbWV0aG9kIG9mIHNpbGVudGx5IHR1cm5pbmcgb2ZmIGF1cmEuDQogICAgICAgICAgICAgICAgInRhcmdldHNldHRpbmcgPG1vZGU+IiAtIE1vZGlmaWVzIGhvdyBFQkdVSSBzZWxlY3RzIHRhcmdldHMuIFdvbid0IHRhcmdldCB0aG9zZSBpbiBzYWZlem9uZSwgZXhjZXB0IGluICJzZWxlY3QiIG1vZGUuDQogICAgICAgICAgICAgICAgICAgIC0tICJzZWxlY3QiIGFsbG93cyB5b3UgdG8gY2hvb3NlIGJ5IHR5cGluZyBpbnRvIHRoZSBjb21tYW5kIGJveC4gU2V0IHRvIHRoaXMgYnkgZGVmYXVsdC4NCiAgICAgICAgICAgICAgICAgICAgLS0gImNsb3Nlc3QiIHNlbGVjdHMgdGhlIHBlcnNvbiBjbG9zZXN0IHRvIHlvdS4NCiAgICAgICAgICAgICAgICAgICAgLS0gImZhcnRoZXN0IiBzZWxlY3RzIHRoZSBwZXJzb24gZmFydGhlc3QgZnJvbSB5b3UuDQogICAgICAgICAgICAgICAgICAgIC0tICJsb3docCIgc2VsZWN0cyB0aGUgcGVyc29uIHdpdGggdGhlIGxvd2VzdCBIUC4NCiAgICAgICAgICAgICAgICAgICAgLS0gImhpZ2hocCIgc2VsZWN0cyB0aGUgY2xvc2VzdCBwZXJzb24gd2l0aCB0aGUgaGlnaGVzdCBIUC5dXQ0KDQogICAgbG9jYWwgaGVscDIgPSBbWyJsb29wIiAtIExvb3BzIHRoZSB1c2FnZSBvZiBlbmFibGVkIGF0dGFjayBleHBsb2l0cy4NCiAgICAgICAgICAgICAgICAiZ3JjaGFyZ2UgPG51bT4iIC0gTXVsdGlwbGllcyB0aGUgdGltZSBBbXBsaWZpZWQgR2VuZXNpcyBSYXkgYXR0YWNrIGV4cGxvaXQgc3RheXMgYWxpdmUgZm9yLiBEZWZhdWx0LCAxLCBsYXN0cyA2IHNlY29uZHMuDQogICAgICAgICAgICAgICAgInNwZWVkIDxudW0+IiAtIENoYW5nZXMgeW91ciBkZWZhdWx0IHdhbGtzcGVlZC4gRGVmYXVsdCwgNjQsIGVxdWFscyBtYXgtc3BlZWQgc3ByaW50aW5nLg0KICAgICAgICAgICAgICAgICJzbWFydGF0dGFjayIgLSBUb2dnbGVzIGlmIGF0dGFjayBleHBsb2l0cyB3aWxsIGZpcmUgb24gcGVvcGxlIHdobyBhcmUgaW4gc2FmZXpvbmUuIERlZmF1bHQgb24uDQogICAgICAgICAgICAgICAgImdhbWVjb2xvciA8bW9kZT4iIC0gQ2hhbmdlcyB0aGUgY29udHJhc3QgYW5kIHNhdHVyYXRpb24gb2YgdGhlIGdhbWUuDQogICAgICAgICAgICAgICAgICAgIC0tICJub3JtYWwiIHdpbGwgcmVzZXQgZXZlcnl0aGluZyB0byBub3JtYWwuDQogICAgICAgICAgICAgICAgICAgIC0tICJncmF5c2NhbGUiIHR1cm5zIG9mZiB0aGUgc2F0dXJhdGlvbiBhbmQgbWFrZXMgZXZlcnl0aGluZyBncmF5Lg0KICAgICAgICAgICAgICAgICAgICAtLSAiaW52ZXJ0aHVlIiBpbnZlcnRzIHRoZSBodWUgb2YgZXZlcnl0aGluZy4gR3JlZW4gYmVjb21lcyBwdXJwbGUsIGJsdWUgYmVjb21lcyByZWQuDQogICAgICAgICAgICAgICAgICAgIC0tICJpbnZlcnRhbGwiIGludmVydHMgdGhlIGh1ZSwgc2F0dXJhdGlvbiwgYW5kIGNvbnRyYXN0IG9mIGV2ZXJ5dGhpbmcuIE5lZ2F0aXZlIQ0KICAgICAgICAgICAgICAgICJibGFja2Nhc3QiIC0gQ2hhbmdlcyBhbGwgdGhlIG1lZGFscyB0byBibGFjayB3aGVuIGNhc3Rpbmcgc3BlbGxzLg0KICAgICAgICAgICAgICAgICJzdHVuIiAtIFRvZ2dsZXMgd2hldGhlciB5b3Ugd2FudCB0byBiZSBzdHVubmVkIG9yIG5vdC4gTm90IHZlcnkgZGlzY3JlZXQuDQogICAgICAgICAgICAgICAgImRydWdzIiAtIFJhbmRvbWl6ZXMgdGhlIGNvbG9ycyBvZiBhbGwgbWFnaWMgc3BlbGxzLiBSZXF1aXJlcyB5b3UgdG8gcnVuICJjb2xvcnMiIGZpcnN0Lg0KICAgICAgICAgICAgICAgICJtYWdpY2NvbG9yIDxyPiA8Zz4gPGI+IiAtIENoYW5nZXMgdGhlIGNvbG9yIG9mIGFsbCBtYWdpYyBzcGVsbHMgdG8gYW4gUkdCIHZhbHVlLiBSZXF1aXJlcyB5b3UgdG8gcnVuICJjb2xvcnMiIGZpcnN0Lg0KICAgICAgICAgICAgICAgICJjb2xvcnMiIC0gQWxsb3dzIHlvdSB0byBydW4gImRydWdzIiBhbmQgIm1hZ2ljY29sb3IiLg0KICAgICAgICAgICAgICAgICJoZWFsIDxwbGF5ZXI+IiAtIFBsYWNlcyBCbHVlIEFyc29uIGFuZCBHbGVhbWluZyBIYXJtb255IGF0IHRoZSBmZWV0IG9mIGEgcGxheWVyIG9mIHlvdXIgY2hvaWNlLg0KICAgICAgICAgICAgICAgICJlIDxudW0gMS0zPiIgLSBDaGFuZ2VzIHRoZSBwaGFzZSBvZiB0aGUgQ29udHJvbGxlZCBFY2hvZXMgYXR0YWNrIGV4cGxvaXQuDQogICAgICAgICAgICAgICAgICAgIC0tICIxIiB3aWxsIGNoYW5nZSBpdCB0byBQT1csIGFuZCBpcyB0aGUgZGVmYXVsdC4NCiAgICAgICAgICAgICAgICAgICAgLS0gIjIiIHdpbGwgY2hhbmdlIGl0IHRvIEJVUk4uDQogICAgICAgICAgICAgICAgICAgIC0tICIzIiB3aWxsIGNoYW5nZSBpdCB0byBTVFVOLg0KICAgICAgICAgICAgICAgICJvcmlnaW4iIC0gQ3JlYXRlcyBhIHNtYWxsLCByZWQgYmxvY2sgYXQgMCwgMCwgMCB3aXRoaW4gdGhlIHdvcmxkLl1dDQoNCglSU1IgPSBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOldhaXRGb3JDaGlsZCgiUmVtb3RlcyIpDQoNCglsb2NhbCBzdHVuQ29ubmVjdGlvbiA9IGdldGNvbm5lY3Rpb25zKFJTUjpXYWl0Rm9yQ2hpbGQoIkNvbWJhdCIpLk9uQ2xpZW50RXZlbnQpDQoJbG9jYWwgbGFnZ2VycyA9IHsNCgkJIjFCMEY5OEJFLUUxMEItNDY3NC05RkI0LTZGNjUxNzFBMzQ3RiIsIC0tIGxvZw0KCQkiNkEzMzEwNEEtMUZFOS00RkE4LTkzNzQtQzE2NEQyOEY4MzUxIiwgLS0gYnJpYW4NCgkJIjgzNzczNkFBLTAxOTItNDdGOS05OEM1LThERDBERjE4RkU3NCIsIC0tIGpldA0KCQkiNTVDMjA0OUQtQzZCRC00NTIzLTg4MDQtRDUzOUMzODc5MkEzIiwgLS0gcGVudGFyYWN0DQoJCSI5NDY0QjY4QS0zNjNDLTQxRjgtQkI3RC1CNEJFRDhBQzA5NjMiLCAtLSB2YXN0b3Jpbw0KCQktLSAiODMwQkQ0RTktNUVCRS00QTEzLUI0N0ItOUJFNjAwODNCODM2IiwgLS0gbG9sb2sNCgkJLS0gIjYzQjM5RTI3LURBMUItNDgyRS1CMjhDLTZBMzM5OEM5NUE0QyIsIC0tIGFsZXgNCgkJIjg0NkE2NUUyLUU5NjMtNEEwQS05MDI1LUU5QjhFOTU4OTYxMyIsIC0tIGJyYW0NCgkJIjNGMTY4NDQwLUE1QzAtNEY3MS04RTUxLTNGREY5MDI1RjUxQiIsIC0tIHRvbWVrDQoJCSI2QTk3MDUyQS02MzRFLTQ3RTEtOEQ5MC01RUUzQ0E0QTk2RkEiLCAtLSByYXZlbg0KCQkiRjU5NzVEN0QtMkFDNS00NEFBLTgwMUYtODI3NjI1RDZENzYzIiwgLS0gYWxleGlhDQoJCSI0ODI4NzE4Mi05RTc3LTRGOTctQTY1NC05NzA2OUVEODE2NkMiLCAtLSBqZXNzDQoJCSI3NDg5Q0JBRS03OTg2LTQ1QTktQkU0MC1BMjE4RURDRDBGMDEiIC0tIGNlcGhhcw0KCX0NCg0KCWxvY2FsIGNsaWVudGlkID0gZ2FtZTpHZXRTZXJ2aWNlKCJSYnhBbmFseXRpY3NTZXJ2aWNlIik6R2V0Q2xpZW50SWQoKTpsb3dlcigpDQoJbG9jYWwgYWxsb3dlZFRvRHJvcEZQUyA9IHRydWUNCg0KCWZvciBpLCB2IGluIHBhaXJzKGxhZ2dlcnMpIGRvDQoJCXYgPSB2Omxvd2VyKCkNCg0KCQlpZiAodiA9PSBjbGllbnRpZCkgdGhlbg0KCQkJYWxsb3dlZFRvRHJvcEZQUyA9IHRydWUNCgkJZW5kDQoJZW5kDQoNCglmdW5jdGlvbiBnZXRIUlAoY2hyKQ0KCQlsb2NhbCBIUlAgPSBjaHI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBvciBjaHI6RmluZEZpcnN0Q2hpbGQoIlRvcnNvIikgb3IgY2hyOkZpbmRGaXJzdENoaWxkKCJVcHBlclRvcnNvIikNCgkJcmV0dXJuIEhSUA0KCWVuZA0KDQoJZnVuY3Rpb24gZ2V0SFVNKGNocikNCgkJbG9jYWwgSFVNID0gY2hyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpDQoJCXJldHVybiBIVU0NCgllbmQNCg0KCWxvY2FsIGZ1bmN0aW9uIHJlc3Bhd24ocGxyKQ0KCQlsb2NhbCBjaHIgPSBwbHIuQ2hhcmFjdGVyDQoNCgkJaWYgKGNocjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikpIHRoZW4gY2hyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKTpDaGFuZ2VTdGF0ZSgxNSkgZW5kDQoJCWNocjpDbGVhckFsbENoaWxkcmVuKCkNCg0KCQlsb2NhbCBuZXdjaHIgPSBJbnN0YW5jZS5uZXcoIk1vZGVsIikNCgkJbmV3Y2hyLlBhcmVudCA9IHdvcmtzcGFjZQ0KCQlwbHIuQ2hhcmFjdGVyID0gbmV3Y2hyDQoNCgkJd2FpdCgpDQoNCgkJcGxyLkNoYXJhY3RlciA9IGNocg0KCQluZXdjaHI6RGVzdHJveSgpDQoJZW5kDQoNCglsb2NhbCBmdW5jdGlvbiByZWZyZXNoKHBscikNCgkJbG9jYWwgaHVtID0gcGxyLkNoYXJhY3RlciBhbmQgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIiwgdHJ1ZSkNCgkJbG9jYWwgcG9zID0gaHVtIGFuZCBodW0uUm9vdFBhcnQgYW5kIGh1bS5Sb290UGFydC5DRnJhbWUNCgkJbG9jYWwgcG9zMSA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZQ0KDQoJCXJlc3Bhd24ocGxyKQ0KDQoJCXNwYXduKGZ1bmN0aW9uKCkNCgkJCXBsci5DaGFyYWN0ZXJBZGRlZDpXYWl0KCk6V2FpdEZvckNoaWxkKCJIdW1hbm9pZCIpLlJvb3RQYXJ0LkNGcmFtZSwgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lID0gcG9zLCB3YWl0KCkgYW5kIHBvczENCgkJZW5kKQ0KCWVuZA0KDQoJbG9jYWwgZnVuY3Rpb24gc3BsaXRBcmdzKGNvbW1hbmQpDQoJCWNvbW1hbmQgPSBzdHJpbmcuZ3N1Yihjb21tYW5kLCAiLCIsICIgIikNCgkJY29tbWFuZCA9IHN0cmluZy5zcGxpdChjb21tYW5kLCAiICIpDQoNCgkJZm9yIGksIHYgaW4gaXBhaXJzKGNvbW1hbmQpIGRvDQoJCQl2ID0gc3RyaW5nLmdzdWIodiwgIiVzKyIsICIiKQ0KCQkJaWYgdiA9PSAiIiB0aGVuDQoJCQkJdGFibGUucmVtb3ZlKGNvbW1hbmQsIGkpDQoJCQllbmQNCgkJZW5kDQoNCgkJcmV0dXJuIGNvbW1hbmQNCgllbmQNCg0KCWxvY2FsIGZ1bmN0aW9uIGZpbmRQbGF5ZXIodGV4dCkNCgkJbG9jYWwgcGxheWVycyA9IGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkNCgkJbG9jYWwgbWF0Y2hlcyA9IHt9DQoNCgkJZm9yIGksIFBsYXllciBpbiBpcGFpcnMocGxheWVycykgZG8NCgkJCWxvY2FsIG5hbWUgPSBQbGF5ZXIuTmFtZQ0KCQkJdGV4dCA9IHN0cmluZy5sb3dlcih0ZXh0KQ0KCQkJbmFtZSA9IHN0cmluZy5sb3dlcihuYW1lKQ0KDQoJCQlsb2NhbCBtYXRjaCA9IHN0cmluZy5maW5kKG5hbWUsIHRleHQpDQoNCgkJCWlmIG1hdGNoIHRoZW4NCgkJCQl0YWJsZS5pbnNlcnQobWF0Y2hlcywgUGxheWVyLk5hbWUpDQoJCQllbmQNCgkJZW5kDQoNCgkJcmV0dXJuIG1hdGNoZXMNCgllbmQNCg0KCWxvY2FsIGRydWdzRW5hYmxlZCA9IGZhbHNlDQoJbG9jYWwgY29sb3JzRW5hYmxlZCA9IGZhbHNlDQoJbG9jYWwgYmxhY2tjYXN0RW5hYmxlZCA9IGZhbHNlDQoJbG9jYWwgY29sb3JFeGNsdWRlID0geyJIZWFkIiwiVG9yc28iLCJMZWZ0IEFybSIsIkxlZnQgTGVnIiwiUmlnaHQgQXJtIiwiUmlnaHQgTGVnIiwiU2hhcmQiLCJEaWFtb25kIn0NCg0KCS0tW1s5OC8yNTUsIDM3LzI1NSwgMjA5LzI1NV1dDQoJbG9jYWwgY29sb3IxDQoJbG9jYWwgY29sb3IyDQoJbG9jYWwgY29sb3IzDQoNCglsb2NhbCBmdW5jdGlvbiBpbnB1dEJveCgpDQoJCWxvY2FsIHRleHQgPSBjb21tYW5kQm94LlRleHQNCgkJd2FpdCgpDQoJCWNvbW1hbmRCb3guVGV4dCA9ICIiDQoNCgkJbG9jYWwgcHJlZml4ID0gIjsiDQoJCWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMSkgPT0gKHByZWZpeCkgdGhlbg0KCQkJdGV4dCA9IHN0cmluZy5sb3dlcih0ZXh0KQ0KDQoJCQlpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDMpID09IChwcmVmaXggLi4gInJlIikgdGhlbg0KCQkJCXJlZnJlc2gocGxheWVyKQ0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMykgPT0gKHByZWZpeCAuLiAidHAiKSB0aGVuDQoJCQkJbG9jYWwgdGVsZXBvcnR0bw0KICAgICAgICAgICAgICAgIGxvY2FsIHRwbmFtZQ0KCQkJCWxvY2FsIHBsYWNlID0gc3RyaW5nLnN1Yih0ZXh0LCA1KQ0KCQkJCWxvY2FsIHBsYWNlcyA9IHsNCgkJCQkJNTY2Mzk5MjQ0LA0KCQkJCQkyNTY5NjI1ODA5LA0KCQkJCQk1NzAxNTgwODEsDQoJCQkJCTUzNzYwMDIwNCwNCgkJCQkJNTIwNTY4MjQwLA0KCQkJCQk1NTQ5NTU1NjAsDQoJCQkJCTYwMjA0ODU1MCwNCgkJCQkJNTc1NDU2NjQ2LA0KCQkJCQkxNzEzOTg2MTEyLA0KCQkJCQkxMjQzNjE1NjEyLA0KCQkJCQk2MzgwNjUzMDIsDQoJCQkJCTYzNDI0MDgyNiwNCgkJCQkJNjMzMDQyNzMxDQoJCQkJfQ0KDQoJCQkJaWYgcGxhY2UgPT0gInN0YW5kYXJkbG93IiBvciBwbGFjZSA9PSAiNTY2Mzk5MjQ0IiB0aGVuDQoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbMV0NCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIkxvd2JpZSBTdGFuZGFyZCINCgkJCQllbHNlaWYgcGxhY2UgPT0gInN0YW5kYXJkNDAiIG9yIHBsYWNlID09ICIyNTY5NjI1ODA5IiB0aGVuDQoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbMl0NCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIlN0YW5kYXJkIg0KCQkJCWVsc2VpZiBwbGFjZSA9PSAibGlnaHQiIG9yIHBsYWNlID09ICI1NzAxNTgwODEiIHRoZW4NCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1szXQ0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiTGlnaHQiDQoJCQkJZWxzZWlmIHBsYWNlID09ICJmaXJlIiBvciBwbGFjZSA9PSAiNTM3NjAwMjA0IiB0aGVuDQoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbNF0NCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIkZpcmUiDQoJCQkJZWxzZWlmIHBsYWNlID09ICJ3YXRlciIgb3IgcGxhY2UgPT0gIjUyMDU2ODI0MCIgdGhlbg0KCQkJCQl0ZWxlcG9ydHRvID0gcGxhY2VzWzVdDQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJXYXRlciINCgkJCQllbHNlaWYgcGxhY2UgPT0gImdyYXNzIiBvciBwbGFjZSA9PSAiNTU0OTU1NTYwIiB0aGVuDQoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbNl0NCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIkdyYXNzIg0KCQkJCWVsc2VpZiBwbGFjZSA9PSAiaGVhdmVuIiBvciBwbGFjZSA9PSAiNjAyMDQ4NTUwIiB0aGVuDQoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbN10NCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIkhlYXZlbiINCgkJCQllbHNlaWYgcGxhY2UgPT0gIm1pbmlsb3ZhbmlhIiBvciBwbGFjZSA9PSAic2FucyIgb3IgcGxhY2UgPT0gIjU3NTQ1NjY0NiIgdGhlbg0KCQkJCQl0ZWxlcG9ydHRvID0gcGxhY2VzWzhdDQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJNaW5pbG92YW5pYSINCgkJCQllbHNlaWYgcGxhY2UgPT0gImRlZmF1bHQiIG9yIHBsYWNlID09ICJ0b3VybmFtZW50IiBvciBwbGFjZSA9PSAiMTcxMzk4NjExMiIgdGhlbg0KCQkJCQl0ZWxlcG9ydHRvID0gcGxhY2VzWzldDQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJUb3VybmFtZW50Ig0KCQkJCWVsc2VpZiBwbGFjZSA9PSAic3Vydml2YWwiIG9yIHBsYWNlID09ICIxMjQzNjE1NjEyIiB0aGVuDQoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbMTBdDQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJTdXJ2aXZhbCINCgkJCQllbHNlaWYgcGxhY2UgPT0gIm1lZ2FzdGFuZGFyZCIgb3IgcGxhY2UgPT0gInN0YW5kYXJkbWVnYSIgb3IgcGxhY2UgPT0gIjYzODA2NTMwMiIgdGhlbg0KCQkJCQl0ZWxlcG9ydHRvID0gcGxhY2VzWzExXQ0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiTWVnYSBTdGFuZGFyZCINCgkJCQllbHNlaWYgcGxhY2UgPT0gIm1lZ2FmaXJlIiBvciBwbGFjZSA9PSAiZmlyZW1lZ2EiIG9yIHBsYWNlID09ICI2MzQyNDA4MjYiIHRoZW4NCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1sxMV0NCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIk1lZ2EgRmlyZSINCgkJCQllbHNlaWYgcGxhY2UgPT0gIm1lZ2FncmFzcyIgb3IgcGxhY2UgPT0gImdyYXNzbWVnYSIgb3IgcGxhY2UgPT0gIjYzMzA0MjczMSIgdGhlbg0KCQkJCQl0ZWxlcG9ydHRvID0gcGxhY2VzWzEzXQ0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiTWVnYSBHcmFzcyINCgkJCQllbHNlDQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJUaGUgcGxhY2Ugd2FzIGluY29ycmVjdGx5IHNwZWNpZmllZCEiDQoJCQkJZW5kDQoNCgkJCQlpZiB0ZWxlcG9ydHRvIHRoZW4NCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlRlbGVwb3J0aW5nIHRvICIgLi4gdHBuYW1lIC4uICIhIg0KCQkJCQlnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0KHRlbGVwb3J0dG8pDQoJCQkJZW5kDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA4KSA9PSAocHJlZml4IC4uICJkZWNsdXR0ZXIiKSB0aGVuDQoJCQkJcGxheWVyLlBsYXllckd1aS5NYWluLkZyYW1lMS5TaXplID0gVURpbTIubmV3KDAuMzc1LCAwLCAwLjM3NSwgMCkNCgkJCQlwbGF5ZXIuUGxheWVyR3VpLk1haW4uRnJhbWUxLkltYWdlVHJhbnNwYXJlbmN5ID0gMQ0KCQkJCXBsYXllci5QbGF5ZXJHdWkuTWFpbi5DaGFyYWN0ZXIuSW1hZ2VUcmFuc3BhcmVuY3kgPSAxDQoJCQkJcGxheWVyLlBsYXllckd1aS5NYWluLkJvb2suSW1hZ2VUcmFuc3BhcmVuY3kgPSAxDQoJCQkJcGxheWVyLlBsYXllckd1aS5NYWluLlNob3AuSW1hZ2VUcmFuc3BhcmVuY3kgPSAxDQoJCQkJcGxheWVyLlBsYXllckd1aS5NYWluLlNraWxsc0Jhci5TaXplID0gVURpbTIubmV3KDAuMzc1LCAwLCAwLjM3NSwgMCkNCgkJCQlwbGF5ZXIuUGxheWVyR3VpLk1haW4uU2tpbGxzQmFyLkltYWdlVHJhbnNwYXJlbmN5ID0gMQ0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgNSkgPT0gKHByZWZpeCAuLiAicmFpbiIpIHRoZW4NCgkJCQlsb2NhbCBjdXJyZW50Q0FNID0gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmENCgkJCQlsb2NhbCByYWluU291bmQgPSBJbnN0YW5jZS5uZXcoIlNvdW5kIikNCgkJCQlyYWluU291bmQuTG9vcGVkID0gdHJ1ZQ0KCQkJCXJhaW5Tb3VuZC5Tb3VuZElkID0gInJieGFzc2V0aWQ6Ly8yODMxNjQ1OTMiDQoJCQkJcmFpblNvdW5kLlZvbHVtZSA9IDENCgkJCQlyYWluU291bmQuUGFyZW50ID0gd29ya3NwYWNlDQoJCQkJcmFpblNvdW5kOlBsYXkoKQ0KDQoJCQkJbG9jYWwgcmFpblBhcnQgPSBJbnN0YW5jZS5uZXcoIlBhcnQiKQ0KCQkJCXJhaW5QYXJ0LlNpemUgPSBWZWN0b3IzLm5ldygzMDAsIDMwMCwgMzAwKQ0KCQkJCXJhaW5QYXJ0LlRyYW5zcGFyZW5jeSA9IDENCgkJCQlyYWluUGFydC5BbmNob3JlZCA9IHRydWUNCgkJCQlyYWluUGFydC5DYW5Db2xsaWRlID0gZmFsc2UNCg0KCQkJCWxvY2FsIHJhaW5FZmZlY3QgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6V2FpdEZvckNoaWxkKCJFZmZlY3RzIik6V2FpdEZvckNoaWxkKCJSYWluIikNCgkJCQlyYWluRWZmZWN0LlJhdGUgPSByYWluUGFydC5TaXplLm1hZ25pdHVkZQ0KCQkJCXJhaW5FZmZlY3QuUGFyZW50ID0gcmFpblBhcnQNCg0KCQkJCWxvY2FsIGlnbm9yZSA9IHdvcmtzcGFjZTpXYWl0Rm9yQ2hpbGQoIi5JZ25vcmUiKQ0KCQkJCXJhaW5QYXJ0LlBhcmVudCA9IGlnbm9yZTpXYWl0Rm9yQ2hpbGQoIi5TZXJ2ZXJFZmZlY3RzIikNCg0KCQkJCWxvY2FsIGZvdiA9IDIgKiBtYXRoLnRhbihtYXRoLnJhZChjdXJyZW50Q0FNLkZpZWxkT2ZWaWV3KSAvIDIpDQoJCQkJbG9jYWwgbmV3UmF5ID0gUmF5Lm5ldw0KCQkJCWxvY2FsIGhlaWdodCA9IFZlY3RvcjMubmV3KDAsIDUwLCAwKQ0KCQkJCWxvY2FsIGRlcHRoID0gQ0ZyYW1lLm5ldygwLCBmb3YgKiA1MCwgLTYwKQ0KDQoJCQkJZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIik6QmluZFRvUmVuZGVyU3RlcCgiUmFpbiIsIEVudW0uUmVuZGVyUHJpb3JpdHkuQ2FtZXJhLlZhbHVlLCBmdW5jdGlvbigpDQoJCQkJCWxvY2FsIHJjID0gd29ya3NwYWNlOkZpbmRQYXJ0T25SYXlXaXRoSWdub3JlTGlzdChuZXdSYXkoY3VycmVudENBTS5DRnJhbWUucCwgaGVpZ2h0KSwge2lnbm9yZX0pDQoNCgkJCQkJaWYgKHJjKSB0aGVuDQoJCQkJCQlyYWluRWZmZWN0LkVuYWJsZWQgPSBmYWxzZQ0KCQkJCQkJcmFpblNvdW5kLlZvbHVtZSA9IDAuNQ0KCQkJCQkJcmV0dXJuDQoJCQkJCWVuZA0KDQoJCQkJCWxvY2FsIHZpZXdwb3J0ID0gY3VycmVudENBTS5WaWV3cG9ydFNpemUNCgkNCgkJCQkJcmFpblBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KGZvdiAqIHZpZXdwb3J0LnggLyB2aWV3cG9ydC55ICogNTAsIDAuMiwgMTAwKQ0KCQkJCQlyYWluUGFydC5DRnJhbWUgPSBjdXJyZW50Q0FNLkNGcmFtZSAqIGRlcHRoDQoJDQoJCQkJCXJhaW5FZmZlY3QuUmF0ZSA9IHJhaW5QYXJ0LlNpemUubWFnbml0dWRlDQoJCQkJCXJhaW5FZmZlY3QuRW5hYmxlZCA9IHRydWUNCgkNCgkJCQkJcmFpblNvdW5kLlZvbHVtZSA9IDENCgkJCQllbmQpDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA0KSA9PSAocHJlZml4IC4uICJmaXgiKSB0aGVuDQoJCQkJaWYgcGxheWVyLlBsYXllckd1aTpXYWl0Rm9yQ2hpbGQoIk1lbnUiKTpGaW5kRmlyc3RDaGlsZCgiQmxhY2tTY3JlZW4iKSB0aGVuDQoJCQkJCXBsYXllci5QbGF5ZXJHdWk6V2FpdEZvckNoaWxkKCJNZW51Iik6RmluZEZpcnN0Q2hpbGQoIkJsYWNrU2NyZWVuIikuVmlzaWJsZSA9IGZhbHNlDQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJGaXhpbmcgdGhlIE1lbnUgR1VJISINCgkJCQllbmQNCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDEzKSA9PSAocHJlZml4IC4uICJidXR0b25oZWlnaHQiKSB0aGVuDQoJCQkJYnV0dG9uSGVpZ2h0ID0gdG9udW1iZXIoc3RyaW5nLnN1Yih0ZXh0LCAxNSkpDQoJCQkJVUlHcmlkTGF5b3V0LkNlbGxTaXplID0gVURpbTIubmV3KDAuNDUsIDAsIDAsIGJ1dHRvbkhlaWdodCkNCgkJCQltYWluZnJhbWUuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCBtYXRoLmNlaWwoI2J1dHRvbnMgLyAyKSAqIChidXR0b25IZWlnaHQgKyBidXR0b25HYXApIC0gYnV0dG9uR2FwKQ0KDQoJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkJ1dHRvbiBoZWlnaHQgd2FzIHNldCB0byAiIC4uIHRvbnVtYmVyKHN0cmluZy5zdWIodGV4dCwgMTUpKSAuLiAiISINCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDEwKSA9PSAocHJlZml4IC4uICJidXR0b25nYXAiKSB0aGVuDQoJCQkJYnV0dG9uR2FwID0gdG9udW1iZXIoc3RyaW5nLnN1Yih0ZXh0LCAxMikpDQoJCQkJVUlHcmlkTGF5b3V0LkNlbGxQYWRkaW5nID0gVURpbTIubmV3KDAsIDcsIDAsIGJ1dHRvbkdhcCkNCgkJCQltYWluZnJhbWUuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCBtYXRoLmNlaWwoI2J1dHRvbnMgLyAyKSAqIChidXR0b25IZWlnaHQgKyBidXR0b25HYXApIC0gYnV0dG9uR2FwKQ0KDQoJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkJ1dHRvbiBnYXAgd2FzIHNldCB0byAiIC4uIHRvbnVtYmVyKHN0cmluZy5zdWIodGV4dCwgMTIpKSAuLiAiISINCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDcpID09IChwcmVmaXggLi4gInJlam9pbiIpIHRoZW4NCgkJCQlyZWpvaW4oKQ0KCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJSZWpvaW5pbmcuLi4iDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA5KSA9PSAocHJlZml4IC4uICJhdXJhL29mZiIpIHRoZW4NCgkJCQlyZXBlYXQgd2FpdCgpIHVudGlsIGdldEhSUChwbGF5ZXIuQ2hhcmFjdGVyKQ0KDQoJCQkJaWYgZ2V0SFJQKHBsYXllci5DaGFyYWN0ZXIpOkZpbmRGaXJzdENoaWxkKCJBdXJhR1AiKSB0aGVuDQoJCQkJCWdldEhSUChwbGF5ZXIuQ2hhcmFjdGVyKTpGaW5kRmlyc3RDaGlsZCgiQXVyYUdQIik6RGVzdHJveSgpDQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJBdXJhIGhhcyBiZWVuIHJlbW92ZWQuIg0KCQkJCWVsc2UNCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkF1cmEgZG9lcyBub3QgZXhpc3QhIg0KCQkJCWVuZA0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMTQpID09IChwcmVmaXggLi4gInRhcmdldHNldHRpbmciKSB0aGVuDQoJCQkJdGFyZ2V0U2V0dGluZyA9IHN0cmluZy5zdWIodGV4dCwgMTYpDQoNCgkJCQlyZXBlYXQNCgkJCQkJaWYgdGFyZ2V0U2V0dGluZyA9PSAic2VsZWN0IiB0aGVuDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3VjY2Vzc2Z1bGx5IHN3aXRjaGVkIHRoZSB0YXJnZXQgc2V0dGluZyB0byBzZWxlY3QhIg0KCQkJCQllbHNlaWYgdGFyZ2V0U2V0dGluZyA9PSAiY2xvc2VzdCIgdGhlbg0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN1Y2Nlc3NmdWxseSBzd2l0Y2hlZCB0aGUgdGFyZ2V0IHNldHRpbmcgdG8gY2xvc2VzdCEiDQoJCQkJCQl3aGlsZSB0YXJnZXRTZXR0aW5nID09ICJjbG9zZXN0IiBkbw0KCQkJCQkJCWxvY2FsIG5lYXJlc3RQbGF5ZXJzID0ge30NCg0KCQkJCQkJCWZvciBpLCB2IGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvDQoJCQkJCQkJCWlmIGdldEhSUCh2LkNoYXJhY3RlcikgYW5kIGdldEhSUChwbGF5ZXIuQ2hhcmFjdGVyKSBhbmQgdiB+PSBwbGF5ZXIgdGhlbg0KCQkJCQkJCQkJaWYgc21hcnRBdHRhY2sgdGhlbg0KCQkJCQkJCQkJCWlmIG5vdCB2LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRm9yY2VGaWVsZCIpIHRoZW4NCgkJCQkJCQkJCQkJbG9jYWwgZGlzdGFuY2UgPSAoZ2V0SFJQKHYuQ2hhcmFjdGVyKS5Qb3NpdGlvbiAtIGdldEhSUChwbGF5ZXIuQ2hhcmFjdGVyKS5Qb3NpdGlvbikuTWFnbml0dWRlDQoNCgkJCQkJCQkJCQkJdGFibGUuaW5zZXJ0KG5lYXJlc3RQbGF5ZXJzLCB7di5OYW1lLCBkaXN0YW5jZX0pDQoJCQkJCQkJCQkJZW5kDQoJCQkJCQkJCQllbHNlDQoJCQkJCQkJCQkJbG9jYWwgZGlzdGFuY2UgPSAoZ2V0SFJQKHYuQ2hhcmFjdGVyKS5Qb3NpdGlvbiAtIGdldEhSUChwbGF5ZXIuQ2hhcmFjdGVyKS5Qb3NpdGlvbikuTWFnbml0dWRlDQoNCgkJCQkJCQkJCQl0YWJsZS5pbnNlcnQobmVhcmVzdFBsYXllcnMsIHt2Lk5hbWUsIGRpc3RhbmNlfSkNCgkJCQkJCQkJCWVuZA0KCQkJCQkJCQllbmQNCgkJCQkJCQllbmQNCg0KCQkJCQkJCXRhYmxlLnNvcnQobmVhcmVzdFBsYXllcnMsIA0KCQkJCQkJCQlmdW5jdGlvbihhLCBiKQ0KCQkJCQkJCQkJcmV0dXJuIGFbMl0gPCBiWzJdDQoJCQkJCQkJCWVuZA0KCQkJCQkJCSkNCg0KCQkJCQkJCXRhcmdldCA9IG5lYXJlc3RQbGF5ZXJzWzFdWzFdIG9yIHBsYXllci5OYW1lDQoNCgkJCQkJCQlpZiB0YXJnZXQgfj0gcGxheWVyLk5hbWUgdGhlbg0KCQkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAiIC4uIHRhcmdldA0KCQkJCQkJCWVsc2UNCgkJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgKE5vbmUpIg0KCQkJCQkJCWVuZA0KDQoJCQkJCQkJd2FpdCgpDQoJCQkJCQllbmQNCgkJCQkJZWxzZWlmIHRhcmdldFNldHRpbmcgPT0gImZhcnRoZXN0IiB0aGVuDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3VjY2Vzc2Z1bGx5IHN3aXRjaGVkIHRoZSB0YXJnZXQgc2V0dGluZyB0byBmYXJ0aGVzdCEiDQoJCQkJCQl3aGlsZSB0YXJnZXRTZXR0aW5nID09ICJmYXJ0aGVzdCIgZG8NCgkJCQkJCQlsb2NhbCBuZWFyZXN0UGxheWVycyA9IHt9DQoNCgkJCQkJCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbw0KCQkJCQkJCQlpZiBnZXRIUlAodi5DaGFyYWN0ZXIpIGFuZCBnZXRIUlAocGxheWVyLkNoYXJhY3RlcikgYW5kIHYgfj0gcGxheWVyIHRoZW4NCgkJCQkJCQkJCWlmIHNtYXJ0QXR0YWNrIHRoZW4NCgkJCQkJCQkJCQlpZiBub3Qgdi5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZvcmNlRmllbGQiKSB0aGVuDQoJCQkJCQkJCQkJCWxvY2FsIGRpc3RhbmNlID0gKGdldEhSUCh2LkNoYXJhY3RlcikuUG9zaXRpb24gLSBnZXRIUlAocGxheWVyLkNoYXJhY3RlcikuUG9zaXRpb24pLk1hZ25pdHVkZQ0KDQoJCQkJCQkJCQkJCXRhYmxlLmluc2VydChuZWFyZXN0UGxheWVycywge3YuTmFtZSwgZGlzdGFuY2V9KQ0KCQkJCQkJCQkJCWVuZA0KCQkJCQkJCQkJZWxzZQ0KCQkJCQkJCQkJCWxvY2FsIGRpc3RhbmNlID0gKGdldEhSUCh2LkNoYXJhY3RlcikuUG9zaXRpb24gLSBnZXRIUlAocGxheWVyLkNoYXJhY3RlcikuUG9zaXRpb24pLk1hZ25pdHVkZQ0KDQoJCQkJCQkJCQkJdGFibGUuaW5zZXJ0KG5lYXJlc3RQbGF5ZXJzLCB7di5OYW1lLCBkaXN0YW5jZX0pDQoJCQkJCQkJCQllbmQNCgkJCQkJCQkJZW5kDQoJCQkJCQkJZW5kDQoNCgkJCQkJCQl0YWJsZS5zb3J0KG5lYXJlc3RQbGF5ZXJzLCANCgkJCQkJCQkJZnVuY3Rpb24oYSwgYikNCgkJCQkJCQkJCXJldHVybiBhWzJdID4gYlsyXQ0KCQkJCQkJCQllbmQNCgkJCQkJCQkpDQoNCgkJCQkJCQl0YXJnZXQgPSBuZWFyZXN0UGxheWVyc1sxXVsxXSBvciBwbGF5ZXIuTmFtZQ0KDQoJCQkJCQkJaWYgdGFyZ2V0IH49IHBsYXllci5OYW1lIHRoZW4NCgkJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgIiAuLiB0YXJnZXQNCgkJCQkJCQllbHNlDQoJCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8IChOb25lKSINCgkJCQkJCQllbmQNCg0KCQkJCQkJCXdhaXQoKQ0KCQkJCQkJZW5kDQoJCQkJCWVsc2VpZiB0YXJnZXRTZXR0aW5nID09ICJsb3docCIgdGhlbg0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN1Y2Nlc3NmdWxseSBzd2l0Y2hlZCB0aGUgdGFyZ2V0IHNldHRpbmcgdG8gbG93aHAhIg0KCQkJCQkJd2hpbGUgdGFyZ2V0U2V0dGluZyA9PSAibG93aHAiIGRvDQoJCQkJCQkJbG9jYWwgbmVhcmVzdFBsYXllcnMgPSB7fQ0KDQoJCQkJCQkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8NCgkJCQkJCQkJaWYgZ2V0SFVNKHYuQ2hhcmFjdGVyKSBhbmQgZ2V0SFVNKHBsYXllci5DaGFyYWN0ZXIpIGFuZCB2IH49IHBsYXllciB0aGVuDQoJCQkJCQkJCQlpZiBzbWFydEF0dGFjayB0aGVuDQoJCQkJCQkJCQkJaWYgbm90IHYuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGb3JjZUZpZWxkIikgdGhlbg0KCQkJCQkJCQkJCQlsb2NhbCBoZWFsdGggPSBnZXRIVU0odi5DaGFyYWN0ZXIpLkhlYWx0aA0KDQoJCQkJCQkJCQkJCXRhYmxlLmluc2VydChuZWFyZXN0UGxheWVycywge3YuTmFtZSwgaGVhbHRofSkNCgkJCQkJCQkJCQllbmQNCgkJCQkJCQkJCWVsc2UNCgkJCQkJCQkJCQlsb2NhbCBoZWFsdGggPSBnZXRIVU0odi5DaGFyYWN0ZXIpLkhlYWx0aA0KDQoJCQkJCQkJCQkJdGFibGUuaW5zZXJ0KG5lYXJlc3RQbGF5ZXJzLCB7di5OYW1lLCBoZWFsdGh9KQ0KCQkJCQkJCQkJZW5kDQoJCQkJCQkJCWVuZA0KCQkJCQkJCWVuZA0KDQoJCQkJCQkJdGFibGUuc29ydChuZWFyZXN0UGxheWVycywgDQoJCQkJCQkJCWZ1bmN0aW9uKGEsIGIpDQoJCQkJCQkJCQlyZXR1cm4gYVsyXSA8IGJbMl0NCgkJCQkJCQkJZW5kDQoJCQkJCQkJKQ0KDQoJCQkJCQkJdGFyZ2V0ID0gbmVhcmVzdFBsYXllcnNbMV1bMV0gb3IgcGxheWVyLk5hbWUNCg0KCQkJCQkJCWlmIHRhcmdldCB+PSBwbGF5ZXIuTmFtZSB0aGVuDQoJCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8ICIgLi4gdGFyZ2V0DQoJCQkJCQkJZWxzZQ0KCQkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoTm9uZSkiDQoJCQkJCQkJZW5kDQoNCgkJCQkJCQl3YWl0KCkNCgkJCQkJCWVuZA0KCQkJCQllbHNlaWYgdGFyZ2V0U2V0dGluZyA9PSAiaGlnaGhwIiB0aGVuDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3VjY2Vzc2Z1bGx5IHN3aXRjaGVkIHRoZSB0YXJnZXQgc2V0dGluZyB0byBoaWdoaHAhIg0KCQkJCQkJd2hpbGUgdGFyZ2V0U2V0dGluZyA9PSAiaGlnaGhwIiBkbw0KCQkJCQkJCWxvY2FsIG5lYXJlc3RQbGF5ZXJzID0ge30NCg0KCQkJCQkJCWZvciBpLCB2IGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvDQoJCQkJCQkJCWlmIGdldEhVTSh2LkNoYXJhY3RlcikgYW5kIGdldEhVTShwbGF5ZXIuQ2hhcmFjdGVyKSBhbmQgdiB+PSBwbGF5ZXIgdGhlbg0KCQkJCQkJCQkJaWYgc21hcnRBdHRhY2sgdGhlbg0KCQkJCQkJCQkJCWlmIG5vdCB2LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRm9yY2VGaWVsZCIpIHRoZW4NCgkJCQkJCQkJCQkJbG9jYWwgaGVhbHRoID0gZ2V0SFVNKHYuQ2hhcmFjdGVyKS5IZWFsdGgNCg0KCQkJCQkJCQkJCQl0YWJsZS5pbnNlcnQobmVhcmVzdFBsYXllcnMsIHt2Lk5hbWUsIGhlYWx0aH0pDQoJCQkJCQkJCQkJZW5kDQoJCQkJCQkJCQllbHNlDQoJCQkJCQkJCQkJbG9jYWwgaGVhbHRoID0gZ2V0SFVNKHYuQ2hhcmFjdGVyKS5IZWFsdGgNCg0KCQkJCQkJCQkJCXRhYmxlLmluc2VydChuZWFyZXN0UGxheWVycywge3YuTmFtZSwgaGVhbHRofSkNCgkJCQkJCQkJCWVuZA0KCQkJCQkJCQllbmQNCgkJCQkJCQllbmQNCg0KCQkJCQkJCXRhYmxlLnNvcnQobmVhcmVzdFBsYXllcnMsIA0KCQkJCQkJCQlmdW5jdGlvbihhLCBiKQ0KCQkJCQkJCQkJcmV0dXJuIGFbMl0gPiBiWzJdDQoJCQkJCQkJCWVuZA0KCQkJCQkJCSkNCg0KCQkJCQkJCXRhcmdldCA9IG5lYXJlc3RQbGF5ZXJzWzFdWzFdIG9yIHBsYXllci5OYW1lDQoNCgkJCQkJCQlpZiB0YXJnZXQgfj0gcGxheWVyLk5hbWUgdGhlbg0KCQkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAiIC4uIHRhcmdldA0KCQkJCQkJCWVsc2UNCgkJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgKE5vbmUpIg0KCQkJCQkJCWVuZA0KDQoJCQkJCQkJd2FpdCgpDQoJCQkJCQllbmQNCgkJCQkJZWxzZQ0KCQkJCQkJdGFyZ2V0U2V0dGluZyA9ICJzZWxlY3QiDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSW52YWxpZCB0YXJnZXQgc2V0dGluZyEgRGlkIHlvdSBzcGVjaWZ5IHNlbGVjdCwgY2xvc2VzdCwgZmFydGhlc3QsIGxvd2hwLCBvciBoaWdoaHA/IFNldHRpbmcgaGFzIGJlZW4gc2V0IHRvIHNlbGVjdC4iDQoJCQkJCWVuZA0KCQkJCXVudGlsIHRhcmdldFNldHRpbmcgPT0gInNlbGVjdCINCg0KCQkJCXRhcmdldCA9IHBsYXllci5OYW1lDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA1KSA9PSAocHJlZml4IC4uICJsb29wIikgdGhlbg0KCQkJCWlmIHN0cmluZy5zdWIodGV4dCwgNywgNykgPT0gKCJ0Iikgb3Igc3RyaW5nLnN1Yih0ZXh0LCA3LCA4KSA9PSAoIm9uIikgdGhlbg0KCQkJCQlpZiBsb29waW5nID09IHRydWUgdGhlbg0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkxvb3BpbmcgYXR0YWNrcyBpcyBhbHJlYWR5IG9uISINCgkJCQkJZWxzZQ0KCQkJCQkJbG9vcGluZyA9IHRydWUNCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJTdGFydGVkIGxvb3BpbmcgYXR0YWNrcyEiDQoJCQkJCWVuZA0KCQkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDcsIDcpID09ICgiZiIpIG9yIHN0cmluZy5zdWIodGV4dCwgNywgOSkgPT0gKCJvZmYiKSB0aGVuDQoJCQkJCWlmIGxvb3BpbmcgPT0gZmFsc2UgdGhlbg0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkxvb3BpbmcgYXR0YWNrcyBpcyBhbHJlYWR5IG9mZiEiDQoJCQkJCWVsc2UNCgkJCQkJCWxvb3BpbmcgPSBmYWxzZQ0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN0b3BwZWQgbG9vcGluZyBhdHRhY2tzISINCgkJCQkJZW5kDQoJCQkJZWxzZQ0KCQkJCQlsb29waW5nID0gbm90IGxvb3BpbmcNCgkJCQkJbG9jYWwgT25Pck9mZiA9ICJPbiINCgkJCQkJaWYgbG9vcGluZyA9PSBmYWxzZSB0aGVuDQoJCQkJCQlPbk9yT2ZmID0gIk9mZiINCgkJCQkJZW5kDQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJUb2dnbGVkIGxvb3BpbmcgYXR0YWNrcyAoIiAuLiBPbk9yT2ZmIC4uICIpISINCgkJCQllbmQNCg0KCQkJCXNwYXduKGZ1bmN0aW9uKCkNCgkJCQkJd2hpbGUgbG9vcGluZyBkbw0KCQkJCQkJZXhwbG9pdCgpDQoJCQkJCQl3YWl0KCkNCgkJCQkJZW5kDQoJCQkJCXJldHVybg0KCQkJCWVuZCkNCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDgpID09IChwcmVmaXggLi4gInVuYnJlYWsiKSB0aGVuDQoJCQkJYnJlYWthYmxlID0gZmFsc2UNCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDkpID09IChwcmVmaXggLi4gImdyY2hhcmdlIikgdGhlbg0KCQkJCUdSQ2hhcmdlID0gdG9udW1iZXIoc3RyaW5nLnN1Yih0ZXh0LCAxMSkpDQoJCQkJd2FpdCgpDQoJCQkJaWYgR1JDaGFyZ2UgPT0gbmlsIHRoZW4NCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkludmFsaWQgQXJndW1lbnRzISBEaWQgeW91IGVudGVyIGFuIGludGVnZXI/Ig0KCQkJCWVsc2UNCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN1Y2Nlc3NmdWxseSBzZXQgdGhlIGNoYXJnZSB0byAiIC4uIEdSQ2hhcmdlIC4uICIhIg0KCQkJCWVuZA0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgNikgPT0gKHByZWZpeCAuLiAic3BlZWQiKSB0aGVuDQoJCQkJU2V0U3BlZWQgPSB0b251bWJlcihzdHJpbmcuc3ViKHRleHQsIDgpKQ0KCQkJCXdhaXQoKQ0KCQkJCWlmIFNldFNwZWVkID09IG5pbCB0aGVuDQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJJbnZhbGlkIEFyZ3VtZW50cyEgRGlkIHlvdSBlbnRlciBhbiBpbnRlZ2VyPyINCgkJCQllbHNlDQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJTdWNjZXNzZnVsbHkgc2V0IHRoZSBzcGVlZCB0byAiIC4uIFNldFNwZWVkIC4uICIhIg0KCQkJCWVuZA0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMTIpID09IChwcmVmaXggLi4gInNtYXJ0YXR0YWNrIikgdGhlbg0KCQkJCWlmIHN0cmluZy5zdWIodGV4dCwgMTQsIDE0KSA9PSAoInQiKSBvciBzdHJpbmcuc3ViKHRleHQsIDE0LCAxNSkgPT0gKCJvbiIpIHRoZW4NCgkJCQkJaWYgc21hcnRBdHRhY2sgPT0gdHJ1ZSB0aGVuDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiRm9yY2VmaWVsZCBkZXRlY3Rpb24gaXMgYWxyZWFkeSBvbiEiDQoJCQkJCWVsc2UNCgkJCQkJCXNtYXJ0QXR0YWNrID0gdHJ1ZQ0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIk5vdyBkZXRlY3RpbmcgZm9yY2VmaWVsZHMhIg0KCQkJCQllbmQNCgkJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxNCwgMTQpID09ICgiZiIpIG9yIHN0cmluZy5zdWIodGV4dCwgMTQsIDE2KSA9PSAoIm9mZiIpIHRoZW4NCgkJCQkJaWYgc21hcnRBdHRhY2sgPT0gZmFsc2UgdGhlbg0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkZvcmNlZmllbGQgZGV0ZWN0aW9uIGlzIGFscmVhZHkgb2ZmISINCgkJCQkJZWxzZQ0KCQkJCQkJc21hcnRBdHRhY2sgPSBmYWxzZQ0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN0b3BwZWQgZGV0ZWN0aW5nIGZvcmNlZmllbGRzISINCgkJCQkJZW5kDQoJCQkJZWxzZQ0KCQkJCQlzbWFydEF0dGFjayA9IG5vdCBzbWFydEF0dGFjaw0KCQkJCQlsb2NhbCBPbk9yT2ZmID0gIk9uIg0KCQkJCQlpZiBzbWFydEF0dGFjayA9PSBmYWxzZSB0aGVuDQoJCQkJCQlPbk9yT2ZmID0gIk9mZiINCgkJCQkJZW5kDQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJUb2dnbGVkIGZvcmNlZmllbGQgZGV0ZWN0aW9uICgiIC4uIE9uT3JPZmYgLi4gIikhIg0KCQkJCWVuZA0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMTApID09IChwcmVmaXggLi4gImdhbWVjb2xvciIpIHRoZW4NCgkJCQlpZiBub3QgZ2FtZS5MaWdodGluZzpGaW5kRmlyc3RDaGlsZCgiRUJHR3VpQ29sb3JDb3JyZWN0aW9uIikgdGhlbg0KCQkJCQlJbnN0YW5jZS5uZXcoIkNvbG9yQ29ycmVjdGlvbkVmZmVjdCIsIGdhbWUuTGlnaHRpbmcpLk5hbWUgPSAiRUJHR3VpQ29sb3JDb3JyZWN0aW9uIg0KCQkJCQl3YWl0KCkNCgkJCQllbmQNCg0KCQkJCWlmIHN0cmluZy5zdWIodGV4dCwgMTIsIDE3KSA9PSAibm9ybWFsIiB0aGVuDQoJCQkJCWdhbWUuTGlnaHRpbmcuRUJHR3VpQ29sb3JDb3JyZWN0aW9uLkNvbnRyYXN0ID0gMA0KCQkJCQlnYW1lLkxpZ2h0aW5nLkVCR0d1aUNvbG9yQ29ycmVjdGlvbi5TYXR1cmF0aW9uID0gMA0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiUmV2ZXJ0aW5nLi4uIg0KCQkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEyLCAyMCkgPT0gImdyYXlzY2FsZSIgdGhlbg0KCQkJCQlnYW1lLkxpZ2h0aW5nLkVCR0d1aUNvbG9yQ29ycmVjdGlvbi5TYXR1cmF0aW9uID0gLTENCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkdyYXlzY2FsaW5nLi4uIg0KCQkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEyLCAyMCkgPT0gImludmVydGh1ZSIgdGhlbg0KCQkJCQlnYW1lLkxpZ2h0aW5nLkVCR0d1aUNvbG9yQ29ycmVjdGlvbi5TYXR1cmF0aW9uID0gLTINCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkludmVydGluZyBodWUuLi4iDQoJCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMTIsIDIwKSA9PSAiaW52ZXJ0YWxsIiB0aGVuDQoJCQkJCWdhbWUuTGlnaHRpbmcuRUJHR3VpQ29sb3JDb3JyZWN0aW9uLkNvbnRyYXN0ID0gLTINCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkludmVydGluZyBhbGwuLi4iDQoJCQkJZWxzZQ0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSW52YWxpZCBjb2xvciBtb2RlIChvciBub25lIHNwZWNpZmllZCkhIg0KCQkJCWVuZA0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMTApID09IChwcmVmaXggLi4gImJsYWNrY2FzdCIpIHRoZW4NCgkJCQlpZiBzdHJpbmcuc3ViKHRleHQsIDEyLCAxMikgPT0gKCJ0Iikgb3Igc3RyaW5nLnN1Yih0ZXh0LCAxMiwgMTMpID09ICgib24iKSB0aGVuDQoJCQkJCWlmIGJsYWNrY2FzdEVuYWJsZWQgPT0gdHJ1ZSB0aGVuDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQmxhY2sgY2FzdGluZyBpcyBhbHJlYWR5IG9uISINCgkJCQkJZWxzZQ0KCQkJCQkJYmxhY2tjYXN0RW5hYmxlZCA9IHRydWUNCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJCbGFjayBjYXN0aW5nIGVuYWJsZWQhIg0KCQkJCQllbmQNCgkJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxMiwgMTIpID09ICgiZiIpIG9yIHN0cmluZy5zdWIodGV4dCwgMTIsIDE0KSA9PSAoIm9mZiIpIHRoZW4NCgkJCQkJaWYgYmxhY2tjYXN0RW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQmxhY2sgY2FzdGluZyBpcyBhbHJlYWR5IG9mZiEiDQoJCQkJCWVsc2UNCgkJCQkJCWJsYWNrY2FzdEVuYWJsZWQgPSBmYWxzZQ0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkJsYWNrIGNhc3RpbmcgZGlzYWJsZWQhIg0KCQkJCQllbmQNCgkJCQllbHNlDQoJCQkJCWJsYWNrY2FzdEVuYWJsZWQgPSBub3QgYmxhY2tjYXN0RW5hYmxlZA0KCQkJCQlsb2NhbCBPbk9yT2ZmID0gIk9uIg0KCQkJCQlpZiBibGFja2Nhc3RFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCQkJCU9uT3JPZmYgPSAiT2ZmIg0KCQkJCQllbmQNCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlRvZ2dsZWQgYmxhY2sgY2FzdGluZyAoIiAuLiBPbk9yT2ZmIC4uICIpISINCgkJCQllbmQNCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDUpID09IChwcmVmaXggLi4gInN0dW4iKSB0aGVuDQoJCQkJaWYgc3RyaW5nLnN1Yih0ZXh0LCA3LCA3KSA9PSAoInQiKSBvciBzdHJpbmcuc3ViKHRleHQsIDcsIDgpID09ICgib24iKSB0aGVuDQoJCQkJCWlmIHN0dW5FbmFibGVkID09IHRydWUgdGhlbg0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN0dW4gaXMgYWxyZWFkeSBvbiEiDQoJCQkJCWVsc2UNCgkJCQkJCXN0dW5FbmFibGVkID0gdHJ1ZQ0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN0dW4gZW5hYmxlZCEiDQoJCQkJCWVuZA0KCQkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDcsIDcpID09ICgiZiIpIG9yIHN0cmluZy5zdWIodGV4dCwgNywgOSkgPT0gKCJvZmYiKSB0aGVuDQoJCQkJCWlmIHN0dW5FbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJTdHVuIGlzIGFscmVhZHkgb2ZmISINCgkJCQkJZWxzZQ0KCQkJCQkJc3R1bkVuYWJsZWQgPSBmYWxzZQ0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN0dW4gZGlzYWJsZWQhIg0KCQkJCQllbmQNCgkJCQllbHNlDQoJCQkJCXN0dW5FbmFibGVkID0gbm90IHN0dW5FbmFibGVkDQoJCQkJCWxvY2FsIE9uT3JPZmYgPSAiT24iDQoJCQkJCWlmIHN0dW5FbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCQkJCU9uT3JPZmYgPSAiT2ZmIg0KCQkJCQkJZm9yIGksIGNvbm5lY3Rpb24gaW4gcGFpcnMoc3R1bkNvbm5lY3Rpb24pIGRvDQoJCQkJCQkJY29ubmVjdGlvbjpEaXNhYmxlKCkNCgkJCQkJCWVuZA0KCQkJCQllbHNlDQoJCQkJCQlmb3IgaSwgY29ubmVjdGlvbiBpbiBwYWlycyhzdHVuQ29ubmVjdGlvbikgZG8NCgkJCQkJCQljb25uZWN0aW9uOkVuYWJsZSgpDQoJCQkJCQllbmQNCgkJCQkJZW5kDQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJUb2dnbGVkIHN0dW4gKCIgLi4gT25Pck9mZiAuLiAiKSEiDQoJCQkJZW5kDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA2KSA9PSAocHJlZml4IC4uICJkcnVncyIpIHRoZW4NCgkJCQlpZiBzdHJpbmcuc3ViKHRleHQsIDgsIDgpID09ICgidCIpIG9yIHN0cmluZy5zdWIodGV4dCwgOCwgOSkgPT0gKCJvbiIpIHRoZW4NCgkJCQkJaWYgZHJ1Z3NFbmFibGVkID09IHRydWUgdGhlbg0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkRydWcgbW9kZSBpcyBhbHJlYWR5IG9uISINCgkJCQkJZWxzZQ0KCQkJCQkJZHJ1Z3NFbmFibGVkID0gdHJ1ZQ0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkRydWcgbW9kZSBlbmFibGVkISINCgkJCQkJZW5kDQoJCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgOCwgOCkgPT0gKCJmIikgb3Igc3RyaW5nLnN1Yih0ZXh0LCA4LCAxMCkgPT0gKCJvZmYiKSB0aGVuDQoJCQkJCWlmIGRydWdzRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiRHJ1ZyBtb2RlIGlzIGFscmVhZHkgb2ZmISINCgkJCQkJZWxzZQ0KCQkJCQkJZHJ1Z3NFbmFibGVkID0gZmFsc2UNCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJEcnVnIG1vZGUgZGlzYWJsZWQhIg0KCQkJCQllbmQNCgkJCQllbHNlDQoJCQkJCWRydWdzRW5hYmxlZCA9IG5vdCBkcnVnc0VuYWJsZWQNCgkJCQkJbG9jYWwgT25Pck9mZiA9ICJPbiINCgkJCQkJaWYgZHJ1Z3NFbmFibGVkID09IGZhbHNlIHRoZW4NCgkJCQkJCU9uT3JPZmYgPSAiT2ZmIg0KCQkJCQllbmQNCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlRvZ2dsZWQgZHJ1ZyBtb2RlICgiIC4uIE9uT3JPZmYgLi4gIikhIg0KCQkJCWVuZA0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMTEpID09IChwcmVmaXggLi4gIm1hZ2ljY29sb3IiKSB0aGVuDQoJCQkJbG9jYWwgc3RyaW5nYXJncyA9IHN0cmluZy5zdWIodGV4dCwgMTMpDQoJCQkJbG9jYWwgYXJncyA9IHNwbGl0QXJncyhzdHJpbmdhcmdzKQ0KDQoJCQkJaWYgKGFyZ3NbMV0gPT0gInQiKSBvciAoYXJnc1sxXSA9PSAib24iKSB0aGVuDQoJCQkJCWlmIChjb2xvcjEgfj0gbmlsKSBhbmQgKGNvbG9yMiB+PSBuaWwpIGFuZCAoY29sb3IzIH49IG5pbCkgdGhlbg0KCQkJCQkJaWYgY29sb3JzRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQkJCQkJY29sb3JzRW5hYmxlZCA9IHRydWUNCgkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VzdG9tIG1hZ2ljIGNvbG9yIGVuYWJsZWQhIg0KCQkJCQkJZWxzZQ0KCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXN0b20gbWFnaWMgY29sb3IgaXMgYWxyZWFkeSBvbiEiDQoJCQkJCQllbmQNCgkJCQkJZWxzZQ0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIllvdSBtdXN0IGhhdmUgY29sb3JzIHNldCB3aXRoIHRoaXMgY29tbWFuZCBiZWZvcmUgdHVybmluZyBpdCBiYWNrIG9uISINCgkJCQkJZW5kDQoJCQkJZWxzZWlmIChhcmdzWzFdID09ICJmIikgb3IgKGFyZ3NbMV0gPT0gIm9mZiIpIHRoZW4NCgkJCQkJaWYgY29sb3JzRW5hYmxlZCA9PSB0cnVlIHRoZW4NCgkJCQkJCWNvbG9yc0VuYWJsZWQgPSBmYWxzZQ0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1c3RvbSBtYWdpYyBjb2xvciBkaXNhYmxlZCEiDQoJCQkJCWVsc2UNCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXN0b20gbWFnaWMgY29sb3IgaXMgYWxyZWFkeSBvZmYhIg0KCQkJCQllbmQNCgkJCQllbHNlDQoJCQkJCWFyZ3NbMV0gPSB0b251bWJlcihhcmdzWzFdKQ0KCQkJCQlhcmdzWzJdID0gdG9udW1iZXIoYXJnc1syXSkNCgkJCQkJYXJnc1szXSA9IHRvbnVtYmVyKGFyZ3NbM10pDQoNCgkJCQkJaWYgbm90IGFyZ3NbM10gdGhlbg0KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkludmFsaWQgQXJndW1lbnRzISBEaWQgeW91IHNwZWNpZnkgUiwgRywgYW5kIEIgdmFsdWVzPyINCgkJCQkJZWxzZQ0KCQkJCQkJaWYgKGFyZ3NbMV0gfj0gbmlsKSBhbmQgKGFyZ3NbMl0gfj0gbmlsKSBhbmQgKGFyZ3NbM10gfj0gbmlsKSB0aGVuDQoJCQkJCQkJbG9jYWwgZXhlY3V0YWJsZSA9IHRydWUNCg0KCQkJCQkJCWZvciBpID0gMSwgMywgMSBkbw0KCQkJCQkJCQlpZiAoYXJnc1tpXSA8IDApIG9yIChhcmdzW2ldID4gMjU1KSB0aGVuDQoJCQkJCQkJCQlleGVjdXRhYmxlID0gZmFsc2UNCgkJCQkJCQkJCWJyZWFrDQoJCQkJCQkJCWVuZA0KCQkJCQkJCWVuZA0KDQoJCQkJCQkJaWYgZXhlY3V0YWJsZSA9PSB0cnVlIHRoZW4NCgkJCQkJCQkJY29sb3IxID0gYXJnc1sxXQ0KCQkJCQkJCQljb2xvcjIgPSBhcmdzWzJdDQoJCQkJCQkJCWNvbG9yMyA9IGFyZ3NbM10NCg0KCQkJCQkJCQljb2xvcnNFbmFibGVkID0gdHJ1ZQ0KCQkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VzdG9tIG1hZ2ljIGNvbG9yIHdhcyBzZXQgdG8gIiAuLiBjb2xvcjEgLi4gIiwgIiAuLiBjb2xvcjIgLi4gIiwgYW5kICIgLi4gY29sb3IzIC4uICIhIg0KCQkJCQkJCWVsc2UNCgkJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkludmFsaWQgQXJndW1lbnRzISBUaGUgbnVtYmVycyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMjU1ISINCgkJCQkJCQllbmQNCgkJCQkJCWVsc2UNCgkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSW52YWxpZCBBcmd1bWVudHMhIFBsZWFzZSB1c2UgbnVtYmVycyB0byBzcGVjaWZ5IFIsIEcsIGFuZCBCIHZhbHVlcy4iDQoJCQkJCQllbmQNCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA3KSA9PSAocHJlZml4IC4uICJjb2xvcnMiKSB0aGVuDQoJCQkJZ2FtZS5Xb3Jrc3BhY2UuRGVzY2VuZGFudEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oZCkNCgkJCQkJc3Bhd24oZnVuY3Rpb24oKSANCgkJCQkJCXBjYWxsKGZ1bmN0aW9uKCkNCgkJCQkJCQl3aGlsZSB0cnVlIGRvDQoJCQkJCQkJCWlmIGQuUGFyZW50IH49IG5pbCB0aGVuDQoJCQkJCQkJCQlpZiBkcnVnc0VuYWJsZWQgdGhlbg0KCQkJCQkJCQkJCWQuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQihtYXRoLnJhbmRvbSgwLCAyNTUpLCBtYXRoLnJhbmRvbSgwLCAyNTUpLCBtYXRoLnJhbmRvbSgwLCAyNTUpKQ0KCQkJCQkJCQkJCXdhaXQoKG1hdGgucmFuZG9tKDEsIDUpKS8xMCkNCgkJCQkJCQkJCWVsc2VpZiBjb2xvcnNFbmFibGVkIHRoZW4NCgkJCQkJCQkJCQlpZiBub3QgdGFibGUuZmluZChjb2xvckV4Y2x1ZGUsIGQuTmFtZSkgdGhlbiANCgkJCQkJCQkJCQkJZC5Db2xvciA9IENvbG9yMy5mcm9tUkdCKGNvbG9yMSwgY29sb3IyLCBjb2xvcjMpDQoJCQkJCQkJCQkJCXdhaXQoKQ0KCQkJCQkJCQkJCWVsc2UgYnJlYWsgZW5kDQoJCQkJCQkJCQllbHNlDQoJCQkJCQkJCQkJYnJlYWsNCgkJCQkJCQkJCWVuZA0KCQkJCQkJCQllbHNlDQoJCQkJCQkJCQlicmVhaw0KCQkJCQkJCQllbmQNCgkJCQkJCQllbmQNCgkJCQkJCWVuZCkNCgkJCQkJZW5kKQ0KDQoJCQkJCXNwYXduKGZ1bmN0aW9uKCkNCgkJCQkJCXBjYWxsKGZ1bmN0aW9uKCkNCgkJCQkJCQlpZiAoYmxhY2tjYXN0RW5hYmxlZCA9PSB0cnVlKSBhbmQgKGQuUGFyZW50IH49IG5pbCkgdGhlbg0KCQkJCQkJCQlmb3IgaSwgdiBpbiBwYWlycyhkOkdldENoaWxkcmVuKCkpIGRvDQoJCQkJCQkJCQlpZiB2OklzQSgiRGVjYWwiKSB0aGVuDQoJCQkJCQkJCQkJdi5Db2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQ0KCQkJCQkJCQkJZW5kDQoJCQkJCQkJCWVuZA0KCQkJCQkJCWVuZA0KCQkJCQkJZW5kKQ0KCQkJCQllbmQpDQoNCgkJCQkJc3Bhd24oZnVuY3Rpb24oKQ0KCQkJCQkJcGNhbGwoZnVuY3Rpb24oKQ0KCQkJCQkJCWlmIGQ6SXNBKCJQYXJ0aWNsZUVtaXR0ZXIiKSB0aGVuCQkJDQoJCQkJCQkJCXdoaWxlIHRydWUgZG8NCgkJCQkJCQkJCWlmIGQuUGFyZW50IH49IG5pbCB0aGVuDQoJCQkJCQkJCQkJaWYgZHJ1Z3NFbmFibGVkIHRoZW4NCgkJCQkJCQkJCQkJZC5Db2xvciA9IENvbG9yU2VxdWVuY2UubmV3ew0KCQkJCQkJCQkJCQkJQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLCBDb2xvcjMubmV3KG1hdGgucmFuZG9tKDAsIDI1NSkvMjU1LCBtYXRoLnJhbmRvbSgwLCAyNTUpLzI1NSwgbWF0aC5yYW5kb20oMCwgMjU1KS8yNTUpKSwNCgkJCQkJCQkJCQkJCUNvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMSwgQ29sb3IzLm5ldyhtYXRoLnJhbmRvbSgwLCAyNTUpLzI1NSwgbWF0aC5yYW5kb20oMCwgMjU1KS8yNTUsIG1hdGgucmFuZG9tKDAsIDI1NSkvMjU1KSkNCgkJCQkJCQkJCQkJfQ0KCQkJCQkJCQkJCQl3YWl0KChtYXRoLnJhbmRvbSgxLCA1KSkvMTApDQoJCQkJCQkJCQkJZWxzZWlmIGNvbG9yc0VuYWJsZWQgdGhlbg0KCQkJCQkJCQkJCQlkLkNvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXd7DQoJCQkJCQkJCQkJCQlDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAsIENvbG9yMy5uZXcoY29sb3IxLzI1NSwgY29sb3IyLzI1NSwgY29sb3IzLzI1NSkpLA0KCQkJCQkJCQkJCQkJQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygxLCBDb2xvcjMubmV3KGNvbG9yMS8yNTUsIGNvbG9yMi8yNTUsIGNvbG9yMy8yNTUpKQ0KCQkJCQkJCQkJCQl9DQoJCQkJCQkJCQkJCXdhaXQoKQ0KCQkJCQkJCQkJCWVsc2UNCgkJCQkJCQkJCQkJYnJlYWsNCgkJCQkJCQkJCQllbmQNCgkJCQkJCQkJCWVsc2UNCgkJCQkJCQkJCQlicmVhaw0KCQkJCQkJCQkJZW5kDQoJCQkJCQkJCWVuZA0KCQkJCQkJCWVuZA0KCQkJCQkJZW5kKQ0KCQkJCQllbmQpDQoJCQkJZW5kKQ0KCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgNSkgPT0gKHByZWZpeCAuLiAiaGVhbCIpIHRoZW4NCgkJCQlsb2NhbCBzdHJpbmdhcmdzID0gc3RyaW5nLnN1Yih0ZXh0LCA3KQ0KCQkJCWxvY2FsIGFyZ3MgPSBzcGxpdEFyZ3Moc3RyaW5nYXJncykNCg0KCQkJCWlmIGFyZ3NbMV0gdGhlbgkJCQkNCgkJCQkJaWYgKCMoZmluZFBsYXllcihhcmdzWzFdKSkgPT0gMSkgdGhlbg0KCQkJCQkJbG9jYWwgaGVhbGluZ1BsYXllciA9IGZpbmRQbGF5ZXIoYXJnc1sxXSlbMV0NCgkJCQkJCWxvY2FsIGNociA9IGdhbWUuUGxheWVyc1toZWFsaW5nUGxheWVyXS5DaGFyYWN0ZXINCg0KCQkJCQkJaWYgY2hyIHRoZW4NCgkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSGVhbGluZyAiIC4uIGZpbmRQbGF5ZXIoYXJnc1sxXSlbMV0gLi4gIi4uLiINCgkJCQkJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJDcnlzdGFsIiwgIkdsZWFtaW5nIEhhcm1vbnkiKQ0KCQkJCQkJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiQ3J5c3RhbCIsICJHbGVhbWluZyBIYXJtb255IiwgY2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pDQoJCQkJCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiUGhvZW5peCIsICJCbHVlIEFyc29uIikNCgkJCQkJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIlBob2VuaXgiLCAiQmx1ZSBBcnNvbiIsIGNoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKQ0KCQkJCQkJCWlmIGNociA9PSBwbGF5ZXIuQ2hhcmFjdGVyIHRoZW4NCgkJCQkJCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiQW5nZWwiLCJBbmdlbGljIEF1cmEiKQ0KCQkJCQkJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkFuZ2VsIiwiQW5nZWxpYyBBdXJhIikNCgkJCQkJCQllbmQNCgkJCQkJCWVuZA0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDIpID09IChwcmVmaXggLi4gImUiKSB0aGVuDQoJCQkJbG9jYWwgcGhhc2UgPSBzdHJpbmcuc3ViKHRleHQsIDQpDQoNCgkJCQlpZiB0b251bWJlcihwaGFzZSkgfj0gbmlsIHRoZW4NCgkJCQkJcGhhc2UgPSBtYXRoLmZsb29yKHRvbnVtYmVyKHBoYXNlKSkNCg0KCQkJCQlpZiAocGhhc2UgPT0gMSkgb3IgKHBoYXNlID09IDIpIG9yIChwaGFzZSA9PSAzKSB0aGVuDQoJCQkJCQlFY2hvZXNQaGFzZSA9IHBoYXNlDQoNCgkJCQkJCWxvY2FsIG1vZGUgPSAiIg0KDQoJCQkJCQlpZiBFY2hvZXNQaGFzZSA9PSAxIHRoZW4NCgkJCQkJCQltb2RlID0gIihTVEFSKSINCgkJCQkJCWVsc2VpZiBFY2hvZXNQaGFzZSA9PSAyIHRoZW4NCgkJCQkJCQltb2RlID0gIihGTEFNRSkiDQoJCQkJCQllbHNlaWYgRWNob2VzUGhhc2UgPT0gMyB0aGVuDQoJCQkJCQkJbW9kZSA9ICIoU0hPQ0spIg0KCQkJCQkJZW5kDQoNCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJFY2hvZXMgcGhhc2UgaGFzIGJlZW4gY2hhbmdlZCEgIiAuLiBtb2RlDQoJCQkJCWVsc2UNCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJQaGFzZSBpcyBpbnZhbGlkISBNdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gMSBhbmQgMy4iDQoJCQkJCWVuZA0KCQkJCWVsc2UNCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlBoYXNlIGlzIGludmFsaWQhIE11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAxIGFuZCAzLiINCgkJCQllbmQNCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDEwKSA9PSAocHJlZml4IC4uICJjaGFuZ2Vsb2ciKSB0aGVuDQoJCQkJLS0gVGFnOiBDSE5HTEcNCgkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiRG9uZSEgSGl0IEN0cmwrRjkgdG8gdmlldy4iDQoJCQkJd2FybigiUm9ibG94IGlzIGR1bWIgYW5kIGRvZXNuJ3QgYWxsb3cgbWUgdG8gbG9hZCBhIHN0cmluZyB3aXRoIG11bHRpcGxlIGxpbmVzIGhlcmUuIikNCgkJCQlwcmludCgiQ2hlY2sgaHR0cHM6Ly9wYXN0ZWJpbi5jb20vcmF3L2ZGRHBHTUFyIHRvIHNlZSB0aGUgY2hhbmdlbG9nLiIpDQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA4KSA9PSAocHJlZml4IC4uICJvcmlnaW4iKSB0aGVuDQoJCQkJeHBjYWxsKGZ1bmN0aW9uKCkNCgkJCQkJbG9jYWwgb3JpZ2luID0gSW5zdGFuY2UubmV3KCJQYXJ0IikNCgkJCQkJb3JpZ2luLkFuY2hvcmVkID0gdHJ1ZQ0KCQkJCQlvcmlnaW4uUGFyZW50ID0gZ2FtZS5Xb3Jrc3BhY2VbIi5JZ25vcmUiXVsiLlNlcnZlckVmZmVjdHMiXQ0KCQkJCQlvcmlnaW4uTmFtZSA9ICJPcmlnaW4iDQoJCQkJCW9yaWdpbi5NYXRlcmlhbCA9IEVudW0uTWF0ZXJpYWwuTmVvbg0KCQkJCQlvcmlnaW4uQnJpY2tDb2xvciA9IEJyaWNrQ29sb3IubmV3KCJSZWFsbHkgcmVkIikNCgkJCQkJb3JpZ2luLlNpemUgPSBWZWN0b3IzLm5ldygwLjUsIDAuNSwgMC41KQ0KCQkJCQlvcmlnaW4uUG9zaXRpb24gPSBWZWN0b3IzLm5ldygwLCAwLCAwKQ0KCQkJCQl3YXJuKCJNYWRlIGEgYmxvY2sgYXQgdGhlIG9yaWdpbiEiKQ0KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3VjY2VzcyEgQ2hlY2sgY29uc29sZSBmb3IgbW9yZSBpbmZvIg0KCQkJCWVuZCwgZnVuY3Rpb24oZSkNCgkJCQkJcHJpbnQoIkVuY291bnRlcmVkIGFuIGVycm9yISB4cGNhbGwgc2F5czoiLCBlKQ0KCQkJCQl3YXJuKCd0cmFjZWJhY2s6JywgZGVidWcudHJhY2ViYWNrKCkpDQoJCQkJZW5kKQ0KICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgNikgPT0gKHByZWZpeCAuLiAiaGVscCIpIHRoZW4NCiAgICAgICAgICAgICAgICB3YXJuKCJSb2Jsb3ggaXMgZHVtYiBhbmQgaXNuJ3QgZm9ybWF0dGluZyBtdWx0aWxpbmUgc3RyaW5ncyByaWdodC4iKQ0KICAgICAgICAgICAgICAgIHByaW50KCJGb3Igbm93LCBjaGVjayBodHRwczovL3Bhc3RlYmluLmNvbS9yYXcvWTc0R2loR3kgdG8gc2VlIHRoZSBmdWxsIGxpc3Qgb2YgY29tbWFuZHMuIikNCiAgICAgICAgICAgICAgICBjb21tYW5kQm94T3V0cHV0LlRleHQgPSAiRG9uZSEgSGl0IEN0cmwrRjkgdG8gdmlldy4iDQogICAgICAgICAgICBlbmQNCg0KCQkJd2FpdCgxLjUpDQoJCQlpZiB0YXJnZXQgfj0gcGxheWVyLk5hbWUgdGhlbg0KCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8ICIgLi4gdGFyZ2V0DQoJCQllbHNlDQoJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgKE5vbmUpIg0KCQkJZW5kDQoJCWVsc2UNCgkJCWxvY2FsIG1hdGNoZXMgPSBmaW5kUGxheWVyKHRleHQpDQoNCgkJCWlmICNtYXRjaGVzID09IDEgdGhlbg0KCQkJCXRhcmdldCA9IG1hdGNoZXNbMV0NCgkJCQlpZiBtYXRjaGVzWzFdID09IHBsYXllci5OYW1lIHRoZW4NCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgKE5vbmUpIgkJCQkJCQ0KCQkJCWVsc2UNCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgIiAuLiBtYXRjaGVzWzFdDQoJCQkJZW5kDQoJCQkJd2FpdCgxKQ0KCQkJZWxzZQ0KCQkJCXRhcmdldCA9IHBsYXllci5OYW1lDQoJCQkJd2FybigiVGFyZ2V0IG5vdCBmb3VuZCEgRG8gbXVsdGlwbGUgcGxheWVycyBoYXZlIHRoYXQgc2FtZSBzdWJzdHJpbmcgaW4gdGhlaXIgbmFtZXM/IikNCgkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSW52YWxpZCBUYXJnZXQhIFR5cGUgdGhlaXIgbmFtZSBhZ2Fpbi4iDQoJCQkJd2FpdCgxLjUpDQoJCQkJaWYgdGFyZ2V0ID09IHBsYXllci5OYW1lIHRoZW4NCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgKE5vbmUpIg0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KDQoJZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuUGxheWVyUmVtb3Zpbmc6Y29ubmVjdChmdW5jdGlvbihwbGF5ZXIpDQoJCWlmIHRhcmdldCA9PSBwbGF5ZXIuTmFtZSB0aGVuDQoJCQl0YXJnZXQgPSBwbGF5ZXIuTmFtZQ0KCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgKFRhcmdldCBSUWVkISkiDQoJCWVuZA0KCWVuZCkNCg0KCWNvbW1hbmRCb3guRm9jdXNMb3N0OkNvbm5lY3QoZnVuY3Rpb24oZW50ZXJQcmVzc2VkKQ0KCQlpZiBlbnRlclByZXNzZWQgdGhlbg0KCQkJaWYgY29tbWFuZEJveC5UZXh0IH49ICIiIHRoZW4NCgkJCQlpbnB1dEJveCgpDQoJCQllbmQNCgkJZW5kDQoJZW5kKQ0KDQoJY29yb3V0aW5lLnJlc3VtZShjb3JvdXRpbmUuY3JlYXRlKGZ1bmN0aW9uKCkNCgkJbWFpbmZyYW1lLkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgKG1hdGguY2VpbCgjYnV0dG9ucyAqIDM3KSAvIDIpIC0gNykNCgllbmQpKQ0KDQoJLS0gQnJlYWtpbmcgU2NyaXB0IFVzZXJzDQoNCglicmVha2FibGUgPSB0cnVlDQoNCglsb2NhbCBicmVha1VzZXJzID0gew0KCQkxODY0MzgwNTgxLA0KCQkxODIxMzMyOTMsDQoJCTI5NzYxNTIzMSwNCgkJMTEyODExNDk0NCwNCgkJMTk1NjQxMzA3OSwNCgkJMzExMDI3MjA0LA0KCQkxOTAzMTY1NDA1LA0KCQkxOTMzNzM0OTU2LA0KCQkxODEyMDUzNjMyLA0KCQkxOTA2MzExOTAyLA0KCQkxOTkzMjI0NzI0LA0KCQkxOTQ0NTMxNjY1LA0KCQkxMDgwNDUwMjMNCgl9DQoNCglsb2NhbCBvbmNoYXQgPSBmdW5jdGlvbihwbHIsIG1zZykNCgkJbG9jYWwgYWxsb3dlZCA9IGZhbHNlDQoJCWZvciBfLCB1c2VyIGluIHBhaXJzKGJyZWFrVXNlcnMpIGRvDQoJCQlpZiBwbHIuTmFtZSA9PSB1c2VyIHRoZW4NCgkJCQlhbGxvd2VkID0gdHJ1ZQ0KCQkJZW5kDQoJCWVuZA0KDQoJCWxvY2FsIHByZWZpeCA9ICI7Ig0KDQoJCWlmIHN0cmluZy5zdWIobXNnLCAxLCA3KSA9PSAocHJlZml4IC4uICJicmVhayAiKSB0aGVuDQoJCQlsb2NhbCBtYXRjaGVzID0ge30NCg0KCQkJZm9yIGksIFBsYXllciBpbiBpcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8NCgkJCQlsb2NhbCBuYW1lID0gUGxheWVyLk5hbWUNCgkJCQltc2cgPSBzdHJpbmcubG93ZXIoc3RyaW5nLnN1Yihtc2csIDgpKQ0KCQkJCW5hbWUgPSBzdHJpbmcubG93ZXIobmFtZSkNCgkJCQlsb2NhbCB0ZXJtID0gc3RyaW5nLnN1YihuYW1lLCAxLCBzdHJpbmcubGVuKG5hbWUpKQ0KDQoJCQkJbG9jYWwgbWF0Y2ggPSBzdHJpbmcuZmluZCh0ZXJtLCBtc2cpDQoNCgkJCQlpZiBtYXRjaCB0aGVuDQoJCQkJCXRhYmxlLmluc2VydChtYXRjaGVzLCBQbGF5ZXIuTmFtZSkNCgkJCQllbmQNCgkJCWVuZA0KDQoJCQlpZiBtYXRjaGVzWzFdID09IHBsYXllci5OYW1lIGFuZCBicmVha2FibGUgYW5kIGFsbG93ZWQgdGhlbg0KCQkJCXdoaWxlIHRydWUgZG8NCg0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KDQoJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0UGxheWVycygpKSBkbw0KCQl2LkNoYXR0ZWQ6Q29ubmVjdChmdW5jdGlvbihtc2cpDQoJCQlvbmNoYXQodiwgbXNnKQ0KCQllbmQpDQoJZW5kDQoNCglnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5QbGF5ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHYpDQoJCXYuQ2hhdHRlZDpDb25uZWN0KGZ1bmN0aW9uKG1zZykNCgkJCW9uY2hhdCh2LCBtc2cpDQoJCWVuZCkNCgllbmQpDQoNCgktLSBFeHBsb2l0cw0KDQoJbG9jYWwgZnVuY3Rpb24gZmYoKQ0KCQlpZiBzbWFydEF0dGFjayA9PSB0cnVlIHRoZW4NCgkJCWlmIGdhbWUuUGxheWVyc1t0YXJnZXRdLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRm9yY2VGaWVsZCIpIHRoZW4NCgkJCQlyZXR1cm4gZmFsc2UNCgkJCWVsc2UNCgkJCQlyZXR1cm4gdHJ1ZQ0KCQkJZW5kDQoJCWVsc2UNCgkJCXJldHVybiB0cnVlDQoJCWVuZA0KCWVuZA0KDQoJZnVuY3Rpb24gZXhwbG9pdCgpDQoJCS0tIEV4cGxvaXQgZnVuY3Rpb24uIFdoZW4gQyBpcyBwcmVzc2VkIGFuZCBvbmUgb2YgdGhlc2UgYXJlICJ0cnVlIiwgaXQgd2lsbCBmaXJlIGl0Lg0KCQlsb2NhbCB0YXJnZXRDaHIgPSBnYW1lLlBsYXllcnNbdGFyZ2V0XS5DaGFyYWN0ZXINCg0KCQlpZiBSZWFwZXJVbHRFbmFibGVkIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIlJlYXBlciIsICJSZWFwZXIncyBSYWdlIikNCgkJCWxvY2FsIGFyZ3MgPSB7DQoJCQkJWzFdID0gIlJlYXBlciIsDQoJCQkJWzJdID0gIlJlYXBlcidzIFJhZ2UiLA0KCQkJCVszXSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQ0KCQkJfQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCgkJZW5kCQkNCg0KCQlpZiBDcmVhdGlvbkhvbGRFbmFibGVkIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIkNyZWF0aW9uIiwgIkNvbnRpbnVvdXMgU3RyaWtlcyIpDQoJCQlsb2NhbCBhcmdzID0gew0KCQkJCVsxXSA9ICJDcmVhdGlvbiIsDQoJCQkJWzJdID0gIkNvbnRpbnVvdXMgU3RyaWtlcyIsDQoJCQkJWzNdID0gew0KCQkJCQlbIkNGIl0gPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUsDQoJCQkJCVsiQ2hhcmdlIl0gPSAyDQoJCQkJfQ0KCQkJfQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCgkJZW5kDQoNCgkJaWYgSHlwZXJhbmdFbmFibGVkIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIlRlY2hub2xvZ3kiLCAiSHlwZXJhbmciKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJUZWNobm9sb2d5IiwgIkh5cGVyYW5nIiwgdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KCQllbmQNCg0KCQlpZiBEYXJrQW9lRW5hYmxlZCB0aGVuDQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJEYXJrbmVzcyIsICJNdXJreSBNaXNzaWxlcyIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkRhcmtuZXNzIiwgIk11cmt5IE1pc3NpbGVzIiwge2xhc3RNb3VzZVBvc2l0aW9uID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbil9KQ0KCQllbmQNCg0KCQlpZiBEaXNwZXJzaW9uRW5hYmxlZCB0aGVuDQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJTdG9ybSIsICJMaWdodG5pbmcgRGlzcGVyc2lvbiIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIlN0b3JtIiwgIkxpZ2h0bmluZyBEaXNwZXJzaW9uIiwge0dyb3VuZGVkID0gdHJ1ZX0pDQoJCWVuZA0KDQoJCWlmIERvdWJsZVJheUVuYWJsZWQgYW5kIGZmKCkgPT0gdHJ1ZSB0aGVuDQoJCQlsb2NhbCBhcmdzID0gew0KCQkJCVsxXSA9ICJTb2xhciIsDQoJCQkJWzJdID0gIkRvdWJsZSBSYXkiDQoJCQl9CQkJDQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkJCQkNCgkJCWxvY2FsIGFyZ3MgPSB7DQoJCQkJWzFdID0gIlNvbGFyIiwNCgkJCQlbMl0gPSAiRG91YmxlIFJheSIsDQoJCQkJWzNdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCg5MCksIDAsIDApDQoJCQl9CQkJDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQ0KCQllbmQNCg0KCQlpZiBTdG9ybUJ1bGxldHNFbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJbG9jYWwgYXJncyA9IHsNCgkJCQlbMV0gPSAiU3Rvcm0iLA0KCQkJCVsyXSA9ICJMaWdodG5pbmcgQmFycmFnZSINCgkJCX0JCQkNCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIodW5wYWNrKGFyZ3MpKQkJCQ0KCQkJbG9jYWwgYXJncyA9IHsNCgkJCQlbMV0gPSAiU3Rvcm0iLA0KCQkJCVsyXSA9ICJMaWdodG5pbmcgQmFycmFnZSIsDQoJCQkJWzNdID0gew0KCQkJCQlbIkRpcmVjdGlvbiJdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCg5MCksIDAsIDApDQoJCQkJfQ0KCQkJfQkJCQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCgkJZW5kDQoNCgkJaWYgT3JiaXRhbEhhY2tFbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJbG9jYWwgYXJncyA9IHsNCgkJCQlbMV0gPSAiVGVjaG5vbG9neSIsDQoJCQkJWzJdID0gIk9yYml0YWwgU3RyaWtlIg0KCQkJfQ0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcih1bnBhY2soYXJncykpDQoJCQlsb2NhbCBhcmdzID0gew0KCQkJCVsxXSA9ICJUZWNobm9sb2d5IiwNCgkJCQlbMl0gPSAiT3JiaXRhbCBTdHJpa2UiLA0KCQkJCVszXSA9IENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pDQoJCQl9DQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQ0KCQllbmQNCg0KCQlpZiBWaWdvckhhY2tFbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJbG9jYWwgYXJncyA9IHsNCgkJCQlbMV0gPSAiU3Bpcml0IiwNCgkJCQlbMl0gPSAiVmlnb3IgR3lyYXRpb24iDQoJCQl9DQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkNCgkJCWxvY2FsIGFyZ3MgPSB7DQoJCQkJWzFdID0gIlNwaXJpdCIsDQoJCQkJWzJdID0gIlZpZ29yIEd5cmF0aW9uIiwNCgkJCQlbM10gPSB7DQoJCQkJCVsxXSA9IENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLA0KCQkJCQlbMl0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwNCgkJCQkJWzNdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksDQoJCQkJCVs0XSA9IENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLA0KCQkJCQlbNV0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwNCgkJCQkJWzZdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksDQoJCQkJCVs3XSA9IENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLA0KCQkJCQlbOF0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwNCgkJCQkJWzldID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksDQoJCQkJCVsxMF0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwNCgkJCQkJWzExXSA9IENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pDQoJCQkJfQ0KCQkJfQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCgkJZW5kDQoNCgkJaWYgQXN0ZXJvaWRCZWx0RW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCWxvY2FsIGFyZ3MgPSB7DQoJCQkJWzFdID0gIlNwYWNlIiwNCgkJCQlbMl0gPSAiQXN0ZXJvaWQgQmVsdCINCgkJCX0NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIodW5wYWNrKGFyZ3MpKQ0KCQkJbG9jYWwgYXJncyA9IHsNCgkJCQlbMV0gPSAiU3BhY2UiLA0KCQkJCVsyXSA9ICJBc3Rlcm9pZCBCZWx0IiwNCgkJCQlbM10gPSB7DQoJCQkJCVsxXSA9IENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLA0KCQkJCQlbMl0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwNCgkJCQkJWzNdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksDQoJCQkJCVs0XSA9IENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLA0KCQkJCQlbNV0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwNCgkJCQkJWzZdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksDQoJCQkJCVs3XSA9IENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLA0KCQkJCQlbOF0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwNCgkJCQkJWzldID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksDQoJCQkJCVsxMF0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSwNCgkJCQkJWzExXSA9IENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pDQoJCQkJfQ0KCQkJfQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkNCgkJZW5kDQoNCgkJaWYgQmxhemVDb2x1bW5FbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiRmlyZSIsICJCbGF6ZSBDb2x1bW4iLCBWZWN0b3IzLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkZpcmUiLCAiQmxhemUgQ29sdW1uIiwgQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikpDQoJCWVuZA0KDQoJCWlmIFZpbmVUcmFwRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIk5hdHVyZSIsICJWaW5lIFRyYXAiLCBWZWN0b3IzLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIk5hdHVyZSIsICJWaW5lIFRyYXAiLCBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSkNCgkJZW5kDQoNCgkJaWYgUGxhc21hSW1wbG9zaW9uRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIlBsYXNtYSIsICJQbGFzbWEgSW1wbG9zaW9uIiwgVmVjdG9yMy5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJQbGFzbWEiLCAiUGxhc21hIEltcGxvc2lvbiIsIENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pKQ0KCQllbmQNCg0KCQlpZiBTbGltZUJ1ZGRpZXNFbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiU2xpbWUiLCAiU2xpbWUgQnVkZGllcyIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIlNsaW1lIiwgIlNsaW1lIEJ1ZGRpZXMiLCB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQoJCWVuZA0KDQoJCWlmIENyeXN0YWxBcm1hbWVudEVuYWJsZWQgYW5kIGZmKCkgPT0gdHJ1ZSB0aGVuDQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJDcnlzdGFsIiwgIkNyeXN0YWwgQXJtYW1lbnQiKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJDcnlzdGFsIiwgIkNyeXN0YWwgQXJtYW1lbnQiLCB7TGFzdFBvc2l0aW9uID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gKyBWZWN0b3IzLm5ldygwLCAxNSwgMCl9KQ0KCQllbmQNCg0KCQlpZiBHcmF2aXRhbEdsb2JlRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIkdyYXZpdHkiLCAiR3Jhdml0YWwgR2xvYmUiKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJHcmF2aXR5IiwgIkdyYXZpdGFsIEdsb2JlIiwge2xhc3RQb3MgPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KDAsIDE1LCAwKX0pDQoJCWVuZA0KDQoJCWlmIEdyYXZpdGF0aW9uYWxGaWVsZEVuYWJsZWQgYW5kIGZmKCkgPT0gdHJ1ZSB0aGVuDQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJHcmF2aXR5IiwgIkdyYXZpdGF0aW9uYWwgRmllbGQiKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJHcmF2aXR5IiwgIkdyYXZpdGF0aW9uYWwgRmllbGQiLCB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgLSBWZWN0b3IzLm5ldygwLCAxNSwgMCkpDQoJCWVuZA0KDQoJCWlmIEFtYXVyb3RpY0xhbWJlbnRFbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiTGlnaHQiLCAiQW1hdXJvdGljIExhbWJlbnQiKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJMaWdodCIsICJBbWF1cm90aWMgTGFtYmVudCIsIHtsYXN0UG9zID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb259KQ0KCQllbmQNCg0KCQlpZiBBYmxhemVKdWRnZW1lbnRIYWNrRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIkxpZ2h0IiwgIkFibGF6ZSBKdWRnZW1lbnQiKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJMaWdodCIsICJBYmxhemUgSnVkZ2VtZW50Iiwge09yaWdpbiA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoMCwgMjUsIDApLCBvcmJQb3MgPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KDAsIDEwLCAwKX0pDQoJCWVuZA0KDQoJCWlmIFZvaWRPcGVuaW5nSGFja0VuYWJsZWQgYW5kIGZmKCkgPT0gdHJ1ZSB0aGVuDQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJWb2lkIiwgIlZvaWQgT3BlbmluZyIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIlZvaWQiLCAiVm9pZCBPcGVuaW5nIiwge3BvcyA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoMCwgMTUwLCAwKX0pDQoJCWVuZA0KDQoJCWlmIFNrZWxldG9uR3JhYkVuYWJsZWQgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiTmlnaHRtYXJlIiwgIlNrZWxldG9uIEdyYWIiKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJOaWdodG1hcmUiLCAiU2tlbGV0b24gR3JhYiIsIHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkNCgkJZW5kDQoNCgkJaWYgR2VuZXNpc1JheUVuYWJsZWQgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiVGltZSIsICJHZW5lc2lzIFJheSIsIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikNCgkJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiVGltZSIsICJHZW5lc2lzIFJheSIsIHtsdiA9IFZlY3RvcjMubmV3KDAsIDAsIDApLCBjaGFyZ2UgPSBHUkNoYXJnZX0pDQoJCWVuZA0KDQoJCWlmIFRoZVdvcmxkRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIlRpbWUiLCAiVGhlIFdvcmxkIiwgdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIlRpbWUiLCAiVGhlIFdvcmxkIiwge3JoaXQgPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydCwgbm9ybSA9IFZlY3RvcjMubmV3KDAsIDAsIDApLCBycG9zID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb259KQ0KCQllbmQNCg0KCQlpZiBQb2xhcmlzRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIkF1cm9yYSIsICJQb2xhcmlzIikNCgkJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiQXVyb3JhIiwgIlBvbGFyaXMiLCB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQoJCWVuZA0KDQoJCWlmIENvbnRyb2xsZWRFY2hvZXNFbmFibGVkIGFuZCBFY2hvZXNQaGFzZSB+PSBuaWwgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiU291bmQiLCAiRWNob2VzIikNCgkJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiU291bmQiLCAiRWNob2VzIiwge0VjaG9lc1BoYXNlLCBtb3VzZS5IaXQucH0pDQoJCWVuZA0KDQoJCWlmIFNoYXR0ZXJpbmdFcnVwdGlvbkVuYWJsZWQgYW5kIGZmKCkgPT0gdHJ1ZSB0aGVuDQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJFeHBsb3Npb24iLCAiU2hhdHRlcmluZyBFcnVwdGlvbiIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkV4cGxvc2lvbiIsICJTaGF0dGVyaW5nIEVydXB0aW9uIiwgdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQ0KCQllbmQNCg0KCQlpZiBJbGx1c2l2ZUF0YWtlRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIklsbHVzaW9uIiwgIklsbHVzaXZlIEF0YWtlIikNCgkJCVJTUi5Eb01hZ2ljOkludm9rZVNlcnZlcigiSWxsdXNpb24iLCAiSWxsdXNpdmUgQXRha2UiLCB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpDQoJCWVuZA0KDQoJCWlmIEV0aGVyZWFsQWN1bWVuRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIklsbHVzaW9uIiwgIkV0aGVyZWFsIEFjdW1lbiIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIklsbHVzaW9uIiwgIkV0aGVyZWFsIEFjdW1lbiIsIHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkNCgkJZW5kDQoNCgkJaWYgRm9ybWlkYWJsZVJvYXJFbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiRHJhZ29uIiwgIkZvcm1pZGFibGUgUm9hciIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkRyYWdvbiIsICJGb3JtaWRhYmxlIFJvYXIiLCB7dGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLCAxNzV9KQ0KCQllbmQNCg0KCQlpZiBUb3hpY0Jhc2lsaXNrRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IHRydWUNCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIkFjaWQiLCAiVG94aWMgQmFzaWxpc2siKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJBY2lkIiwgIlRveGljIEJhc2lsaXNrIiwge0RpcmVjdGlvbiA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwgRmxvb3IgPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWV9KQ0KCQkJd2FpdCgxNy41KQ0KCQkJaWYgRnJlZXplRW5hYmxlZCA9PSBmYWxzZSB0aGVuDQoJCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCgkJCWVuZA0KCQllbmQNCg0KCQlpZiBBcmNhbmVHdWFyZGlhbkVuYWJsZWQgYW5kIGZmKCkgPT0gdHJ1ZSB0aGVuDQoJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJBbmdlbCIsICJBcmNhbmUgR3VhcmRpYW4iKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJBbmdlbCIsICJBcmNhbmUgR3VhcmRpYW4iLCB7UG9zaXRpb24gPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KDAsIDUwLCAwKX0pDQoJCWVuZA0KDQoJCWlmIFNwbGl0dGluZ1NsaW1lRW5hYmxlZCBhbmQgZmYoKSA9PSB0cnVlIHRoZW4NCgkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIlNsaW1lIiwgIlNwbGl0dGluZyBTbGltZSIpDQoJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIlNsaW1lIiwgIlNwbGl0dGluZyBTbGltZSIsIHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAtIFZlY3RvcjMubmV3KDAsIDIwLCAwKSkNCgkJZW5kDQoNCgkJaWYgVmlydHVhbFpvbmVFbmFibGVkIGFuZCBmZigpID09IHRydWUgdGhlbg0KCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiVGVjaG5vbG9neSIsICJWaXJ0dWFsIFpvbmUiKQ0KCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJUZWNobm9sb2d5IiwgIlZpcnR1YWwgWm9uZSIsIHt0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiwgVmVjdG9yMy5uZXcoMCwgMCwgMCl9KQ0KCQllbmQNCgllbmQNCg0KCS0tIFVJUw0KDQoJbG9jYWwgVUlTID0gZ2FtZTpHZXRTZXJ2aWNlKCJVc2VySW5wdXRTZXJ2aWNlIikNCglsb2NhbCB0ZXJtaW5hdGV1aXMgPSBmYWxzZQ0KDQoJVUlTLklucHV0QmVnYW46Y29ubmVjdChmdW5jdGlvbihpbnB1dCwgZ3ApDQoJCWlmIG5vdCB0ZXJtaW5hdGV1aXMgdGhlbg0KCQkJaWYgbm90IGdwIHRoZW4NCgkJCQlsb2NhbCB0YXJnZXRDaHIgPSBnYW1lLlBsYXllcnNbdGFyZ2V0XS5DaGFyYWN0ZXINCg0KCQkJCWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkJhY2tTbGFzaCB0aGVuDQoJCQkJCWNvbW1hbmRCb3g6Q2FwdHVyZUZvY3VzKCkNCgkJCQkJd2FpdCgpDQoJCQkJCWlmIHN0cmluZy5zdWIoY29tbWFuZEJveC5UZXh0LCBzdHJpbmcubGVuKGNvbW1hbmRCb3guVGV4dCksIHN0cmluZy5sZW4oY29tbWFuZEJveC5UZXh0KSkgPT0gIlxcIiB0aGVuDQoJCQkJCQljb21tYW5kQm94LlRleHQgPSBzdHJpbmcuc3ViKGNvbW1hbmRCb3guVGV4dCwgMSwgc3RyaW5nLmxlbihjb21tYW5kQm94LlRleHQpIC0gMSkNCgkJCQkJZW5kDQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkMgdGhlbg0KCQkJCQlleHBsb2l0KCkNCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuVSB0aGVuDQoJCQkJCVRQVG9UYXJnZXQoKQ0KCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5LIHRoZW4NCgkJCQkJQW50aUJsaW5kRnVuYygpDQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlQgdGhlbg0KCQkJCQliZWdpblNwZWVkKCkNCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuWCB0aGVuDQoJCQkJCWlmIFNwZWN0cmFsRW1ib2RpbWVudEVuYWJsZWQgdGhlbg0KCQkJCQkJUlNSLkRvQ2xpZW50TWFnaWM6RmlyZVNlcnZlcigiU3Bpcml0IiwgIlNwZWN0cmFsIEVtYm9kaW1lbnQiKQ0KCQkJCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJTcGlyaXQiLCAiU3BlY3RyYWwgRW1ib2RpbWVudCIpDQoJCQkJCWVuZA0KCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5QIHRoZW4NCgkJCQkJaWYgU2Fuc1RlbGVwb3J0RW5hYmxlZCB0aGVuDQoJCQkJCQlpZiBnYW1lLlBsYWNlSWQgPT0gNTY2Mzk5MjQ0IG9yIGdhbWUuUGxhY2VJZCA9PSAyNTY5NjI1ODA5IHRoZW4NCgkJCQkJCQlsb2NhbCBTYW5zUG9zID0gQ0ZyYW1lLm5ldygtMTY4NS45MTA1MiwgMjMwLjAzNTEyNiwgLTE4MS43OTgyNjQpDQoJCQkJCQkJbG9jYWwgU2Fuc0FuZ2xlcyA9IENGcmFtZS5BbmdsZXMoMCwgbWF0aC5yYWQoMjApLCAwKQ0KDQoJCQkJCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IFNhbnNQb3MgKiBTYW5zQW5nbGVzDQoJCQkJCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpDaGFuZ2VTdGF0ZShFbnVtLkh1bWFub2lkU3RhdGVUeXBlLkNsaW1iaW5nKQ0KCQkJCQkJCXdhaXQoKQ0KCQkJCQkJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IHRydWUNCgkJCQkJCQl3YWl0KDEpDQoJCQkJCQkJaWYgbm90IEZyZWV6ZUVuYWJsZWQgdGhlbg0KCQkJCQkJCQlwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KCQkJCQkJCWVuZA0KCQkJCQkJZW5kDQoJCQkJCWVuZA0KCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5aIHRoZW4NCgkJCQkJYmVnaW5OdWxsaWZ5Rm9yY2VzKCkNCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuRyB0aGVuDQoJCQkJCUFudGlHcmF2aXR5RnVuYygpDQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkogdGhlbg0KCQkJCQlpZiBDbGlja1RQRW5hYmxlZCB0aGVuDQoJCQkJCQljbGlja3RwKG1vdXNlLkhpdCkNCgkJCQkJZW5kDQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkYgdGhlbg0KCQkJCQlGcmVlemVGdW5jKCkNCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuQmFja3F1b3RlIHRoZW4NCgkJCQkJaWYgRmxhc2hFbmFibGVkIHRoZW4NCgkJCQkJCWxvbmdmbGFzaCgpDQoJCQkJCWVuZA0KCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5WIHRoZW4NCgkJCQkJdmlldygpDQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkIgdGhlbg0KCQkJCQl0b2dnbGVFU1AoKQ0KCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5MZWZ0QnJhY2tldCB0aGVuDQoJCQkJCWlmIG5vdCBjbG9zZWRmb3JldmVyIHRoZW4NCgkJCQkJCWlmIG5vdCBidXR0b25zZGVib3VuY2UgdGhlbg0KCQkJCQkJCWJ1dHRvbnNkZWJvdW5jZSA9IHRydWUNCgkJCQkJCQlpZiBidXR0b25zb3BlbmVkID09IGZhbHNlIHRoZW4NCgkJCQkJCQkJYnV0dG9uc29wZW5lZCA9IHRydWUNCgkJCQkJCQkJYnV0dG9uc21haW46VHdlZW5Qb3NpdGlvbigNCgkJCQkJCQkJCVVEaW0yLm5ldygxLCAwLCAwLjY1LCAwKSwNCgkJCQkJCQkJCSJPdXQiLA0KCQkJCQkJCQkJIlNpbmUiLA0KCQkJCQkJCQkJLjUsDQoJCQkJCQkJCQl0cnVlDQoJCQkJCQkJCSkNCgkJCQkJCQllbHNlDQoJCQkJCQkJCWJ1dHRvbnNvcGVuZWQgPSBmYWxzZQ0KCQkJCQkJCQlidXR0b25zbWFpbjpUd2VlblBvc2l0aW9uKA0KCQkJCQkJCQkJVURpbTIubmV3KDEuMjUsIDAsIDAuNjUsIDApLA0KCQkJCQkJCQkJIkluIiwNCgkJCQkJCQkJCSJTaW5lIiwNCgkJCQkJCQkJCS41LA0KCQkJCQkJCQkJdHJ1ZQ0KCQkJCQkJCQkpDQoJCQkJCQkJZW5kDQoJCQkJCQkJd2FpdCgxKQ0KCQkJCQkJCWJ1dHRvbnNkZWJvdW5jZSA9IGZhbHNlDQoJCQkJCQllbmQNCgkJCQkJZW5kDQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlJpZ2h0QnJhY2tldCB0aGVuDQoJCQkJCWNvbW1hbmRkZWJvdW5jZSA9IHRydWUNCgkJCQkJaWYgY29tbWFuZHNvcGVuZWQgPT0gZmFsc2UgdGhlbg0KCQkJCQkJY29tbWFuZHNvcGVuZWQgPSB0cnVlDQoJCQkJCQljb21tYW5kc21haW46VHdlZW5Qb3NpdGlvbigNCgkJCQkJCQlVRGltMi5uZXcoMSwgMCwgMC40NSwgMCksDQoJCQkJCQkJIk91dCIsDQoJCQkJCQkJIlNpbmUiLA0KCQkJCQkJCS41LA0KCQkJCQkJCXRydWUNCgkJCQkJCSkNCgkJCQkJZWxzZQ0KCQkJCQkJY29tbWFuZHNvcGVuZWQgPSBmYWxzZQ0KCQkJCQkJY29tbWFuZHNtYWluOlR3ZWVuUG9zaXRpb24oDQoJCQkJCQkJVURpbTIubmV3KDEuMjUsIDAsIDAuNDUsIDApLA0KCQkJCQkJCSJJbiIsDQoJCQkJCQkJIlNpbmUiLA0KCQkJCQkJCS41LA0KCQkJCQkJCXRydWUNCgkJCQkJCSkNCgkJCQkJZW5kDQoJCQkJCXdhaXQoMSkNCgkJCQkJY29tbWFuZGRlYm91bmNlID0gZmFsc2UNCgkJCQllbHNlaWYgVUlTOklzS2V5RG93bihFbnVtLktleUNvZGUuTGVmdCkgYW5kIFVJUzpJc0tleURvd24oRW51bS5LZXlDb2RlLlJpZ2h0KSB0aGVuDQoJCQkJCWlmIGJ1dHRvbnNvcGVuZWQgPT0gdHJ1ZSB0aGVuDQoJCQkJCQlidXR0b25zbWFpbjpUd2VlblBvc2l0aW9uKA0KCQkJCQkJCVVEaW0yLm5ldygxLjI1LCAwLCAwLjY1LCAwKSwNCgkJCQkJCQkiSW4iLA0KCQkJCQkJCSJTaW5lIiwNCgkJCQkJCQkuNSwNCgkJCQkJCQl0cnVlDQoJCQkJCQkpDQoJCQkJCQljb21tYW5kc21haW46VHdlZW5Qb3NpdGlvbigNCgkJCQkJCQlVRGltMi5uZXcoMS4yNSwgMCwgMC40NSwgMCksDQoJCQkJCQkJIkluIiwNCgkJCQkJCQkiU2luZSIsDQoJCQkJCQkJLjUsDQoJCQkJCQkJdHJ1ZQ0KCQkJCQkJKQ0KCQkJCQkJd2FpdCgxKQ0KCQkJCQkJdGFyZ2V0ID0gcGxheWVyLk5hbWUNCgkJCQkJCXRlcm1pbmF0ZXVpcyA9IHRydWUNCgkJCQkJCWViZ3VpOkRlc3Ryb3koKQ0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQpDQoNCgktLSBTY3JpcHRzIGFuZCBGdW5jdGlvbnMgRU5EDQoNCgktLSBFbnRyYW5jZSBBbmltYXRpb24NCg0KCXdhaXQoMC41KQ0KDQoJYnV0dG9uc21haW46VHdlZW5Qb3NpdGlvbigNCgkJVURpbTIubmV3KDEsIDAsIDAuNjUsIDApLA0KCQkiT3V0IiwNCgkJIlNpbmUiLA0KCQkuNSwNCgkJdHJ1ZQ0KCSkNCg0KCWNvbW1hbmRzbWFpbjpUd2VlblBvc2l0aW9uKA0KCQlVRGltMi5uZXcoMSwgMCwgMC40NSwgMCksDQoJCSJPdXQiLA0KCQkiU2luZSIsDQoJCS41LA0KCQl0cnVlDQoJKQ0KDQoJLS0gSW5mbw0KDQoJcHJpbnQoW1sNCg0KCV1dKQ0KCXdhcm4oIkdVSSBzdWNjZXNzZnVsbHkgbG9hZGVkISIpDQplbmQ="