encui = "aWYgbm90KGdhbWU6SXNMb2FkZWQoKSkgdGhlbgoJZ2FtZS5Mb2FkZWQ6V2FpdCgpCmVuZAoKaWYgKGdhbWUuQ29yZUd1aTpGaW5kRmlyc3RDaGlsZCgiZWJndWkiKSkgdGhlbgoJZ2FtZS5Db3JlR3VpLmViZ3VpOkRlc3Ryb3koKQplbmQKCmxvY2FsIGJsb2NrbGlzdCA9IHsKfQoKbG9jYWwgbWFzdGVybGlzdCA9IHsKCTMyNTczMzM0Cn0KCmxvY2FsIGdvbGRsaXN0ID0gewoJImdvbGRfMTAyMDIyX1NpbGx5VGVhY3VwXzE2ODU0OSIKfQoKbG9jYWwgcGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIHBsYXllciA9IHBsYXllcnMuTG9jYWxQbGF5ZXIKbG9jYWwgSUQgPSBwbGF5ZXIuVXNlcklkCmxvY2FsIGlzQmxvY2tlZCA9IGZhbHNlCmxvY2FsIGlzTWFzdGVyID0gZmFsc2UKbG9jYWwgaXNHb2xkID0gZmFsc2UKCmZvciBpLHYgaW4gcGFpcnMoYmxvY2tsaXN0KSBkbwogICAgaWYgdiA9PSBJRCB0aGVuCiAgICAgICAgaXNCbG9ja2VkID0gdHJ1ZQogICAgICAgIGJyZWFrCiAgICBlbmQKZW5kCgpmb3IgaSx2IGluIHBhaXJzKG1hc3Rlcmxpc3QpIGRvCiAgICBpZiB2ID09IElEIHRoZW4KICAgICAgICBpc01hc3RlciA9IHRydWUKICAgICAgICBicmVhawogICAgZW5kCmVuZAoKaWYgaXNCbG9ja2VkIHRoZW4KICAgIHdhcm4oIj09PT09PT09PT09PT09PT09PT09PT09W1sgQVRURU5USU9OIF1dPT09PT09PT09PT09PT09PT09PT09PT0iKQogICAgd2FybigifCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCIpCiAgICB3YXJuKCJ8ICAgICAgICAgICAgICBUaGlzIGFjY291bnQgaGFzIGJlZW4gYmxvY2tlZC4gICAgICAgICAgICAgICB8IikKICAgIHdhcm4oInwgICAgUGxlYXNlIHZpc2l0IHRoZSBFQkd1aSBEaXNjb3JkIGZvciBtb3JlIGluZm9ybWF0aW9uLiAgIHwiKQogICAgd2FybigifCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCIpCiAgICB3YXJuKCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IikKZWxzZWlmIG5vdCBFQkd1aUtleSBhbmQgbm90IGlzQmxvY2tlZCBhbmQgbm90IGlzTWFzdGVyIHRoZW4KICAgIHdhcm4oIj09PT09PT09PT09PT09PT09PT09PT09W1sgQVRURU5USU9OIF1dPT09PT09PT09PT09PT09PT09PT09PT0iKQogICAgd2FybigifCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCIpCiAgICB3YXJuKCJ8ICAgICAgIFlvdSBkb24ndCBoYXZlIHRoZSB1bmxvY2sga2V5IGluIHlvdXIgc2NyaXB0LiAgICAgICB8IikKICAgIHdhcm4oInwgICAgICAgWW91J2xsIG5lZWQgdG8gZmluZCB0aGUgYXBwcm9wcmlhdGUga2V5IGZpcnN0LiAgICAgIHwiKQogICAgd2FybigifCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCIpCiAgICB3YXJuKCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IikKZWxzZWlmIEVCR3VpS2V5IH49ICIxMDIwMjJfU291ckhhaXJiYW5kXzAyNDk0NyIgYW5kIG5vdCBpc0Jsb2NrZWQgYW5kIG5vdCBpc01hc3RlciB0aGVuCiAgICB3YXJuKCI9PT09PT09PT09PT09PT09PT09PT09PVtbIEFUVEVOVElPTiBdXT09PT09PT09PT09PT09PT09PT09PT09IikKICAgIHdhcm4oInwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwiKQogICAgd2FybigifCAgICAgICAgICAgICAgIFlvdXIgdW5sb2NrIGtleSBpcyBpbmNvcnJlY3QuICAgICAgICAgICAgICAgfCIpCiAgICB3YXJuKCJ8ICAgICAgIFlvdSdsbCBuZWVkIHRvIGZpbmQgdGhlIGFwcHJvcHJpYXRlIGtleSBmaXJzdC4gICAgICB8IikKICAgIHdhcm4oInwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwiKQogICAgd2FybigiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSIpCmVsc2UKCWxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vRWFydGhUb0FjY2Vzcy9FQkd1aS9tYWluL2Jpbi9pbmZvLmx1YScpKSgpCglsb2NhbCB2ZXJOdW0gPSAidjIuOSIKCWxvY2FsIGR1bWJRdW90ZXMgPSB7CgkJIkplZXosIHdoZW4nZCBpdCBnZXQgc28gaG90IGluIGhlcmU/IiwKCQkiSXMgaXQganVzdCBtZSBvciBpcyB0aGF0ICp0b28qIGJsdWU/IiwKCQkiTGlrZSB0YWtpbmcgY2FuZHkgZnJvbSBhIGJhYnkuIiwKCQkiRGVleiBudXRzIGFyZSB0b28gc3F1YXJlISIsCgkJIkFsc28gdHJ5IE1pbmVjcmFmdCEiLAoJCSJBbHNvIHRyeSBUZXJyYXJpYSEiLAoJCSJNZWgsIEkgbGlrZWQgUmlzayBvZiBSYWluIDIgYmV0dGVyLiIsCgkJIllvdSBuZWVkIGEgZmFpcmx5IGhpZ2ggSVEgdG8gdW5kZXJzdGFuZCBFQkd1aS4iLAoJCSJKYWtlLCBmcm9tIFN0YXRlIEZhcm0/ISIsCgkJIldoYXQgd291bGQgKnlvdSogZG8gZm9yIGEgS2xvbmRpa2UgYmFyPyIsCgkJIk5vdyB3aXRoIDEwMCUgbW9yZSBHb2xkISIsCgkJIk1hZGUgaW4gTHVhISIsCgkJIklGICVFUlJPUkxFVkVMJSBFUVUgMSBHT1RPOkVPRiIsCgkJImJydWggbmVyZiBzb2xhciBhbHJlYWR5IiwKCQkiQmVjYXVzZSB0aGUgZGV2cyB3b24ndCBkbyBpdC4iLAoJCSJQZXRpdGlvbiBZT1VSIGxvY2FsIGRldmVsb3BlciBmb3IgbW9yZSB1cGRhdGVzISIsCgkJIndoeSBhcmUgeW91IGJ1eWluZyBjbG90aGVzIGF0IHRoZSBzb3VwIHN0b3JlIiwKCQkiSSBqdXN0IHdhbm5hIGJlIGEgbm9ybWFsIEdVSSB3aXRoIG5vcm1hbCBrbmVlcy4iCgl9CgogICAgd2FybihbW19fX19fXyBfX19fXyBfX19fXyAgICAgICBfIAogICAgICAgICAgICB8ICBfX198IF9fXyBcICBfXyBcICAgICAoXykKICAgICAgICAgICAgfCB8X18gfCB8Xy8gLyB8ICBcL18gICBfIF8gCiAgICAgICAgICAgIHwgIF9ffHwgX19fIFwgfCBfX3wgfCB8IHwgfAogICAgICAgICAgICB8IHxfX198IHxfLyAvIHxfXCBcIHxffCB8IHwKICAgICAgICAgICAgXF9fX18vXF9fX18vIFxfX19fL1xfXyxffF98IF1dIC4uIHZlck51bSkKCXByaW50KCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iKQoJcHJpbnQoZHVtYlF1b3Rlc1ttYXRoLnJhbmRvbSgxLDE4KV0pCglwcmludCgiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIikKCXdhcm4oIldlbGNvbWUgdG8gRUJHdWksICIgLi4gcGxheWVyLk5hbWUgLi4gIiEiKQoJd2FybigiWW91J3JlIG9uIHRoZSBTdGFibGUgYnJhbmNoIG9mIEVCR3VpIikKCXdhcm4oIlF1ZXN0aW9ucyBvciBjb25jZXJucz8gTGV0IHVzIGtub3cgaW4gdGhlIERpc2NvcmQsIikKCXdhcm4oIm9yIGVtYWlsIEVhcnRoIGhpbXNlbGYgYXQgZWFydGh0b2FjY2Vzc0BnbWFpbC5jb20hIikKCXdhaXQoMC41KQoJCglpZiBpc01hc3RlciB0aGVuCgkJd2FybigiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIikgICAKCQl3YXJuKCJMb2FkZWQgaW4gdXNpbmcgdGhlIE1hc3RlciBMaXN0ISBPdmVycmlkaW5nIGFjY2VzcyBnaXZlbi4iKQoJCXdhcm4oIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSIpCgllbmQKCglmb3IgaSx2IGluIHBhaXJzKGdvbGRsaXN0KSBkbwoJCWlmIG5vdCBFQkd1aUdvbGQgdGhlbiBlbHNlaWYgRUJHdWlHb2xkID09IHYgdGhlbgoJCQlpc0dvbGQgPSB0cnVlCgkJCXByaW50KFtbCQkJCV9fX18gICAgICAgICAgICAgX19fICAgICAgX19fIAoJCQkgICAgICAgICAgIDZNTU1NYi8gICAgICAgICAgIGBNTSAgICAgIGBNTSAKCQkJICAgICAgICAgIDhQICAgIFlNICAgICAgICAgICAgTU0gICAgICAgTU0gCgkJCSAgICAgICAgIDZNICAgICAgWSAgIF9fX19fICAgIE1NICAgX19fX01NIAoJCQkgICAgICAgICBNTSAgICAgICAgIDZNTU1NTWIgICBNTSAgNk1NTU1NTSAKCQkJICAgICAgICAgTU0gICAgICAgIDZNJyAgIGBNYiAgTU0gNk0nICBgTU0gCgkJCSAgICAgICAgIE1NICAgICBfX19NTSAgICAgTU0gIE1NIE1NICAgIE1NIAoJCQkgICAgICAgICBNTSAgICAgYE0nTU0gICAgIE1NICBNTSBNTSAgICBNTSAKCQkJICAgICAgICAgWU0gICAgICBNIE1NICAgICBNTSAgTU0gTU0gICAgTU0gCgkJCSAgICAgICAgICA4YiAgICBkOSBZTS4gICAsTTkgIE1NIFlNLiAgLE1NIAoJCQkgICAgICAgICAgIFlNTU1NOSAgIFlNTU1NTTkgIF9NTV8gWU1NTU1NTV9dXSkKCQkJd2FybigiVGhhbmsgeW91IGZvciBiZWluZyBhIEdPTERFTiBtZW1iZXIhIikKCQkJd2FybignRW5qb3kgdGhlIHZhcmlvdXMgIm92ZXJwb3dlcmVkIiBzY3JpcHRzIHdlIGhhdmUgaW4gc3RvcmUhJykKCQkJYnJlYWsKCQllbHNlIGVuZAoJZW5kCgoJLS0gR1VJIEluc3RhbmNlcywgRXZlbnRzIGFuZCBGdW5jdGlvbnMKCglsb2NhbCBlYmd1aSA9IEluc3RhbmNlLm5ldygiU2NyZWVuR3VpIikKCWViZ3VpLk5hbWUgPSAiZWJndWkiCgllYmd1aS5QYXJlbnQgPSBnYW1lOldhaXRGb3JDaGlsZCgiQ29yZUd1aSIpCgoJZ2FtZS5Db3JlR3VpLkNoaWxkUmVtb3ZlZDpjb25uZWN0KGZ1bmN0aW9uKGNoaWxkKQoJCWlmIGNoaWxkLk5hbWUgPT0gImViZ3VpIiB0aGVuCgkJCWNsb3NlZGZvcmV2ZXIgPSB0cnVlCgkJCWJ1dHRvbnNvcGVuZWQgPSBmYWxzZQoJCQljb21tYW5kc29wZW5lZCA9IGZhbHNlCgkJCWJ1dHRvbnNkZWJvdW5jZSA9IHRydWUKCQkJY29tbWFuZGRlYm91bmNlID0gdHJ1ZQoJCQl0ZXJtaW5hdGV1aXMgPSB0cnVlCgkJCVVJUyA9IG5pbAoJCQlicmVha2FibGUgPSB0cnVlCgkJCUJsYXplQ29sdW1uRW5hYmxlZCA9IG5pbAoJCQlWaW5lVHJhcEVuYWJsZWQgPSBuaWwKCQkJUGxhc21hSW1wbG9zaW9uRW5hYmxlZCA9IG5pbAoJCQlTbGltZUJ1ZGRpZXNFbmFibGVkID0gbmlsCgkJCUNyeXN0YWxBcm1hbWVudEVuYWJsZWQgPSBuaWwKCQkJQW1hdXJvdGljTGFtYmVudEVuYWJsZWQgPSBuaWwKCQkJQWJsYXplSnVkZ2VtZW50SGFja0VuYWJsZWQgPSBuaWwKCQkJVm9pZE9wZW5pbmdIYWNrRW5hYmxlZCA9IG5pbAoJCQlTa2VsZXRvbkdyYWJFbmFibGVkID0gbmlsCgkJCVRoZVdvcmxkRW5hYmxlZCA9IG5pbAoJCQlQb2xhcmlzRW5hYmxlZCA9IG5pbAoJCQlMYWdTZXJ2ZXJFbmFibGVkID0gbmlsCgkJCVNoYXR0ZXJpbmdFcnVwdGlvbkVuYWJsZWQgPSBuaWwKCQkJSWxsdXNpdmVBdGFrZUVuYWJsZWQgPSBuaWwKCQkJRXRoZXJlYWxBY3VtZW5FbmFibGVkID0gbmlsCgkJCUZvcm1pZGFibGVSb2FyRW5hYmxlZCA9IG5pbAoJCQlTZXdlckJ1cnN0RW5hYmxlZCA9IG5pbAoJCQlUb3hpY0Jhc2lsaXNrRW5hYmxlZCA9IG5pbAoJCQlTcGxpdHRpbmdTbGltZUVuYWJsZWQgPSBuaWwKCQkJVmlydHVhbFpvbmVFbmFibGVkID0gbmlsCgkJCUFudGlCbGluZEVuYWJsZWQgPSBuaWwKCQkJQW50aUxhZ0VuYWJsZWQgPSBuaWwKCQkJU3BlZWRoYWNrRW5hYmxlZCA9IG5pbAoJCQlIb2xvYmVhbUVuYWJsZWQgPSBuaWwKCQkJU2V0U3BlZWQgPSBuaWwKCQkJSWdub3JlUGh5c2ljc0VuYWJsZWQgPSBuaWwKCQkJQW50aUdyYXZpdHlFbmFibGVkID0gbmlsCgkJCUluZXJ0aWFHcmF2aXR5RW5hYmxlZCA9IG5pbAoJCQlDbGlja1RQRW5hYmxlZCA9IG5pbAoJCQlGcmVlemVFbmFibGVkID0gbmlsCgkJCVRocnVzdFBvd2VyID0gbmlsCgkJCXZpZXdpbmcgPSBuaWwKCQkJVFBUYXJnZXRFbmFibGVkID0gbmlsCgkJCUxvb3BUUFRhcmdldEVuYWJsZWQgPSBuaWwKCQkJRVNQRW5hYmxlZCA9IG5pbAoJCQlUUFNoYXJkc0VuYWJsZWQgPSBuaWwKCQkJVFBEaWFtb25kc0VuYWJsZWQgPSBuaWwKCQkJRlBTRHJvcHBpbmcgPSBuaWwKCQkJc2Fuc0tpbGxlZCA9ICJ3aXAiCgkJCUFzdGVyb2lkQmVsdEVuYWJsZWQgPSBuaWwKCQkJVmlnb3JIYWNrRW5hYmxlZCA9IG5pbAoJCQlPcmJpdGFsSGFja0VuYWJsZWQgPSBuaWwKCQkJU3Rvcm1CdWxsZXRzRW5hYmxlZCA9IG5pbAoJCQlEb3VibGVSYXlFbmFibGVkID0gbmlsCgkJCURpc3BlcnNpb25FbmFibGVkID0gbmlsCgkJCURhcmtBb2VFbmFibGVkID0gbmlsCgkJCUh5cGVyYW5nRW5hYmxlZCA9IG5pbAoJCQlDcmVhdGlvbkhvbGRFbmFibGVkID0gbmlsCgkJCVJlYXBlclVsdEVuYWJsZWQgPSBuaWwKCQkJQWltYm90RW5hYmxlZCA9IG5pbAoJCWVuZAoJZW5kKQoKCWxvY2FsIG1vdXNlID0gcGxheWVyOkdldE1vdXNlKCkKCglsb2NhbCBib3JkZXJzID0ge30KCglsb2NhbCBidXR0b25zbWFpbiA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQoJYnV0dG9uc21haW4uTmFtZSA9ICJidXR0b25zbWFpbiIKCWJ1dHRvbnNtYWluLlBvc2l0aW9uID0gVURpbTIubmV3KDEuMjUsIDAsIDAuNjUsIDApCglidXR0b25zbWFpbi5TaXplID0gVURpbTIubmV3KDAuNCwgMCwgMC4yMjUsIDApCgl0YWJsZS5pbnNlcnQoYm9yZGVycywgYnV0dG9uc21haW4pCgoJYnV0dG9uc2RlYm91bmNlID0gZmFsc2UKCWJ1dHRvbnNvcGVuZWQgPSB0cnVlCgoKCS0taWYgKGluaXRpYXRpb25Nb2RlID09ICJNb2Rlcm4iKSB0aGVuCglsb2NhbCBjb21tYW5kc21haW4gPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKCWNvbW1hbmRzbWFpbi5OYW1lID0gImNvbW1hbmRzbWFpbiIKCWNvbW1hbmRzbWFpbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLjI1LCAwLCAwLjQ1LCAwKQoJY29tbWFuZHNtYWluLlNpemUgPSBVRGltMi5uZXcoMC4zLCAwLCAwLjE3NSwgMCkKCXRhYmxlLmluc2VydChib3JkZXJzLCBjb21tYW5kc21haW4pCgktLWVuZAoKCWNvbW1hbmRkZWJvdW5jZSA9IGZhbHNlCgljb21tYW5kc29wZW5lZCA9IHRydWUKCgljbG9zZWRmb3JldmVyID0gZmFsc2UKCglsb2NhbCBmcmFtZXMgPSB7fQoKCS0tIEZyYW1lIGZvciBhcm91bmQgdGhlIGJ1dHRvbnMuCglsb2NhbCBidXR0b25zZnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKCWJ1dHRvbnNmcmFtZS5OYW1lID0gImJ1dHRvbnNmcmFtZSIKCWJ1dHRvbnNmcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTgsIDU0LCAxNzkpCglidXR0b25zZnJhbWUuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkKCWJ1dHRvbnNmcmFtZS5Cb3JkZXJTaXplUGl4ZWwgPSAyCglidXR0b25zZnJhbWUuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkKCWJ1dHRvbnNmcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNSwgMCkKCWJ1dHRvbnNmcmFtZS5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMC44NSwgMCkKCXRhYmxlLmluc2VydChmcmFtZXMsIGJ1dHRvbnNmcmFtZSkKCWJ1dHRvbnNmcmFtZS5QYXJlbnQgPSBidXR0b25zbWFpbgoKCS0tIEZyYW1lIGZvciBhcm91bmQgdGhlIGNvbW1hbmQgYm94LgoJbG9jYWwgY29tbWFuZHNmcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQoJY29tbWFuZHNmcmFtZS5OYW1lID0gImNvbW1hbmRzZnJhbWUiCgljb21tYW5kc2ZyYW1lLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpCgljb21tYW5kc2ZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxOCwgNTQsIDE3OSkKCWNvbW1hbmRzZnJhbWUuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkKCWNvbW1hbmRzZnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMgoJY29tbWFuZHNmcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNSwgMCkKCWNvbW1hbmRzZnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAuODUsIDApCgl0YWJsZS5pbnNlcnQoZnJhbWVzLCBjb21tYW5kc2ZyYW1lKQoJY29tbWFuZHNmcmFtZS5QYXJlbnQgPSBjb21tYW5kc21haW4KCgktLSBDb21tYW5kIGJveC4gVGhpcyBpcyB3aGVyZSB1c2VycyB0eXBlIGluIGNvbW1hbmRzIGFuZCB0YXJnZXRzLgoJbG9jYWwgY29tbWFuZEJveCA9IEluc3RhbmNlLm5ldygiVGV4dEJveCIpCgljb21tYW5kQm94Lk5hbWUgPSAiY29tbWFuZEJveCIKCWNvbW1hbmRCb3guQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkKCWNvbW1hbmRCb3guQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1LCA0MCwgNDApCgljb21tYW5kQm94LkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEyOCwgMTI4LCAxMjgpCgljb21tYW5kQm94LkJvcmRlclNpemVQaXhlbCA9IDIKCWNvbW1hbmRCb3guUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjMsIDApCgljb21tYW5kQm94LlNpemUgPSBVRGltMi5uZXcoMC44NSwgMCwgMC4yMCwgMCkKCWNvbW1hbmRCb3guRm9udCA9IEVudW0uRm9udC5TYXJwYW5jaAoJY29tbWFuZEJveC5UZXh0ID0gIiIKCWNvbW1hbmRCb3guVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1MSwgMjUxLCAyNTUpCgljb21tYW5kQm94LlRleHRTY2FsZWQgPSB0cnVlCgljb21tYW5kQm94LlRleHRTaXplID0gMTQuMDAwCgljb21tYW5kQm94LlRleHRXcmFwcGVkID0gdHJ1ZQoJY29tbWFuZEJveC5DbGVhclRleHRPbkZvY3VzID0gZmFsc2UKCWNvbW1hbmRCb3guUGFyZW50ID0gY29tbWFuZHNmcmFtZQoKCWxvY2FsIGxhYmVscyA9IHt9CgoJLS0gVGhlIG91dHB1dCBmb3IgdGhlIGNvbW1hbmQgYm94LCBBS0EgdGhlIHdoaXRlIHRleHQgYmVsb3cgdGhhdCBsaXN0cyB5b3VyIHRhcmdldC4KCWxvY2FsIGNvbW1hbmRCb3hPdXRwdXQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCgljb21tYW5kQm94T3V0cHV0Lk5hbWUgPSAiY29tbWFuZEJveE91dHB1dCIKCWNvbW1hbmRCb3hPdXRwdXQuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkKCWNvbW1hbmRCb3hPdXRwdXQuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCgljb21tYW5kQm94T3V0cHV0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMAoJY29tbWFuZEJveE91dHB1dC5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMjgsIDEyOCwgMTI4KQoJY29tbWFuZEJveE91dHB1dC5Cb3JkZXJTaXplUGl4ZWwgPSAwCgljb21tYW5kQm94T3V0cHV0LlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgMCwgMC42LCAwKQoJY29tbWFuZEJveE91dHB1dC5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMC4yLCAwKQoJY29tbWFuZEJveE91dHB1dC5Gb250ID0gRW51bS5Gb250LlNhcnBhbmNoCgljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoTm9uZSkiCgljb21tYW5kQm94T3V0cHV0LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1MSwgMjU1KQoJY29tbWFuZEJveE91dHB1dC5UZXh0U2NhbGVkID0gdHJ1ZQoJY29tbWFuZEJveE91dHB1dC5UZXh0U2l6ZSA9IDE0LjAwMAoJY29tbWFuZEJveE91dHB1dC5UZXh0V3JhcHBlZCA9IHRydWUKCXRhYmxlLmluc2VydChsYWJlbHMsIGNvbW1hbmRCb3hPdXRwdXQpCgljb21tYW5kQm94T3V0cHV0LlBhcmVudCA9IGNvbW1hbmRzZnJhbWUKCgktLSBUaGUgaW5mb3JtYXRpb24gYWJvdmUgdGhlIGJ1dHRvbnMsIGUuZy4gdXNlcidzIG5hbWUsIGNoYW5uZWwKCWxvY2FsIERldGFpbHMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCglEZXRhaWxzLk5hbWUgPSAiRGV0YWlscyIKCURldGFpbHMuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCglEZXRhaWxzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMAoJRGV0YWlscy5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMjgsIDEyOCwgMTI4KQoJRGV0YWlscy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLjAxNSwgMCkKCURldGFpbHMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLjE1LCAwKQoJRGV0YWlscy5Gb250ID0gRW51bS5Gb250LlNhcnBhbmNoCglpZiBub3QgaXNHb2xkIHRoZW4KCQlEZXRhaWxzLlRleHQgPSBwbGF5ZXIuTmFtZSAuLiAiIHwgRUJHdWkgfCBTdGFibGUiCgllbHNlCgkJRGV0YWlscy5UZXh0ID0gcGxheWVyLk5hbWUgLi4gIiB8IEVCR3VpIEdvbGQgfCBTdGFibGUiCgllbmQKCURldGFpbHMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1MSwgMjUxLCAyNTUpCglEZXRhaWxzLlRleHRTY2FsZWQgPSB0cnVlCglEZXRhaWxzLlpJbmRleCA9IDUKCURldGFpbHMuVGV4dFNpemUgPSAxNC4wMDAKCURldGFpbHMuVGV4dFdyYXBwZWQgPSB0cnVlCgl0YWJsZS5pbnNlcnQobGFiZWxzLCBEZXRhaWxzKQoJRGV0YWlscy5QYXJlbnQgPSBidXR0b25zZnJhbWUKCgktLSAiQ2xvc2UgdGhpcyBHVUkiIGZvciB0aGUgY29tbWFuZCBib3guCglsb2NhbCBEZXRhaWxzMiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKCURldGFpbHMyLk5hbWUgPSAiRGV0YWlsczIiCglEZXRhaWxzMi5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KQoJRGV0YWlsczIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCglEZXRhaWxzMi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMS4wMDAKCURldGFpbHMyLkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEyOCwgMTI4LCAxMjgpCglEZXRhaWxzMi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuOSwgMCkKCURldGFpbHMyLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC4xNSwgMCkKCURldGFpbHMyLkZvbnQgPSBFbnVtLkZvbnQuU2FycGFuY2gKCURldGFpbHMyLlRleHQgPSAiUHJlc3MgXSB0byBvcGVuIGFuZCBjbG9zZSB0aGlzIEdVSS4iCglEZXRhaWxzMi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTEsIDI1NSkKCURldGFpbHMyLlRleHRTY2FsZWQgPSB0cnVlCglEZXRhaWxzMi5UZXh0U2l6ZSA9IDE0LjAwMAoJRGV0YWlsczIuVGV4dFdyYXBwZWQgPSB0cnVlCgl0YWJsZS5pbnNlcnQobGFiZWxzLCBEZXRhaWxzMikKCURldGFpbHMyLlBhcmVudCA9IGNvbW1hbmRzZnJhbWUKCgktLSAiQ2xvc2UgdGhpcyBHVUkiIGZvciB0aGUgYnV0dG9ucy4KCWxvY2FsIERldGFpbHMzID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQoJRGV0YWlsczMuTmFtZSA9ICJEZXRhaWxzMyIKCURldGFpbHMzLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQoJRGV0YWlsczMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEuMDAwCglEZXRhaWxzMy5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMjgsIDEyOCwgMTI4KQoJRGV0YWlsczMuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMC44NzUsIDApCglEZXRhaWxzMy5TaXplID0gVURpbTIubmV3KDEsIDAsIDAuMTUsIDApCglEZXRhaWxzMy5Gb250ID0gRW51bS5Gb250LlNhcnBhbmNoCglEZXRhaWxzMy5UZXh0ID0gIlByZXNzIFsgdG8gb3BlbiBhbmQgY2xvc2UgdGhpcyBHVUkuIgoJRGV0YWlsczMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1MSwgMjUxLCAyNTUpCglEZXRhaWxzMy5UZXh0U2NhbGVkID0gdHJ1ZQoJRGV0YWlsczMuVGV4dFNpemUgPSAxNC4wMDAKCURldGFpbHMzLlRleHRXcmFwcGVkID0gdHJ1ZQoJdGFibGUuaW5zZXJ0KGxhYmVscywgRGV0YWlsczMpCglEZXRhaWxzMy5QYXJlbnQgPSBidXR0b25zZnJhbWUKCgktLSBTY3JpcHQgdGVybWluYXRpb24gaW5zdHJ1Y3Rpb25zLgoJbG9jYWwgRGV0YWlsczQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCglEZXRhaWxzNC5OYW1lID0gIkRldGFpbHM0IgoJRGV0YWlsczQuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCglEZXRhaWxzNC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMS4wMDAKCURldGFpbHM0LkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEyOCwgMTI4LCAxMjgpCglEZXRhaWxzNC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAxLjEsIDApCglEZXRhaWxzNC5TaXplID0gVURpbTIubmV3KDEsIDAsIDAuMTc1LCAwKQoJRGV0YWlsczQuRm9udCA9IEVudW0uRm9udC5TYXJwYW5jaAoJRGV0YWlsczQuVGV4dCA9ICJIb2xkIHRoZSBMZWZ0IGFuZCBSaWdodCBhcnJvdyBrZXlzLCB0aGVuIHByZXNzIGFueSBrZXkgdG8gcXVpdCBFQkd1aS4iCglEZXRhaWxzNC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTEsIDI1NSkKCURldGFpbHM0LlRleHRTY2FsZWQgPSB0cnVlCglEZXRhaWxzNC5UZXh0U2l6ZSA9IDE0LjAwMAoJRGV0YWlsczQuVGV4dFdyYXBwZWQgPSB0cnVlCglEZXRhaWxzNC5QYXJlbnQgPSBidXR0b25zZnJhbWUKCgktLSBUaGUgdmVyc2lvbiBudW1iZXIgYWJvdmUgdGhlIGNvbW1hbmQgYm94LgoJbG9jYWwgVmVyc2lvbiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKCVZlcnNpb24uTmFtZSA9ICJWZXJzaW9uIgoJVmVyc2lvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKCVZlcnNpb24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEuMDAwCglWZXJzaW9uLkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEyOCwgMTI4LCAxMjgpCglWZXJzaW9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAuMDUsIDApCglWZXJzaW9uLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC4xLCAwKQoJVmVyc2lvbi5Gb250ID0gRW51bS5Gb250LlNhcnBhbmNoCglWZXJzaW9uLlRleHQgPSAiVmVyc2lvbiAiIC4uIHZlck51bQoJVmVyc2lvbi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTEsIDI1NSkKCVZlcnNpb24uVGV4dFNjYWxlZCA9IHRydWUKCVZlcnNpb24uVGV4dFNpemUgPSAxNC4wMDAKCVZlcnNpb24uVGV4dFdyYXBwZWQgPSB0cnVlCgl0YWJsZS5pbnNlcnQobGFiZWxzLCBWZXJzaW9uKQoJVmVyc2lvbi5QYXJlbnQgPSBjb21tYW5kc2ZyYW1lCgoJLS0gVGhlIGJhY2tncm91bmQgZm9yIHRoZSBVSS4KCWxvY2FsIG1haW5mcmFtZSA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQoJbWFpbmZyYW1lLk5hbWUgPSAibWFpbmZyYW1lIgoJbWFpbmZyYW1lLkFjdGl2ZSA9IHRydWUKCW1haW5mcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDksIDgzLCA4OSkKCW1haW5mcmFtZS5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMjgsIDEyOCwgMTI4KQoJbWFpbmZyYW1lLkJvcmRlclNpemVQaXhlbCA9IDIKCW1haW5mcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNSwgMCkKCW1haW5mcmFtZS5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KQoJbWFpbmZyYW1lLlNpemUgPSBVRGltMi5uZXcoMC44Njc3Njg1ODYsIDAsIDAuNiwgMCkKCW1haW5mcmFtZS5TY3JvbGxCYXJUaGlja25lc3MgPSA2CgltYWluZnJhbWUuUGFyZW50ID0gYnV0dG9uc21haW4KCgktLSBHcmlkIGxheW91dCBmb3IgdGhlIGJ1dHRvbnMuCglsb2NhbCBVSUdyaWRMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJR3JpZExheW91dCIpCglVSUdyaWRMYXlvdXQuRmlsbERpcmVjdGlvbiA9IEVudW0uRmlsbERpcmVjdGlvbi5Ib3Jpem9udGFsCglVSUdyaWRMYXlvdXQuSG9yaXpvbnRhbEFsaWdubWVudCA9IEVudW0uSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXIKCVVJR3JpZExheW91dC5DZWxsUGFkZGluZyA9IFVEaW0yLm5ldygwLCA3LCAwLCA3KQoJVUlHcmlkTGF5b3V0LkNlbGxTaXplID0gVURpbTIubmV3KDAuNDUsIDAsIDAsIDMwKQoJVUlHcmlkTGF5b3V0LlNvcnRPcmRlciA9IEVudW0uU29ydE9yZGVyLkxheW91dE9yZGVyCglVSUdyaWRMYXlvdXQuUGFyZW50ID0gbWFpbmZyYW1lCgoJbG9jYWwgYnV0dG9ucyA9IHt9CgoJLS0tLS0tIEJ1dHRvbnMgZm9yIGhhY2tzLgoKCS0tLS0gQW9FcwoJLS0gSW5zdGFudCBCbGF6ZSBDb2x1bW4KCglsb2NhbCBCbGF6ZUNvbHVtbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglCbGF6ZUNvbHVtbi5OYW1lID0gIkJsYXplQ29sdW1uIgoJQmxhemVDb2x1bW4uVGV4dCA9ICJJbnN0YW50IEJsYXplIENvbHVtbiAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBCbGF6ZUNvbHVtbikKCglCbGF6ZUNvbHVtbkVuYWJsZWQgPSBmYWxzZQoKCUJsYXplQ29sdW1uLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgQmxhemVDb2x1bW5FbmFibGVkID09IGZhbHNlIHRoZW4KCQkJQmxhemVDb2x1bW5FbmFibGVkID0gdHJ1ZQoJCQlCbGF6ZUNvbHVtbi5UZXh0ID0gIkluc3RhbnQgQmxhemUgQ29sdW1uIChPbikiCgkJZWxzZQoJCQlCbGF6ZUNvbHVtbkVuYWJsZWQgPSBmYWxzZQoJCQlCbGF6ZUNvbHVtbi5UZXh0ID0gIkluc3RhbnQgQmxhemUgQ29sdW1uIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIEFtcGxpZmllZCBHZW5lc2lzIFJheQoKCWxvY2FsIEdlbmVzaXNSYXkgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJR2VuZXNpc1JheS5OYW1lID0gIkdlbmVzaXNSYXkiCglHZW5lc2lzUmF5LlRleHQgPSAiQW1wbGlmaWVkIEdlbmVzaXMgUmF5IChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEdlbmVzaXNSYXkpCgoJbG9jYWwgR2VuZXNpc1JheUVuYWJsZWQgPSBmYWxzZQoJbG9jYWwgR1JDaGFyZ2UgPSAxIC0tIDEwMDAwMDAKCglHZW5lc2lzUmF5Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgR2VuZXNpc1JheUVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlHZW5lc2lzUmF5RW5hYmxlZCA9IHRydWUKCQkJR2VuZXNpc1JheS5UZXh0ID0gIkFtcGxpZmllZCBHZW5lc2lzIFJheSAoT24pIgoJCWVsc2UKCQkJR2VuZXNpc1JheUVuYWJsZWQgPSBmYWxzZQoJCQlHZW5lc2lzUmF5LlRleHQgPSAiQW1wbGlmaWVkIEdlbmVzaXMgUmF5IChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIENyZWF0aW9uIEhvbGQgSGFjawoKCWxvY2FsIENoYWluSG9sZCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglDaGFpbkhvbGQuTmFtZSA9ICJDaGFpbkhvbGQiCglDaGFpbkhvbGQuVGV4dCA9ICIoRykgSW5zdGFudCBDaGFpbiBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIENoYWluSG9sZCkKCglsb2NhbCBDcmVhdGlvbkhvbGRFbmFibGVkID0gZmFsc2UKCglDaGFpbkhvbGQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBpc0dvbGQgb3IgaXNNYXN0ZXIgdGhlbgoJCQlpZiBub3QgQ3JlYXRpb25Ib2xkRW5hYmxlZCB0aGVuCgkJCQlDcmVhdGlvbkhvbGRFbmFibGVkID0gdHJ1ZQoJCQkJQ2hhaW5Ib2xkLlRleHQgPSAiKEcpIEluc3RhbnQgQ2hhaW4gSGFjayAoT24pIgoJCQllbHNlCgkJCQlDcmVhdGlvbkhvbGRFbmFibGVkID0gZmFsc2UKCQkJCUNoYWluSG9sZC5UZXh0ID0gIihHKSBJbnN0YW50IENoYWluIEhhY2sgKE9mZikiCgkJCWVuZAoJCWVsc2UKCQkJQ2hhaW5Ib2xkLlRleHQgPSAiTWVtYmVyIE5vdCBHb2xkIgoJCQl3YWl0KDEpCgkJCUNoYWluSG9sZC5UZXh0ID0gIihHKSBJbnN0YW50IENoYWluIEhhY2sgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gSW5zdGFudCBWaW5lIFRyYXAKCglsb2NhbCBWaW5lVHJhcCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglWaW5lVHJhcC5OYW1lID0gIlZpbmVUcmFwIgoJVmluZVRyYXAuVGV4dCA9ICJJbnN0YW50IFZpbmUgVHJhcCAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBWaW5lVHJhcCkKCglWaW5lVHJhcEVuYWJsZWQgPSBmYWxzZQoKCVZpbmVUcmFwLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgVmluZVRyYXBFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJVmluZVRyYXBFbmFibGVkID0gdHJ1ZQoJCQlWaW5lVHJhcC5UZXh0ID0gIkluc3RhbnQgVmluZSBUcmFwIChPbikiCgkJZWxzZQoJCQlWaW5lVHJhcEVuYWJsZWQgPSBmYWxzZQoJCQlWaW5lVHJhcC5UZXh0ID0gIkluc3RhbnQgVmluZSBUcmFwIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIElsbHVzaXZlIEF0YWtlIEhhY2sKCglsb2NhbCBJbGx1c2l2ZUF0YWtlID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUlsbHVzaXZlQXRha2UuTmFtZSA9ICJJbGx1c2l2ZUF0YWtlIgoJSWxsdXNpdmVBdGFrZS5UZXh0ID0gIklsbHVzaXZlIEF0YWtlIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgSWxsdXNpdmVBdGFrZSkKCglJbGx1c2l2ZUF0YWtlRW5hYmxlZCA9IGZhbHNlCgoJSWxsdXNpdmVBdGFrZS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIElsbHVzaXZlQXRha2VFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJSWxsdXNpdmVBdGFrZUVuYWJsZWQgPSB0cnVlCgkJCUlsbHVzaXZlQXRha2UuVGV4dCA9ICJJbGx1c2l2ZSBBdGFrZSBIYWNrIChPbikiCgkJZWxzZQoJCQlJbGx1c2l2ZUF0YWtlRW5hYmxlZCA9IGZhbHNlCgkJCUlsbHVzaXZlQXRha2UuVGV4dCA9ICJJbGx1c2l2ZSBBdGFrZSBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIEluc3RhbnQgTXVya3kgTWlzc2lsZXMKCglsb2NhbCBEYXJrQW9lID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCURhcmtBb2UuTmFtZSA9ICJEYXJrQW9lIgoJRGFya0FvZS5UZXh0ID0gIkluc3RhbnQgTXVya3kgTWlzc2lsZXMgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgRGFya0FvZSkKCglsb2NhbCBEYXJrQW9lRW5hYmxlZCA9IGZhbHNlCgoJRGFya0FvZS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIG5vdCBEYXJrQW9lRW5hYmxlZCB0aGVuCgkJCURhcmtBb2VFbmFibGVkID0gdHJ1ZQoJCQlEYXJrQW9lLlRleHQgPSAiSW5zdGFudCBNdXJreSBNaXNzaWxlcyAoT24pIgoJCWVsc2UKCQkJRGFya0FvZUVuYWJsZWQgPSBmYWxzZQoJCQlEYXJrQW9lLlRleHQgPSAiSW5zdGFudCBNdXJreSBNaXNzaWxlcyAoT2ZmKSIKCQllbmQKCWVuZCkKCQoJLS0gSW5zdGFudCBBaXIgRGlzcGVyc2lvbgoKCWxvY2FsIFN0b3JtQW9lID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCVN0b3JtQW9lLk5hbWUgPSAiU3Rvcm1Bb2UiCglTdG9ybUFvZS5UZXh0ID0gIihHKSBJbnN0YW50IFN0b3JtIEFvRSAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBTdG9ybUFvZSkKCglsb2NhbCBEaXNwZXJzaW9uRW5hYmxlZCA9IGZhbHNlCgoJU3Rvcm1Bb2UuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBpc0dvbGQgb3IgaXNNYXN0ZXIgdGhlbgoJCQlpZiBub3QgRGlzcGVyc2lvbkVuYWJsZWQgdGhlbgoJCQkJRGlzcGVyc2lvbkVuYWJsZWQgPSB0cnVlCgkJCQlTdG9ybUFvZS5UZXh0ID0gIihHKSBJbnN0YW50IFN0b3JtIEFvRSAoT24pIgoJCQllbHNlCgkJCQlEaXNwZXJzaW9uRW5hYmxlZCA9IGZhbHNlCgkJCQlTdG9ybUFvZS5UZXh0ID0gIihHKSBJbnN0YW50IFN0b3JtIEFvRSAoT2ZmKSIKCQkJZW5kCQoJCWVsc2UKCQkJU3Rvcm1Bb2UuVGV4dCA9ICJNZW1iZXIgTm90IEdvbGQiCgkJCXdhaXQoMSkKCQkJU3Rvcm1Bb2UuVGV4dCA9ICIoRykgSW5zdGFudCBTdG9ybSBBb0UgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gU3BsaXR0aW5nIFNsaW1lIEhhY2sKCglsb2NhbCBTcGxpdHRpbmdTbGltZSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglTcGxpdHRpbmdTbGltZS5OYW1lID0gIlNwbGl0dGluZ1NsaW1lIgoJU3BsaXR0aW5nU2xpbWUuVGV4dCA9ICJTcGxpdHRpbmcgU2xpbWUgSGFjayAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBTcGxpdHRpbmdTbGltZSkKCglTcGxpdHRpbmdTbGltZUVuYWJsZWQgPSBmYWxzZQoKCVNwbGl0dGluZ1NsaW1lLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgU3BsaXR0aW5nU2xpbWVFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJU3BsaXR0aW5nU2xpbWVFbmFibGVkID0gdHJ1ZQoJCQlTcGxpdHRpbmdTbGltZS5UZXh0ID0gIlNwbGl0dGluZyBTbGltZSBIYWNrIChPbikiCgkJZWxzZQoJCQlTcGxpdHRpbmdTbGltZUVuYWJsZWQgPSBmYWxzZQoJCQlTcGxpdHRpbmdTbGltZS5UZXh0ID0gIlNwbGl0dGluZyBTbGltZSBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIEFtYXVyb3RpYyBMYW1iZW50IEhhY2sKCglsb2NhbCBBbWF1cm90aWNMYW1iZW50ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUFtYXVyb3RpY0xhbWJlbnQuTmFtZSA9ICJBbWF1cm90aWNMYW1iZW50IgoJQW1hdXJvdGljTGFtYmVudC5UZXh0ID0gIkFtYXVyb3RpYyBMYW1iZW50IEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQW1hdXJvdGljTGFtYmVudCkKCglBbWF1cm90aWNMYW1iZW50RW5hYmxlZCA9IGZhbHNlCgoJQW1hdXJvdGljTGFtYmVudC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIEFtYXVyb3RpY0xhbWJlbnRFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJQW1hdXJvdGljTGFtYmVudEVuYWJsZWQgPSB0cnVlCgkJCUFtYXVyb3RpY0xhbWJlbnQuVGV4dCA9ICJBbWF1cm90aWMgTGFtYmVudCBIYWNrIChPbikiCgkJZWxzZQoJCQlBbWF1cm90aWNMYW1iZW50RW5hYmxlZCA9IGZhbHNlCgkJCUFtYXVyb3RpY0xhbWJlbnQuVGV4dCA9ICJBbWF1cm90aWMgTGFtYmVudCBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIEluc3RhbnQgUGxhc21hIEltcGxvc2lvbgoKCWxvY2FsIFBsYXNtYUltcGxvc2lvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglQbGFzbWFJbXBsb3Npb24uTmFtZSA9ICJQbGFzbWFJbXBsb3Npb24iCglQbGFzbWFJbXBsb3Npb24uVGV4dCA9ICJJbnN0YW50IFBsYXNtYSBJbXBsb3Npb24gKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgUGxhc21hSW1wbG9zaW9uKQoKCVBsYXNtYUltcGxvc2lvbkVuYWJsZWQgPSBmYWxzZQoKCVBsYXNtYUltcGxvc2lvbi5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIFBsYXNtYUltcGxvc2lvbkVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlQbGFzbWFJbXBsb3Npb25FbmFibGVkID0gdHJ1ZQoJCQlQbGFzbWFJbXBsb3Npb24uVGV4dCA9ICJJbnN0YW50IFBsYXNtYSBJbXBsb3Npb24gKE9uKSIKCQllbHNlCgkJCVBsYXNtYUltcGxvc2lvbkVuYWJsZWQgPSBmYWxzZQoJCQlQbGFzbWFJbXBsb3Npb24uVGV4dCA9ICJJbnN0YW50IFBsYXNtYSBJbXBsb3Npb24gKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gRm9ybWlkYWJsZSBSb2FyIEhhY2sKCglsb2NhbCBGb3JtaWRhYmxlUm9hciA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglGb3JtaWRhYmxlUm9hci5OYW1lID0gIkZvcm1pZGFibGVSb2FyIgoJRm9ybWlkYWJsZVJvYXIuVGV4dCA9ICJGb3JtaWRhYmxlIFJvYXIgSGFjayAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBGb3JtaWRhYmxlUm9hcikKCglGb3JtaWRhYmxlUm9hckVuYWJsZWQgPSBmYWxzZQoKCUZvcm1pZGFibGVSb2FyLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgRm9ybWlkYWJsZVJvYXJFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJRm9ybWlkYWJsZVJvYXJFbmFibGVkID0gdHJ1ZQoJCQlGb3JtaWRhYmxlUm9hci5UZXh0ID0gIkZvcm1pZGFibGUgUm9hciBIYWNrIChPbikiCgkJZWxzZQoJCQlGb3JtaWRhYmxlUm9hckVuYWJsZWQgPSBmYWxzZQoJCQlGb3JtaWRhYmxlUm9hci5UZXh0ID0gIkZvcm1pZGFibGUgUm9hciBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIEluc3RhbnQgU2tlbGV0b24gR3JhYgoKCWxvY2FsIFNrZWxldG9uR3JhYiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglTa2VsZXRvbkdyYWIuTmFtZSA9ICJTa2VsZXRvbkdyYWIiCglTa2VsZXRvbkdyYWIuVGV4dCA9ICJJbnN0YW50IFNrZWxldG9uIEdyYWIgKE9mZikgW0FJTUVEXSIKCXRhYmxlLmluc2VydChidXR0b25zLCBTa2VsZXRvbkdyYWIpCgoJU2tlbGV0b25HcmFiRW5hYmxlZCA9IGZhbHNlCgoJU2tlbGV0b25HcmFiLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgU2tlbGV0b25HcmFiRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCVNrZWxldG9uR3JhYkVuYWJsZWQgPSB0cnVlCgkJCVNrZWxldG9uR3JhYi5UZXh0ID0gIkluc3RhbnQgU2tlbGV0b24gR3JhYiAoT24pIFtBSU1FRF0iCgkJZWxzZQoJCQlTa2VsZXRvbkdyYWJFbmFibGVkID0gZmFsc2UKCQkJU2tlbGV0b25HcmFiLlRleHQgPSAiSW5zdGFudCBTa2VsZXRvbiBHcmFiIChPZmYpIFtBSU1FRF0iCgkJZW5kCgllbmQpCgoJLS0gR3Jhdml0YXRpb25hbCBGaWVsZCBIYWNrCgoJbG9jYWwgR3Jhdml0YXRpb25hbEZpZWxkID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUdyYXZpdGF0aW9uYWxGaWVsZC5OYW1lID0gIkdyYXZpdGF0aW9uYWxGaWVsZCIKCUdyYXZpdGF0aW9uYWxGaWVsZC5UZXh0ID0gIkdyYXZpdGF0aW9uYWwgRmllbGQgSGFjayAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBHcmF2aXRhdGlvbmFsRmllbGQpCgoJR3Jhdml0YXRpb25hbEZpZWxkRW5hYmxlZCA9IGZhbHNlCgoJR3Jhdml0YXRpb25hbEZpZWxkLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgR3Jhdml0YXRpb25hbEZpZWxkRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUdyYXZpdGF0aW9uYWxGaWVsZEVuYWJsZWQgPSB0cnVlCgkJCUdyYXZpdGF0aW9uYWxGaWVsZC5UZXh0ID0gIkdyYXZpdGF0aW9uYWwgRmllbGQgSGFjayAoT24pIgoJCWVsc2UKCQkJR3Jhdml0YXRpb25hbEZpZWxkRW5hYmxlZCA9IGZhbHNlCgkJCUdyYXZpdGF0aW9uYWxGaWVsZC5UZXh0ID0gIkdyYXZpdGF0aW9uYWwgRmllbGQgSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBJbnN0YW50IFJvY2sgQXJtb3IKCglsb2NhbCBSb2NrQXJtb3IgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJUm9ja0FybW9yLk5hbWUgPSAiUm9ja0FybW9yIgoJUm9ja0FybW9yLlRleHQgPSAiSW5zdGFudCBSb2NrIEFybW9yIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFJvY2tBcm1vcikKCglSb2NrQXJtb3IuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJCb2R5IENvbG9ycyIpIHRoZW4KCQkJcGxheWVyLkNoYXJhY3RlclsiQm9keSBDb2xvcnMiXTpEZXN0cm95KCkKCQllbmQKCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJFYXJ0aCIsICJSb2NrIEFybW9yIikKCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkVhcnRoIiwgIlJvY2sgQXJtb3IiKQoJZW5kKQoKCS0tLS0gUGxheWVyIG1vZGlmaWNhdGlvbnMKCS0tIFNsaW1lIEJ1ZGRpZXMgSGFjawoKCWxvY2FsIFNsaW1lQnVkZGllcyA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglTbGltZUJ1ZGRpZXMuTmFtZSA9ICJTbGltZUJ1ZGRpZXMiCglTbGltZUJ1ZGRpZXMuVGV4dCA9ICIoRykgU2xpbWUgQnVkZGllcyBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFNsaW1lQnVkZGllcykKCglsb2NhbCBTbGltZUJ1ZGRpZXNFbmFibGVkID0gZmFsc2UKCglTbGltZUJ1ZGRpZXMuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBpc0dvbGQgb3IgaXNNYXN0ZXIgdGhlbgoJCQlpZiBTbGltZUJ1ZGRpZXNFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJCVNsaW1lQnVkZGllc0VuYWJsZWQgPSB0cnVlCgkJCQlTbGltZUJ1ZGRpZXMuVGV4dCA9ICIoRykgU2xpbWUgQnVkZGllcyBIYWNrIChPbikiCgkJCWVsc2UKCQkJCVNsaW1lQnVkZGllc0VuYWJsZWQgPSBmYWxzZQoJCQkJU2xpbWVCdWRkaWVzLlRleHQgPSAiKEcpIFNsaW1lIEJ1ZGRpZXMgSGFjayAoT2ZmKSIKCQkJZW5kCgkJZWxzZQoJCQlTbGltZUJ1ZGRpZXMuVGV4dCA9ICJNZW1iZXIgTm90IEdvbGQiCgkJCXdhaXQoMSkKCQkJU2xpbWVCdWRkaWVzLlRleHQgPSAiKEcpIFNsaW1lIEJ1ZGRpZXMgSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBJbmVydGlhIEdyYXZpdHkKCglsb2NhbCBJbmVydGlhR3Jhdml0eSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglJbmVydGlhR3Jhdml0eS5OYW1lID0gIkluZXJ0aWFHcmF2aXR5IgoJSW5lcnRpYUdyYXZpdHkuVGV4dCA9ICJJbmVydGlhIEdyYXZpdHkgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgSW5lcnRpYUdyYXZpdHkpCgoJSW5lcnRpYUdyYXZpdHlFbmFibGVkID0gZmFsc2UKCglJbmVydGlhR3Jhdml0eS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIEluZXJ0aWFHcmF2aXR5RW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUluZXJ0aWFHcmF2aXR5RW5hYmxlZCA9IHRydWUKCQkJSW5lcnRpYUdyYXZpdHkuVGV4dCA9ICJJbmVydGlhIEdyYXZpdHkgKE9uKSIKCQkJbG9jYWwgQm9keUZvcmNlID0gSW5zdGFuY2UubmV3KCJCb2R5Rm9yY2UiKQoJCQlCb2R5Rm9yY2UuUGFyZW50ID0gcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0CgkJCUJvZHlGb3JjZS5OYW1lID0gIkluZXJ0aWFHcmF2aXR5Rm9yY2UiCgkJCUJvZHlGb3JjZS5Gb3JjZSA9IFZlY3RvcjMubmV3KDAsIDE2MzgsIDApCgkJZWxzZQoJCQlJbmVydGlhR3Jhdml0eUVuYWJsZWQgPSBmYWxzZQoJCQlJbmVydGlhR3Jhdml0eS5UZXh0ID0gIkluZXJ0aWEgR3Jhdml0eSAoT2ZmKSIKCQkJaWYgcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkZpbmRGaXJzdENoaWxkKCJJbmVydGlhR3Jhdml0eUZvcmNlIikgdGhlbgoJCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkluZXJ0aWFHcmF2aXR5Rm9yY2U6RGVzdHJveSgpCgkJCWVuZAoJCWVuZAoJZW5kKQoKCS0tIFNwZWN0cmFsIEVtYm9kaW1lbnQKCglsb2NhbCBTcGVjdHJhbEVtYm9kaW1lbnQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJU3BlY3RyYWxFbWJvZGltZW50Lk5hbWUgPSAiU3BlY3RyYWxFbWJvZGltZW50IgoJU3BlY3RyYWxFbWJvZGltZW50LlRleHQgPSAiU3BlY3RyYWwgRW1ib2RpbWVudCBLZXliaW5kIChPZmYpIFtYXSIKCXRhYmxlLmluc2VydChidXR0b25zLCBTcGVjdHJhbEVtYm9kaW1lbnQpCgoJU3BlY3RyYWxFbWJvZGltZW50RW5hYmxlZCA9IGZhbHNlCgoJU3BlY3RyYWxFbWJvZGltZW50Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgU3BlY3RyYWxFbWJvZGltZW50RW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCVNwZWN0cmFsRW1ib2RpbWVudEVuYWJsZWQgPSB0cnVlCgkJCVNwZWN0cmFsRW1ib2RpbWVudC5UZXh0ID0gIlNwZWN0cmFsIEVtYm9kaW1lbnQgS2V5YmluZCAoT24pIFtYXSIKCQllbHNlCgkJCVNwZWN0cmFsRW1ib2RpbWVudEVuYWJsZWQgPSBmYWxzZQoJCQlTcGVjdHJhbEVtYm9kaW1lbnQuVGV4dCA9ICJTcGVjdHJhbCBFbWJvZGltZW50IEtleWJpbmQgKE9mZikgW1hdIgoJCWVuZAoJZW5kKQoKCS0tIEFudGktQmxpbmQKCglsb2NhbCBBbnRpQmxpbmQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJQW50aUJsaW5kLk5hbWUgPSAiQW50aUJsaW5kIgoJQW50aUJsaW5kLlRleHQgPSAiQW50aS1CbGluZCAoT2ZmKSBbS10iCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQW50aUJsaW5kKQoKCUFudGlCbGluZEVuYWJsZWQgPSBmYWxzZQoKCWxvY2FsIG5vcm1hbEZvZ0NvbG9yID0gZ2FtZS5MaWdodGluZy5Gb2dDb2xvcgoJbG9jYWwgbm9ybWFsRm9nRW5kID0gZ2FtZS5MaWdodGluZy5Gb2dFbmQKCWxvY2FsIG5vcm1hbEJyaWdodG5lc3MgPSBnYW1lLkxpZ2h0aW5nLkJyaWdodG5lc3MKCWxvY2FsIG5vcm1hbENsb2NrVGltZSA9IGdhbWUuTGlnaHRpbmcuQ2xvY2tUaW1lCgoJbG9jYWwgZnVuY3Rpb24gQW50aUJsaW5kRnVuYygpCgkJaWYgQW50aUJsaW5kRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUFudGlCbGluZEVuYWJsZWQgPSB0cnVlCgkJCUFudGlCbGluZC5UZXh0ID0gIkFudGktQmxpbmQgKE9uKSBbS10iCgkJCXdoaWxlIEFudGlCbGluZEVuYWJsZWQgZG8KCQkJCXdhaXQoKQoJCQkJZ2FtZS5MaWdodGluZy5Gb2dDb2xvciA9IG5vcm1hbEZvZ0NvbG9yCgkJCQlnYW1lLkxpZ2h0aW5nLkZvZ0VuZCA9IG5vcm1hbEZvZ0VuZAoJCQkJZ2FtZS5MaWdodGluZy5CcmlnaHRuZXNzID0gbm9ybWFsQnJpZ2h0bmVzcwoJCQkJZ2FtZS5MaWdodGluZy5DbG9ja1RpbWUgPSBub3JtYWxDbG9ja1RpbWUKCQkJZW5kCgkJZWxzZQoJCQlBbnRpQmxpbmRFbmFibGVkID0gZmFsc2UKCQkJQW50aUJsaW5kLlRleHQgPSAiQW50aS1CbGluZCAoT2ZmKSBbS10iCgkJZW5kCgllbmQKCglBbnRpQmxpbmQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KEFudGlCbGluZEZ1bmMpCgoJcGxheWVyOldhaXRGb3JDaGlsZCgiUGxheWVyR3VpIikuRGVzY2VuZGFudEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oZCkKCQlpZiBBbnRpQmxpbmRFbmFibGVkIHRoZW4KCQkJaWYgZC5OYW1lID09ICJTY3JlZW5HdWkiIHRoZW4KCQkJCXdhaXQoKQoJCQkJcGxheWVyLlBsYXllckd1aS5TY3JlZW5HdWk6RGVzdHJveSgpCgkJCWVsc2VpZiBkLk5hbWUgPT0gIkRpc3RvcnQiIHRoZW4KCQkJCXdhaXQoKQoJCQkJcGxheWVyLlBsYXllckd1aS5EaXN0b3J0OkRlc3Ryb3koKQoJCQllbmQKCQllbmQKCWVuZCkKCgktLSBTcGVlZCBoYWNrCgoJbG9jYWwgU3BlZWRoYWNrID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCVNwZWVkaGFjay5OYW1lID0gIlNwZWVkaGFjayIKCVNwZWVkaGFjay5UZXh0ID0gIlNwZWVkaGFjayBbZGVmYXVsdCA2NF0gKE9mZikgW1RdIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFNwZWVkaGFjaykKCglTcGVlZGhhY2tFbmFibGVkID0gZmFsc2UKCVNldFNwZWVkID0gNjQKCglmdW5jdGlvbiBtb2RpZnlTcGVlZCgpCgkJcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKS5DaGFuZ2VkOmNvbm5lY3QoZnVuY3Rpb24oKQoJCQlpZiBTcGVlZGhhY2tFbmFibGVkIGFuZCBTZXRTcGVlZCB+PSBuaWwgdGhlbgoJCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5XYWxrU3BlZWQgPSBTZXRTcGVlZAoJCQllbHNlCgkJCQlyZXR1cm4KCQkJZW5kCgkJZW5kKQoJZW5kCgoJZnVuY3Rpb24gYmVnaW5TcGVlZCgpCgkJaWYgU3BlZWRoYWNrRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCVNwZWVkaGFja0VuYWJsZWQgPSB0cnVlCgkJCVNwZWVkaGFjay5UZXh0ID0gIlNwZWVkaGFjayBbZGVmYXVsdCA2NF0gKE9uKSBbVF0iCgkJCW1vZGlmeVNwZWVkKCkKCQkJd2FpdCgpCgkJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuV2Fsa1NwZWVkID0gU2V0U3BlZWQKCQkJd2hpbGUgU3BlZWRoYWNrRW5hYmxlZCBkbwoJCQkJd2FpdCgpCgkJCQlpZiBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA9PSAwIHRoZW4KCQkJCQlyZXBlYXQgd2FpdCgpIHVudGlsIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoIH49IDAKCQkJCQltb2RpZnlTcGVlZCgpCgkJCQkJd2FpdCgpCgkJCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5XYWxrU3BlZWQgPSBTZXRTcGVlZAoJCQkJZW5kCgkJCWVuZAoJCWVsc2UKCQkJU3BlZWRoYWNrRW5hYmxlZCA9IGZhbHNlCgkJCVNwZWVkaGFjay5UZXh0ID0gIlNwZWVkaGFjayBbZGVmYXVsdCA2NF0gKE9mZikgW1RdIgoJCWVuZAoJZW5kCgoJU3BlZWRoYWNrLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChiZWdpblNwZWVkKQoKCS0tLS0gQnVsbGV0cwoJLS0gSHlwZXJhbmcgSGFjawoKCWxvY2FsIFRlY2hSYW5nID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCVRlY2hSYW5nLk5hbWUgPSAiVGVjaFJhbmciCglUZWNoUmFuZy5UZXh0ID0gIkh5cGVyYW5nIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgVGVjaFJhbmcpCgoJbG9jYWwgSHlwZXJhbmdFbmFibGVkID0gZmFsc2UKCglUZWNoUmFuZy5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIG5vdCBIeXBlcmFuZ0VuYWJsZWQgdGhlbgoJCQlIeXBlcmFuZ0VuYWJsZWQgPSB0cnVlCgkJCVRlY2hSYW5nLlRleHQgPSAiSHlwZXJhbmcgSGFjayAoT24pIgoJCWVsc2UKCQkJSHlwZXJhbmdFbmFibGVkID0gZmFsc2UKCQkJVGVjaFJhbmcudGV4dCA9ICJIeXBlcmFuZyBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIEFzdGVyb2lkIEJlbHQgSGFjawoKCWxvY2FsIEFzdGVyb2lkQmVsdEhhY2sgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJQXN0ZXJvaWRCZWx0SGFjay5OYW1lID0gIkFzdGVyb2lkQmVsdEhhY2siCglBc3Rlcm9pZEJlbHRIYWNrLlRleHQgPSAiQXRlcm9pZHMgQmVsdCBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEFzdGVyb2lkQmVsdEhhY2spCgkKCWxvY2FsIEFzdGVyb2lkQmVsdEVuYWJsZWQgPSBmYWxzZQoJCglBc3Rlcm9pZEJlbHRIYWNrLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgQXN0ZXJvaWRCZWx0RW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUFzdGVyb2lkQmVsdEVuYWJsZWQgPSB0cnVlCgkJCUFzdGVyb2lkQmVsdEhhY2suVGV4dCA9ICJBc3Rlcm9pZCBCZWx0IEhhY2sgKE9uKSIKCQllbHNlCgkJCUFzdGVyb2lkQmVsdEVuYWJsZWQgPSBmYWxzZQoJCQlBc3Rlcm9pZEJlbHRIYWNrLlRleHQgPSAiQXRlcm9pZHMgQmVsdCBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIE9yYnMgb2YgRW5saWdodGVubWVudCBIYWNrCgoJbG9jYWwgTGlnaHRPcmJzSGFjayA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglMaWdodE9yYnNIYWNrLk5hbWUgPSAiTGlnaHRPcmJzSGFjayIKCUxpZ2h0T3Jic0hhY2suVGV4dCA9ICJMaWdodCBPcmJzIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgTGlnaHRPcmJzSGFjaykKCglsb2NhbCBsT3Jic0VuYWJsZWQgPSBmYWxzZQoKCUxpZ2h0T3Jic0hhY2suTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBsT3Jic0VuYWJsZWQgdGhlbgoJCQlsT3Jic0VuYWJsZWQgPSBmYWxzZQoJCQlMaWdodE9yYnNIYWNrLlRleHQgPSAiTGlnaHQgT3JicyBIYWNrIChPZmYpIgoJCWVsc2UKCQkJbE9yYnNFbmFibGVkID0gdHJ1ZQoJCQlMaWdodE9yYnNIYWNrLlRleHQgPSAiTGlnaHQgT3JicyBIYWNrIChPbikiCgkJZW5kCgllbmQpCgoJLS0gVmlnb3IgR3lyYXRpb24gSGFjawoKCWxvY2FsIFZpZ0d5cmF0SGFjayA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglWaWdHeXJhdEhhY2suTmFtZSA9ICJWaWdHeXJhdEhhY2siCglWaWdHeXJhdEhhY2suVGV4dCA9ICJWaWdvciBHeXJhdGlvbiBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFZpZ0d5cmF0SGFjaykKCQoJbG9jYWwgVmlnb3JIYWNrRW5hYmxlZCA9IGZhbHNlCgkKCVZpZ0d5cmF0SGFjay5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIFZpZ29ySGFja0VuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlWaWdvckhhY2tFbmFibGVkID0gdHJ1ZQoJCQlWaWdHeXJhdEhhY2suVGV4dCA9ICJWaWdvciBHeXJhdGlvbiBIYWNrIChPbikiCgkJZWxzZQoJCQlWaWdvckhhY2tFbmFibGVkID0gZmFsc2UKCQkJVmlnR3lyYXRIYWNrLlRleHQgPSAiVmlnb3IgR3lyYXRpb24gSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBMaWdodG5pbmcgQmFycmFnZSBIYWNrCgoJbG9jYWwgQmFycmFnZSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglCYXJyYWdlLk5hbWUgPSAiQmFycmFnZSIKCUJhcnJhZ2UuVGV4dCA9ICJCYXJyYWdlIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQmFycmFnZSkKCglCYXJyYWdlLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgbm90IFN0b3JtQnVsbGV0c0VuYWJsZWQgdGhlbgoJCQlTdG9ybUJ1bGxldHNFbmFibGVkID0gdHJ1ZQoJCQlCYXJyYWdlLlRleHQgPSAiQmFycmFnZSBIYWNrIChPbikiCgkJZWxzZQoJCQlTdG9ybUJ1bGxldHNFbmFibGVkID0gZmFsc2UKCQkJQmFycmFnZS5UZXh0ID0gIkJhcnJhZ2UgSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBEeWluZyBTdGFyIEhhY2sKCglsb2NhbCBEeWluZ1N0YXJIYWNrID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUR5aW5nU3RhckhhY2suTmFtZSA9ICJEeWluZ1N0YXJIYWNrIgoJRHlpbmdTdGFySGFjay5UZXh0ID0gIihHKSBEeWluZyBTdGFyIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgRHlpbmdTdGFySGFjaykKCglsb2NhbCBEeWluZ1N0YXJFbmFibGVkID0gZmFsc2UKCglEeWluZ1N0YXJIYWNrLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgaXNHb2xkIG9yIGlzTWFzdGVyIHRoZW4KCQkJaWYgRHlpbmdTdGFyRW5hYmxlZCB0aGVuCgkJCQlEeWluZ1N0YXJFbmFibGVkID0gZmFsc2UKCQkJCUR5aW5nU3RhckhhY2suVGV4dCA9ICIoRykgRHlpbmcgU3RhciBIYWNrIChPZmYpIgoJCQllbHNlCgkJCQlEeWluZ1N0YXJFbmFibGVkID0gdHJ1ZQoJCQkJRHlpbmdTdGFySGFjay5UZXh0ID0gIihHKSBEeWluZyBTdGFyIEhhY2sgKE9uKSIKCQkJZW5kCgkJZWxzZQoJCQlEeWluZ1N0YXJIYWNrLlRleHQgPSAiTWVtYmVyIE5vdCBHb2xkIgoJCQl3YWl0KDEpCgkJCUR5aW5nU3RhckhhY2suVGV4dCA9ICIoRykgRHlpbmcgU3RhciBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tLS0gQmxhc3RzCgktLSBPcmJpdGFsIFN0cmlrZSBIYWNrCgoJbG9jYWwgT3JiaXRhbCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglPcmJpdGFsLk5hbWUgPSAiT3JpYnRhbCIKCU9yYml0YWwuVGV4dCA9ICIoRykgT3JiaXRhbCBTdHJpa2UgSGFjayAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBPcmJpdGFsKQoKCWxvY2FsIE9yYml0YWxIYWNrRW5hYmxlZCA9IGZhbHNlCgoJT3JiaXRhbC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIGlzR29sZCBvciBpc01hc3RlciB0aGVuCgkJCWlmIG5vdCBPcmJpdGFsSGFja0VuYWJsZWQgdGhlbgoJCQkJT3JiaXRhbEhhY2tFbmFibGVkID0gdHJ1ZQoJCQkJT3JiaXRhbC5UZXh0ID0gIihHKSBPcmJpdGFsIFN0cmlrZSBIYWNrIChPbikiCgkJCWVsc2UKCQkJCU9yYml0YWxIYWNrRW5hYmxlZCA9IGZhbHNlCgkJCQlPcmJpdGFsLlRleHQgPSAiKEcpIE9yYml0YWwgU3RyaWtlIEhhY2sgKE9mZikiCgkJCWVuZAoJCWVsc2UKCQkJT3JiaXRhbC5UZXh0ID0gIk1lbWJlciBOb3QgR29sZCIKCQkJd2FpdCgxKQoJCQlPcmJpdGFsLlRleHQgPSAiKEcpIE9yYml0YWwgU3RyaWtlIEhhY2sgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gRG91YmxlIFJheSBIYWNrCgoJbG9jYWwgRG91YmxlUmF5ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCURvdWJsZVJheS5OYW1lID0gIkRvdWJsZVJheSIKCURvdWJsZVJheS5UZXh0ID0gIihHKSBEb3VibGUgUmF5IEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgRG91YmxlUmF5KQoKCURvdWJsZVJheS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIGlzR29sZCBvciBpc01hc3RlciB0aGVuCgkJCWlmIG5vdCBEb3VibGVSYXlFbmFibGVkIHRoZW4KCQkJCURvdWJsZVJheUVuYWJsZWQgPSB0cnVlCgkJCQlEb3VibGVSYXkuVGV4dCA9ICIoRykgRG91YmxlIFJheSBIYWNrIChPbikiCgkJCWVsc2UKCQkJCURvdWJsZVJheUVuYWJsZWQgPSBmYWxzZQoJCQkJRG91YmxlUmF5LlRleHQgPSAiKEcpIERvdWJsZSBSYXkgSGFjayAoT2ZmKSIKCQkJZW5kCgkJZWxzZQoJCQlEb3VibGVSYXkuVGV4dCA9ICJNZW1iZXIgTm90IEdvbGQiCgkJCXdhaXQoMSkKCQkJRG91YmxlUmF5LlRleHQgPSAiKEcpIERvdWJsZSBSYXkgSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBIb2xvYmVhbSBDYW1lcmEgQXR0YWNoCgoJbG9jYWwgSG9sb2JlYW0gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJSG9sb2JlYW0uTmFtZSA9ICJIb2xvYmVhbSIKCUhvbG9iZWFtLlRleHQgPSAiSG9sb2JlYW0gQ2FtZXJhIEF0dGFjaCAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBIb2xvYmVhbSkKCglIb2xvYmVhbUVuYWJsZWQgPSBmYWxzZQoKCWZ1bmN0aW9uIGF0dGFjaENhbWVyYSh2KQoJCWlmICh2IH49IG5pbCkgdGhlbgoJCQlpZiBub3Qodmlld2luZykgYW5kICh2Lk5hbWUgPT0gIkhvbG9iZWFtIikgdGhlbgoJCQkJZ2FtZS5Xb3Jrc3BhY2UuQ2FtZXJhLkNhbWVyYVN1YmplY3QgPSBnYW1lLldvcmtzcGFjZVsnLklnbm9yZSddWycuQXR0YWNrcyddW3YuTmFtZV0KCQkJZWxzZQoJCQkJdjpEZXN0cm95KCkKCQkJCXJldHVybgoJCQllbmQKCQkJCgkJCXYuVHJhbnNwYXJlbmN5ID0gMAoKCQkJd2FpdCg0KQoJCQlpZiBub3Qodmlld2luZykgYW5kIG5vdChnYW1lLldvcmtzcGFjZS5DYW1lcmEuQ2FtZXJhU3ViamVjdCA9PSBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkKSB0aGVuCgkJCQlnYW1lLldvcmtzcGFjZS5DYW1lcmEuQ2FtZXJhU3ViamVjdCA9IHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQKCQkJZW5kCgkJCQoJCQl2OkRlc3Ryb3koKQoJCWVuZAoJZW5kCgkKCWdhbWUuV29ya3NwYWNlWycuSWdub3JlJ11bJy5BdHRhY2tzJ10uRGVzY2VuZGFudEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24odikKCQlpZiBIb2xvYmVhbUVuYWJsZWQgdGhlbgoJCQlpZiAodi5OYW1lID09ICJQYXJ0IikgYW5kIChwbGF5ZXIuQ2hhcmFjdGVyKSB0aGVuCgkJCQlsb2NhbCBkaXN0YW5jZSA9IChwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUKCQkJCQoJCQkJaWYgKHYuU2l6ZSA9PSBWZWN0b3IzLm5ldyg1LCA1LCA1KSkgYW5kIChkaXN0YW5jZSA8IDEwKSBhbmQgKHY6V2FpdEZvckNoaWxkKCJCb2R5VmVsb2NpdHkiLCAxKSkgYW5kICh2OldhaXRGb3JDaGlsZCgiQm9keUd5cm8iLCAxKSkgYW5kICh2LkJvZHlWZWxvY2l0eS5QID49IDEyNTApIHRoZW4KCQkJCQoJCQkJCXYuTmFtZSA9ICJIb2xvYmVhbSIKCQkJCQoJCQkJCXBjYWxsKGZ1bmN0aW9uKCkKCQkJCQkJY29yb3V0aW5lLnJlc3VtZShjb3JvdXRpbmUuY3JlYXRlKGZ1bmN0aW9uKCkgCgkJCQkJCQlhdHRhY2hDYW1lcmEodikgCgkJCQkJCWVuZCkpCgkJCQkJZW5kKQoJCQkJCQoJCQkJCWxvY2FsIGd1aSA9IHBsYXllci5QbGF5ZXJHdWkuTWFpbi5Ta2lsbHNCYXIKCQkJCQkKCQkJCQl3YWl0KDAuNSkKCQkJCQkKCQkJCQl3aGlsZSB3YWl0KCkgZG8KCQkJCQkJaWYgbm90KGd1aVsnMSddLkNELlRleHQgPT0gIi4uLiIpIGFuZCBub3QoZ3VpWycyJ10uQ0QuVGV4dCA9PSAiLi4uIikgYW5kIG5vdChndWlbJzMnXS5DRC5UZXh0ID09ICIuLi4iKSBhbmQgbm90KGd1aVsnNCddLkNELlRleHQgPT0gIi4uLiIpIGFuZCBub3QoZ3VpWyc1J10uQ0QuVGV4dCA9PSAiLi4uIikgdGhlbgoJCQkJCQkJcGNhbGwoZnVuY3Rpb24oKQoJCQkJCQkJCWlmIG5vdCh2aWV3aW5nKSBhbmQgbm90KGdhbWUuV29ya3NwYWNlLkNhbWVyYS5DYW1lcmFTdWJqZWN0ID09IHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQpIHRoZW4KCQkJCQkJCQkJZ2FtZS5Xb3Jrc3BhY2UuQ2FtZXJhLkNhbWVyYVN1YmplY3QgPSBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkCgkJCQkJCQkJZW5kCgkJCQoJCQkJCQkJCXY6RGVzdHJveSgpCgkJCQkJCQllbmQpCgkJCQkJCQkKCQkJCQkJCWJyZWFrCgkJCQkJCWVuZAoJCQkJCWVuZAoJCQkJZW5kCgkJCWVuZAoJCWVuZAoJZW5kKQoKCUhvbG9iZWFtLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgSG9sb2JlYW1FbmFibGVkID09IGZhbHNlIHRoZW4KCQkJSG9sb2JlYW1FbmFibGVkID0gdHJ1ZQoJCQlIb2xvYmVhbS5UZXh0ID0gIkhvbG9iZWFtIENhbWVyYSBBdHRhY2ggKE9uKSIKCQkJCgkJCWZvciBpLCB2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlWycuSWdub3JlJ11bJy5BdHRhY2tzJ106R2V0Q2hpbGRyZW4oKSkgZG8KCQkJCWlmICh2Lk5hbWUgPT0gIlBhcnQiKSBhbmQgKHY6V2FpdEZvckNoaWxkKCJCb2R5VmVsb2NpdHkiLCAxKSkgYW5kICh2OldhaXRGb3JDaGlsZCgiQm9keUd5cm8iLCAxKSkgYW5kICh2LkJvZHlWZWxvY2l0eS5QID49IDEyNTApIHRoZW4gdjpEZXN0cm95KCkgZW5kCgkJCWVuZAoJCWVsc2UKCQkJSG9sb2JlYW1FbmFibGVkID0gZmFsc2UKCQkJSG9sb2JlYW0uVGV4dCA9ICJIb2xvYmVhbSBDYW1lcmEgQXR0YWNoIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIENvbnRyb2xsZWQgRWNob2VzCgoJbG9jYWwgRWNob2VzID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUVjaG9lcy5OYW1lID0gIkVjaG9lcyIKCUVjaG9lcy5UZXh0ID0gIkNvbnRyb2xsZWQgRWNob2VzIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEVjaG9lcykKCglDb250cm9sbGVkRWNob2VzRW5hYmxlZCA9IGZhbHNlCglFY2hvZXNQaGFzZSA9IDEKCglFY2hvZXMuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBDb250cm9sbGVkRWNob2VzRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUNvbnRyb2xsZWRFY2hvZXNFbmFibGVkID0gdHJ1ZQoJCQlFY2hvZXMuVGV4dCA9ICJDb250cm9sbGVkIEVjaG9lcyAoT24pIgoJCWVsc2UKCQkJQ29udHJvbGxlZEVjaG9lc0VuYWJsZWQgPSBmYWxzZQoJCQlFY2hvZXMuVGV4dCA9ICJDb250cm9sbGVkIEVjaG9lcyAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLS0tIFNoaWVsZHMKCS0tIENyeXN0YWwgQXJtYW1lbnQgSGFjawoKCWxvY2FsIENyeXN0YWxBcm1hbWVudCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglDcnlzdGFsQXJtYW1lbnQuTmFtZSA9ICJDcnlzdGFsQXJtYW1lbnQiCglDcnlzdGFsQXJtYW1lbnQuVGV4dCA9ICJJbnN0YW50IENyeXN0YWwgQXJtYW1lbnQgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQ3J5c3RhbEFybWFtZW50KQoKCUNyeXN0YWxBcm1hbWVudEVuYWJsZWQgPSBmYWxzZQoKCUNyeXN0YWxBcm1hbWVudC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIENyeXN0YWxBcm1hbWVudEVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlDcnlzdGFsQXJtYW1lbnRFbmFibGVkID0gdHJ1ZQoJCQlDcnlzdGFsQXJtYW1lbnQuVGV4dCA9ICJJbnN0YW50IENyeXN0YWwgQXJtYW1lbnQgKE9uKSIKCQllbHNlCgkJCUNyeXN0YWxBcm1hbWVudEVuYWJsZWQgPSBmYWxzZQoJCQlDcnlzdGFsQXJtYW1lbnQuVGV4dCA9ICJJbnN0YW50IENyeXN0YWwgQXJtYW1lbnQgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gR3Jhdml0YWwgR2xvYmUgSGFjawoKCWxvY2FsIEdyYXZpdGFsR2xvYmUgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJR3Jhdml0YWxHbG9iZS5OYW1lID0gIkdyYXZpdGFsR2xvYmUiCglHcmF2aXRhbEdsb2JlLlRleHQgPSAiR3Jhdml0YWwgR2xvYmUgSGFjayAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBHcmF2aXRhbEdsb2JlKQoKCUdyYXZpdGFsR2xvYmVFbmFibGVkID0gZmFsc2UKCglHcmF2aXRhbEdsb2JlLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgR3Jhdml0YWxHbG9iZUVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlHcmF2aXRhbEdsb2JlRW5hYmxlZCA9IHRydWUKCQkJR3Jhdml0YWxHbG9iZS5UZXh0ID0gIkdyYXZpdGFsIEdsb2JlIEhhY2sgKE9uKSIKCQllbHNlCgkJCUdyYXZpdGFsR2xvYmVFbmFibGVkID0gZmFsc2UKCQkJR3Jhdml0YWxHbG9iZS5UZXh0ID0gIkdyYXZpdGFsIEdsb2JlIEhhY2sgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0tLSBVbHRzCgktLSBSZWFwZXIncyBSYWdlCglsb2NhbCBSZWFwZXJVbHQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJUmVhcGVyVWx0Lk5hbWUgPSAiUmVhcGVyVWx0IgoJUmVhcGVyVWx0LlRleHQgPSAiKEcpIFJlYXBlcidzIFJhZ2UgSGFjayAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBSZWFwZXJVbHQpCgoJbG9jYWwgUmVhcGVyVWx0RW5hYmxlZCA9IGZhbHNlCgoJUmVhcGVyVWx0Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgaXNHb2xkIG9yIGlzTWFzdGVyIHRoZW4KCQkJaWYgbm90IFJlYXBlclVsdEVuYWJsZWQgdGhlbgoJCQkJUmVhcGVyVWx0RW5hYmxlZCA9IHRydWUKCQkJCVJlYXBlclVsdC5UZXh0ID0gIihHKSBSZWFwZXIncyBSYWdlIEhhY2sgKE9uKSIKCQkJZWxzZQoJCQkJUmVhcGVyVWx0RW5hYmxlZCA9IGZhbHNlCgkJCQlSZWFwZXJVbHQuVGV4dCA9ICIoRykgUmVhcGVyJ3MgUmFnZSBIYWNrIChPZmYpIgoJCQllbmQKCQllbHNlCgkJCVJlYXBlclVsdC5UZXh0ID0gIk1lbWJlciBOb3QgR29sZCIKCQkJd2FpdCgxKQoJCQlSZWFwZXJVbHQuVGV4dCA9ICIoRykgUmVhcGVyJ3MgUmFnZSBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIEFibGF6ZSBKdWRnZW1lbnQgSGFjawoKCWxvY2FsIEFibGF6ZUp1ZGdlbWVudCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglBYmxhemVKdWRnZW1lbnQuTmFtZSA9ICJBYmxhemVKdWRnZW1lbnQiCglBYmxhemVKdWRnZW1lbnQuVGV4dCA9ICJBYmxhemUgSnVkZ2VtZW50IEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQWJsYXplSnVkZ2VtZW50KQoKCUFibGF6ZUp1ZGdlbWVudEhhY2tFbmFibGVkID0gZmFsc2UKCglBYmxhemVKdWRnZW1lbnQuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBBYmxhemVKdWRnZW1lbnRIYWNrRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUFibGF6ZUp1ZGdlbWVudEhhY2tFbmFibGVkID0gdHJ1ZQoJCQlBYmxhemVKdWRnZW1lbnQuVGV4dCA9ICJBYmxhemUgSnVkZ2VtZW50IEhhY2sgKE9uKSIKCQllbHNlCgkJCUFibGF6ZUp1ZGdlbWVudEhhY2tFbmFibGVkID0gZmFsc2UKCQkJQWJsYXplSnVkZ2VtZW50LlRleHQgPSAiQWJsYXplIEp1ZGdlbWVudCBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIFZvaWQgT3BlbmluZyBIYWNrCgoJbG9jYWwgVm9pZE9wZW5pbmcgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJVm9pZE9wZW5pbmcuTmFtZSA9ICJWb2lkT3BlbmluZyIKCVZvaWRPcGVuaW5nLlRleHQgPSAiVm9pZCBPcGVuaW5nIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgVm9pZE9wZW5pbmcpCgoJVm9pZE9wZW5pbmdIYWNrRW5hYmxlZCA9IGZhbHNlCgoJVm9pZE9wZW5pbmcuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBWb2lkT3BlbmluZ0hhY2tFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJVm9pZE9wZW5pbmdIYWNrRW5hYmxlZCA9IHRydWUKCQkJVm9pZE9wZW5pbmcuVGV4dCA9ICJWb2lkIE9wZW5pbmcgSGFjayAoT24pIgoJCWVsc2UKCQkJVm9pZE9wZW5pbmdIYWNrRW5hYmxlZCA9IGZhbHNlCgkJCVZvaWRPcGVuaW5nLlRleHQgPSAiVm9pZCBPcGVuaW5nIEhhY2sgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gVGhlIFdvcmxkIEhhY2sKCglsb2NhbCBUaGVXb3JsZCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglUaGVXb3JsZC5OYW1lID0gIlRoZVdvcmxkIgoJVGhlV29ybGQuVGV4dCA9ICJUaGUgV29ybGQgSGFjayAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBUaGVXb3JsZCkKCglUaGVXb3JsZEVuYWJsZWQgPSBmYWxzZQoKCVRoZVdvcmxkLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgVGhlV29ybGRFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJVGhlV29ybGRFbmFibGVkID0gdHJ1ZQoJCQlUaGVXb3JsZC5UZXh0ID0gIlRoZSBXb3JsZCBIYWNrIChPbikiCgkJZWxzZQoJCQlUaGVXb3JsZEVuYWJsZWQgPSBmYWxzZQoJCQlUaGVXb3JsZC5UZXh0ID0gIlRoZSBXb3JsZCBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIFBvbGFyaXMgSGFjawoKCWxvY2FsIFBvbGFyaXMgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJUG9sYXJpcy5OYW1lID0gIlBvbGFyaXMiCglQb2xhcmlzLlRleHQgPSAiUG9sYXJpcyBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFBvbGFyaXMpCgoJUG9sYXJpc0VuYWJsZWQgPSBmYWxzZQoKCVBvbGFyaXMuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBQb2xhcmlzRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCVBvbGFyaXNFbmFibGVkID0gdHJ1ZQoJCQlQb2xhcmlzLlRleHQgPSAiUG9sYXJpcyBIYWNrIChPbikiCgkJZWxzZQoJCQlQb2xhcmlzRW5hYmxlZCA9IGZhbHNlCgkJCVBvbGFyaXMuVGV4dCA9ICJQb2xhcmlzIEhhY2sgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gSW5zdGFudCBTaGF0dGVyaW5nIEVydXB0aW9uCgoJbG9jYWwgU2hhdHRlcmluZ0VydXB0aW9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCVNoYXR0ZXJpbmdFcnVwdGlvbi5OYW1lID0gIlNoYXR0ZXJpbmdFcnVwdGlvbiIKCVNoYXR0ZXJpbmdFcnVwdGlvbi5UZXh0ID0gIkluc3RhbnQgU2hhdHRlcmluZyBFcnVwdGlvbiAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBTaGF0dGVyaW5nRXJ1cHRpb24pCgoJU2hhdHRlcmluZ0VydXB0aW9uRW5hYmxlZCA9IGZhbHNlCgoJU2hhdHRlcmluZ0VydXB0aW9uLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgU2hhdHRlcmluZ0VydXB0aW9uRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCVNoYXR0ZXJpbmdFcnVwdGlvbkVuYWJsZWQgPSB0cnVlCgkJCVNoYXR0ZXJpbmdFcnVwdGlvbi5UZXh0ID0gIkluc3RhbnQgU2hhdHRlcmluZyBFcnVwdGlvbiAoT24pIgoJCWVsc2UKCQkJU2hhdHRlcmluZ0VydXB0aW9uRW5hYmxlZCA9IGZhbHNlCgkJCVNoYXR0ZXJpbmdFcnVwdGlvbi5UZXh0ID0gIkluc3RhbnQgU2hhdHRlcmluZyBFcnVwdGlvbiAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBFdGhlcmVhbCBBY3VtZW4gSGFjawoKCWxvY2FsIEV0aGVyZWFsQWN1bWVuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUV0aGVyZWFsQWN1bWVuLk5hbWUgPSAiRXRoZXJlYWxBY3VtZW4iCglFdGhlcmVhbEFjdW1lbi5UZXh0ID0gIkV0aGVyZWFsIEFjdW1lbiBIYWNrIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEV0aGVyZWFsQWN1bWVuKQoKCUV0aGVyZWFsQWN1bWVuRW5hYmxlZCA9IGZhbHNlCgoJRXRoZXJlYWxBY3VtZW4uTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBFdGhlcmVhbEFjdW1lbkVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlFdGhlcmVhbEFjdW1lbkVuYWJsZWQgPSB0cnVlCgkJCUV0aGVyZWFsQWN1bWVuLlRleHQgPSAiRXRoZXJlYWwgQWN1bWVuIEhhY2sgKE9uKSIKCQllbHNlCgkJCUV0aGVyZWFsQWN1bWVuRW5hYmxlZCA9IGZhbHNlCgkJCUV0aGVyZWFsQWN1bWVuLlRleHQgPSAiRXRoZXJlYWwgQWN1bWVuIEhhY2sgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gVG94aWMgQmFzaWxpc2sgSGFjawoKCWxvY2FsIFRveGljQmFzaWxpc2sgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJVG94aWNCYXNpbGlzay5OYW1lID0gIlRveGljQmFzaWxpc2siCglUb3hpY0Jhc2lsaXNrLlRleHQgPSAiVG94aWMgQmFzaWxpc2sgSGFjayAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBUb3hpY0Jhc2lsaXNrKQoKCVRveGljQmFzaWxpc2tFbmFibGVkID0gZmFsc2UKCglUb3hpY0Jhc2lsaXNrLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgVG94aWNCYXNpbGlza0VuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlUb3hpY0Jhc2lsaXNrRW5hYmxlZCA9IHRydWUKCQkJVG94aWNCYXNpbGlzay5UZXh0ID0gIlRveGljIEJhc2lsaXNrIEhhY2sgKE9uKSIKCQllbHNlCgkJCVRveGljQmFzaWxpc2tFbmFibGVkID0gZmFsc2UKCQkJVG94aWNCYXNpbGlzay5UZXh0ID0gIlRveGljIEJhc2lsaXNrIEhhY2sgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gQXJjYW5lIEd1YXJkaWFuIEhhY2sKCglsb2NhbCBBcmNhbmVHdWFyZGlhbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglBcmNhbmVHdWFyZGlhbi5OYW1lID0gIkFyY2FuZUd1YXJkaWFuIgoJQXJjYW5lR3VhcmRpYW4uVGV4dCA9ICJBcmNhbmUgR3VhcmRpYW4gSGFjayAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBBcmNhbmVHdWFyZGlhbikKCglBcmNhbmVHdWFyZGlhbkVuYWJsZWQgPSBmYWxzZQoKCUFyY2FuZUd1YXJkaWFuLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgQXJjYW5lR3VhcmRpYW5FbmFibGVkID09IGZhbHNlIHRoZW4KCQkJQXJjYW5lR3VhcmRpYW5FbmFibGVkID0gdHJ1ZQoJCQlBcmNhbmVHdWFyZGlhbi5UZXh0ID0gIkFyY2FuZSBHdWFyZGlhbiBIYWNrIChPbikiCgkJZWxzZQoJCQlBcmNhbmVHdWFyZGlhbkVuYWJsZWQgPSBmYWxzZQoJCQlBcmNhbmVHdWFyZGlhbi5UZXh0ID0gIkFyY2FuZSBHdWFyZGlhbiBIYWNrIChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIFZpcnR1YWwgWm9uZSBIYWNrCgoJbG9jYWwgVmlydHVhbFpvbmUgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJVmlydHVhbFpvbmUuTmFtZSA9ICJWaXJ0dWFsWm9uZSIKCVZpcnR1YWxab25lLlRleHQgPSAiVmlydHVhbCBab25lIEhhY2sgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgVmlydHVhbFpvbmUpCgoJVmlydHVhbFpvbmVFbmFibGVkID0gZmFsc2UKCglWaXJ0dWFsWm9uZS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIFZpcnR1YWxab25lRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCVZpcnR1YWxab25lRW5hYmxlZCA9IHRydWUKCQkJVmlydHVhbFpvbmUuVGV4dCA9ICJWaXJ0dWFsIFpvbmUgSGFjayAoT24pIgoJCWVsc2UKCQkJVmlydHVhbFpvbmVFbmFibGVkID0gZmFsc2UKCQkJVmlydHVhbFpvbmUuVGV4dCA9ICJWaXJ0dWFsIFpvbmUgSGFjayAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLS0tIE1pc2NlbGxhbmVvdXMKCgktLSBBaW1ib3QgfHwgQ3VycmVudGx5IHVuZGVyIGRldmVsb3BtZW50CgktLVtbCglsb2NhbCBBaW1ib3QgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJQWltYm90Lk5hbWUgPSAiQWltYm90IgoJQWltYm90LlRleHQgPSAiKEcpIEFpbWJvdCAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBBaW1ib3QpCgoJZnVuY3Rpb24gdG9nZ2xlQWltYm90KCkKCQlpZiAobm90IEFpbWJvdEVuYWJsZWQpIGFuZCAoaXNHb2xkIG9yIGlzTWFzdGVyKSB0aGVuCgkJCUFpbWJvdEVuYWJsZWQgPSB0cnVlCgkJCUFpbWJvdC5UZXh0ID0gIihHKSBBaW1ib3QgKE9uKSIKCQkJd2hpbGUgQWltYm90RW5hYmxlZCBkbwoJCQkJQmVnaW5UcmFja2luZygpCgkJCWVuZAoJCWVsc2VpZiBBaW1ib3RFbmFibGVkIGFuZCAoaXNHb2xkIG9yIGlzTWFzdGVyKSB0aGVuCgkJCUFpbWJvdEVuYWJsZWQgPSBmYWxzZQoJCQlBaW1ib3QuVGV4dCA9ICIoRykgQWltYm90IChPZmYpIgoJCWVsc2VpZiBub3QgKGlzR29sZCBvciBpc01hc3RlcikgdGhlbgoJCQlBaW1ib3QuVGV4dCA9ICJNZW1iZXIgTm90IEdvbGQiCgkJCXdhaXQoMykKCQkJQWltYm90LlRleHQgPSAiKEcpIEFpbWJvdCAoT2ZmKSIKCQllbmQKCWVuZAoKCUFpbWJvdC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QodG9nZ2xlQWltYm90KV1dCgoJLS0gU2hhcmQgQ29sb3JzCgoJbG9jYWwgUmFuZG9tQ29sb3JzID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCVJhbmRvbUNvbG9ycy5OYW1lID0gIlJhbmRvbUNvbG9ycyIKCVJhbmRvbUNvbG9ycy5UZXh0ID0gIlJhbmRvbSBTaGFyZCBDb2xvcnMgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgUmFuZG9tQ29sb3JzKQoKCWxvY2FsIENvbG9yc0xpc3QgPSB7IlJlYWxseSByZWQiLCAiUmVhbGx5IGJsdWUiLCAiTmV3IFllbGxlciIsICJIb3QgcGluayIsICJSb3lhbCBwdXJwbGUiLCAiTGltZSBncmVlbiIsICJEZWVwIG9yYW5nZSIsICJUb290aHBhc3RlIiwgIkluc3RpdHV0aW9uYWwgd2hpdGUifQoJbG9jYWwgU2hhcmRDb2xvckVuYWJsZWQgPSBmYWxzZQoKCWxvY2FsIGZ1bmN0aW9uIHNoYXJkUmFuZG9taXplcigpCgkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2VbIi5JZ25vcmUiXVsiLlNlcnZlckVmZmVjdHMiXTpHZXRDaGlsZHJlbigpKSBkbwoJCQlpZiB2Lk5hbWUgPT0gIlNoYXJkIiBhbmQgbm90IHY6RmluZEZpcnN0Q2hpbGQoInNoYXJkQ2hhbmdlZCIpIHRoZW4KCQkJCXYuQnJpY2tDb2xvciA9IEJyaWNrQ29sb3IubmV3KENvbG9yc0xpc3RbbWF0aC5yYW5kb20oMSw5KV0pCgkJCQlsb2NhbCBzaGFyZENoYW5nZWQgPSBJbnN0YW5jZS5uZXcoIkJvb2xWYWx1ZSIpCgkJCQlzaGFyZENoYW5nZWQuTmFtZSA9ICJzaGFyZENoYW5nZWQiCgkJCQlzaGFyZENoYW5nZWQuUGFyZW50ID0gY2hpbGQKCQkJCXNoYXJkQ2hhbmdlZC5WYWx1ZSA9IHRydWUKCQkJZWxzZWlmIHYuTmFtZSA9PSAiU2hhcmQiIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJzaGFyZENoYW5nZWQiKS5WYWx1ZSB0aGVuIGVuZAoJCWVuZAoJZW5kCgoJUmFuZG9tQ29sb3JzLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgU2hhcmRDb2xvckVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlTaGFyZENvbG9yRW5hYmxlZCA9IHRydWUKCQkJUmFuZG9tQ29sb3JzLlRleHQgPSAiUmFuZG9tIFNoYXJkIENvbG9ycyAoT24pIgoJCQl3aGlsZSBTaGFyZENvbG9yRW5hYmxlZCBkbwoJCQkJc2hhcmRSYW5kb21pemVyKCkKCQkJCXdhaXQoLjUpCgkJCWVuZAoJCWVsc2UKCQkJU2hhcmRDb2xvckVuYWJsZWQgPSBmYWxzZQoJCQlSYW5kb21Db2xvcnMuVGV4dCA9ICJSYW5kb20gU2hhcmQgQ29sb3JzIChPZmYpIgoJCWVuZAkKCWVuZCkKCgktLSBBbnRpLUxhZwoKCWxvY2FsIEFudGlMYWcgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJQW50aUxhZy5OYW1lID0gIkFudGlMYWciCglBbnRpTGFnLlRleHQgPSAiQW50aS1MYWcgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQW50aUxhZykKCglBbnRpTGFnRW5hYmxlZCA9IGZhbHNlCgoJZnVuY3Rpb24gcmVtb3ZlTGFnKCkKCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZVsnLklnbm9yZSddWycuTG9jYWxFZmZlY3RzJ106R2V0Q2hpbGRyZW4oKSkgZG8KCQkJaWYgdjpGaW5kRmlyc3RDaGlsZCgiTWVzaCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJEMSIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJEMiIpIHRoZW4KCQkJCWlmIHYuRDEuVGV4dHVyZSA9PSAicmJ4YXNzZXRpZDovLzI2NzE2MjI2NDYiIHRoZW4KCQkJCQl2OkRlc3Ryb3koKQoJCQkJZW5kCgkJCWVsc2VpZiB2OkZpbmRGaXJzdENoaWxkKCJGcm9udERlY2FsIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkJhY2tEZWNhbCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJTcGVjaWFsTWVzaCIpIHRoZW4KCQkJCWlmIHYuRnJvbnREZWNhbC5UZXh0dXJlID09ICJyYnhhc3NldGlkOi8vOTc5MDA0MjkxIiB0aGVuCgkJCQkJdjpEZXN0cm95KCkKCQkJCWVuZAoJCQllbHNlaWYgKHYuTmFtZSA9PSAiT3JiaXRhbFN0cmlrZSIpIG9yICh2Lk5hbWUgPT0gIkJvbHRQYXJ0Iikgb3IgKHN0cmluZy5zdWIodi5OYW1lLCAxLCAxMCkgPT0gIlNvdW5kX1RlY2giKSB0aGVuCgkJCQl2OkRlc3Ryb3koKQoJCQllbHNlaWYgKHYuTmFtZSA9PSAiTGlnaHREaXNjIikgdGhlbgoJCQkJdjpEZXN0cm95KCkKCQkJZW5kCgkJZW5kCgoJCWZvciBpLCB2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlWycuSWdub3JlJ11bJy5BdHRhY2tzJ106R2V0Q2hpbGRyZW4oKSkgZG8KCQkJaWYgdi5Db2xvciA9PSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApIHRoZW4KCQkJCWlmIHYuTWVzaC5NZXNoVHlwZSA9PSAiU3BoZXJlIiB0aGVuCgkJCQkJd2FpdCgpCgkJCQkJdjpEZXN0cm95KCkKCQkJCWVuZAoJCQllbmQKCQllbmQKCgkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KCQkJZm9yIF8sIHggaW4gcGFpcnModi5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KCQkJCWlmIHguTmFtZSA9PSAiQW5nZWxTd29yZCIgdGhlbgoJCQkJCXg6RGVzdHJveSgpCgkJCQllbmQKCQkJZW5kCgkJZW5kCgllbmQKCglnYW1lLldvcmtzcGFjZS5EZXNjZW5kYW50QWRkZWQ6Y29ubmVjdChmdW5jdGlvbih2KQoJCWlmIEFudGlMYWdFbmFibGVkIHRoZW4KCQkJaWYgdjpGaW5kRmlyc3RDaGlsZCgiTWVzaCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJEMSIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJEMiIpIHRoZW4KCQkJCWlmIHYuRDEuVGV4dHVyZSA9PSAicmJ4YXNzZXRpZDovLzI2NzE2MjI2NDYiIHRoZW4KCQkJCQl3YWl0KCkKCQkJCQl2OkRlc3Ryb3koKQoJCQkJZW5kCgkJCWVsc2VpZiB2Lk5hbWUgPT0gIkFuZ2VsU3dvcmQiIHRoZW4KCQkJCXdhaXQoKQoJCQkJdjpEZXN0cm95KCkKCQkJZWxzZWlmIHY6RmluZEZpcnN0Q2hpbGQoIkZyb250RGVjYWwiKSB0aGVuCgkJCQlpZiB2LkZyb250RGVjYWwuVGV4dHVyZSA9PSAicmJ4YXNzZXRpZDovLzk3OTAwNDI5MSIgdGhlbgoJCQkJCXdhaXQoKQoJCQkJCXY6RGVzdHJveSgpCgkJCQllbmQKCQkJZWxzZWlmIHYuQ29sb3IgPT0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKSB0aGVuCgkJCQlpZiB2Lk1lc2guTWVzaFR5cGUgPT0gIlNwaGVyZSIgdGhlbgoJCQkJCXdhaXQoKQoJCQkJCXY6RGVzdHJveSgpCgkJCQllbmQKCQkJZWxzZWlmICh2Lk5hbWUgPT0gIk9yYml0YWxTdHJpa2UiKSBvciAodi5OYW1lID09ICJCb2x0UGFydCIpIG9yIChzdHJpbmcuc3ViKHYuTmFtZSwgMSwgMTApID09ICJTb3VuZF9UZWNoIikgdGhlbgoJCQkJd2FpdCgpCgkJCQl2OkRlc3Ryb3koKQoJCQllbmQKCQllbmQKCWVuZCkKCglBbnRpTGFnLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgQW50aUxhZ0VuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlBbnRpTGFnRW5hYmxlZCA9IHRydWUKCQkJQW50aUxhZy5UZXh0ID0gIkFudGktTGFnIChPbikiCgkJCXJlbW92ZUxhZygpCgkJZWxzZQoJCQlBbnRpTGFnRW5hYmxlZCA9IGZhbHNlCgkJCUFudGlMYWcuVGV4dCA9ICJBbnRpLUxhZyAoT2ZmKSIKCQllbmQKCWVuZCkKCgktLSBJZ25vcmUgUGh5c2ljcwoKCWxvY2FsIElnbm9yZVBoeXNpY3MgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJSWdub3JlUGh5c2ljcy5OYW1lID0gImZJZ25vcmVQaHlzaWNzIgoJSWdub3JlUGh5c2ljcy5UZXh0ID0gIklnbm9yZSBQaHlzaWNzIChPZmYpIFtaXSIKCXRhYmxlLmluc2VydChidXR0b25zLCBJZ25vcmVQaHlzaWNzKQoKCUlnbm9yZVBoeXNpY3NFbmFibGVkID0gZmFsc2UKCglsb2NhbCBmdW5jdGlvbiBpbml0aWFsTnVsbGlmeUZvcmNlcygpCgkJZm9yIGksIHYgaW4gcGFpcnMocGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkdldENoaWxkcmVuKCkpIGRvCgkJCWlmIHY6SXNBKCJCb2R5R3lybyIpIHRoZW4KCQkJCXdhaXQoKQoJCQkJdjpEZXN0cm95KCkKCQkJZWxzZWlmIHY6SXNBKCJCb2R5UG9zaXRpb24iKSB0aGVuCgkJCQl3YWl0KCkKCQkJCXY6RGVzdHJveSgpCgkJCWVsc2VpZiB2OklzQSgiQm9keVZlbG9jaXR5IikgdGhlbgoJCQkJd2FpdCgpCgkJCQl2OkRlc3Ryb3koKQoJCQllbHNlaWYgdjpJc0EoIkJvZHlBbmd1bGFyVmVsb2NpdHkiKSB0aGVuCgkJCQl3YWl0KCkKCQkJCXY6RGVzdHJveSgpCgkJCWVsc2VpZiB2OklzQSgiQm9keUZvcmNlIikgdGhlbgoJCQkJd2FpdCgpCgkJCQl2OkRlc3Ryb3koKQoJCQllbHNlaWYgdjpJc0EoIkJvZHlUaHJ1c3QiKSB0aGVuCgkJCQl3YWl0KCkKCQkJCXY6RGVzdHJveSgpCgkJCWVsc2VpZiB2OklzQSgiUm9ja2V0UHJvcHVsc2lvbiIpIHRoZW4KCQkJCXdhaXQoKQoJCQkJdjpEZXN0cm95KCkKCQkJZW5kCgkJZW5kCgoJCWZvciBpLCB2IGluIHBhaXJzKHBsYXllci5DaGFyYWN0ZXIuRmxpcHNIb2xkZXI6R2V0Q2hpbGRyZW4oKSkgZG8KCQkJaWYgdjpJc0EoIkJvZHlHeXJvIikgdGhlbgoJCQkJd2FpdCgpCgkJCQl2OkRlc3Ryb3koKQoJCQllbHNlaWYgdjpJc0EoIkJvZHlQb3NpdGlvbiIpIHRoZW4KCQkJCXdhaXQoKQoJCQkJdjpEZXN0cm95KCkKCQkJZWxzZWlmIHY6SXNBKCJCb2R5VmVsb2NpdHkiKSB0aGVuCgkJCQl3YWl0KCkKCQkJCXY6RGVzdHJveSgpCgkJCWVsc2VpZiB2OklzQSgiQm9keUFuZ3VsYXJWZWxvY2l0eSIpIHRoZW4KCQkJCXdhaXQoKQoJCQkJdjpEZXN0cm95KCkKCQkJZWxzZWlmIHY6SXNBKCJCb2R5Rm9yY2UiKSB0aGVuCgkJCQl3YWl0KCkKCQkJCXY6RGVzdHJveSgpCgkJCWVsc2VpZiB2OklzQSgiQm9keVRocnVzdCIpIHRoZW4KCQkJCXdhaXQoKQoJCQkJdjpEZXN0cm95KCkKCQkJZWxzZWlmIHY6SXNBKCJSb2NrZXRQcm9wdWxzaW9uIikgdGhlbgoJCQkJd2FpdCgpCgkJCQl2OkRlc3Ryb3koKQoJCQllbmQKCQllbmQKCWVuZAoKCWxvY2FsIGZ1bmN0aW9uIEFmdGVyTnVsbGlmeUZvcmNlcygpCgkJcGxheWVyLkNoYXJhY3Rlci5EZXNjZW5kYW50QWRkZWQ6Y29ubmVjdChmdW5jdGlvbih2KQoJCQlpZiBJZ25vcmVQaHlzaWNzRW5hYmxlZCB0aGVuCgkJCQlpZiB2OklzQSgiQm9keUd5cm8iKSB0aGVuCgkJCQkJd2FpdCgpCgkJCQkJdjpEZXN0cm95KCkKCQkJCWVsc2VpZiB2OklzQSgiQm9keVBvc2l0aW9uIikgdGhlbgoJCQkJCXdhaXQoKQoJCQkJCXY6RGVzdHJveSgpCgkJCQllbHNlaWYgdjpJc0EoIkJvZHlWZWxvY2l0eSIpIHRoZW4KCQkJCQl3YWl0KCkKCQkJCQl2OkRlc3Ryb3koKQoJCQkJZWxzZWlmIHY6SXNBKCJCb2R5QW5ndWxhclZlbG9jaXR5IikgdGhlbgoJCQkJCXdhaXQoKQoJCQkJCXY6RGVzdHJveSgpCgkJCQllbHNlaWYgdjpJc0EoIkJvZHlGb3JjZSIpIHRoZW4KCQkJCQl3YWl0KCkKCQkJCQl2OkRlc3Ryb3koKQoJCQkJZWxzZWlmIHY6SXNBKCJCb2R5VGhydXN0IikgdGhlbgoJCQkJCXdhaXQoKQoJCQkJCXY6RGVzdHJveSgpCgkJCQllbHNlaWYgdjpJc0EoIlJvY2tldFByb3B1bHNpb24iKSB0aGVuCgkJCQkJd2FpdCgpCgkJCQkJdjpEZXN0cm95KCkKCQkJCWVuZAoJCQllbmQKCQllbmQpCgllbmQKCglmdW5jdGlvbiBiZWdpbk51bGxpZnlGb3JjZXMoKQoJCWlmIElnbm9yZVBoeXNpY3NFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJSWdub3JlUGh5c2ljc0VuYWJsZWQgPSB0cnVlCgkJCUlnbm9yZVBoeXNpY3MuVGV4dCA9ICJJZ25vcmUgUGh5c2ljcyAoT24pIFtaXSIKCQkJaW5pdGlhbE51bGxpZnlGb3JjZXMoKQoJCQlBZnRlck51bGxpZnlGb3JjZXMoKQoJCQl3aGlsZSBJZ25vcmVQaHlzaWNzRW5hYmxlZCBkbwoJCQkJd2FpdCgpCgkJCQlpZiBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA9PSAwIHRoZW4KCQkJCQlyZXBlYXQgd2FpdCgpIHVudGlsIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoIH49IDAKCQkJCQlBZnRlck51bGxpZnlGb3JjZXMoKQoJCQkJZW5kCgkJCWVuZAoJCWVsc2UKCQkJSWdub3JlUGh5c2ljc0VuYWJsZWQgPSBmYWxzZQoJCQlJZ25vcmVQaHlzaWNzLlRleHQgPSAiSWdub3JlIFBoeXNpY3MgKE9mZikgW1pdIgoJCWVuZAoJZW5kCgoJSWdub3JlUGh5c2ljcy5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoYmVnaW5OdWxsaWZ5Rm9yY2VzKQoKCS0tIEFudGktR3Jhdml0eQoKCWxvY2FsIEFudGlHcmF2aXR5ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUFudGlHcmF2aXR5Lk5hbWUgPSAiQW50aUdyYXZpdHkiCglBbnRpR3Jhdml0eS5UZXh0ID0gIkFudGktR3Jhdml0eSAoT2ZmKSBbR10iCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQW50aUdyYXZpdHkpCgoJQW50aUdyYXZpdHlFbmFibGVkID0gZmFsc2UKCglmdW5jdGlvbiBBbnRpR3Jhdml0eUZ1bmMoKQoJCWlmIEFudGlHcmF2aXR5RW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUFudGlHcmF2aXR5RW5hYmxlZCA9IHRydWUKCQkJQW50aUdyYXZpdHkuVGV4dCA9ICJBbnRpLUdyYXZpdHkgKE9uKSBbR10iCgkJCWxvY2FsIEJvZHlGb3JjZSA9IEluc3RhbmNlLm5ldygiQm9keUZvcmNlIikKCQkJQm9keUZvcmNlLlBhcmVudCA9IHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydAoJCQlCb2R5Rm9yY2UuTmFtZSA9ICJBbnRpR3Jhdml0eUZvcmNlIgoJCQlCb2R5Rm9yY2UuRm9yY2UgPSBWZWN0b3IzLm5ldygwLCA1MDAwLCAwKQoJCWVsc2UKCQkJQW50aUdyYXZpdHlFbmFibGVkID0gZmFsc2UKCQkJQW50aUdyYXZpdHkuVGV4dCA9ICJBbnRpLUdyYXZpdHkgKE9mZikgW0ddIgoJCQlpZiBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIkFudGlHcmF2aXR5Rm9yY2UiKSB0aGVuCgkJCQlwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW50aUdyYXZpdHlGb3JjZTpEZXN0cm95KCkKCQkJZW5kCgkJZW5kCgllbmQKCglBbnRpR3Jhdml0eS5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoQW50aUdyYXZpdHlGdW5jKQoKCS0tIENsaWNrLVRQCgoJbG9jYWwgQ2xpY2tUUCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglDbGlja1RQLk5hbWUgPSAiQ2xpY2tUUCIKCUNsaWNrVFAuVGV4dCA9ICJDbGljay1UUCAoT2ZmKSBbSiB0byB0cCB0byBtb3VzZV0iCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgQ2xpY2tUUCkKCglDbGlja1RQRW5hYmxlZCA9IGZhbHNlCgoJQ2xpY2tUUC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIENsaWNrVFBFbmFibGVkID09IHRydWUgdGhlbgoJCQlDbGlja1RQRW5hYmxlZCA9IGZhbHNlCgkJCUNsaWNrVFAuVGV4dCA9ICJDbGljay1UUCAoT2ZmKSBbSiB0byBDbGljay1UUF0iCgkJZWxzZQoJCQlDbGlja1RQRW5hYmxlZCA9IHRydWUKCQkJQ2xpY2tUUC5UZXh0ID0gIkNsaWNrLVRQIChPbikgW0ogdG8gQ2xpY2stVFBdIgoJCWVuZAoJZW5kKQoKCWZ1bmN0aW9uIGNsaWNrdHAocG9zaXRpb24pCgkJaWYgcGxheWVyID09IG5pbCBvciBwbGF5ZXIuQ2hhcmFjdGVyID09IG5pbCB0aGVuIHJldHVybiBlbmQKCQlwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhWZWN0b3IzLm5ldyhwb3NpdGlvbi54LCBwb3NpdGlvbi55ICsgMywgcG9zaXRpb24ueikpCgllbmQKCgktLSBGcmVlemUKCglsb2NhbCBGcmVlemUgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJRnJlZXplLk5hbWUgPSAiRnJlZXplIgoJRnJlZXplLlRleHQgPSAiRnJlZXplIChPZmYpIFtGXSIKCXRhYmxlLmluc2VydChidXR0b25zLCBGcmVlemUpCgoJRnJlZXplRW5hYmxlZCA9IGZhbHNlCgoJZnVuY3Rpb24gRnJlZXplRnVuYygpCgkJaWYgRnJlZXplRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUZyZWV6ZUVuYWJsZWQgPSB0cnVlCgkJCUZyZWV6ZS5UZXh0ID0gIkZyZWV6ZSAoT24pIFtGXSIKCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gdHJ1ZQoJCWVsc2UKCQkJRnJlZXplRW5hYmxlZCA9IGZhbHNlCgkJCUZyZWV6ZS5UZXh0ID0gIkZyZWV6ZSAoT2ZmKSBbRl0iCgkJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IGZhbHNlCgkJZW5kCgllbmQKCglGcmVlemUuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KEZyZWV6ZUZ1bmMpCgoJLS0gSW5maW5pdGUgU3ByaW50CgoJbG9jYWwgSW5mU3ByaW50ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCUluZlNwcmludC5OYW1lID0gIkluZlNwcmludCIKCUluZlNwcmludC5UZXh0ID0gIihHKSBJbmZpbml0ZSBTcHJpbnQgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgSW5mU3ByaW50KQoKCWxvY2FsIEluZlNwcmludEVuYWJsZWQgPSBmYWxzZQoKCWxvY2FsIGZ1bmN0aW9uIFNwcmludFJlbW90ZSgpCgkJd2hpbGUgd2FpdCguNSkgZG8KCQkJcmVwZWF0IHdhaXQoKSB1bnRpbCBwbGF5ZXIuQ2hhcmFjdGVyIH49IG5pbAoJCQlsb2NhbCBhcmdzID0gewoJCQkJWzFdID0gIlJ1bm5pbmciLAoJCQkJWzJdID0gZmFsc2UsCgkJCX0KCQkJZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuUGxheWVyRGF0YTpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkKCQllbmQKCWVuZAoKCUluZlNwcmludC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIGlzR29sZCBvciBpc01hc3RlciB0aGVuCgkJCWlmIG5vdCBJbmZTcHJpbnRFbmFibGVkIHRoZW4KCQkJCUluZlNwcmludEVuYWJsZWQgPSB0cnVlCgkJCQlJbmZTcHJpbnQuVGV4dCA9ICIoRykgSW5maW5pdGUgU3ByaW50IChPbikiCgkJCQlTcHJpbnRSZW1vdGUoKQoJCQllbHNlCgkJCQlJbmZTcHJpbnRFbmFibGVkID0gZmFsc2UKCQkJCUluZlNwcmludC5UZXh0ID0gIihHKSBJbmZpbml0ZSBTcHJpbnQgKE9mZikiCgkJCWVuZAkJCQkKCQllbmQKCWVuZCkKCgktLSBJbnN0YW50IEV4cGxvc2l2ZSBMZWFwCgoJbG9jYWwgRXhwbG9zaW9uSGFjayA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglFeHBsb3Npb25IYWNrLk5hbWUgPSAiRXhwbG9zaW9uSGFjayIKCUV4cGxvc2lvbkhhY2suVGV4dCA9ICJJbnN0YW50IExlYXAgU3R1biAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBFeHBsb3Npb25IYWNrKQoKCWxvY2FsIExlYXBTdHVuRW5hYmxlZCA9IGZhbHNlCgoJRXhwbG9zaW9uSGFjay5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIExlYXBTdHVuRW5hYmxlZCB0aGVuCgkJCUxlYXBTdHVuRW5hYmxlZCA9IGZhbHNlCgkJCUV4cGxvc2lvbkhhY2suVGV4dCA9ICJJbnN0YW50IExlYXAgU3R1biAoT2ZmKSIKCQllbHNlCgkJCUxlYXBTdHVuRW5hYmxlZCA9IHRydWUKCQkJRXhwbG9zaW9uSGFjay5UZXh0ID0gIkluc3RhbnQgTGVhcCBTdHVuIChPbikiCgkJZW5kCgllbmQpCgoJLS0gSW5zdGFudCBSb2NrIEZpc3QKCglsb2NhbCBSb2NrRmlzdEhhY2sgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJUm9ja0Zpc3RIYWNrLk5hbWUgPSAiUm9ja0Zpc3RIYWNrIgoJUm9ja0Zpc3RIYWNrLlRleHQgPSAiSW5zdGFudCBSb2NrIEZpc3QgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgUm9ja0Zpc3RIYWNrKQoKCWxvY2FsIEluc3RhbnRGaXN0RW5hYmxlZCA9IGZhbHNlCgoJUm9ja0Zpc3RIYWNrLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgSW5zdGFudEZpc3RFbmFibGVkIHRoZW4KCQkJSW5zdGFudEZpc3RFbmFibGVkID0gZmFsc2UKCQkJUm9ja0Zpc3RIYWNrLlRleHQgPSAiSW5zdGFudCBSb2NrIEZpc3QgKE9mZikiCgkJZWxzZQoJCQlJbnN0YW50RmlzdEVuYWJsZWQgPSB0cnVlCgkJCVJvY2tGaXN0SGFjay5UZXh0ID0gIkluc3RhbnQgUm9jayBGaXN0IChPbikiCgkJZW5kCgllbmQpCgoJLS0gTG9uZyBGbGFzaAoKCWxvY2FsIExGbGFzaCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglMRmxhc2guTmFtZSA9ICJGbGFzaCIKCUxGbGFzaC5UZXh0ID0gIkxvbmcgRmxhc2ggKE9mZikgW2AgdG8gdXNlXSIKCXRhYmxlLmluc2VydChidXR0b25zLCBMRmxhc2gpCgoJRmxhc2hFbmFibGVkID0gZmFsc2UKCglmdW5jdGlvbiBsb25nZmxhc2goKQoJCWxvY2FsIG1vdXNlcG9zID0gbW91c2UuSGl0LnAKCQlsb2NhbCBhcmdzID0gewoJCQlbMV0gPSAiU3Rvcm0iLAoJCQlbMl0gPSAiTGlnaHRuaW5nIEZsYXNoIgoJCX0KCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkKCQlsb2NhbCBhcmdzID0gewoJCQlbMV0gPSAiU3Rvcm0iLAoJCQlbMl0gPSAiTGlnaHRuaW5nIEZsYXNoIiwKCQkJWzNdID0gewoJCQkJWyJFbmQiXSA9IG1vdXNlcG9zLAoJCQkJWyJPcmlnaW4iXSA9IHBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLnAKCQkJfQoJCX0KCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQoJZW5kCgoJTEZsYXNoLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgRmxhc2hFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJRmxhc2hFbmFibGVkID0gdHJ1ZQoJCQlMRmxhc2guVGV4dCA9ICJMb25nIEZsYXNoIChPbikgW2AgdG8gdXNlXSIKCQllbHNlCgkJCUZsYXNoRW5hYmxlZCA9IGZhbHNlCgkJCUxGbGFzaC5UZXh0ID0gIkxvbmcgRmxhc2ggKE9mZikgW2AgdG8gdXNlXSIKCQllbmQKCWVuZCkKCgktLSBWaWV3IFRhcmdldAoKCWxvY2FsIFZpZXdUYXJnZXQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJVmlld1RhcmdldC5OYW1lID0gIlZpZXdUYXJnZXQiCglWaWV3VGFyZ2V0LlRleHQgPSAiVmlldyBUYXJnZXQgKE9mZikgW1ZdIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFZpZXdUYXJnZXQpCgoJdmlld2luZyA9IGZhbHNlCgoJZnVuY3Rpb24gdmlldygpCgkJaWYgdGFyZ2V0IH49IHBsYXllci5OYW1lIHRoZW4KCQkJaWYgdmlld2luZyA9PSBmYWxzZSB0aGVuCgkJCQl2aWV3aW5nID0gdHJ1ZQoJCQkJZ2FtZS5Xb3Jrc3BhY2UuQ2FtZXJhLkNhbWVyYVN1YmplY3QgPSBnYW1lLlBsYXllcnNbdGFyZ2V0XS5DaGFyYWN0ZXIuSHVtYW5vaWQKCQkJCVZpZXdUYXJnZXQuVGV4dCA9ICJWaWV3IFRhcmdldCAoT24pIFtWXSIKCQkJZWxzZQoJCQkJdmlld2luZyA9IGZhbHNlCgkJCQlnYW1lLldvcmtzcGFjZS5DYW1lcmEuQ2FtZXJhU3ViamVjdCA9IHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQKCQkJCVZpZXdUYXJnZXQuVGV4dCA9ICJWaWV3IFRhcmdldCAoT2ZmKSBbVl0iCgkJCWVuZAoJCWVsc2VpZiB2aWV3aW5nID09IHRydWUgdGhlbiAKCQkJdmlld2luZyA9IGZhbHNlCgkJCWdhbWUuV29ya3NwYWNlLkNhbWVyYS5DYW1lcmFTdWJqZWN0ID0gcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZAoJCQlWaWV3VGFyZ2V0LlRleHQgPSAiVmlldyBUYXJnZXQgKE9mZikgW1ZdIgoJCWVuZAoJZW5kCgoJVmlld1RhcmdldC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QodmlldykKCgktLSBUZWxlcG9ydCB0byBUYXJnZXQKCglsb2NhbCBUUFRhcmdldCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglUUFRhcmdldC5OYW1lID0gIlRQVGFyZ2V0IgoJVFBUYXJnZXQuVGV4dCA9ICJUZWxlcG9ydCBUbyBUYXJnZXQgKE9mZikgW1VdIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFRQVGFyZ2V0KQoKCVRQVGFyZ2V0RW5hYmxlZCA9IGZhbHNlCgoJbG9jYWwgZnVuY3Rpb24gVFBUb1RhcmdldCgpCgkJaWYgVFBUYXJnZXRFbmFibGVkIGFuZCB0YXJnZXQgfj0gcGxheWVyLk5hbWUgdGhlbgoJCQlyZXBlYXQgd2FpdCgpIHVudGlsIGdldEhSUChwbGF5ZXIuQ2hhcmFjdGVyKSBhbmQgZ2V0SFJQKGdhbWUuUGxheWVyc1t0YXJnZXRdLkNoYXJhY3RlcikKCgkJCWdldEhSUChwbGF5ZXIuQ2hhcmFjdGVyKS5DRnJhbWUgPSBnZXRIUlAoZ2FtZS5QbGF5ZXJzW3RhcmdldF0uQ2hhcmFjdGVyKS5DRnJhbWUKCQllbmQKCWVuZAoKCVRQVGFyZ2V0Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgVFBUYXJnZXRFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJVFBUYXJnZXRFbmFibGVkID0gdHJ1ZQoJCQlUUFRhcmdldC5UZXh0ID0gIlRlbGVwb3J0IFRvIFRhcmdldCAoT24pIFtVXSIKCQllbHNlCgkJCVRQVGFyZ2V0RW5hYmxlZCA9IGZhbHNlCgkJCVRQVGFyZ2V0LlRleHQgPSAiVGVsZXBvcnQgVG8gVGFyZ2V0IChPZmYpIFtVXSIKCQllbmQKCWVuZCkKCgktLSBMb29wIFRlbGVwb3J0IHRvIFRhcmdldAoKCWxvY2FsIExvb3BUUFRhcmdldCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglMb29wVFBUYXJnZXQuTmFtZSA9ICJMb29wVFBUYXJnZXQiCglMb29wVFBUYXJnZXQuVGV4dCA9ICJMb29wIFRlbGVwb3J0IFRvIFRhcmdldCAoT2ZmKSIKCXRhYmxlLmluc2VydChidXR0b25zLCBMb29wVFBUYXJnZXQpCgoJTG9vcFRQVGFyZ2V0RW5hYmxlZCA9IGZhbHNlCgoJTG9vcFRQVGFyZ2V0Lk1vdXNlQnV0dG9uMURvd246Y29ubmVjdChmdW5jdGlvbigpCgkJaWYgTG9vcFRQVGFyZ2V0RW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCUxvb3BUUFRhcmdldEVuYWJsZWQgPSB0cnVlCgkJCUxvb3BUUFRhcmdldC5UZXh0ID0gIkxvb3AgVGVsZXBvcnQgVG8gVGFyZ2V0IChPbikiCgkJCXdoaWxlIExvb3BUUFRhcmdldEVuYWJsZWQgZG8KCQkJCXdhaXQoKQoJCQkJVFBUb1RhcmdldCgpCgkJCWVuZAoJCWVsc2UKCQkJTG9vcFRQVGFyZ2V0RW5hYmxlZCA9IGZhbHNlCgkJCUxvb3BUUFRhcmdldC5UZXh0ID0gIkxvb3AgVGVsZXBvcnQgVG8gVGFyZ2V0IChPZmYpIgoJCWVuZAoJZW5kKQoKCS0tIFN0YW5kYXJkIEVTUAoKCWxvY2FsIEVTUCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglFU1AuTmFtZSA9ICJFU1AiCglpZiBpc0dvbGQgb3IgaXNNYXN0ZXIgdGhlbgoJCUVTUEVuYWJsZWQgPSBmYWxzZQoJCUVTUC5UZXh0ID0gIkVTUCAoT2ZmKSBbQl0iCgllbHNlIAoJCUVTUEVuYWJsZWQgPSB0cnVlCgkJRVNQLlRleHQgPSAiRVNQIChPbikgW0JdIgoJZW5kCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgRVNQKQoKCWxvY2FsIEhvbGRlciA9IEluc3RhbmNlLm5ldygiRm9sZGVyIiwgZ2FtZS5Db3JlR3VpKQoJSG9sZGVyLk5hbWUgPSAiRVNQIgoKCWxvY2FsIFVwZGF0ZUZ1bmNzID0ge30KCglsb2NhbCBCb3ggPSBJbnN0YW5jZS5uZXcoIkJveEhhbmRsZUFkb3JubWVudCIpCglCb3guTmFtZSA9ICJuaWxCb3hHIgoJQm94LlNpemUgPSBWZWN0b3IzLm5ldyg0LCA3LCA0KQoJQm94LkNvbG9yMyA9IENvbG9yMy5uZXcoMTAwIC8gMjU1LCAxMDAgLyAyNTUsIDEwMCAvIDI1NSkKCUJveC5UcmFuc3BhcmVuY3kgPSAwLjcKCUJveC5aSW5kZXggPSAwCglCb3guQWx3YXlzT25Ub3AgPSB0cnVlCglCb3guVmlzaWJsZSA9IHRydWUKCglsb2NhbCBOYW1lVGFnID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKQoJTmFtZVRhZy5OYW1lID0gIm5pbE5hbWVUYWdHIgoJTmFtZVRhZy5FbmFibGVkID0gdHJ1ZQoJTmFtZVRhZy5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApCglOYW1lVGFnLkFsd2F5c09uVG9wID0gdHJ1ZQoJTmFtZVRhZy5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDMuNiwgMCkKCglsb2NhbCBUYWcgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIE5hbWVUYWcpCglUYWcuTmFtZSA9ICJUYWciCglUYWcuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKCVRhZy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAtNTAsIDAsIDApCglUYWcuU2l6ZSA9IFVEaW0yLm5ldygwLCAzMDAsIDAsIDIwKQoJVGFnLlRleHRTaXplID0gMjAKCVRhZy5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxMDAgLyAyNTUsIDEwMCAvIDI1NSwgMTAwIC8gMjU1KQoJVGFnLlRleHRTdHJva2VDb2xvcjMgPSBDb2xvcjMubmV3KDAgLyAyNTUsIDAgLyAyNTUsIDAgLyAyNTUpCglUYWcuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNAoJVGFnLlRleHQgPSAiTm90IEF2YWlsYWJsZSIKCVRhZy5Gb250ID0gRW51bS5Gb250LlNhcnBhbmNoCglUYWcuVGV4dFNjYWxlZCA9IGZhbHNlCglUYWcuVGV4dFRyYW5zcGFyZW5jeSA9IDAKCglmdW5jdGlvbiBMb2FkQ2hhcmFjdGVyKHYpCgkJaWYgdiB+PSBwbGF5ZXIgdGhlbgoJCQlyZXBlYXQgd2FpdCgpIHVudGlsIHYuQ2hhcmFjdGVyIH49IG5pbAoJCQl2LkNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikKCQkJbG9jYWwgdkhvbGRlciA9IEhvbGRlcjpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpCgkJCXZIb2xkZXI6Q2xlYXJBbGxDaGlsZHJlbigpCgoJCQlsb2NhbCBiID0gQm94OkNsb25lKCkKCQkJYi5OYW1lID0gdi5OYW1lIC4uICJCb3giCgkJCWIuQWRvcm5lZSA9IHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQKCQkJYi5QYXJlbnQgPSB2SG9sZGVyCgoJCQlsb2NhbCB0ID0gTmFtZVRhZzpDbG9uZSgpCgkJCXQuTmFtZSA9IHYuTmFtZSAuLiAiTmFtZVRhZyIKCQkJdC5QYXJlbnQgPSB2SG9sZGVyCgkJCXQuQWRvcm5lZSA9IHYuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIsIDUpCgkJCWlmIG5vdCB0LkFkb3JuZWUgdGhlbgoJCQkJcmV0dXJuIFVubG9hZENoYXJhY3Rlcih2KQoJCQllbmQKCQkJdC5UYWcuVGV4dCA9IHYuTmFtZQoJCQl0LkVuYWJsZWQgPSB0cnVlCgkJCXdhaXQoKQoKCQkJbG9jYWwgZnVuY3Rpb24gVXBkYXRlTmFtZVRhZygpCgkJCQlpZiBub3QgcGNhbGwoZnVuY3Rpb24oKQoJCQkJCQktLSB2LkNoYXJhY3Rlci5IdW1hbm9pZC5EaXNwbGF5RGlzdGFuY2VUeXBlID0gRW51bS5IdW1hbm9pZERpc3BsYXlEaXN0YW5jZVR5cGUuTm9uZQoJCQkJCQlsb2NhbCBtYXhoID0gbWF0aC5jZWlsKHYuQ2hhcmFjdGVyLkh1bWFub2lkLk1heEhlYWx0aCAqIDEwKQoJCQkJCQlsb2NhbCBoID0gbWF0aC5jZWlsKHYuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCAqIDEwKQoJCQkJCQl0LlRhZy5UZXh0ID0gdi5OYW1lIC4uICJcbiIgLi4gKChtYXhoIH49IDAgYW5kIHRvc3RyaW5nKG1hdGguY2VpbCgoaCAvIG1heGgpICogMTAwKSkpIG9yICIwIikgLi4gIiUgICIgLi4gdG9zdHJpbmcoaCkgLi4gIi8iIC4uIHRvc3RyaW5nKG1heGgpCgkJCQkJCWlmIEVTUEVuYWJsZWQgdGhlbgoJCQkJCQkJdC5UYWcuVGV4dFRyYW5zcGFyZW5jeSA9IDAKCQkJCQkJCWIuVHJhbnNwYXJlbmN5ID0gMC43CgkJCQkJCWVsc2UKCQkJCQkJCXQuVGFnLlRleHRUcmFuc3BhcmVuY3kgPSAxCgkJCQkJCQliLlRyYW5zcGFyZW5jeSA9IDEKCQkJCQkJZW5kCgkJCQkJCWlmIGggLyBtYXhoID09IDEgdGhlbgoJCQkJCQkJdC5UYWcuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCgkJCQkJCQliLkNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCgkJCQkJCWVsc2VpZiBoIC8gbWF4aCA9PSAwIHRoZW4KCQkJCQkJCXQuVGFnLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQoJCQkJCQkJYi5Db2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQoJCQkJCQllbHNlCgkJCQkJCQl0LlRhZy5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTkyLCAoMTkyICogKGggLyBtYXhoKSksICgxOTIgKiAoaCAvIG1heGgpKSkKCQkJCQkJCWIuQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTkyLCAoMTkyICogKGggLyBtYXhoKSksICgxOTIgKiAoaCAvIG1heGgpKSkKCQkJCQkJZW5kCgkJCQkJZW5kKSB0aGVuCgkJCQkJVXBkYXRlRnVuY3Nbdl0gPSBuaWwKCQkJCWVuZAoJCQllbmQKCQkJVXBkYXRlTmFtZVRhZygpCgkJCVVwZGF0ZUZ1bmNzW3ZdID0gVXBkYXRlTmFtZVRhZwoJCWVuZAoJZW5kCgoJZnVuY3Rpb24gVW5sb2FkQ2hhcmFjdGVyKHYpCgkJbG9jYWwgdkhvbGRlciA9IEhvbGRlcjpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpCgkJaWYgdkhvbGRlciBhbmQgKHZIb2xkZXI6RmluZEZpcnN0Q2hpbGQodi5OYW1lIC4uICJCb3giKSB+PSBuaWwgb3IgdkhvbGRlcjpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUgLi4gIk5hbWVUYWciKSB+PSBuaWwpIHRoZW4KCQkJdkhvbGRlcjpDbGVhckFsbENoaWxkcmVuKCkKCQllbmQKCWVuZAoKCWZ1bmN0aW9uIExvYWRQbGF5ZXIodikKCQlpZiB2IH49IHBsYXllciB0aGVuCgkJCWxvY2FsIHZIb2xkZXIgPSBJbnN0YW5jZS5uZXcoIkZvbGRlciIsIEhvbGRlcikKCQkJdkhvbGRlci5OYW1lID0gdi5OYW1lCgkJCXYuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbigpCgkJCQlpZiBFU1BFbmFibGVkID09IHRydWUgdGhlbgoJCQkJCXBjYWxsKExvYWRDaGFyYWN0ZXIsIHYpCgkJCQllbmQKCQkJZW5kKQoJCQl2LkNoYXJhY3RlclJlbW92aW5nOkNvbm5lY3QoZnVuY3Rpb24oKQoJCQkJcGNhbGwoVW5sb2FkQ2hhcmFjdGVyLCB2KQoJCQllbmQpCgkJCUxvYWRDaGFyYWN0ZXIodikKCQllbmQKCWVuZAoKCWZ1bmN0aW9uIFVubG9hZFBsYXllcih2KQoJCVVubG9hZENoYXJhY3Rlcih2KQoJCWxvY2FsIHZIb2xkZXIgPSBIb2xkZXI6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQoJCWlmIHZIb2xkZXIgdGhlbgoJCQl2SG9sZGVyOkRlc3Ryb3koKQoJCWVuZAoJZW5kCgoJZm9yIGksIHYgaW4gcGFpcnMocGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCgkJc3Bhd24oZnVuY3Rpb24oKSBwY2FsbChMb2FkUGxheWVyLCB2KSBlbmQpCgllbmQKCglwbGF5ZXJzLlBsYXllckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24odikKCQlwY2FsbChMb2FkUGxheWVyLCB2KQoJZW5kKQoKCXBsYXllcnMuUGxheWVyUmVtb3Zpbmc6Q29ubmVjdChmdW5jdGlvbih2KQoJCXBjYWxsKFVubG9hZFBsYXllciwgdikKCWVuZCkKCglnYW1lLkl0ZW1DaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24oaSkKCQlpZiBpOklzQSgiUGxheWVyIikgdGhlbgoJCQlpZiBIb2xkZXI6RmluZEZpcnN0Q2hpbGQoaS5OYW1lKSB0aGVuCgkJCQlVbmxvYWRDaGFyYWN0ZXIoaSkKCQkJCXdhaXQoKQoJCQkJTG9hZENoYXJhY3RlcihpKQoJCQllbmQKCQllbHNlaWYgaTpJc0EoIkh1bWFub2lkIikgYW5kIGkuUGFyZW50IHRoZW4KCQkJbG9jYWwgcCA9IHBsYXllcnM6R2V0UGxheWVyRnJvbUNoYXJhY3RlcihpLlBhcmVudCkKCQkJaWYgcCB+PSBwbGF5ZXIgYW5kIHAgfj0gbmlsIGFuZCBIb2xkZXI6RmluZEZpcnN0Q2hpbGQocC5OYW1lKSB0aGVuCgkJCQlwY2FsbChmdW5jdGlvbigpCgkJCQkJVXBkYXRlRnVuY3NbcF0oKQoJCQkJZW5kKQoJCQllbmQKCQllbmQKCWVuZCkKCglmdW5jdGlvbiB0b2dnbGVFU1AoKQoJCWlmIEVTUEVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQlpZiBHRVNQRW5hYmxlZCB0aGVuCgkJCQlHRVNQRW5hYmxlZCA9IGZhbHNlCgkJCQlFU1BFbmFibGVkID0gdHJ1ZQoJCQkJRVNQR29sZC5UZXh0ID0gIlN0YW5kYXJkIEVTUCBFbmFibGVkIgoJCQkJd2FpdCgxKQoJCQkJRVNQR29sZC5UZXh0ID0gIihHKSBEZXRhaWxlZCBFU1AgKE9mZikgW01dIgoJCQllbHNlCgkJCQlFU1BFbmFibGVkID0gdHJ1ZQoJCQllbmQKCQkJRVNQLlRleHQgPSAiRVNQIChPbikgW0JdIgoJCQlmb3IgaSx2IGluIHBhaXJzKHBsYXllcnM6R2V0UGxheWVycygpKSBkbwoJCQkJc3Bhd24oZnVuY3Rpb24oKSBwY2FsbChMb2FkUGxheWVyLCB2KSBlbmQpCgkJCWVuZAoJCWVsc2UKCQkJRVNQRW5hYmxlZCA9IGZhbHNlCgkJCUVTUC5UZXh0ID0gIkVTUCAoT2ZmKSBbQl0iCgkJCWZvciBpLCB2IGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCgkJCQlzcGF3bihmdW5jdGlvbigpIHBjYWxsKFVubG9hZFBsYXllciwgdikgZW5kKQoJCQllbmQKCQllbmQKCWVuZAoKCUVTUC5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QodG9nZ2xlRVNQKQoKCS0tIEdvbGQgRVNQCgoJbG9jYWwgRVNQR29sZCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglFU1BHb2xkLk5hbWUgPSAiRVNQR29sZCIKCWlmIGlzR29sZCBvciBpc01hc3RlciB0aGVuCgkJR0VTUEVuYWJsZWQgPSB0cnVlCgkJRVNQR29sZC5UZXh0ID0gIihHKSBEZXRhaWxlZCBFU1AgKE9uKSBbTV0iCgllbHNlCgkJR0VTUEVuYWJsZWQgPSBmYWxzZQoJCUVTUEdvbGQuVGV4dCA9ICIoRykgRGV0YWlsZWQgRVNQIChPZmYpIFtNXSIKCWVuZAoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIEVTUEdvbGQpCgoJbG9jYWwgR0hvbGRlciA9IEluc3RhbmNlLm5ldygiRm9sZGVyIiwgZ2FtZS5Db3JlR3VpKQoJR0hvbGRlci5OYW1lID0gIkVTUEdvbGQiCgoJbG9jYWwgR1VwZGF0ZUZ1bmNzID0ge30KCglsb2NhbCBHQm94ID0gSW5zdGFuY2UubmV3KCJCb3hIYW5kbGVBZG9ybm1lbnQiKQoJR0JveC5OYW1lID0gIm5pbEJveEciCglHQm94LlNpemUgPSBWZWN0b3IzLm5ldyg0LCA3LCA0KQoJR0JveC5Db2xvcjMgPSBDb2xvcjMubmV3KDEwMCAvIDI1NSwgMTAwIC8gMjU1LCAxMDAgLyAyNTUpCglHQm94LlRyYW5zcGFyZW5jeSA9IDAuNwoJR0JveC5aSW5kZXggPSAwCglHQm94LkFsd2F5c09uVG9wID0gdHJ1ZQoJR0JveC5WaXNpYmxlID0gdHJ1ZQoKCWxvY2FsIEdOYW1lVGFnID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKQoJR05hbWVUYWcuTmFtZSA9ICJuaWxOYW1lVGFnRyIKCUdOYW1lVGFnLkVuYWJsZWQgPSB0cnVlCglHTmFtZVRhZy5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApCglHTmFtZVRhZy5BbHdheXNPblRvcCA9IHRydWUKCUdOYW1lVGFnLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMy42LCAwKQoKCWxvY2FsIEdUYWcgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIEdOYW1lVGFnKQoJR1RhZy5OYW1lID0gIkdUYWciCglHVGFnLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCglHVGFnLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIC0xNTAsIDAsIDApCglHVGFnLlNpemUgPSBVRGltMi5uZXcoMCwgMzAwLCAwLCAyMCkKCUdUYWcuVGV4dFNpemUgPSAyMAoJR1RhZy5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxMDAgLyAyNTUsIDEwMCAvIDI1NSwgMTAwIC8gMjU1KQoJR1RhZy5UZXh0U3Ryb2tlQ29sb3IzID0gQ29sb3IzLm5ldygwIC8gMjU1LCAwIC8gMjU1LCAwIC8gMjU1KQoJR1RhZy5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC40CglHVGFnLlRleHQgPSAiTm90IEF2YWlsYWJsZSIKCUdUYWcuRm9udCA9IEVudW0uRm9udC5TYXJwYW5jaAoJR1RhZy5UZXh0U2NhbGVkID0gZmFsc2UKCUdUYWcuVGV4dFRyYW5zcGFyZW5jeSA9IDAKCglmdW5jdGlvbiBHTG9hZENoYXJhY3Rlcih2KQoJCQoJCWxvY2FsIHRibFBsYXllckRhdGEgPSB7fQoJCVJTUjpXYWl0Rm9yQ2hpbGQoIlBsYXllckRhdGEiKS5PbkNsaWVudEV2ZW50OkNvbm5lY3QoZnVuY3Rpb24odiwgdGJsRGF0YSkKCQkJdGJsUGxheWVyRGF0YVt2XSA9IHRibERhdGEKCQllbmQpCgkJCgkJaWYgdiB+PSBwbGF5ZXIgdGhlbgoJCQlyZXBlYXQgd2FpdCgpIHVudGlsIHYuQ2hhcmFjdGVyIH49IG5pbAoJCQl2LkNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikKCQkJbG9jYWwgdkhvbGRlciA9IEdIb2xkZXI6RmluZEZpcnN0Q2hpbGQodi5OYW1lKQoJCQl2SG9sZGVyOkNsZWFyQWxsQ2hpbGRyZW4oKQoKCQkJbG9jYWwgYiA9IEdCb3g6Q2xvbmUoKQoJCQliLk5hbWUgPSB2Lk5hbWUgLi4gIkdCb3giCgkJCWIuQWRvcm5lZSA9IHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQKCQkJYi5QYXJlbnQgPSB2SG9sZGVyCgoJCQlsb2NhbCB0ID0gR05hbWVUYWc6Q2xvbmUoKQoJCQl0Lk5hbWUgPSB2Lk5hbWUgLi4gIkdOYW1lVGFnIgoJCQl0LlBhcmVudCA9IHZIb2xkZXIKCQkJdC5BZG9ybmVlID0gdi5DaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IiwgNSkKCQkJaWYgbm90IHQuQWRvcm5lZSB0aGVuCgkJCQlyZXR1cm4gR1VubG9hZENoYXJhY3Rlcih2KQoJCQllbmQKCQkJdC5HVGFnLlRleHQgPSB2Lk5hbWUKCQkJdC5FbmFibGVkID0gdHJ1ZQoJCQl3YWl0KCkKCgkJCWxvY2FsIGZ1bmN0aW9uIEdVcGRhdGVOYW1lVGFnKCkKCQkJCWlmIG5vdCBwY2FsbChmdW5jdGlvbigpCgkJCQkJCS0tIHYuQ2hhcmFjdGVyLkh1bWFub2lkLkRpc3BsYXlEaXN0YW5jZVR5cGUgPSBFbnVtLkh1bWFub2lkRGlzcGxheURpc3RhbmNlVHlwZS5Ob25lCgkJCQkJCWxvY2FsIG1heGggPSBtYXRoLmNlaWwodi5DaGFyYWN0ZXIuSHVtYW5vaWQuTWF4SGVhbHRoICogMTApCgkJCQkJCWxvY2FsIGggPSBtYXRoLmNlaWwodi5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoICogMTApCgkJCQkJCWxvY2FsIHN0cmggPSAiSDogIiAuLiAobm90KG1heGggPT0gMCkgYW5kIHRvc3RyaW5nKG1hdGguY2VpbCgxMDAgKiBoIC8gbWF4aCkpIG9yIDApIC4uICIlIFsiIC4uIHRvc3RyaW5nKGgpIC4uICJ8IiAuLiB0b3N0cmluZyhtYXhoKSAuLiAiXSIKCQkJCQkJLS0KCQkJCQkJbG9jYWwgbWF4bSA9IHRibFBsYXllckRhdGFbdl0gYW5kIG1hdGguY2VpbCh0YmxQbGF5ZXJEYXRhW3ZdLk1heE1hbmEgKiAxMCkgb3IgMTAwMAoJCQkJCQlsb2NhbCBtID0gdGJsUGxheWVyRGF0YVt2XSBhbmQgbWF0aC5jZWlsKHRibFBsYXllckRhdGFbdl0uTWFuYSAqIDEwKSBvciAxMDAwCgkJCQkJCWxvY2FsIHN0cm0gPSAiTTogIiAuLiAobm90KG1heG0gPT0gMCkgYW5kIHRvc3RyaW5nKG1hdGguY2VpbCgxMDAgKiBtIC8gbWF4bSkpIG9yIDApIC4uICIlIFsiIC4uIHRvc3RyaW5nKG0pIC4uICJ8IiAuLiB0b3N0cmluZyhtYXhtKSAuLiAiXSIKCQkJCQkJLS0KCQkJCQkJbG9jYWwgbWF4cyA9IHRibFBsYXllckRhdGFbdl0gYW5kIG1hdGguY2VpbCh0YmxQbGF5ZXJEYXRhW3ZdLk1heFN0YW1pbmEgKiAxMCkgb3IgMTAwMAoJCQkJCQlsb2NhbCBzID0gdGJsUGxheWVyRGF0YVt2XSBhbmQgbWF0aC5jZWlsKHRibFBsYXllckRhdGFbdl0uU3RhbWluYSAqIDEwKSBvciAxMDAwCgkJCQkJCWxvY2FsIHN0cnMgPSAgIlM6ICIgLi4gKG5vdChtYXhzID09IDApIGFuZCB0b3N0cmluZyhtYXRoLmNlaWwoMTAwICogcyAvIG1heHMpKSBvciAwKSAuLiAiJSBbIiAuLiB0b3N0cmluZyhzKSAuLiAifCIgLi4gdG9zdHJpbmcobWF4cykgLi4gIl0iCgoJCQkJCQl0LkdUYWcuVGV4dCA9IHYuTmFtZSAuLiAoIlxuIiAuLiBzdHJoKSAuLiAoIlxuIiAuLiBzdHJtKSAuLiAoIlxuIiAuLiBzdHJzKQoJCQkJCQkKCQkJCQkJaWYgR0VTUEVuYWJsZWQgdGhlbgoJCQkJCQkJdC5HVGFnLlRleHRUcmFuc3BhcmVuY3kgPSAwCgkJCQkJCQliLlRyYW5zcGFyZW5jeSA9IDAuNwoJCQkJCQllbHNlCgkJCQkJCQl0LkdUYWcuVGV4dFRyYW5zcGFyZW5jeSA9IDEKCQkJCQkJCWIuVHJhbnNwYXJlbmN5ID0gMQoJCQkJCQllbmQKCQkJCQkJaWYgaCAvIG1heGggPT0gMSB0aGVuCgkJCQkJCQl0LkdUYWcuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCgkJCQkJCQliLkNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCgkJCQkJCWVsc2VpZiBoIC8gbWF4aCA9PSAwIHRoZW4KCQkJCQkJCXQuR1RhZy5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCkKCQkJCQkJCWIuQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCkKCQkJCQkJZWxzZQoJCQkJCQkJdC5HVGFnLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxOTIsICgxOTIgKiAoaCAvIG1heGgpKSwgKDE5MiAqIChoIC8gbWF4aCkpKQoJCQkJCQkJYi5Db2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxOTIsICgxOTIgKiAoaCAvIG1heGgpKSwgKDE5MiAqIChoIC8gbWF4aCkpKQoJCQkJCQllbmQKCQkJCQllbmQpIHRoZW4KCQkJCQlHVXBkYXRlRnVuY3Nbdl0gPSBuaWwKCQkJCWVuZAoJCQllbmQKCQkJR1VwZGF0ZU5hbWVUYWcoKQoJCQlHVXBkYXRlRnVuY3Nbdl0gPSBHVXBkYXRlTmFtZVRhZwoJCWVuZAoJZW5kCgoJZnVuY3Rpb24gR1VubG9hZENoYXJhY3Rlcih2KQoJCWxvY2FsIHZIb2xkZXIgPSBHSG9sZGVyOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkKCQlpZiB2SG9sZGVyIGFuZCAodkhvbGRlcjpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUgLi4gIkdCb3giKSB+PSBuaWwgb3IgdkhvbGRlcjpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUgLi4gIkdOYW1lVGFnIikgfj0gbmlsKSB0aGVuCgkJCXZIb2xkZXI6Q2xlYXJBbGxDaGlsZHJlbigpCgkJZW5kCgllbmQKCglmdW5jdGlvbiBHTG9hZFBsYXllcih2KQoJCWlmIHYgfj0gcGxheWVyIHRoZW4KCQkJbG9jYWwgdkhvbGRlciA9IEluc3RhbmNlLm5ldygiRm9sZGVyIiwgR0hvbGRlcikKCQkJdkhvbGRlci5OYW1lID0gdi5OYW1lCgkJCXYuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbigpCgkJCQlpZiBHRVNQRW5hYmxlZCA9PSB0cnVlIHRoZW4KCQkJCQlwY2FsbChHTG9hZENoYXJhY3RlciwgdikKCQkJCWVuZAoJCQllbmQpCgkJCXYuQ2hhcmFjdGVyUmVtb3Zpbmc6Q29ubmVjdChmdW5jdGlvbigpCgkJCQlwY2FsbChHVW5sb2FkQ2hhcmFjdGVyLCB2KQoJCQllbmQpCgkJCUdMb2FkQ2hhcmFjdGVyKHYpCgkJZW5kCgllbmQKCglmdW5jdGlvbiBHVW5sb2FkUGxheWVyKHYpCgkJR1VubG9hZENoYXJhY3Rlcih2KQoJCWxvY2FsIHZIb2xkZXIgPSBHSG9sZGVyOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkKCQlpZiB2SG9sZGVyIHRoZW4KCQkJdkhvbGRlcjpEZXN0cm95KCkKCQllbmQKCWVuZAoKCWZvciBpLCB2IGluIHBhaXJzKHBsYXllcnM6R2V0UGxheWVycygpKSBkbwoJCXNwYXduKGZ1bmN0aW9uKCkgcGNhbGwoR0xvYWRQbGF5ZXIsIHYpIGVuZCkKCWVuZAoKCXBsYXllcnMuUGxheWVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbih2KQoJCXBjYWxsKEdMb2FkUGxheWVyLCB2KQoJZW5kKQoKCXBsYXllcnMuUGxheWVyUmVtb3Zpbmc6Q29ubmVjdChmdW5jdGlvbih2KQoJCXBjYWxsKEdVbmxvYWRQbGF5ZXIsIHYpCgllbmQpCgoJZ2FtZS5JdGVtQ2hhbmdlZDpDb25uZWN0KGZ1bmN0aW9uKGkpCgkJaWYgaTpJc0EoIlBsYXllciIpIHRoZW4KCQkJaWYgR0hvbGRlcjpGaW5kRmlyc3RDaGlsZChpLk5hbWUpIHRoZW4KCQkJCUdVbmxvYWRDaGFyYWN0ZXIoaSkKCQkJCXdhaXQoKQoJCQkJR0xvYWRDaGFyYWN0ZXIoaSkKCQkJZW5kCgkJZWxzZWlmIGk6SXNBKCJIdW1hbm9pZCIpIGFuZCBpLlBhcmVudCB0aGVuCgkJCWxvY2FsIHAgPSBwbGF5ZXJzOkdldFBsYXllckZyb21DaGFyYWN0ZXIoaS5QYXJlbnQpCgkJCWlmIHAgfj0gcGxheWVyIGFuZCBwIH49IG5pbCBhbmQgR0hvbGRlcjpGaW5kRmlyc3RDaGlsZChwLk5hbWUpIHRoZW4KCQkJCXBjYWxsKGZ1bmN0aW9uKCkKCQkJCQlHVXBkYXRlRnVuY3NbcF0oKQoJCQkJZW5kKQoJCQllbmQKCQllbmQKCWVuZCkKCglmdW5jdGlvbiB0b2dnbGVFU1BHb2xkKCkKCQlpZiBpc0dvbGQgb3IgaXNNYXN0ZXIgdGhlbgoJCQlpZiBHRVNQRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCQlpZiBFU1BFbmFibGVkIHRoZW4KCQkJCQlFU1BFbmFibGVkID0gZmFsc2UKCQkJCQlHRVNQRW5hYmxlZCA9IHRydWUKCQkJCQlFU1AuVGV4dCA9ICJEZXRhaWxlZCBFU1AgRW5hYmxlZCIKCQkJCQl3YWl0KDEpCgkJCQkJRVNQLlRleHQgPSAiRVNQIChPZmYpIFtCXSIKCQkJCWVsc2UKCQkJCQlHRVNQRW5hYmxlZCA9IHRydWUKCQkJCWVuZAoJCQkJRVNQR29sZC5UZXh0ID0gIihHKSBEZXRhaWxlZCBFU1AgKE9uKSBbTV0iCgkJCQlmb3IgaSx2IGluIHBhaXJzKHBsYXllcnM6R2V0UGxheWVycygpKSBkbwoJCQkJCXNwYXduKGZ1bmN0aW9uKCkgcGNhbGwoR0xvYWRQbGF5ZXIsIHYpIGVuZCkKCQkJCWVuZAoJCQllbHNlCgkJCQlHRVNQRW5hYmxlZCA9IGZhbHNlCgkJCQlFU1BHb2xkLlRleHQgPSAiKEcpIERldGFpbGVkIEVTUCAoT2ZmKSBbTV0iCgkJCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbwoJCQkJCXNwYXduKGZ1bmN0aW9uKCkgcGNhbGwoR1VubG9hZFBsYXllciwgdikgZW5kKQoJCQkJZW5kCgkJCWVuZAoJCWVsc2UKCQkJRVNQR29sZC5UZXh0ID0gIk1lbWJlciBOb3QgR29sZCIKCQkJd2FpdCgzKQoJCQlFU1BHb2xkLlRleHQgPSAiKEcpIERldGFpbGVkIEVTUCAoT2ZmKSBbTV0iCgkJZW5kCgllbmQKCglFU1BHb2xkLk1vdXNlQnV0dG9uMURvd246Y29ubmVjdCh0b2dnbGVFU1BHb2xkKQoKCS0tIFRQIHRvIERyb3BzCgoJbG9jYWwgVFBTaGFyZHMgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJVFBTaGFyZHMuTmFtZSA9ICJUUFNoYXJkcyIKCVRQU2hhcmRzLlRleHQgPSAiVGVsZXBvcnQgdG8gU2hhcmRzIChPZmYpIgoJdGFibGUuaW5zZXJ0KGJ1dHRvbnMsIFRQU2hhcmRzKQoKCVRQU2hhcmRzRW5hYmxlZCA9IGZhbHNlCQoKCWxvY2FsIFRQRGlhbW9uZHMgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQoJVFBEaWFtb25kcy5OYW1lID0gIlRQRGlhbW9uZHMiCglUUERpYW1vbmRzLlRleHQgPSAiVGVsZXBvcnQgdG8gRGlhbW9uZHMgKE9mZikiCgl0YWJsZS5pbnNlcnQoYnV0dG9ucywgVFBEaWFtb25kcykKCglUUERpYW1vbmRzRW5hYmxlZCA9IGZhbHNlCgoJbG9jYWwgcGxhdGUgPSBJbnN0YW5jZS5uZXcoIlBhcnQiKQoJcGxhdGUuUGFyZW50ID0gZ2FtZS5Xb3Jrc3BhY2UKCXBsYXRlLlNpemUgPSBWZWN0b3IzLm5ldyg0MCwgMSwgNDApCglwbGF0ZS5Qb3NpdGlvbiA9IFZlY3RvcjMubmV3KDAsIDEwMDAwMCwgMCkKCXBsYXRlLkFuY2hvcmVkID0gdHJ1ZQoJcGxhdGUuUmVmbGVjdGFuY2UgPSAwLjUKCXBsYXRlLlRyYW5zcGFyZW5jeSA9IDAuNQoKCWxvY2FsIHRpbWUgPSAwCglsb2NhbCBjYW5JbnZpcyA9IGZhbHNlCgoJZnVuY3Rpb24gdGVsZXBvcnRUb0Ryb3BzKCkKCQlsb2NhbCBocnAgPSBwbGF5ZXIuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCgkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2VbJy5JZ25vcmUnXVsnLlNlcnZlckVmZmVjdHMnXTpHZXRDaGlsZHJlbigpKSBkbwoJCQlpZiBUUFNoYXJkc0VuYWJsZWQgYW5kIHYuTmFtZSA9PSAiU2hhcmQiIHRoZW4KCQkJCWhycC5DRnJhbWUgPSB2LkNGcmFtZQoJCQkJd2FpdCguMikKCQkJZWxzZWlmIFRQRGlhbW9uZHNFbmFibGVkIGFuZCB2Lk5hbWUgPT0gIkRpYW1vbmQiIHRoZW4KCQkJCWhycC5DRnJhbWUgPSB2LkNGcmFtZQoJCQkJd2FpdCguMikKCQkJZW5kCgoJCQlpZiBjYW5JbnZpcyB0aGVuCgkJCQlpZiB0aW1lID09IDUgdGhlbiAKCQkJCQlicmVhawoJCQkJZW5kCgkJCWVuZAoJCWVuZAoKCQlocnAuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhWZWN0b3IzLm5ldygwLCAxMDAwMDMsIC0xMCkpCgoJCXJldHVybiAKCWVuZAoKCglmdW5jdGlvbiBzdGFydFRpbWVyKCkKCQlsb2NhbCBocnAgPSBwbGF5ZXIuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCgkJd2hpbGUgd2FpdCgpIGRvCgkJCWlmIFRQU2hhcmRzRW5hYmxlZCBvciBUUERpYW1vbmRzRW5hYmxlZCB0aGVuCgkJCQlpZiB0aW1lIH49IDAgdGhlbiByZXR1cm4KCQkJCWVsc2UKCQkJCQlpZiBjYW5JbnZpcyB0aGVuCgkJCQkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIlNwaXJpdCIsICJTcGVjdHJhbCBFbWJvZGltZW50IikKCQkJCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJTcGlyaXQiLCAiU3BlY3RyYWwgRW1ib2RpbWVudCIpCgkJCQkJCXdhaXQoMSkKCQkJCQkJcmVwZWF0CgkJCQkJCQlzcGF3bihmdW5jdGlvbigpIHBjYWxsKHRlbGVwb3J0VG9Ecm9wcykgZW5kKQoJCQkJCQkJdGltZSA9IHRpbWUgKyAxCgkJCQkJCQl3YWl0KDEpCgkJCQkJCXVudGlsIHRpbWUgPT0gNgoJCQkJCQlocnAuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhWZWN0b3IzLm5ldygwLCAxMDAwMDMsIC0xMCkpCgkJCQkJCXdhaXQoNy41KQoJCQkJCQl0aW1lID0gMAoJCQkJCWVsc2UKCQkJCQkJd2hpbGUgdHJ1ZSBkbwoJCQkJCQkJaWYgbm90IFRQU2hhcmRzRW5hYmxlZCBhbmQgbm90IFRQRGlhbW9uZHNFbmFibGVkIHRoZW4KCQkJCQkJCQlicmVhawoJCQkJCQkJZW5kCgkJCQkJCQlzcGF3bihmdW5jdGlvbigpIHBjYWxsKHRlbGVwb3J0VG9Ecm9wcykgZW5kKQoJCQkJCQkJd2FpdCgxKQoJCQkJCQllbmQKCQkJCQllbmQKCQkJCWVuZAoJCQllbHNlCgkJCQlicmVhawoJCQllbmQKCQllbmQKCgkJcmV0dXJuCgllbmQKCglUUFNoYXJkcy5Nb3VzZUJ1dHRvbjFEb3duOmNvbm5lY3QoZnVuY3Rpb24oKQoJCWlmIHBsYXllcjpXYWl0Rm9yQ2hpbGQoIlBsYXllckd1aSIpOldhaXRGb3JDaGlsZCgiTWFpbiIpLkNoYXJhY3Rlci5BdmFpbGFibGUuU2Nyb2xsaW5nRnJhbWUuRnJhbWU6RmluZEZpcnN0Q2hpbGQoIlNwZWN0cmFsIEVtYm9kaW1lbnQiKSB0aGVuCgkJCWNhbkludmlzID0gdHJ1ZQoJCWVuZAoJCWlmIFRQU2hhcmRzRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCVRQU2hhcmRzRW5hYmxlZCA9IHRydWUKCQkJVFBTaGFyZHMuVGV4dCA9ICJUZWxlcG9ydCB0byBTaGFyZHMgKE9uKSIKCQkJc3RhcnRUaW1lcigpCgkJCXdoaWxlIFRQU2hhcmRzRW5hYmxlZCBkbwoJCQkJd2FpdCgpCgkJCQlpZiBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA9PSAwIHRoZW4KCQkJCQlyZXBlYXQgd2FpdCgpIHVudGlsIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoIH49IDAKCQkJCQlzdGFydFRpbWVyKCkKCQkJCWVuZAoJCQllbmQKCQllbHNlCgkJCVRQU2hhcmRzRW5hYmxlZCA9IGZhbHNlCgkJCVRQU2hhcmRzLlRleHQgPSAiVGVsZXBvcnQgdG8gU2hhcmRzIChPZmYpIgoJCWVuZAoJZW5kKQoKCVRQRGlhbW9uZHMuTW91c2VCdXR0b24xRG93bjpjb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBwbGF5ZXI6V2FpdEZvckNoaWxkKCJQbGF5ZXJHdWkiKTpXYWl0Rm9yQ2hpbGQoIk1haW4iKS5DaGFyYWN0ZXIuQXZhaWxhYmxlLlNjcm9sbGluZ0ZyYW1lLkZyYW1lOkZpbmRGaXJzdENoaWxkKCJTcGVjdHJhbCBFbWJvZGltZW50IikgdGhlbgoJCQljYW5JbnZpcyA9IHRydWUKCQllbmQKCQlpZiBUUERpYW1vbmRzRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCVRQRGlhbW9uZHNFbmFibGVkID0gdHJ1ZQoJCQlUUERpYW1vbmRzLlRleHQgPSAiVGVsZXBvcnQgdG8gRGlhbW9uZHMgKE9uKSIKCQkJc3RhcnRUaW1lcigpCgkJCXdoaWxlIFRQRGlhbW9uZHNFbmFibGVkIGRvCgkJCQl3YWl0KCkKCQkJCWlmIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID09IDAgdGhlbgoJCQkJCXJlcGVhdCB3YWl0KCkgdW50aWwgcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggfj0gMAoJCQkJCXN0YXJ0VGltZXIoKQoJCQkJZW5kCgkJCWVuZAoJCWVsc2UKCQkJVFBEaWFtb25kc0VuYWJsZWQgPSBmYWxzZQoJCQlUUERpYW1vbmRzLlRleHQgPSAiVGVsZXBvcnQgdG8gRGlhbW9uZHMgKE9mZikiCgkJZW5kCgllbmQpCgoJLS0gUmVqb2luIFNlcnZlciBGdW5jdGlvbgoKCS0tIFRoaXMgd2FzIG9ubHkgcHJlc2VydmVkIGFzIEkgY291bGRuJ3QgdGhpbmsgb2YgYW55IG90aGVyIHBsYWNlIHRvIHB1dCB0aGUgZnVuY3Rpb24gZm9yIG5vdy4KCS0tIE1pZ2h0IGdldCBtb3ZlZCBsYXRlciwgaWR1bm5vLgoJZnVuY3Rpb24gcmVqb2luKCkKCQlsb2NhbCB0cyA9IGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIikKCQlsb2NhbCBwID0gcGxheWVycy5Mb2NhbFBsYXllcgoKCQl0czpUZWxlcG9ydChnYW1lLlBsYWNlSWQsIHApCgllbmQKCgktLSBHVUkgVHdlYWtpbmcKCglmb3IgaSwgdiBpbiBwYWlycyhib3JkZXJzKSBkbwoJCXYuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygxLCAwLjUpCgkJdi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKCQl2LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjc1MAoJCXYuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCkKCQl2LkJvcmRlclNpemVQaXhlbCA9IDAKCQl2LlNpemVDb25zdHJhaW50ID0gRW51bS5TaXplQ29uc3RyYWludC5SZWxhdGl2ZVlZCgkJdi5BY3RpdmUgPSB0cnVlCgkJdi5QYXJlbnQgPSBlYmd1aQoJZW5kCgoJZm9yIGksIHYgaW4gcGFpcnMoYnV0dG9ucykgZG8KCQl2LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMzYsIDIwLCAxMTUpCgkJdi5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQoJCXYuQm9yZGVyU2l6ZVBpeGVsID0gMgoJCXYuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMCkKCQl2LlNpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMCkKCQl2LkZvbnQgPSBFbnVtLkZvbnQuU2FycGFuY2gKCQl2LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1MSwgMjU1KQoJCXYuVGV4dFNjYWxlZCA9IHRydWUKCQl2LlRleHRTaXplID0gMTQuMDAwCgkJdi5UZXh0V3JhcHBlZCA9IHRydWUKCQl2LkxheW91dE9yZGVyID0gaQoJCXYuUGFyZW50ID0gbWFpbmZyYW1lCgllbmQKCgktLSBjb21tYW5kQm94CgoJdGFyZ2V0ID0gcGxheWVyLk5hbWUKCXRhcmdldFNldHRpbmcgPSAic2VsZWN0IgoJbG9vcGluZyA9IGZhbHNlCglzbWFydEF0dGFjayA9IHRydWUKCUhlYWxTZXR0aW5nID0gMQoJc3R1bkVuYWJsZWQgPSB0cnVlCglGUFNEcm9wcGluZyA9IGZhbHNlCglsb2NhbCBidXR0b25IZWlnaHQgPSAzMAoJbG9jYWwgYnV0dG9uR2FwID0gNwogICAgbG9jYWwgaGVscDEgPSBbW3x8IEJlbG93IGlzIGEgZnVsbCwgY29tcHJlaGVuc2l2ZSBsaXN0IG9mIGVhY2ggY29tbWFuZCBFQkdVSSBoYXMgdG8gb2ZmZXIuIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAoUHJlZml4IGlzIDspCgogICAgICAgICAgICAgICAgImhlbHAgW251bV0iIC0gU2hvd3MgdGhpcyBjb21tYW5kcyBsaXN0ISBDaG9vc2UgYmV0d2VlbiBwYWdlcyAxIG9yIDIuCiAgICAgICAgICAgICAgICAiY2hhbmdlbG9nIiAtIFNob3dzIGEgbGluayB0byB0aGUgY2hhbmdlbG9nIGZvciBFQkdVSSBhbmQgaXRzIENhbmFyeSBicmFuY2guCiAgICAgICAgICAgICAgICAicmUiIC0gUmVmcmVzaGVzIHlvdXIgY2hhcmFjdGVyLiBUaGlzIHdpbGwgdGVtcG9yYXJpbHkgdmFuaXNoIHlvdSwgYW5kIGJyaW5nIHlvdSBiYWNrIHdpdGggZnVsbCBzdGF0cy4KICAgICAgICAgICAgICAgICJ0cCA8bWFwPiIgLSBUZWxlcG9ydHMgeW91IHRvIHRoZSBtYXAgb2YgeW91ciBjaG9pY2UuIEhlYXZlbiBkb2Vzbid0IHdvcmsgd2l0aG91dCB0aGUgZ2FtZXBhc3MuCiAgICAgICAgICAgICAgICAiZGVjbHV0dGVyIiAtIENsZWFycyB0aGUgYmFja2dyb3VuZHMgb2YgdGhlIG1haW4gR1VJcywgYW5kIHNocmlua3MgdGhlIG1vdmVzL3N0YXRzLgogICAgICAgICAgICAgICAgInJhaW4iIC0gRW5hYmxlcyB0aGUgcmFpbiBmcm9tIFdhdGVyIG1hcC4gQ2FyZWZ1bCwgeW91IGhhdmUgdG8gcmVqb2luIHRvIHR1cm4gaXQgb2ZmIQogICAgICAgICAgICAgICAgImZpeCIgLSBSZW1vdmVzIHRoZSAiTE9BRElORyIgc2NyZWVuIHdoZW4gdGVsZXBvcnRpbmcgdG8gY2VydGFpbiBtYXBzLgogICAgICAgICAgICAgICAgImJ1dHRvbmhlaWdodCA8bnVtPiIgLSBDaGFuZ2VzIHRoZSBoZWlnaHQsIGluIHBpeGVscywgb2YgRUJHVUkncyBidXR0b25zLgogICAgICAgICAgICAgICAgImJ1dHRvbmdhcCA8bnVtPiIgLSBDaGFuZ2VzIHRoZSBnYXAsIGluIHBpeGVscywgYmV0d2VlbiBFQkdVSSdzIGJ1dHRvbnMuCiAgICAgICAgICAgICAgICAicmVqb2luIiAtIFJlam9pbnMgdGhlIHNlcnZlci4KICAgICAgICAgICAgICAgICJhdXJhL29mZiIgLSBBbiBhbHRlcm5hdGUgbWV0aG9kIG9mIHNpbGVudGx5IHR1cm5pbmcgb2ZmIGF1cmEuCiAgICAgICAgICAgICAgICAidGFyZ2V0c2V0dGluZyA8bW9kZT4iIC0gTW9kaWZpZXMgaG93IEVCR1VJIHNlbGVjdHMgdGFyZ2V0cy4gV29uJ3QgdGFyZ2V0IHRob3NlIGluIHNhZmV6b25lLCBleGNlcHQgaW4gInNlbGVjdCIgbW9kZS4KICAgICAgICAgICAgICAgICAgICAtLSAic2VsZWN0IiBhbGxvd3MgeW91IHRvIGNob29zZSBieSB0eXBpbmcgaW50byB0aGUgY29tbWFuZCBib3guIFNldCB0byB0aGlzIGJ5IGRlZmF1bHQuCiAgICAgICAgICAgICAgICAgICAgLS0gImNsb3Nlc3QiIHNlbGVjdHMgdGhlIHBlcnNvbiBjbG9zZXN0IHRvIHlvdS4KICAgICAgICAgICAgICAgICAgICAtLSAiZmFydGhlc3QiIHNlbGVjdHMgdGhlIHBlcnNvbiBmYXJ0aGVzdCBmcm9tIHlvdS4KICAgICAgICAgICAgICAgICAgICAtLSAibG93aHAiIHNlbGVjdHMgdGhlIHBlcnNvbiB3aXRoIHRoZSBsb3dlc3QgSFAuCiAgICAgICAgICAgICAgICAgICAgLS0gImhpZ2hocCIgc2VsZWN0cyB0aGUgY2xvc2VzdCBwZXJzb24gd2l0aCB0aGUgaGlnaGVzdCBIUC5dXQoKICAgIGxvY2FsIGhlbHAyID0gW1sibG9vcCIgLSBMb29wcyB0aGUgdXNhZ2Ugb2YgZW5hYmxlZCBhdHRhY2sgZXhwbG9pdHMuCiAgICAgICAgICAgICAgICAiZ3JjaGFyZ2UgPG51bT4iIC0gTXVsdGlwbGllcyB0aGUgdGltZSBBbXBsaWZpZWQgR2VuZXNpcyBSYXkgYXR0YWNrIGV4cGxvaXQgc3RheXMgYWxpdmUgZm9yLiBEZWZhdWx0LCAxLCBsYXN0cyA2IHNlY29uZHMuCiAgICAgICAgICAgICAgICAic3BlZWQgPG51bT4iIC0gQ2hhbmdlcyB5b3VyIGRlZmF1bHQgd2Fsa3NwZWVkLiBEZWZhdWx0LCA2NCwgZXF1YWxzIG1heC1zcGVlZCBzcHJpbnRpbmcuCiAgICAgICAgICAgICAgICAic21hcnRhdHRhY2siIC0gVG9nZ2xlcyBpZiBhdHRhY2sgZXhwbG9pdHMgd2lsbCBmaXJlIG9uIHBlb3BsZSB3aG8gYXJlIGluIHNhZmV6b25lLiBEZWZhdWx0IG9uLgogICAgICAgICAgICAgICAgImdhbWVjb2xvciA8bW9kZT4iIC0gQ2hhbmdlcyB0aGUgY29udHJhc3QgYW5kIHNhdHVyYXRpb24gb2YgdGhlIGdhbWUuCiAgICAgICAgICAgICAgICAgICAgLS0gIm5vcm1hbCIgd2lsbCByZXNldCBldmVyeXRoaW5nIHRvIG5vcm1hbC4KICAgICAgICAgICAgICAgICAgICAtLSAiZ3JheXNjYWxlIiB0dXJucyBvZmYgdGhlIHNhdHVyYXRpb24gYW5kIG1ha2VzIGV2ZXJ5dGhpbmcgZ3JheS4KICAgICAgICAgICAgICAgICAgICAtLSAiaW52ZXJ0aHVlIiBpbnZlcnRzIHRoZSBodWUgb2YgZXZlcnl0aGluZy4gR3JlZW4gYmVjb21lcyBwdXJwbGUsIGJsdWUgYmVjb21lcyByZWQuCiAgICAgICAgICAgICAgICAgICAgLS0gImludmVydGFsbCIgaW52ZXJ0cyB0aGUgaHVlLCBzYXR1cmF0aW9uLCBhbmQgY29udHJhc3Qgb2YgZXZlcnl0aGluZy4gTmVnYXRpdmUhCiAgICAgICAgICAgICAgICAiYmxhY2tjYXN0IiAtIENoYW5nZXMgYWxsIHRoZSBtZWRhbHMgdG8gYmxhY2sgd2hlbiBjYXN0aW5nIHNwZWxscy4KICAgICAgICAgICAgICAgICJzdHVuIiAtIFRvZ2dsZXMgd2hldGhlciB5b3Ugd2FudCB0byBiZSBzdHVubmVkIG9yIG5vdC4gTm90IHZlcnkgZGlzY3JlZXQuCiAgICAgICAgICAgICAgICAiZHJ1Z3MiIC0gUmFuZG9taXplcyB0aGUgY29sb3JzIG9mIGFsbCBtYWdpYyBzcGVsbHMuIFJlcXVpcmVzIHlvdSB0byBydW4gImNvbG9ycyIgZmlyc3QuCiAgICAgICAgICAgICAgICAibWFnaWNjb2xvciA8cj4gPGc+IDxiPiIgLSBDaGFuZ2VzIHRoZSBjb2xvciBvZiBhbGwgbWFnaWMgc3BlbGxzIHRvIGFuIFJHQiB2YWx1ZS4gUmVxdWlyZXMgeW91IHRvIHJ1biAiY29sb3JzIiBmaXJzdC4KICAgICAgICAgICAgICAgICJjb2xvcnMiIC0gQWxsb3dzIHlvdSB0byBydW4gImRydWdzIiBhbmQgIm1hZ2ljY29sb3IiLgogICAgICAgICAgICAgICAgImhlYWwgPHBsYXllcj4iIC0gUGxhY2VzIEJsdWUgQXJzb24gYW5kIEdsZWFtaW5nIEhhcm1vbnkgYXQgdGhlIGZlZXQgb2YgYSBwbGF5ZXIgb2YgeW91ciBjaG9pY2UuCiAgICAgICAgICAgICAgICAiZSA8bnVtIDEtMz4iIC0gQ2hhbmdlcyB0aGUgcGhhc2Ugb2YgdGhlIENvbnRyb2xsZWQgRWNob2VzIGF0dGFjayBleHBsb2l0LgogICAgICAgICAgICAgICAgICAgIC0tICIxIiB3aWxsIGNoYW5nZSBpdCB0byBQT1csIGFuZCBpcyB0aGUgZGVmYXVsdC4KICAgICAgICAgICAgICAgICAgICAtLSAiMiIgd2lsbCBjaGFuZ2UgaXQgdG8gQlVSTi4KICAgICAgICAgICAgICAgICAgICAtLSAiMyIgd2lsbCBjaGFuZ2UgaXQgdG8gU1RVTi4KICAgICAgICAgICAgICAgICJvcmlnaW4iIC0gQ3JlYXRlcyBhIHNtYWxsLCByZWQgYmxvY2sgYXQgMCwgMCwgMCB3aXRoaW4gdGhlIHdvcmxkLl1dCgoJUlNSID0gZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpXYWl0Rm9yQ2hpbGQoIlJlbW90ZXMiKQoKCWxvY2FsIHN0dW5Db25uZWN0aW9uID0gZ2V0Y29ubmVjdGlvbnMoUlNSOldhaXRGb3JDaGlsZCgiQ29tYmF0IikuT25DbGllbnRFdmVudCkKCWxvY2FsIGxhZ2dlcnMgPSB7CgkJIjFCMEY5OEJFLUUxMEItNDY3NC05RkI0LTZGNjUxNzFBMzQ3RiIsIC0tIGxvZwoJCSI2QTMzMTA0QS0xRkU5LTRGQTgtOTM3NC1DMTY0RDI4RjgzNTEiLCAtLSBicmlhbgoJCSI4Mzc3MzZBQS0wMTkyLTQ3RjktOThDNS04REQwREYxOEZFNzQiLCAtLSBqZXQKCQkiNTVDMjA0OUQtQzZCRC00NTIzLTg4MDQtRDUzOUMzODc5MkEzIiwgLS0gcGVudGFyYWN0CgkJIjk0NjRCNjhBLTM2M0MtNDFGOC1CQjdELUI0QkVEOEFDMDk2MyIsIC0tIHZhc3RvcmlvCgkJLS0gIjgzMEJENEU5LTVFQkUtNEExMy1CNDdCLTlCRTYwMDgzQjgzNiIsIC0tIGxvbG9rCgkJLS0gIjYzQjM5RTI3LURBMUItNDgyRS1CMjhDLTZBMzM5OEM5NUE0QyIsIC0tIGFsZXgKCQkiODQ2QTY1RTItRTk2My00QTBBLTkwMjUtRTlCOEU5NTg5NjEzIiwgLS0gYnJhbQoJCSIzRjE2ODQ0MC1BNUMwLTRGNzEtOEU1MS0zRkRGOTAyNUY1MUIiLCAtLSB0b21lawoJCSI2QTk3MDUyQS02MzRFLTQ3RTEtOEQ5MC01RUUzQ0E0QTk2RkEiLCAtLSByYXZlbgoJCSJGNTk3NUQ3RC0yQUM1LTQ0QUEtODAxRi04Mjc2MjVENkQ3NjMiLCAtLSBhbGV4aWEKCQkiNDgyODcxODItOUU3Ny00Rjk3LUE2NTQtOTcwNjlFRDgxNjZDIiwgLS0gamVzcwoJCSI3NDg5Q0JBRS03OTg2LTQ1QTktQkU0MC1BMjE4RURDRDBGMDEiIC0tIGNlcGhhcwoJfQoKCWxvY2FsIGNsaWVudGlkID0gZ2FtZTpHZXRTZXJ2aWNlKCJSYnhBbmFseXRpY3NTZXJ2aWNlIik6R2V0Q2xpZW50SWQoKTpsb3dlcigpCglsb2NhbCBhbGxvd2VkVG9Ecm9wRlBTID0gdHJ1ZQoKCWZvciBpLCB2IGluIHBhaXJzKGxhZ2dlcnMpIGRvCgkJdiA9IHY6bG93ZXIoKQoKCQlpZiAodiA9PSBjbGllbnRpZCkgdGhlbgoJCQlhbGxvd2VkVG9Ecm9wRlBTID0gdHJ1ZQoJCWVuZAoJZW5kCgoJZnVuY3Rpb24gZ2V0SFJQKGNocikKCQlsb2NhbCBIUlAgPSBjaHI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBvciBjaHI6RmluZEZpcnN0Q2hpbGQoIlRvcnNvIikgb3IgY2hyOkZpbmRGaXJzdENoaWxkKCJVcHBlclRvcnNvIikKCQlyZXR1cm4gSFJQCgllbmQKCglmdW5jdGlvbiBnZXRIVU0oY2hyKQoJCWxvY2FsIEhVTSA9IGNocjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQoJCXJldHVybiBIVU0KCWVuZAoKCWxvY2FsIGZ1bmN0aW9uIHJlc3Bhd24ocGxyKQoJCWxvY2FsIGNociA9IHBsci5DaGFyYWN0ZXIKCgkJaWYgKGNocjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikpIHRoZW4gY2hyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKTpDaGFuZ2VTdGF0ZSgxNSkgZW5kCgkJY2hyOkNsZWFyQWxsQ2hpbGRyZW4oKQoKCQlsb2NhbCBuZXdjaHIgPSBJbnN0YW5jZS5uZXcoIk1vZGVsIikKCQluZXdjaHIuUGFyZW50ID0gd29ya3NwYWNlCgkJcGxyLkNoYXJhY3RlciA9IG5ld2NocgoKCQl3YWl0KCkKCgkJcGxyLkNoYXJhY3RlciA9IGNocgoJCW5ld2NocjpEZXN0cm95KCkKCWVuZAoKCWxvY2FsIGZ1bmN0aW9uIHJlZnJlc2gocGxyKQoJCWxvY2FsIGh1bSA9IHBsci5DaGFyYWN0ZXIgYW5kIHBsci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIsIHRydWUpCgkJbG9jYWwgcG9zID0gaHVtIGFuZCBodW0uUm9vdFBhcnQgYW5kIGh1bS5Sb290UGFydC5DRnJhbWUKCQlsb2NhbCBwb3MxID0gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lCgoJCXJlc3Bhd24ocGxyKQoKCQlzcGF3bihmdW5jdGlvbigpCgkJCXBsci5DaGFyYWN0ZXJBZGRlZDpXYWl0KCk6V2FpdEZvckNoaWxkKCJIdW1hbm9pZCIpLlJvb3RQYXJ0LkNGcmFtZSwgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lID0gcG9zLCB3YWl0KCkgYW5kIHBvczEKCQllbmQpCgllbmQKCglsb2NhbCBmdW5jdGlvbiBzcGxpdEFyZ3MoY29tbWFuZCkKCQljb21tYW5kID0gc3RyaW5nLmdzdWIoY29tbWFuZCwgIiwiLCAiICIpCgkJY29tbWFuZCA9IHN0cmluZy5zcGxpdChjb21tYW5kLCAiICIpCgoJCWZvciBpLCB2IGluIGlwYWlycyhjb21tYW5kKSBkbwoJCQl2ID0gc3RyaW5nLmdzdWIodiwgIiVzKyIsICIiKQoJCQlpZiB2ID09ICIiIHRoZW4KCQkJCXRhYmxlLnJlbW92ZShjb21tYW5kLCBpKQoJCQllbmQKCQllbmQKCgkJcmV0dXJuIGNvbW1hbmQKCWVuZAoKCWxvY2FsIGZ1bmN0aW9uIGZpbmRQbGF5ZXIodGV4dCkKCQlsb2NhbCBwbGF5ZXJzID0gZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKQoJCWxvY2FsIG1hdGNoZXMgPSB7fQoKCQlmb3IgaSwgUGxheWVyIGluIGlwYWlycyhwbGF5ZXJzKSBkbwoJCQlsb2NhbCBuYW1lID0gUGxheWVyLk5hbWUKCQkJdGV4dCA9IHN0cmluZy5sb3dlcih0ZXh0KQoJCQluYW1lID0gc3RyaW5nLmxvd2VyKG5hbWUpCgoJCQlsb2NhbCBtYXRjaCA9IHN0cmluZy5maW5kKG5hbWUsIHRleHQpCgoJCQlpZiBtYXRjaCB0aGVuCgkJCQl0YWJsZS5pbnNlcnQobWF0Y2hlcywgUGxheWVyLk5hbWUpCgkJCWVuZAoJCWVuZAoKCQlyZXR1cm4gbWF0Y2hlcwoJZW5kCgoJbG9jYWwgZHJ1Z3NFbmFibGVkID0gZmFsc2UKCWxvY2FsIGNvbG9yc0VuYWJsZWQgPSBmYWxzZQoJbG9jYWwgYmxhY2tjYXN0RW5hYmxlZCA9IGZhbHNlCglsb2NhbCBjb2xvckV4Y2x1ZGUgPSB7IkhlYWQiLCJUb3JzbyIsIkxlZnQgQXJtIiwiTGVmdCBMZWciLCJSaWdodCBBcm0iLCJSaWdodCBMZWciLCJTaGFyZCIsIkRpYW1vbmQifQoKCS0tW1s5OC8yNTUsIDM3LzI1NSwgMjA5LzI1NV1dCglsb2NhbCBjb2xvcjEKCWxvY2FsIGNvbG9yMgoJbG9jYWwgY29sb3IzCgoJbG9jYWwgZnVuY3Rpb24gdGVybUVCR3VpKCkKCQlidXR0b25zbWFpbjpUd2VlblBvc2l0aW9uKAoJCQlVRGltMi5uZXcoMS4yNSwgMCwgMC42NSwgMCksCgkJCSJJbiIsCgkJCSJTaW5lIiwKCQkJLjUsCgkJCXRydWUKCQkpCgkJY29tbWFuZHNtYWluOlR3ZWVuUG9zaXRpb24oCgkJCVVEaW0yLm5ldygxLjI1LCAwLCAwLjQ1LCAwKSwKCQkJIkluIiwKCQkJIlNpbmUiLAoJCQkuNSwKCQkJdHJ1ZQoJCSkKCQl3YWl0KDEpCgkJdGFyZ2V0ID0gcGxheWVyLk5hbWUKCQllYmd1aTpEZXN0cm95KCkKCWVuZAoKCWxvY2FsIGZ1bmN0aW9uIGlucHV0Qm94KCkKCQlsb2NhbCB0ZXh0ID0gY29tbWFuZEJveC5UZXh0CgkJd2FpdCgpCgkJY29tbWFuZEJveC5UZXh0ID0gIiIKCgkJbG9jYWwgcHJlZml4ID0gIjsiCgkJaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAxKSA9PSAocHJlZml4KSB0aGVuCgkJCXRleHQgPSBzdHJpbmcubG93ZXIodGV4dCkKCgkJCWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMykgPT0gKHByZWZpeCAuLiAicmUiKSB0aGVuCgkJCQlyZWZyZXNoKHBsYXllcikKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMykgPT0gKHByZWZpeCAuLiAidHAiKSB0aGVuCgkJCQlsb2NhbCB0ZWxlcG9ydHRvCiAgICAgICAgICAgICAgICBsb2NhbCB0cG5hbWUKCQkJCWxvY2FsIHBsYWNlID0gc3RyaW5nLnN1Yih0ZXh0LCA1KQoJCQkJbG9jYWwgcGxhY2VzID0gewoJCQkJCTU2NjM5OTI0NCwKCQkJCQkyNTY5NjI1ODA5LAoJCQkJCTU3MDE1ODA4MSwKCQkJCQk1Mzc2MDAyMDQsCgkJCQkJNTIwNTY4MjQwLAoJCQkJCTU1NDk1NTU2MCwKCQkJCQk2MDIwNDg1NTAsCgkJCQkJNTc1NDU2NjQ2LAoJCQkJCTE3MTM5ODYxMTIsCgkJCQkJMTI0MzYxNTYxMiwKCQkJCQk2MzgwNjUzMDIsCgkJCQkJNjM0MjQwODI2LAoJCQkJCTYzMzA0MjczMQoJCQkJfQoKCQkJCWlmIHBsYWNlID09ICJzdGFuZGFyZGxvdyIgb3IgcGxhY2UgPT0gIjU2NjM5OTI0NCIgdGhlbgoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbMV0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiTG93YmllIFN0YW5kYXJkIgoJCQkJZWxzZWlmIHBsYWNlID09ICJzdGFuZGFyZDQwIiBvciBwbGFjZSA9PSAiMjU2OTYyNTgwOSIgdGhlbgoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbMl0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiU3RhbmRhcmQiCgkJCQllbHNlaWYgcGxhY2UgPT0gImxpZ2h0IiBvciBwbGFjZSA9PSAiNTcwMTU4MDgxIiB0aGVuCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1szXQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJMaWdodCIKCQkJCWVsc2VpZiBwbGFjZSA9PSAiZmlyZSIgb3IgcGxhY2UgPT0gIjUzNzYwMDIwNCIgdGhlbgoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbNF0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiRmlyZSIKCQkJCWVsc2VpZiBwbGFjZSA9PSAid2F0ZXIiIG9yIHBsYWNlID09ICI1MjA1NjgyNDAiIHRoZW4KCQkJCQl0ZWxlcG9ydHRvID0gcGxhY2VzWzVdCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIldhdGVyIgoJCQkJZWxzZWlmIHBsYWNlID09ICJncmFzcyIgb3IgcGxhY2UgPT0gIjU1NDk1NTU2MCIgdGhlbgoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbNl0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiR3Jhc3MiCgkJCQllbHNlaWYgcGxhY2UgPT0gImhlYXZlbiIgb3IgcGxhY2UgPT0gIjYwMjA0ODU1MCIgdGhlbgoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbN10KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiSGVhdmVuIgoJCQkJZWxzZWlmIHBsYWNlID09ICJtaW5pbG92YW5pYSIgb3IgcGxhY2UgPT0gInNhbnMiIG9yIHBsYWNlID09ICI1NzU0NTY2NDYiIHRoZW4KCQkJCQl0ZWxlcG9ydHRvID0gcGxhY2VzWzhdCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIk1pbmlsb3ZhbmlhIgoJCQkJZWxzZWlmIHBsYWNlID09ICJkZWZhdWx0IiBvciBwbGFjZSA9PSAidG91cm5hbWVudCIgb3IgcGxhY2UgPT0gIjE3MTM5ODYxMTIiIHRoZW4KCQkJCQl0ZWxlcG9ydHRvID0gcGxhY2VzWzldCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIlRvdXJuYW1lbnQiCgkJCQllbHNlaWYgcGxhY2UgPT0gInN1cnZpdmFsIiBvciBwbGFjZSA9PSAiMTI0MzYxNTYxMiIgdGhlbgoJCQkJCXRlbGVwb3J0dG8gPSBwbGFjZXNbMTBdCiAgICAgICAgICAgICAgICAgICAgdHBuYW1lID0gIlN1cnZpdmFsIgoJCQkJZWxzZWlmIHBsYWNlID09ICJtZWdhc3RhbmRhcmQiIG9yIHBsYWNlID09ICJzdGFuZGFyZG1lZ2EiIG9yIHBsYWNlID09ICI2MzgwNjUzMDIiIHRoZW4KCQkJCQl0ZWxlcG9ydHRvID0gcGxhY2VzWzExXQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJNZWdhIFN0YW5kYXJkIgoJCQkJZWxzZWlmIHBsYWNlID09ICJtZWdhZmlyZSIgb3IgcGxhY2UgPT0gImZpcmVtZWdhIiBvciBwbGFjZSA9PSAiNjM0MjQwODI2IiB0aGVuCgkJCQkJdGVsZXBvcnR0byA9IHBsYWNlc1sxMV0KICAgICAgICAgICAgICAgICAgICB0cG5hbWUgPSAiTWVnYSBGaXJlIgoJCQkJZWxzZWlmIHBsYWNlID09ICJtZWdhZ3Jhc3MiIG9yIHBsYWNlID09ICJncmFzc21lZ2EiIG9yIHBsYWNlID09ICI2MzMwNDI3MzEiIHRoZW4KCQkJCQl0ZWxlcG9ydHRvID0gcGxhY2VzWzEzXQogICAgICAgICAgICAgICAgICAgIHRwbmFtZSA9ICJNZWdhIEdyYXNzIgoJCQkJZWxzZQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJUaGUgcGxhY2Ugd2FzIGluY29ycmVjdGx5IHNwZWNpZmllZCEiCgkJCQllbmQKCgkJCQlpZiB0ZWxlcG9ydHRvIHRoZW4KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiVGVsZXBvcnRpbmcgdG8gIiAuLiB0cG5hbWUgLi4gIiEiCgkJCQkJZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydCh0ZWxlcG9ydHRvKQoJCQkJZW5kCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDgpID09IChwcmVmaXggLi4gImRlY2x1dHRlciIpIHRoZW4KCQkJCXBsYXllci5QbGF5ZXJHdWkuTWFpbi5GcmFtZTEuU2l6ZSA9IFVEaW0yLm5ldygwLjM3NSwgMCwgMC4zNzUsIDApCgkJCQlwbGF5ZXIuUGxheWVyR3VpLk1haW4uRnJhbWUxLkltYWdlVHJhbnNwYXJlbmN5ID0gMQoJCQkJcGxheWVyLlBsYXllckd1aS5NYWluLkNoYXJhY3Rlci5JbWFnZVRyYW5zcGFyZW5jeSA9IDEKCQkJCXBsYXllci5QbGF5ZXJHdWkuTWFpbi5Cb29rLkltYWdlVHJhbnNwYXJlbmN5ID0gMQoJCQkJcGxheWVyLlBsYXllckd1aS5NYWluLlNob3AuSW1hZ2VUcmFuc3BhcmVuY3kgPSAxCgkJCQlwbGF5ZXIuUGxheWVyR3VpLk1haW4uU2tpbGxzQmFyLlNpemUgPSBVRGltMi5uZXcoMC4zNzUsIDAsIDAuMzc1LCAwKQoJCQkJcGxheWVyLlBsYXllckd1aS5NYWluLlNraWxsc0Jhci5JbWFnZVRyYW5zcGFyZW5jeSA9IDEKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgNSkgPT0gKHByZWZpeCAuLiAicmFpbiIpIHRoZW4KCQkJCWxvY2FsIGN1cnJlbnRDQU0gPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYQoJCQkJbG9jYWwgcmFpblNvdW5kID0gSW5zdGFuY2UubmV3KCJTb3VuZCIpCgkJCQlyYWluU291bmQuTG9vcGVkID0gdHJ1ZQoJCQkJcmFpblNvdW5kLlNvdW5kSWQgPSAicmJ4YXNzZXRpZDovLzI4MzE2NDU5MyIKCQkJCXJhaW5Tb3VuZC5Wb2x1bWUgPSAxCgkJCQlyYWluU291bmQuUGFyZW50ID0gd29ya3NwYWNlCgkJCQlyYWluU291bmQ6UGxheSgpCgoJCQkJbG9jYWwgcmFpblBhcnQgPSBJbnN0YW5jZS5uZXcoIlBhcnQiKQoJCQkJcmFpblBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDMwMCwgMzAwLCAzMDApCgkJCQlyYWluUGFydC5UcmFuc3BhcmVuY3kgPSAxCgkJCQlyYWluUGFydC5BbmNob3JlZCA9IHRydWUKCQkJCXJhaW5QYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQoKCQkJCWxvY2FsIHJhaW5FZmZlY3QgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6V2FpdEZvckNoaWxkKCJFZmZlY3RzIik6V2FpdEZvckNoaWxkKCJSYWluIikKCQkJCXJhaW5FZmZlY3QuUmF0ZSA9IHJhaW5QYXJ0LlNpemUubWFnbml0dWRlCgkJCQlyYWluRWZmZWN0LlBhcmVudCA9IHJhaW5QYXJ0CgoJCQkJbG9jYWwgaWdub3JlID0gd29ya3NwYWNlOldhaXRGb3JDaGlsZCgiLklnbm9yZSIpCgkJCQlyYWluUGFydC5QYXJlbnQgPSBpZ25vcmU6V2FpdEZvckNoaWxkKCIuU2VydmVyRWZmZWN0cyIpCgoJCQkJbG9jYWwgZm92ID0gMiAqIG1hdGgudGFuKG1hdGgucmFkKGN1cnJlbnRDQU0uRmllbGRPZlZpZXcpIC8gMikKCQkJCWxvY2FsIG5ld1JheSA9IFJheS5uZXcKCQkJCWxvY2FsIGhlaWdodCA9IFZlY3RvcjMubmV3KDAsIDUwLCAwKQoJCQkJbG9jYWwgZGVwdGggPSBDRnJhbWUubmV3KDAsIGZvdiAqIDUwLCAtNjApCgoJCQkJZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIik6QmluZFRvUmVuZGVyU3RlcCgiUmFpbiIsIEVudW0uUmVuZGVyUHJpb3JpdHkuQ2FtZXJhLlZhbHVlLCBmdW5jdGlvbigpCgkJCQkJbG9jYWwgcmMgPSB3b3Jrc3BhY2U6RmluZFBhcnRPblJheVdpdGhJZ25vcmVMaXN0KG5ld1JheShjdXJyZW50Q0FNLkNGcmFtZS5wLCBoZWlnaHQpLCB7aWdub3JlfSkKCgkJCQkJaWYgKHJjKSB0aGVuCgkJCQkJCXJhaW5FZmZlY3QuRW5hYmxlZCA9IGZhbHNlCgkJCQkJCXJhaW5Tb3VuZC5Wb2x1bWUgPSAwLjUKCQkJCQkJcmV0dXJuCgkJCQkJZW5kCgoJCQkJCWxvY2FsIHZpZXdwb3J0ID0gY3VycmVudENBTS5WaWV3cG9ydFNpemUKCQoJCQkJCXJhaW5QYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyhmb3YgKiB2aWV3cG9ydC54IC8gdmlld3BvcnQueSAqIDUwLCAwLjIsIDEwMCkKCQkJCQlyYWluUGFydC5DRnJhbWUgPSBjdXJyZW50Q0FNLkNGcmFtZSAqIGRlcHRoCgkKCQkJCQlyYWluRWZmZWN0LlJhdGUgPSByYWluUGFydC5TaXplLm1hZ25pdHVkZQoJCQkJCXJhaW5FZmZlY3QuRW5hYmxlZCA9IHRydWUKCQoJCQkJCXJhaW5Tb3VuZC5Wb2x1bWUgPSAxCgkJCQllbmQpCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDQpID09IChwcmVmaXggLi4gImZpeCIpIHRoZW4KCQkJCWlmIHBsYXllci5QbGF5ZXJHdWk6V2FpdEZvckNoaWxkKCJNZW51Iik6RmluZEZpcnN0Q2hpbGQoIkJsYWNrU2NyZWVuIikgdGhlbgoJCQkJCXBsYXllci5QbGF5ZXJHdWk6V2FpdEZvckNoaWxkKCJNZW51Iik6RmluZEZpcnN0Q2hpbGQoIkJsYWNrU2NyZWVuIikuVmlzaWJsZSA9IGZhbHNlCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkZpeGluZyB0aGUgTWVudSBHVUkhIgoJCQkJZW5kCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDEzKSA9PSAocHJlZml4IC4uICJidXR0b25oZWlnaHQiKSB0aGVuCgkJCQlidXR0b25IZWlnaHQgPSB0b251bWJlcihzdHJpbmcuc3ViKHRleHQsIDE1KSkKCQkJCVVJR3JpZExheW91dC5DZWxsU2l6ZSA9IFVEaW0yLm5ldygwLjQ1LCAwLCAwLCBidXR0b25IZWlnaHQpCgkJCQltYWluZnJhbWUuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCBtYXRoLmNlaWwoI2J1dHRvbnMgLyAyKSAqIChidXR0b25IZWlnaHQgKyBidXR0b25HYXApIC0gYnV0dG9uR2FwKQoKCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJCdXR0b24gaGVpZ2h0IHdhcyBzZXQgdG8gIiAuLiB0b251bWJlcihzdHJpbmcuc3ViKHRleHQsIDE1KSkgLi4gIiEiCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDEwKSA9PSAocHJlZml4IC4uICJidXR0b25nYXAiKSB0aGVuCgkJCQlidXR0b25HYXAgPSB0b251bWJlcihzdHJpbmcuc3ViKHRleHQsIDEyKSkKCQkJCVVJR3JpZExheW91dC5DZWxsUGFkZGluZyA9IFVEaW0yLm5ldygwLCA3LCAwLCBidXR0b25HYXApCgkJCQltYWluZnJhbWUuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCBtYXRoLmNlaWwoI2J1dHRvbnMgLyAyKSAqIChidXR0b25IZWlnaHQgKyBidXR0b25HYXApIC0gYnV0dG9uR2FwKQoKCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJCdXR0b24gZ2FwIHdhcyBzZXQgdG8gIiAuLiB0b251bWJlcihzdHJpbmcuc3ViKHRleHQsIDEyKSkgLi4gIiEiCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDcpID09IChwcmVmaXggLi4gInJlam9pbiIpIHRoZW4KCQkJCXJlam9pbigpCgkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiUmVqb2luaW5nLi4uIgoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA5KSA9PSAocHJlZml4IC4uICJhdXJhL29mZiIpIHRoZW4KCQkJCXJlcGVhdCB3YWl0KCkgdW50aWwgZ2V0SFJQKHBsYXllci5DaGFyYWN0ZXIpCgoJCQkJaWYgZ2V0SFJQKHBsYXllci5DaGFyYWN0ZXIpOkZpbmRGaXJzdENoaWxkKCJBdXJhR1AiKSB0aGVuCgkJCQkJZ2V0SFJQKHBsYXllci5DaGFyYWN0ZXIpOkZpbmRGaXJzdENoaWxkKCJBdXJhR1AiKTpEZXN0cm95KCkKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQXVyYSBoYXMgYmVlbiByZW1vdmVkLiIKCQkJCWVsc2UKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQXVyYSBkb2VzIG5vdCBleGlzdCEiCgkJCQllbmQKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMTQpID09IChwcmVmaXggLi4gInRhcmdldHNldHRpbmciKSB0aGVuCgkJCQl0YXJnZXRTZXR0aW5nID0gc3RyaW5nLnN1Yih0ZXh0LCAxNikKCgkJCQlyZXBlYXQKCQkJCQlpZiB0YXJnZXRTZXR0aW5nID09ICJzZWxlY3QiIHRoZW4KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN1Y2Nlc3NmdWxseSBzd2l0Y2hlZCB0aGUgdGFyZ2V0IHNldHRpbmcgdG8gc2VsZWN0ISIKCQkJCQllbHNlaWYgdGFyZ2V0U2V0dGluZyA9PSAiY2xvc2VzdCIgdGhlbgoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3VjY2Vzc2Z1bGx5IHN3aXRjaGVkIHRoZSB0YXJnZXQgc2V0dGluZyB0byBjbG9zZXN0ISIKCQkJCQkJd2FpdCgyKQoJCQkJCQl3aGlsZSB0YXJnZXRTZXR0aW5nID09ICJjbG9zZXN0IiBkbwoJCQkJCQkJbG9jYWwgbmVhcmVzdFBsYXllcnMgPSB7fQoKCQkJCQkJCWZvciBpLCB2IGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCgkJCQkJCQkJaWYgZ2V0SFJQKHYuQ2hhcmFjdGVyKSBhbmQgZ2V0SFJQKHBsYXllci5DaGFyYWN0ZXIpIGFuZCB2IH49IHBsYXllciB0aGVuCgkJCQkJCQkJCWlmIHNtYXJ0QXR0YWNrIHRoZW4KCQkJCQkJCQkJCWlmIG5vdCB2LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRm9yY2VGaWVsZCIpIHRoZW4KCQkJCQkJCQkJCQlsb2NhbCBkaXN0YW5jZSA9IChnZXRIUlAodi5DaGFyYWN0ZXIpLlBvc2l0aW9uIC0gZ2V0SFJQKHBsYXllci5DaGFyYWN0ZXIpLlBvc2l0aW9uKS5NYWduaXR1ZGUKCgkJCQkJCQkJCQkJdGFibGUuaW5zZXJ0KG5lYXJlc3RQbGF5ZXJzLCB7di5OYW1lLCBkaXN0YW5jZX0pCgkJCQkJCQkJCQllbmQKCQkJCQkJCQkJZWxzZQoJCQkJCQkJCQkJbG9jYWwgZGlzdGFuY2UgPSAoZ2V0SFJQKHYuQ2hhcmFjdGVyKS5Qb3NpdGlvbiAtIGdldEhSUChwbGF5ZXIuQ2hhcmFjdGVyKS5Qb3NpdGlvbikuTWFnbml0dWRlCgoJCQkJCQkJCQkJdGFibGUuaW5zZXJ0KG5lYXJlc3RQbGF5ZXJzLCB7di5OYW1lLCBkaXN0YW5jZX0pCgkJCQkJCQkJCWVuZAoJCQkJCQkJCWVuZAoJCQkJCQkJZW5kCgoJCQkJCQkJdGFibGUuc29ydChuZWFyZXN0UGxheWVycywgCgkJCQkJCQkJZnVuY3Rpb24oYSwgYikKCQkJCQkJCQkJcmV0dXJuIGFbMl0gPCBiWzJdCgkJCQkJCQkJZW5kCgkJCQkJCQkpCgoJCQkJCQkJdGFyZ2V0ID0gbmVhcmVzdFBsYXllcnNbMV1bMV0gb3IgcGxheWVyLk5hbWUKCgkJCQkJCQlpZiB0YXJnZXQgfj0gcGxheWVyLk5hbWUgdGhlbgoJCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8ICIgLi4gdGFyZ2V0CgkJCQkJCQllbHNlCgkJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgKE5vbmUpIgoJCQkJCQkJZW5kCgoJCQkJCQkJd2FpdCgpCgkJCQkJCWVuZAoJCQkJCWVsc2VpZiB0YXJnZXRTZXR0aW5nID09ICJmYXJ0aGVzdCIgdGhlbgoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3VjY2Vzc2Z1bGx5IHN3aXRjaGVkIHRoZSB0YXJnZXQgc2V0dGluZyB0byBmYXJ0aGVzdCEiCgkJCQkJCXdhaXQoMikKCQkJCQkJd2hpbGUgdGFyZ2V0U2V0dGluZyA9PSAiZmFydGhlc3QiIGRvCgkJCQkJCQlsb2NhbCBuZWFyZXN0UGxheWVycyA9IHt9CgoJCQkJCQkJZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KCQkJCQkJCQlpZiBnZXRIUlAodi5DaGFyYWN0ZXIpIGFuZCBnZXRIUlAocGxheWVyLkNoYXJhY3RlcikgYW5kIHYgfj0gcGxheWVyIHRoZW4KCQkJCQkJCQkJaWYgc21hcnRBdHRhY2sgdGhlbgoJCQkJCQkJCQkJaWYgbm90IHYuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGb3JjZUZpZWxkIikgdGhlbgoJCQkJCQkJCQkJCWxvY2FsIGRpc3RhbmNlID0gKGdldEhSUCh2LkNoYXJhY3RlcikuUG9zaXRpb24gLSBnZXRIUlAocGxheWVyLkNoYXJhY3RlcikuUG9zaXRpb24pLk1hZ25pdHVkZQoKCQkJCQkJCQkJCQl0YWJsZS5pbnNlcnQobmVhcmVzdFBsYXllcnMsIHt2Lk5hbWUsIGRpc3RhbmNlfSkKCQkJCQkJCQkJCWVuZAoJCQkJCQkJCQllbHNlCgkJCQkJCQkJCQlsb2NhbCBkaXN0YW5jZSA9IChnZXRIUlAodi5DaGFyYWN0ZXIpLlBvc2l0aW9uIC0gZ2V0SFJQKHBsYXllci5DaGFyYWN0ZXIpLlBvc2l0aW9uKS5NYWduaXR1ZGUKCgkJCQkJCQkJCQl0YWJsZS5pbnNlcnQobmVhcmVzdFBsYXllcnMsIHt2Lk5hbWUsIGRpc3RhbmNlfSkKCQkJCQkJCQkJZW5kCgkJCQkJCQkJZW5kCgkJCQkJCQllbmQKCgkJCQkJCQl0YWJsZS5zb3J0KG5lYXJlc3RQbGF5ZXJzLCAKCQkJCQkJCQlmdW5jdGlvbihhLCBiKQoJCQkJCQkJCQlyZXR1cm4gYVsyXSA+IGJbMl0KCQkJCQkJCQllbmQKCQkJCQkJCSkKCgkJCQkJCQl0YXJnZXQgPSBuZWFyZXN0UGxheWVyc1sxXVsxXSBvciBwbGF5ZXIuTmFtZQoKCQkJCQkJCWlmIHRhcmdldCB+PSBwbGF5ZXIuTmFtZSB0aGVuCgkJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgIiAuLiB0YXJnZXQKCQkJCQkJCWVsc2UKCQkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoTm9uZSkiCgkJCQkJCQllbmQKCgkJCQkJCQl3YWl0KCkKCQkJCQkJZW5kCgkJCQkJZWxzZWlmIHRhcmdldFNldHRpbmcgPT0gImxvd2hwIiB0aGVuCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJTdWNjZXNzZnVsbHkgc3dpdGNoZWQgdGhlIHRhcmdldCBzZXR0aW5nIHRvIGxvd2hwISIKCQkJCQkJd2FpdCgyKQoJCQkJCQl3aGlsZSB0YXJnZXRTZXR0aW5nID09ICJsb3docCIgZG8KCQkJCQkJCWxvY2FsIG5lYXJlc3RQbGF5ZXJzID0ge30KCgkJCQkJCQlmb3IgaSwgdiBpbiBwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbwoJCQkJCQkJCWlmIGdldEhVTSh2LkNoYXJhY3RlcikgYW5kIGdldEhVTShwbGF5ZXIuQ2hhcmFjdGVyKSBhbmQgdiB+PSBwbGF5ZXIgdGhlbgoJCQkJCQkJCQlpZiBzbWFydEF0dGFjayB0aGVuCgkJCQkJCQkJCQlpZiBub3Qgdi5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZvcmNlRmllbGQiKSB0aGVuCgkJCQkJCQkJCQkJbG9jYWwgaGVhbHRoID0gZ2V0SFVNKHYuQ2hhcmFjdGVyKS5IZWFsdGgKCgkJCQkJCQkJCQkJdGFibGUuaW5zZXJ0KG5lYXJlc3RQbGF5ZXJzLCB7di5OYW1lLCBoZWFsdGh9KQoJCQkJCQkJCQkJZW5kCgkJCQkJCQkJCWVsc2UKCQkJCQkJCQkJCWxvY2FsIGhlYWx0aCA9IGdldEhVTSh2LkNoYXJhY3RlcikuSGVhbHRoCgoJCQkJCQkJCQkJdGFibGUuaW5zZXJ0KG5lYXJlc3RQbGF5ZXJzLCB7di5OYW1lLCBoZWFsdGh9KQoJCQkJCQkJCQllbmQKCQkJCQkJCQllbmQKCQkJCQkJCWVuZAoKCQkJCQkJCXRhYmxlLnNvcnQobmVhcmVzdFBsYXllcnMsIAoJCQkJCQkJCWZ1bmN0aW9uKGEsIGIpCgkJCQkJCQkJCXJldHVybiBhWzJdIDwgYlsyXQoJCQkJCQkJCWVuZAoJCQkJCQkJKQoKCQkJCQkJCXRhcmdldCA9IG5lYXJlc3RQbGF5ZXJzWzFdWzFdIG9yIHBsYXllci5OYW1lCgoJCQkJCQkJaWYgdGFyZ2V0IH49IHBsYXllci5OYW1lIHRoZW4KCQkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAiIC4uIHRhcmdldAoJCQkJCQkJZWxzZQoJCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8IChOb25lKSIKCQkJCQkJCWVuZAoKCQkJCQkJCXdhaXQoKQoJCQkJCQllbmQKCQkJCQllbHNlaWYgdGFyZ2V0U2V0dGluZyA9PSAiaGlnaGhwIiB0aGVuCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJTdWNjZXNzZnVsbHkgc3dpdGNoZWQgdGhlIHRhcmdldCBzZXR0aW5nIHRvIGhpZ2hocCEiCgkJCQkJCXdhaXQoMikKCQkJCQkJd2hpbGUgdGFyZ2V0U2V0dGluZyA9PSAiaGlnaGhwIiBkbwoJCQkJCQkJbG9jYWwgbmVhcmVzdFBsYXllcnMgPSB7fQoKCQkJCQkJCWZvciBpLCB2IGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCgkJCQkJCQkJaWYgZ2V0SFVNKHYuQ2hhcmFjdGVyKSBhbmQgZ2V0SFVNKHBsYXllci5DaGFyYWN0ZXIpIGFuZCB2IH49IHBsYXllciB0aGVuCgkJCQkJCQkJCWlmIHNtYXJ0QXR0YWNrIHRoZW4KCQkJCQkJCQkJCWlmIG5vdCB2LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRm9yY2VGaWVsZCIpIHRoZW4KCQkJCQkJCQkJCQlsb2NhbCBoZWFsdGggPSBnZXRIVU0odi5DaGFyYWN0ZXIpLkhlYWx0aAoKCQkJCQkJCQkJCQl0YWJsZS5pbnNlcnQobmVhcmVzdFBsYXllcnMsIHt2Lk5hbWUsIGhlYWx0aH0pCgkJCQkJCQkJCQllbmQKCQkJCQkJCQkJZWxzZQoJCQkJCQkJCQkJbG9jYWwgaGVhbHRoID0gZ2V0SFVNKHYuQ2hhcmFjdGVyKS5IZWFsdGgKCgkJCQkJCQkJCQl0YWJsZS5pbnNlcnQobmVhcmVzdFBsYXllcnMsIHt2Lk5hbWUsIGhlYWx0aH0pCgkJCQkJCQkJCWVuZAoJCQkJCQkJCWVuZAoJCQkJCQkJZW5kCgoJCQkJCQkJdGFibGUuc29ydChuZWFyZXN0UGxheWVycywgCgkJCQkJCQkJZnVuY3Rpb24oYSwgYikKCQkJCQkJCQkJcmV0dXJuIGFbMl0gPiBiWzJdCgkJCQkJCQkJZW5kCgkJCQkJCQkpCgoJCQkJCQkJdGFyZ2V0ID0gbmVhcmVzdFBsYXllcnNbMV1bMV0gb3IgcGxheWVyLk5hbWUKCgkJCQkJCQlpZiB0YXJnZXQgfj0gcGxheWVyLk5hbWUgdGhlbgoJCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8ICIgLi4gdGFyZ2V0CgkJCQkJCQllbHNlCgkJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgKE5vbmUpIgoJCQkJCQkJZW5kCgoJCQkJCQkJd2FpdCgpCgkJCQkJCWVuZAoJCQkJCWVsc2UKCQkJCQkJdGFyZ2V0U2V0dGluZyA9ICJzZWxlY3QiCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJJbnZhbGlkIHRhcmdldCBzZXR0aW5nISBEaWQgeW91IHNwZWNpZnkgc2VsZWN0LCBjbG9zZXN0LCBmYXJ0aGVzdCwgbG93aHAsIG9yIGhpZ2hocD8gU2V0dGluZyBoYXMgYmVlbiBzZXQgdG8gc2VsZWN0LiIKCQkJCQllbmQKCQkJCXVudGlsIHRhcmdldFNldHRpbmcgPT0gInNlbGVjdCIKCgkJCQl0YXJnZXQgPSBwbGF5ZXIuTmFtZQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA1KSA9PSAocHJlZml4IC4uICJsb29wIikgdGhlbgoJCQkJaWYgc3RyaW5nLnN1Yih0ZXh0LCA3LCA3KSA9PSAoInQiKSBvciBzdHJpbmcuc3ViKHRleHQsIDcsIDgpID09ICgib24iKSB0aGVuCgkJCQkJaWYgbG9vcGluZyA9PSB0cnVlIHRoZW4KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkxvb3BpbmcgYXR0YWNrcyBpcyBhbHJlYWR5IG9uISIKCQkJCQllbHNlCgkJCQkJCWxvb3BpbmcgPSB0cnVlCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJTdGFydGVkIGxvb3BpbmcgYXR0YWNrcyEiCgkJCQkJZW5kCgkJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCA3LCA3KSA9PSAoImYiKSBvciBzdHJpbmcuc3ViKHRleHQsIDcsIDkpID09ICgib2ZmIikgdGhlbgoJCQkJCWlmIGxvb3BpbmcgPT0gZmFsc2UgdGhlbgoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiTG9vcGluZyBhdHRhY2tzIGlzIGFscmVhZHkgb2ZmISIKCQkJCQllbHNlCgkJCQkJCWxvb3BpbmcgPSBmYWxzZQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3RvcHBlZCBsb29waW5nIGF0dGFja3MhIgoJCQkJCWVuZAoJCQkJZWxzZQoJCQkJCWxvb3BpbmcgPSBub3QgbG9vcGluZwoJCQkJCWxvY2FsIE9uT3JPZmYgPSAiT24iCgkJCQkJaWYgbG9vcGluZyA9PSBmYWxzZSB0aGVuCgkJCQkJCU9uT3JPZmYgPSAiT2ZmIgoJCQkJCWVuZAoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJUb2dnbGVkIGxvb3BpbmcgYXR0YWNrcyAoIiAuLiBPbk9yT2ZmIC4uICIpISIKCQkJCWVuZAoKCQkJCXNwYXduKGZ1bmN0aW9uKCkKCQkJCQl3aGlsZSBsb29waW5nIGRvCgkJCQkJCWV4cGxvaXQoKQoJCQkJCQl3YWl0KCkKCQkJCQllbmQKCQkJCQlyZXR1cm4KCQkJCWVuZCkKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgOCkgPT0gKHByZWZpeCAuLiAidW5icmVhayIpIHRoZW4KCQkJCWJyZWFrYWJsZSA9IGZhbHNlCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDkpID09IChwcmVmaXggLi4gImdyY2hhcmdlIikgdGhlbgoJCQkJR1JDaGFyZ2UgPSB0b251bWJlcihzdHJpbmcuc3ViKHRleHQsIDExKSkKCQkJCXdhaXQoKQoJCQkJaWYgR1JDaGFyZ2UgPT0gbmlsIHRoZW4KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiSW52YWxpZCBBcmd1bWVudHMhIERpZCB5b3UgZW50ZXIgYW4gaW50ZWdlcj8iCgkJCQllbHNlCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN1Y2Nlc3NmdWxseSBzZXQgdGhlIGNoYXJnZSB0byAiIC4uIEdSQ2hhcmdlIC4uICIhIgoJCQkJZW5kCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDYpID09IChwcmVmaXggLi4gInNwZWVkIikgdGhlbgoJCQkJU2V0U3BlZWQgPSB0b251bWJlcihzdHJpbmcuc3ViKHRleHQsIDgpKQoJCQkJd2FpdCgpCgkJCQlpZiBTZXRTcGVlZCA9PSBuaWwgdGhlbgoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJJbnZhbGlkIEFyZ3VtZW50cyEgRGlkIHlvdSBlbnRlciBhbiBpbnRlZ2VyPyIKCQkJCWVsc2UKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3VjY2Vzc2Z1bGx5IHNldCB0aGUgc3BlZWQgdG8gIiAuLiBTZXRTcGVlZCAuLiAiISIKCQkJCWVuZAoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAxMikgPT0gKHByZWZpeCAuLiAic21hcnRhdHRhY2siKSB0aGVuCgkJCQlpZiBzdHJpbmcuc3ViKHRleHQsIDE0LCAxNCkgPT0gKCJ0Iikgb3Igc3RyaW5nLnN1Yih0ZXh0LCAxNCwgMTUpID09ICgib24iKSB0aGVuCgkJCQkJaWYgc21hcnRBdHRhY2sgPT0gdHJ1ZSB0aGVuCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJGb3JjZWZpZWxkIGRldGVjdGlvbiBpcyBhbHJlYWR5IG9uISIKCQkJCQllbHNlCgkJCQkJCXNtYXJ0QXR0YWNrID0gdHJ1ZQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiTm93IGRldGVjdGluZyBmb3JjZWZpZWxkcyEiCgkJCQkJZW5kCgkJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxNCwgMTQpID09ICgiZiIpIG9yIHN0cmluZy5zdWIodGV4dCwgMTQsIDE2KSA9PSAoIm9mZiIpIHRoZW4KCQkJCQlpZiBzbWFydEF0dGFjayA9PSBmYWxzZSB0aGVuCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJGb3JjZWZpZWxkIGRldGVjdGlvbiBpcyBhbHJlYWR5IG9mZiEiCgkJCQkJZWxzZQoJCQkJCQlzbWFydEF0dGFjayA9IGZhbHNlCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJTdG9wcGVkIGRldGVjdGluZyBmb3JjZWZpZWxkcyEiCgkJCQkJZW5kCgkJCQllbHNlCgkJCQkJc21hcnRBdHRhY2sgPSBub3Qgc21hcnRBdHRhY2sKCQkJCQlsb2NhbCBPbk9yT2ZmID0gIk9uIgoJCQkJCWlmIHNtYXJ0QXR0YWNrID09IGZhbHNlIHRoZW4KCQkJCQkJT25Pck9mZiA9ICJPZmYiCgkJCQkJZW5kCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlRvZ2dsZWQgZm9yY2VmaWVsZCBkZXRlY3Rpb24gKCIgLi4gT25Pck9mZiAuLiAiKSEiCgkJCQllbmQKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMTApID09IChwcmVmaXggLi4gImdhbWVjb2xvciIpIHRoZW4KCQkJCWlmIG5vdCBnYW1lLkxpZ2h0aW5nOkZpbmRGaXJzdENoaWxkKCJFQkdHdWlDb2xvckNvcnJlY3Rpb24iKSB0aGVuCgkJCQkJSW5zdGFuY2UubmV3KCJDb2xvckNvcnJlY3Rpb25FZmZlY3QiLCBnYW1lLkxpZ2h0aW5nKS5OYW1lID0gIkVCR0d1aUNvbG9yQ29ycmVjdGlvbiIKCQkJCQl3YWl0KCkKCQkJCWVuZAoKCQkJCWlmIHN0cmluZy5zdWIodGV4dCwgMTIsIDE3KSA9PSAibm9ybWFsIiB0aGVuCgkJCQkJZ2FtZS5MaWdodGluZy5FQkdHdWlDb2xvckNvcnJlY3Rpb24uQ29udHJhc3QgPSAwCgkJCQkJZ2FtZS5MaWdodGluZy5FQkdHdWlDb2xvckNvcnJlY3Rpb24uU2F0dXJhdGlvbiA9IDAKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiUmV2ZXJ0aW5nLi4uIgoJCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMTIsIDIwKSA9PSAiZ3JheXNjYWxlIiB0aGVuCgkJCQkJZ2FtZS5MaWdodGluZy5FQkdHdWlDb2xvckNvcnJlY3Rpb24uU2F0dXJhdGlvbiA9IC0xCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkdyYXlzY2FsaW5nLi4uIgoJCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMTIsIDIwKSA9PSAiaW52ZXJ0aHVlIiB0aGVuCgkJCQkJZ2FtZS5MaWdodGluZy5FQkdHdWlDb2xvckNvcnJlY3Rpb24uU2F0dXJhdGlvbiA9IC0yCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkludmVydGluZyBodWUuLi4iCgkJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxMiwgMjApID09ICJpbnZlcnRhbGwiIHRoZW4KCQkJCQlnYW1lLkxpZ2h0aW5nLkVCR0d1aUNvbG9yQ29ycmVjdGlvbi5Db250cmFzdCA9IC0yCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkludmVydGluZyBhbGwuLi4iCgkJCQllbHNlCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkludmFsaWQgY29sb3IgbW9kZSAob3Igbm9uZSBzcGVjaWZpZWQpISIKCQkJCWVuZAoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAxMCkgPT0gKHByZWZpeCAuLiAiYmxhY2tjYXN0IikgdGhlbgoJCQkJaWYgc3RyaW5nLnN1Yih0ZXh0LCAxMiwgMTIpID09ICgidCIpIG9yIHN0cmluZy5zdWIodGV4dCwgMTIsIDEzKSA9PSAoIm9uIikgdGhlbgoJCQkJCWlmIGJsYWNrY2FzdEVuYWJsZWQgPT0gdHJ1ZSB0aGVuCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJCbGFjayBjYXN0aW5nIGlzIGFscmVhZHkgb24hIgoJCQkJCWVsc2UKCQkJCQkJYmxhY2tjYXN0RW5hYmxlZCA9IHRydWUKCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkJsYWNrIGNhc3RpbmcgZW5hYmxlZCEiCgkJCQkJZW5kCgkJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxMiwgMTIpID09ICgiZiIpIG9yIHN0cmluZy5zdWIodGV4dCwgMTIsIDE0KSA9PSAoIm9mZiIpIHRoZW4KCQkJCQlpZiBibGFja2Nhc3RFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkJsYWNrIGNhc3RpbmcgaXMgYWxyZWFkeSBvZmYhIgoJCQkJCWVsc2UKCQkJCQkJYmxhY2tjYXN0RW5hYmxlZCA9IGZhbHNlCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJCbGFjayBjYXN0aW5nIGRpc2FibGVkISIKCQkJCQllbmQKCQkJCWVsc2UKCQkJCQlibGFja2Nhc3RFbmFibGVkID0gbm90IGJsYWNrY2FzdEVuYWJsZWQKCQkJCQlsb2NhbCBPbk9yT2ZmID0gIk9uIgoJCQkJCWlmIGJsYWNrY2FzdEVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQkJCQlPbk9yT2ZmID0gIk9mZiIKCQkJCQllbmQKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiVG9nZ2xlZCBibGFjayBjYXN0aW5nICgiIC4uIE9uT3JPZmYgLi4gIikhIgoJCQkJZW5kCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDUpID09IChwcmVmaXggLi4gInN0dW4iKSB0aGVuCgkJCQlpZiBzdHJpbmcuc3ViKHRleHQsIDcsIDcpID09ICgidCIpIG9yIHN0cmluZy5zdWIodGV4dCwgNywgOCkgPT0gKCJvbiIpIHRoZW4KCQkJCQlpZiBzdHVuRW5hYmxlZCA9PSB0cnVlIHRoZW4KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN0dW4gaXMgYWxyZWFkeSBvbiEiCgkJCQkJZWxzZQoJCQkJCQlzdHVuRW5hYmxlZCA9IHRydWUKCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN0dW4gZW5hYmxlZCEiCgkJCQkJZW5kCgkJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCA3LCA3KSA9PSAoImYiKSBvciBzdHJpbmcuc3ViKHRleHQsIDcsIDkpID09ICgib2ZmIikgdGhlbgoJCQkJCWlmIHN0dW5FbmFibGVkID09IGZhbHNlIHRoZW4KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN0dW4gaXMgYWxyZWFkeSBvZmYhIgoJCQkJCWVsc2UKCQkJCQkJc3R1bkVuYWJsZWQgPSBmYWxzZQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiU3R1biBkaXNhYmxlZCEiCgkJCQkJZW5kCgkJCQllbHNlCgkJCQkJc3R1bkVuYWJsZWQgPSBub3Qgc3R1bkVuYWJsZWQKCQkJCQlsb2NhbCBPbk9yT2ZmID0gIk9uIgoJCQkJCWlmIHN0dW5FbmFibGVkID09IGZhbHNlIHRoZW4KCQkJCQkJT25Pck9mZiA9ICJPZmYiCgkJCQkJCWZvciBpLCBjb25uZWN0aW9uIGluIHBhaXJzKHN0dW5Db25uZWN0aW9uKSBkbwoJCQkJCQkJY29ubmVjdGlvbjpEaXNhYmxlKCkKCQkJCQkJZW5kCgkJCQkJZWxzZQoJCQkJCQlmb3IgaSwgY29ubmVjdGlvbiBpbiBwYWlycyhzdHVuQ29ubmVjdGlvbikgZG8KCQkJCQkJCWNvbm5lY3Rpb246RW5hYmxlKCkKCQkJCQkJZW5kCgkJCQkJZW5kCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlRvZ2dsZWQgc3R1biAoIiAuLiBPbk9yT2ZmIC4uICIpISIKCQkJCWVuZAoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA2KSA9PSAocHJlZml4IC4uICJkcnVncyIpIHRoZW4KCQkJCWlmIHN0cmluZy5zdWIodGV4dCwgOCwgOCkgPT0gKCJ0Iikgb3Igc3RyaW5nLnN1Yih0ZXh0LCA4LCA5KSA9PSAoIm9uIikgdGhlbgoJCQkJCWlmIGRydWdzRW5hYmxlZCA9PSB0cnVlIHRoZW4KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkRydWcgbW9kZSBpcyBhbHJlYWR5IG9uISIKCQkJCQllbHNlCgkJCQkJCWRydWdzRW5hYmxlZCA9IHRydWUKCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkRydWcgbW9kZSBlbmFibGVkISIKCQkJCQllbmQKCQkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDgsIDgpID09ICgiZiIpIG9yIHN0cmluZy5zdWIodGV4dCwgOCwgMTApID09ICgib2ZmIikgdGhlbgoJCQkJCWlmIGRydWdzRW5hYmxlZCA9PSBmYWxzZSB0aGVuCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJEcnVnIG1vZGUgaXMgYWxyZWFkeSBvZmYhIgoJCQkJCWVsc2UKCQkJCQkJZHJ1Z3NFbmFibGVkID0gZmFsc2UKCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkRydWcgbW9kZSBkaXNhYmxlZCEiCgkJCQkJZW5kCgkJCQllbHNlCgkJCQkJZHJ1Z3NFbmFibGVkID0gbm90IGRydWdzRW5hYmxlZAoJCQkJCWxvY2FsIE9uT3JPZmYgPSAiT24iCgkJCQkJaWYgZHJ1Z3NFbmFibGVkID09IGZhbHNlIHRoZW4KCQkJCQkJT25Pck9mZiA9ICJPZmYiCgkJCQkJZW5kCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlRvZ2dsZWQgZHJ1ZyBtb2RlICgiIC4uIE9uT3JPZmYgLi4gIikhIgoJCQkJZW5kCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDExKSA9PSAocHJlZml4IC4uICJtYWdpY2NvbG9yIikgdGhlbgoJCQkJbG9jYWwgc3RyaW5nYXJncyA9IHN0cmluZy5zdWIodGV4dCwgMTMpCgkJCQlsb2NhbCBhcmdzID0gc3BsaXRBcmdzKHN0cmluZ2FyZ3MpCgoJCQkJaWYgKGFyZ3NbMV0gPT0gInQiKSBvciAoYXJnc1sxXSA9PSAib24iKSB0aGVuCgkJCQkJaWYgKGNvbG9yMSB+PSBuaWwpIGFuZCAoY29sb3IyIH49IG5pbCkgYW5kIChjb2xvcjMgfj0gbmlsKSB0aGVuCgkJCQkJCWlmIGNvbG9yc0VuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQkJCQkJY29sb3JzRW5hYmxlZCA9IHRydWUKCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXN0b20gbWFnaWMgY29sb3IgZW5hYmxlZCEiCgkJCQkJCWVsc2UKCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXN0b20gbWFnaWMgY29sb3IgaXMgYWxyZWFkeSBvbiEiCgkJCQkJCWVuZAoJCQkJCWVsc2UKCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIllvdSBtdXN0IGhhdmUgY29sb3JzIHNldCB3aXRoIHRoaXMgY29tbWFuZCBiZWZvcmUgdHVybmluZyBpdCBiYWNrIG9uISIKCQkJCQllbmQKCQkJCWVsc2VpZiAoYXJnc1sxXSA9PSAiZiIpIG9yIChhcmdzWzFdID09ICJvZmYiKSB0aGVuCgkJCQkJaWYgY29sb3JzRW5hYmxlZCA9PSB0cnVlIHRoZW4KCQkJCQkJY29sb3JzRW5hYmxlZCA9IGZhbHNlCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXN0b20gbWFnaWMgY29sb3IgZGlzYWJsZWQhIgoJCQkJCWVsc2UKCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1c3RvbSBtYWdpYyBjb2xvciBpcyBhbHJlYWR5IG9mZiEiCgkJCQkJZW5kCgkJCQllbHNlCgkJCQkJYXJnc1sxXSA9IHRvbnVtYmVyKGFyZ3NbMV0pCgkJCQkJYXJnc1syXSA9IHRvbnVtYmVyKGFyZ3NbMl0pCgkJCQkJYXJnc1szXSA9IHRvbnVtYmVyKGFyZ3NbM10pCgoJCQkJCWlmIG5vdCBhcmdzWzNdIHRoZW4KCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkludmFsaWQgQXJndW1lbnRzISBEaWQgeW91IHNwZWNpZnkgUiwgRywgYW5kIEIgdmFsdWVzPyIKCQkJCQllbHNlCgkJCQkJCWlmIChhcmdzWzFdIH49IG5pbCkgYW5kIChhcmdzWzJdIH49IG5pbCkgYW5kIChhcmdzWzNdIH49IG5pbCkgdGhlbgoJCQkJCQkJbG9jYWwgZXhlY3V0YWJsZSA9IHRydWUKCgkJCQkJCQlmb3IgaSA9IDEsIDMsIDEgZG8KCQkJCQkJCQlpZiAoYXJnc1tpXSA8IDApIG9yIChhcmdzW2ldID4gMjU1KSB0aGVuCgkJCQkJCQkJCWV4ZWN1dGFibGUgPSBmYWxzZQoJCQkJCQkJCQlicmVhawoJCQkJCQkJCWVuZAoJCQkJCQkJZW5kCgoJCQkJCQkJaWYgZXhlY3V0YWJsZSA9PSB0cnVlIHRoZW4KCQkJCQkJCQljb2xvcjEgPSBhcmdzWzFdCgkJCQkJCQkJY29sb3IyID0gYXJnc1syXQoJCQkJCQkJCWNvbG9yMyA9IGFyZ3NbM10KCgkJCQkJCQkJY29sb3JzRW5hYmxlZCA9IHRydWUKCQkJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VzdG9tIG1hZ2ljIGNvbG9yIHdhcyBzZXQgdG8gIiAuLiBjb2xvcjEgLi4gIiwgIiAuLiBjb2xvcjIgLi4gIiwgYW5kICIgLi4gY29sb3IzIC4uICIhIgoJCQkJCQkJZWxzZQoJCQkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJJbnZhbGlkIEFyZ3VtZW50cyEgVGhlIG51bWJlcnMgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDI1NSEiCgkJCQkJCQllbmQKCQkJCQkJZWxzZQoJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkludmFsaWQgQXJndW1lbnRzISBQbGVhc2UgdXNlIG51bWJlcnMgdG8gc3BlY2lmeSBSLCBHLCBhbmQgQiB2YWx1ZXMuIgoJCQkJCQllbmQKCQkJCQllbmQKCQkJCWVuZAoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA3KSA9PSAocHJlZml4IC4uICJjb2xvcnMiKSB0aGVuCgkJCQlnYW1lLldvcmtzcGFjZS5EZXNjZW5kYW50QWRkZWQ6Q29ubmVjdChmdW5jdGlvbihkKQoJCQkJCXNwYXduKGZ1bmN0aW9uKCkgCgkJCQkJCXBjYWxsKGZ1bmN0aW9uKCkKCQkJCQkJCXdoaWxlIHRydWUgZG8KCQkJCQkJCQlpZiBkLlBhcmVudCB+PSBuaWwgdGhlbgoJCQkJCQkJCQlpZiBkcnVnc0VuYWJsZWQgdGhlbgoJCQkJCQkJCQkJZC5Db2xvciA9IENvbG9yMy5mcm9tUkdCKG1hdGgucmFuZG9tKDAsIDI1NSksIG1hdGgucmFuZG9tKDAsIDI1NSksIG1hdGgucmFuZG9tKDAsIDI1NSkpCgkJCQkJCQkJCQl3YWl0KChtYXRoLnJhbmRvbSgxLCA1KSkvMTApCgkJCQkJCQkJCWVsc2VpZiBjb2xvcnNFbmFibGVkIHRoZW4KCQkJCQkJCQkJCWlmIG5vdCB0YWJsZS5maW5kKGNvbG9yRXhjbHVkZSwgZC5OYW1lKSB0aGVuIAoJCQkJCQkJCQkJCWQuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQihjb2xvcjEsIGNvbG9yMiwgY29sb3IzKQoJCQkJCQkJCQkJCXdhaXQoKQoJCQkJCQkJCQkJZWxzZSBicmVhayBlbmQKCQkJCQkJCQkJZWxzZQoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJZW5kCgkJCQkJCQkJZWxzZQoJCQkJCQkJCQlicmVhawoJCQkJCQkJCWVuZAoJCQkJCQkJZW5kCgkJCQkJCWVuZCkKCQkJCQllbmQpCgoJCQkJCXNwYXduKGZ1bmN0aW9uKCkKCQkJCQkJcGNhbGwoZnVuY3Rpb24oKQoJCQkJCQkJaWYgKGJsYWNrY2FzdEVuYWJsZWQgPT0gdHJ1ZSkgYW5kIChkLlBhcmVudCB+PSBuaWwpIHRoZW4KCQkJCQkJCQlmb3IgaSwgdiBpbiBwYWlycyhkOkdldENoaWxkcmVuKCkpIGRvCgkJCQkJCQkJCWlmIHY6SXNBKCJEZWNhbCIpIHRoZW4KCQkJCQkJCQkJCXYuQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCkKCQkJCQkJCQkJZW5kCgkJCQkJCQkJZW5kCgkJCQkJCQllbmQKCQkJCQkJZW5kKQoJCQkJCWVuZCkKCgkJCQkJc3Bhd24oZnVuY3Rpb24oKQoJCQkJCQlwY2FsbChmdW5jdGlvbigpCgkJCQkJCQlpZiBkOklzQSgiUGFydGljbGVFbWl0dGVyIikgdGhlbgkJCQoJCQkJCQkJCXdoaWxlIHRydWUgZG8KCQkJCQkJCQkJaWYgZC5QYXJlbnQgfj0gbmlsIHRoZW4KCQkJCQkJCQkJCWlmIGRydWdzRW5hYmxlZCB0aGVuCgkJCQkJCQkJCQkJZC5Db2xvciA9IENvbG9yU2VxdWVuY2UubmV3ewoJCQkJCQkJCQkJCQlDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAsIENvbG9yMy5uZXcobWF0aC5yYW5kb20oMCwgMjU1KS8yNTUsIG1hdGgucmFuZG9tKDAsIDI1NSkvMjU1LCBtYXRoLnJhbmRvbSgwLCAyNTUpLzI1NSkpLAoJCQkJCQkJCQkJCQlDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDEsIENvbG9yMy5uZXcobWF0aC5yYW5kb20oMCwgMjU1KS8yNTUsIG1hdGgucmFuZG9tKDAsIDI1NSkvMjU1LCBtYXRoLnJhbmRvbSgwLCAyNTUpLzI1NSkpCgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCXdhaXQoKG1hdGgucmFuZG9tKDEsIDUpKS8xMCkKCQkJCQkJCQkJCWVsc2VpZiBjb2xvcnNFbmFibGVkIHRoZW4KCQkJCQkJCQkJCQlkLkNvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXd7CgkJCQkJCQkJCQkJCUNvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMCwgQ29sb3IzLm5ldyhjb2xvcjEvMjU1LCBjb2xvcjIvMjU1LCBjb2xvcjMvMjU1KSksCgkJCQkJCQkJCQkJCUNvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMSwgQ29sb3IzLm5ldyhjb2xvcjEvMjU1LCBjb2xvcjIvMjU1LCBjb2xvcjMvMjU1KSkKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJd2FpdCgpCgkJCQkJCQkJCQllbHNlCgkJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJCWVuZAoJCQkJCQkJCQllbHNlCgkJCQkJCQkJCQlicmVhawoJCQkJCQkJCQllbmQKCQkJCQkJCQllbmQKCQkJCQkJCWVuZAoJCQkJCQllbmQpCgkJCQkJZW5kKQoJCQkJZW5kKQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA1KSA9PSAocHJlZml4IC4uICJoZWFsIikgdGhlbgoJCQkJbG9jYWwgc3RyaW5nYXJncyA9IHN0cmluZy5zdWIodGV4dCwgNykKCQkJCWxvY2FsIGFyZ3MgPSBzcGxpdEFyZ3Moc3RyaW5nYXJncykKCgkJCQlpZiBhcmdzWzFdIHRoZW4JCQkJCgkJCQkJaWYgKCMoZmluZFBsYXllcihhcmdzWzFdKSkgPT0gMSkgdGhlbgoJCQkJCQlsb2NhbCBoZWFsaW5nUGxheWVyID0gZmluZFBsYXllcihhcmdzWzFdKVsxXQoJCQkJCQlsb2NhbCBjaHIgPSBnYW1lLlBsYXllcnNbaGVhbGluZ1BsYXllcl0uQ2hhcmFjdGVyCgoJCQkJCQlpZiBjaHIgdGhlbgoJCQkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkhlYWxpbmcgIiAuLiBmaW5kUGxheWVyKGFyZ3NbMV0pWzFdIC4uICIuLi4iCgkJCQkJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJDcnlzdGFsIiwgIkdsZWFtaW5nIEhhcm1vbnkiKQoJCQkJCQkJUlNSLkRvTWFnaWM6SW52b2tlU2VydmVyKCJDcnlzdGFsIiwgIkdsZWFtaW5nIEhhcm1vbnkiLCBjaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikKCQkJCQkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIlBob2VuaXgiLCAiQmx1ZSBBcnNvbiIpCgkJCQkJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIlBob2VuaXgiLCAiQmx1ZSBBcnNvbiIsIGNoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKQoJCQkJCQkJaWYgY2hyID09IHBsYXllci5DaGFyYWN0ZXIgdGhlbgoJCQkJCQkJCVJTUi5Eb0NsaWVudE1hZ2ljOkZpcmVTZXJ2ZXIoIkFuZ2VsIiwiQW5nZWxpYyBBdXJhIikKCQkJCQkJCQlSU1IuRG9NYWdpYzpJbnZva2VTZXJ2ZXIoIkFuZ2VsIiwiQW5nZWxpYyBBdXJhIikKCQkJCQkJCWVuZAoJCQkJCQllbmQKCQkJCQllbmQKCQkJCWVuZAoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCAyKSA9PSAocHJlZml4IC4uICJlIikgdGhlbgoJCQkJbG9jYWwgcGhhc2UgPSBzdHJpbmcuc3ViKHRleHQsIDQpCgoJCQkJaWYgdG9udW1iZXIocGhhc2UpIH49IG5pbCB0aGVuCgkJCQkJcGhhc2UgPSBtYXRoLmZsb29yKHRvbnVtYmVyKHBoYXNlKSkKCgkJCQkJaWYgKHBoYXNlID09IDEpIG9yIChwaGFzZSA9PSAyKSBvciAocGhhc2UgPT0gMykgdGhlbgoJCQkJCQlFY2hvZXNQaGFzZSA9IHBoYXNlCgoJCQkJCQlsb2NhbCBtb2RlID0gIiIKCgkJCQkJCWlmIEVjaG9lc1BoYXNlID09IDEgdGhlbgoJCQkJCQkJbW9kZSA9ICIoU1RBUikiCgkJCQkJCWVsc2VpZiBFY2hvZXNQaGFzZSA9PSAyIHRoZW4KCQkJCQkJCW1vZGUgPSAiKEZMQU1FKSIKCQkJCQkJZWxzZWlmIEVjaG9lc1BoYXNlID09IDMgdGhlbgoJCQkJCQkJbW9kZSA9ICIoU0hPQ0spIgoJCQkJCQllbmQKCgkJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJFY2hvZXMgcGhhc2UgaGFzIGJlZW4gY2hhbmdlZCEgIiAuLiBtb2RlCgkJCQkJZWxzZQoJCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiUGhhc2UgaXMgaW52YWxpZCEgTXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIDEgYW5kIDMuIgoJCQkJCWVuZAoJCQkJZWxzZQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJQaGFzZSBpcyBpbnZhbGlkISBNdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gMSBhbmQgMy4iCgkJCQllbmQKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgMTApID09IChwcmVmaXggLi4gImNoYW5nZWxvZyIpIHRoZW4KCQkJCS0tIFRhZzogQ0hOR0xHCgkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiRG9uZSEgSGl0IEN0cmwrRjkgdG8gdmlldy4iCgkJCQl3YXJuKCJSb2Jsb3ggaXMgZHVtYiBhbmQgZG9lc24ndCBhbGxvdyBtZSB0byBsb2FkIGEgc3RyaW5nIHdpdGggbXVsdGlwbGUgbGluZXMgaGVyZS4iKQoJCQkJcHJpbnQoIkNoZWNrIGh0dHBzOi8vcGFzdGViaW4uY29tL3Jhdy9mRkRwR01BciB0byBzZWUgdGhlIGNoYW5nZWxvZy4iKQoJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA4KSA9PSAocHJlZml4IC4uICJvcmlnaW4iKSB0aGVuCgkJCQl4cGNhbGwoZnVuY3Rpb24oKQoJCQkJCWxvY2FsIG9yaWdpbiA9IEluc3RhbmNlLm5ldygiUGFydCIpCgkJCQkJb3JpZ2luLkFuY2hvcmVkID0gdHJ1ZQoJCQkJCW9yaWdpbi5QYXJlbnQgPSBnYW1lLldvcmtzcGFjZVsiLklnbm9yZSJdWyIuU2VydmVyRWZmZWN0cyJdCgkJCQkJb3JpZ2luLk5hbWUgPSAiT3JpZ2luIgoJCQkJCW9yaWdpbi5NYXRlcmlhbCA9IEVudW0uTWF0ZXJpYWwuTmVvbgoJCQkJCW9yaWdpbi5Ccmlja0NvbG9yID0gQnJpY2tDb2xvci5uZXcoIlJlYWxseSByZWQiKQoJCQkJCW9yaWdpbi5TaXplID0gVmVjdG9yMy5uZXcoMC41LCAwLjUsIDAuNSkKCQkJCQlvcmlnaW4uUG9zaXRpb24gPSBWZWN0b3IzLm5ldygwLCAwLCAwKQoJCQkJCXdhcm4oIk1hZGUgYSBibG9jayBhdCB0aGUgb3JpZ2luISIpCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIlN1Y2Nlc3MhIENoZWNrIGNvbnNvbGUgZm9yIG1vcmUgaW5mbyIKCQkJCWVuZCwgZnVuY3Rpb24oZSkKCQkJCQlwcmludCgiRW5jb3VudGVyZWQgYW4gZXJyb3IhIHhwY2FsbCBzYXlzOiIsIGUpCgkJCQkJd2FybigndHJhY2ViYWNrOicsIGRlYnVnLnRyYWNlYmFjaygpKQoJCQkJZW5kKQogICAgICAgICAgICBlbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCAxLCA2KSA9PSAocHJlZml4IC4uICJoZWxwIikgdGhlbgogICAgICAgICAgICAgICAgd2FybigiUm9ibG94IGlzIGR1bWIgYW5kIGlzbid0IGZvcm1hdHRpbmcgbXVsdGlsaW5lIHN0cmluZ3MgcmlnaHQuIikKICAgICAgICAgICAgICAgIHByaW50KCJGb3Igbm93LCBjaGVjayBodHRwczovL3Bhc3RlYmluLmNvbS9yYXcvWTc0R2loR3kgdG8gc2VlIHRoZSBmdWxsIGxpc3Qgb2YgY29tbWFuZHMuIikKICAgICAgICAgICAgICAgIGNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJEb25lISBIaXQgQ3RybCtGOSB0byB2aWV3LiIKCQkJLS1bW2Vsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDYpID09IChwcmVmaXggLi4gImZhcm0iKSB0aGVuCgkJCQlsb2NhbCBGYXJtQW5jaG9yID0gSW5zdGFuY2UubmV3KCJQYXJ0IikKCQkJCUZhcm1BbmNob3IuQW5jaG9yZWQgPSB0cnVlCgkJCQlGYXJtQW5jaG9yLkNhbkNvbGxpZGUgPSB0cnVlCgkJCQlGYXJtQW5jaG9yLlBvc2l0aW9uID0gVmVjdG9yMy5uZXcoMCwxNTAwMDAsMCkKCQkJCUZhcm1BbmNob3IuUGFyZW50ID0gZ2FtZS5Xb3Jrc3BhY2UKCQkJCUZhcm1BbmNob3IuTmFtZSA9ICJGYXJtQW5jaG9yIgoJCQkJRmFybUFuY2hvci5Ccmlja0NvbG9yID0gQnJpY2tDb2xvci5uZXcoIlRvb3RocGFzdGUiKQoJCQkJRmFybUFuY2hvci5TaXplID0gVmVjdG9yMy5uZXcoLjUsLjUsLjUpCgkJCQlGYXJtQW5jaG9yLk1hdGVyaWFsID0gRW51bS5NYXRlcmlhbC5OZW9uCgkJCQlGYXJtQW5jaG9yLlNoYXBlID0gRW51bS5QYXJ0VHlwZS5CYWxsCgkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiUHJlcGFyaW5nIGZvciB0ZWxlcG9ydC4uLiIKCQkJCXdhaXQoMykKCQkJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KFZlY3RvcjMubmV3KDAsMTAwMDAzLDApKV1dCgkJCWVsc2VpZiBzdHJpbmcuc3ViKHRleHQsIDEsIDYpID09IChwcmVmaXggLi4gImluZm8iKSB0aGVuCgkJCQlpZiBzdHJpbmcuc3ViKHRleHQsIDcpID09ICJzdGF0dXMiIHRoZW4KCQkJCQlwcmludCgiVGhlIGN1cnJlbnQgc3RhdHVzIG9mIEVCR3VpIGlzICIgLi4gc3RhdHVzKQoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJFQkd1aSBTdGF0dXM6ICIgLi4gc3RhdHVzCgkJCQllbHNlaWYgc3RyaW5nLnN1Yih0ZXh0LCA3KSA9PSAicmVwbyIgb3Igc3RyaW5nLnN1Yih0ZXh0LCA3KSA9PSAiZ2l0aHViIiB0aGVuCgkJCQkJcHJpbnQoIlRoZSBHaXRIdWIgcmVwb3NpdG9yeSBsaW5rIGlzICIgLi4gcmVwbykKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ2hlY2sgdGhlIGNvbnNvbGUgZm9yIG1vcmUgaW5mbyEiCgkJCQllbmQKCQkJZWxzZWlmIHN0cmluZy5zdWIodGV4dCwgMSwgOCkgPT0gKHByZWZpeCAuLiAidXBkYXRlIikgdGhlbgoJCQkJaWYgdmVyTnVtID09IGN1cnJlbnQgdGhlbgoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJObyB1cGRhdGUgcmVxdWlyZWQhIgoJCQkJZWxzZWlmIHZlck51bSA9PSBsYXN0IHRoZW4KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiVmVyc2lvbiBvdXRkYXRlZCEgQ3VycmVudDogIiAuLiBjdXJyZW50CgkJCQllbHNlCgkJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gImJybyB1ciBvbiBhIGRldiBidWlsZCBvciBzbSIKCQkJCWVuZAogICAgICAgICAgICBlbmQKCgkJCXdhaXQoMS41KQoJCQlpZiB0YXJnZXQgfj0gcGxheWVyLk5hbWUgdGhlbgoJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgIiAuLiB0YXJnZXQKCQkJZWxzZQoJCQkJY29tbWFuZEJveE91dHB1dC5UZXh0ID0gIkN1cnJlbnQgVGFyZ2V0IHwgKE5vbmUpIgoJCQllbmQKCQllbHNlCgkJCWxvY2FsIG1hdGNoZXMgPSBmaW5kUGxheWVyKHRleHQpCgoJCQlpZiAjbWF0Y2hlcyA9PSAxIHRoZW4KCQkJCXRhcmdldCA9IG1hdGNoZXNbMV0KCQkJCWlmIG1hdGNoZXNbMV0gPT0gcGxheWVyLk5hbWUgdGhlbgoJCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8IChOb25lKSIJCQkJCQkKCQkJCWVsc2UKCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAiIC4uIG1hdGNoZXNbMV0KCQkJCWVuZAoJCQkJd2FpdCgxKQoJCQllbHNlCgkJCQl0YXJnZXQgPSBwbGF5ZXIuTmFtZQoJCQkJd2FybigiVGFyZ2V0IG5vdCBmb3VuZCEgRG8gbXVsdGlwbGUgcGxheWVycyBoYXZlIHRoYXQgc2FtZSBzdWJzdHJpbmcgaW4gdGhlaXIgbmFtZXM/IikKCQkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJJbnZhbGlkIFRhcmdldCEgVHlwZSB0aGVpciBuYW1lIGFnYWluLiIKCQkJCXdhaXQoMS41KQoJCQkJaWYgdGFyZ2V0ID09IHBsYXllci5OYW1lIHRoZW4KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoTm9uZSkiCgkJCQllbmQKCQkJZW5kCgkJZW5kCgllbmQKCglwbGF5ZXJzLlBsYXllclJlbW92aW5nOmNvbm5lY3QoZnVuY3Rpb24ocGxheWVyKQoJCWlmIHRhcmdldCA9PSBwbGF5ZXIuTmFtZSB0aGVuCgkJCXRhcmdldCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5OYW1lCgkJCWNvbW1hbmRCb3hPdXRwdXQuVGV4dCA9ICJDdXJyZW50IFRhcmdldCB8IChUYXJnZXQgUlFlZCEpIgoJCWVuZAoJZW5kKQoKCWNvbW1hbmRCb3guRm9jdXNMb3N0OkNvbm5lY3QoZnVuY3Rpb24oZW50ZXJQcmVzc2VkKQoJCWlmIGVudGVyUHJlc3NlZCB0aGVuCgkJCWlmIGNvbW1hbmRCb3guVGV4dCB+PSAiIiB0aGVuCgkJCQlpbnB1dEJveCgpCgkJCWVuZAoJCWVuZAoJZW5kKQoKCWNvcm91dGluZS5yZXN1bWUoY29yb3V0aW5lLmNyZWF0ZShmdW5jdGlvbigpCgkJbWFpbmZyYW1lLkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgKG1hdGguY2VpbCgjYnV0dG9ucyAqIDM3KSAvIDIpIC0gNykKCWVuZCkpCgoJLS0gQnJlYWtpbmcgU2NyaXB0IFVzZXJzCgoJYnJlYWthYmxlID0gdHJ1ZQoKCWxvY2FsIGJyZWFrVXNlcnMgPSB7CgkJMTg2NDM4MDU4MSwKCQkxODIxMzMyOTMsCgkJMjk3NjE1MjMxLAoJCTExMjgxMTQ5NDQsCgkJMTk1NjQxMzA3OSwKCQkzMTEwMjcyMDQsCgkJMTkwMzE2NTQwNSwKCQkxOTMzNzM0OTU2LAoJCTE4MTIwNTM2MzIsCgkJMTkwNjMxMTkwMiwKCQkxOTkzMjI0NzI0LAoJCTE5NDQ1MzE2NjUsCgkJMTA4MDQ1MDIzCgl9CgoJbG9jYWwgb25jaGF0ID0gZnVuY3Rpb24ocGxyLCBtc2cpCgkJbG9jYWwgYWxsb3dlZCA9IGZhbHNlCgkJZm9yIF8sIHVzZXIgaW4gcGFpcnMoYnJlYWtVc2VycykgZG8KCQkJaWYgcGxyLk5hbWUgPT0gdXNlciB0aGVuCgkJCQlhbGxvd2VkID0gdHJ1ZQoJCQllbmQKCQllbmQKCgkJbG9jYWwgcHJlZml4ID0gIjsiCgoJCWlmIHN0cmluZy5zdWIobXNnLCAxLCA3KSA9PSAocHJlZml4IC4uICJicmVhayAiKSB0aGVuCgkJCWxvY2FsIG1hdGNoZXMgPSB7fQoKCQkJZm9yIGksIFBsYXllciBpbiBpcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KCQkJCWxvY2FsIG5hbWUgPSBQbGF5ZXIuTmFtZQoJCQkJbXNnID0gc3RyaW5nLmxvd2VyKHN0cmluZy5zdWIobXNnLCA4KSkKCQkJCW5hbWUgPSBzdHJpbmcubG93ZXIobmFtZSkKCQkJCWxvY2FsIHRlcm0gPSBzdHJpbmcuc3ViKG5hbWUsIDEsIHN0cmluZy5sZW4obmFtZSkpCgoJCQkJbG9jYWwgbWF0Y2ggPSBzdHJpbmcuZmluZCh0ZXJtLCBtc2cpCgoJCQkJaWYgbWF0Y2ggdGhlbgoJCQkJCXRhYmxlLmluc2VydChtYXRjaGVzLCBQbGF5ZXIuTmFtZSkKCQkJCWVuZAoJCQllbmQKCgkJCWlmIG1hdGNoZXNbMV0gPT0gcGxheWVyLk5hbWUgYW5kIGJyZWFrYWJsZSBhbmQgYWxsb3dlZCB0aGVuCgkJCQl3aGlsZSB0cnVlIGRvCgoJCQkJZW5kCgkJCWVuZAoJCWVuZAoJZW5kCgoJZm9yIGksIHYgaW4gcGFpcnMocGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCgkJdi5DaGF0dGVkOkNvbm5lY3QoZnVuY3Rpb24obXNnKQoJCQlvbmNoYXQodiwgbXNnKQoJCWVuZCkKCWVuZAoKCXBsYXllcnMuUGxheWVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbih2KQoJCXYuQ2hhdHRlZDpDb25uZWN0KGZ1bmN0aW9uKG1zZykKCQkJb25jaGF0KHYsIG1zZykKCQllbmQpCgllbmQpCgoJLS0gRXhwbG9pdHMKCglsb2NhbCBmdW5jdGlvbiBmZigpCgkJaWYgc21hcnRBdHRhY2sgPT0gdHJ1ZSB0aGVuCgkJCWlmIGdhbWUuUGxheWVyc1t0YXJnZXRdLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRm9yY2VGaWVsZCIpIHRoZW4KCQkJCXJldHVybiB0cnVlCgkJCWVsc2UKCQkJCXJldHVybiBmYWxzZQoJCQllbmQKCQllbHNlCgkJCXJldHVybiBmYWxzZQoJCWVuZAoJZW5kCgoJZnVuY3Rpb24gZXhwbG9pdCgpCgkJLS0gRXhwbG9pdCBmdW5jdGlvbi4gV2hlbiBDIGlzIHByZXNzZWQgYW5kIG9uZSBvZiB0aGVzZSBhcmUgInRydWUiLCBpdCB3aWxsIGZpcmUgaXQuCgkJbG9jYWwgdGFyZ2V0Q2hyID0gZ2FtZS5QbGF5ZXJzW3RhcmdldF0uQ2hhcmFjdGVyCgkJbG9jYWwgRENNID0gUlNSLkRvQ2xpZW50TWFnaWMKCQlsb2NhbCBETSA9IFJTUi5Eb01hZ2ljCgoJCWlmIExlYXBTdHVuRW5hYmxlZCB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJFeHBsb3Npb24iLCAiRXhwbG9zaXZlIExlYXAiKQoJCQlsb2NhbCBhcmdzID0gewoJCQkJWzFdID0gIkV4cGxvc2lvbiIsCgkJCQlbMl0gPSAiRXhwbG9zaXZlIExlYXAiLAoJCQkJWzNdID0gewoJCQkJCVsiTGFzdFBvcyJdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24KCQkJCX0KCQkJfQoJCQlETTpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQoJCWVuZAoKCQlpZiBEeWluZ1N0YXJFbmFibGVkIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIlNvbGFyIiwgIkR5aW5nIFN0YXIiKQoJCQlETTpJbnZva2VTZXJ2ZXIoIlNvbGFyIiwgIkR5aW5nIFN0YXIiLCB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpCgkJZW5kCgoJCWlmIEluc3RhbnRGaXN0RW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJFYXJ0aCIsICJSb2NrIEZpc3QiKQoJCQlsb2NhbCBhcmdzID0gewoJCQkJWzFdID0gIkVhcnRoIiwKCQkJCVsyXSA9ICJSb2NrIEZpc3QiLAoJCQkJWzNdID0gewoJCQkJCVsiR3JvdW5kZWQiXSA9IHRydWUKCQkJCX0KCQkJfQoJCQlETTpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQoJCWVuZAoKCQlpZiBsT3Jic0VuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiTGlnaHQiLCJPcmJzIG9mIEVubGlnaHRlbm1lbnQiKQoJCQlsb2NhbCBhcmdzID0gewoJCQkJWzFdID0gIkxpZ2h0IiwKCQkJCVsyXSA9ICJPcmJzIG9mIEVubGlnaHRlbm1lbnQiLAoJCQkJWzNdID0gewoJCQkJCVsiQ29vcmRpbmF0ZXMiXSA9IHsKCQkJCQkJWzFdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbMl0gPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUsCgkJCQkJCVszXSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzRdID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbNV0gPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUsCgkJCQkJCVs2XSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzddID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLAoJCQkJCQlbOF0gPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUsCgkJCQkJCVs5XSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzEwXSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzExXSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzEyXSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzEzXSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzE0XSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzE1XSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzE2XSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzE3XSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzE4XSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzE5XSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQkJWzIwXSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQoJCQkJCX0sCgkJCQkJWyJPcmlnaW4iXSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uCgkJCQl9CgkJCX0KCQkJRE06SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKCQllbmQKCgkJaWYgUmVhcGVyVWx0RW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJSZWFwZXIiLCAiUmVhcGVyJ3MgUmFnZSIpCgkJCWxvY2FsIGFyZ3MgPSB7CgkJCQlbMV0gPSAiUmVhcGVyIiwKCQkJCVsyXSA9ICJSZWFwZXIncyBSYWdlIiwKCQkJCVszXSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQoJCQl9CgkJCURNOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCgkJZW5kCQkKCgkJaWYgQ3JlYXRpb25Ib2xkRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJDcmVhdGlvbiIsICJDb250aW51b3VzIFN0cmlrZXMiKQoJCQlsb2NhbCBhcmdzID0gewoJCQkJWzFdID0gIkNyZWF0aW9uIiwKCQkJCVsyXSA9ICJDb250aW51b3VzIFN0cmlrZXMiLAoJCQkJWzNdID0gewoJCQkJCVsiQ0YiXSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwKCQkJCQlbIkNoYXJnZSJdID0gIjIiCgkJCQl9CgkJCX0KCQkJRE06SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKCQllbmQKCgkJaWYgSHlwZXJhbmdFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIlRlY2hub2xvZ3kiLCAiSHlwZXJhbmciKQoJCQlETTpJbnZva2VTZXJ2ZXIoIlRlY2hub2xvZ3kiLCAiSHlwZXJhbmciLCB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpCgkJZW5kCgoJCWlmIERhcmtBb2VFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIkRhcmtuZXNzIiwgIk11cmt5IE1pc3NpbGVzIikKCQkJRE06SW52b2tlU2VydmVyKCJEYXJrbmVzcyIsICJNdXJreSBNaXNzaWxlcyIsIHtsYXN0TW91c2VQb3NpdGlvbiA9IENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pfSkKCQllbmQKCgkJaWYgRGlzcGVyc2lvbkVuYWJsZWQgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiU3Rvcm0iLCAiTGlnaHRuaW5nIERpc3BlcnNpb24iKQoJCQlETTpJbnZva2VTZXJ2ZXIoIlN0b3JtIiwgIkxpZ2h0bmluZyBEaXNwZXJzaW9uIiwge0dyb3VuZGVkID0gdHJ1ZX0pCgkJZW5kCgoJCWlmIERvdWJsZVJheUVuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlsb2NhbCBhcmdzID0gewoJCQkJWzFdID0gIlNvbGFyIiwKCQkJCVsyXSA9ICJEb3VibGUgUmF5IgoJCQl9CQkJCgkJCURDTTpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkJCQkKCQkJbG9jYWwgYXJncyA9IHsKCQkJCVsxXSA9ICJTb2xhciIsCgkJCQlbMl0gPSAiRG91YmxlIFJheSIsCgkJCQlbM10gPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUuQW5nbGVzKG1hdGgucmFkKDkwKSwgMCwgMCkKCQkJfQkJCQoJCQlETTpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQoJCWVuZAoKCQlpZiBTdG9ybUJ1bGxldHNFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJbG9jYWwgYXJncyA9IHsKCQkJCVsxXSA9ICJTdG9ybSIsCgkJCQlbMl0gPSAiTGlnaHRuaW5nIEJhcnJhZ2UiCgkJCX0JCQkKCQkJRENNOkZpcmVTZXJ2ZXIodW5wYWNrKGFyZ3MpKQkJCQoJCQlsb2NhbCBhcmdzID0gewoJCQkJWzFdID0gIlN0b3JtIiwKCQkJCVsyXSA9ICJMaWdodG5pbmcgQmFycmFnZSIsCgkJCQlbM10gPSB7CgkJCQkJWyJEaXJlY3Rpb24iXSA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5BbmdsZXMobWF0aC5yYWQoOTApLCAwLCAwKQoJCQkJfQoJCQl9CQkJCgkJCURNOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCgkJZW5kCgoJCWlmIE9yYml0YWxIYWNrRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCWxvY2FsIGFyZ3MgPSB7CgkJCQlbMV0gPSAiVGVjaG5vbG9neSIsCgkJCQlbMl0gPSAiT3JiaXRhbCBTdHJpa2UiCgkJCX0KCQkJRENNOkZpcmVTZXJ2ZXIodW5wYWNrKGFyZ3MpKQoJCQlsb2NhbCBhcmdzID0gewoJCQkJWzFdID0gIlRlY2hub2xvZ3kiLAoJCQkJWzJdID0gIk9yYml0YWwgU3RyaWtlIiwKCQkJCVszXSA9IENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pCgkJCX0KCQkJRE06SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKCQllbmQKCgkJaWYgVmlnb3JIYWNrRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCWxvY2FsIGFyZ3MgPSB7CgkJCQlbMV0gPSAiU3Bpcml0IiwKCQkJCVsyXSA9ICJWaWdvciBHeXJhdGlvbiIKCQkJfQoJCQlEQ006RmlyZVNlcnZlcih1bnBhY2soYXJncykpCgkJCWxvY2FsIGFyZ3MgPSB7CgkJCQlbMV0gPSAiU3Bpcml0IiwKCQkJCVsyXSA9ICJWaWdvciBHeXJhdGlvbiIsCgkJCQlbM10gPSB7CgkJCQkJWzFdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzJdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzNdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzRdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzVdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzZdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzddID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzhdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzldID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzEwXSA9IENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLAoJCQkJCVsxMV0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKQoJCQkJfQoJCQl9CgkJCURNOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCgkJZW5kCgoJCWlmIEFzdGVyb2lkQmVsdEVuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlsb2NhbCBhcmdzID0gewoJCQkJWzFdID0gIlNwYWNlIiwKCQkJCVsyXSA9ICJBc3Rlcm9pZCBCZWx0IgoJCQl9CgkJCURDTTpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkKCQkJbG9jYWwgYXJncyA9IHsKCQkJCVsxXSA9ICJTcGFjZSIsCgkJCQlbMl0gPSAiQXN0ZXJvaWQgQmVsdCIsCgkJCQlbM10gPSB7CgkJCQkJWzFdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzJdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzNdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzRdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzVdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzZdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzddID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzhdID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzldID0gQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiksCgkJCQkJWzEwXSA9IENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLAoJCQkJCVsxMV0gPSBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKQoJCQkJfQoJCQl9CgkJCURNOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCgkJZW5kCgoJCWlmIEJsYXplQ29sdW1uRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJGaXJlIiwgIkJsYXplIENvbHVtbiIsIFZlY3RvcjMubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSkKCQkJRE06SW52b2tlU2VydmVyKCJGaXJlIiwgIkJsYXplIENvbHVtbiIsIENGcmFtZS5uZXcodGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pKQoJCWVuZAoKCQlpZiBWaW5lVHJhcEVuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiTmF0dXJlIiwgIlZpbmUgVHJhcCIsIFZlY3RvcjMubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSkKCQkJRE06SW52b2tlU2VydmVyKCJOYXR1cmUiLCAiVmluZSBUcmFwIiwgQ0ZyYW1lLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikpCgkJZW5kCgoJCWlmIFBsYXNtYUltcGxvc2lvbkVuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiUGxhc21hIiwgIlBsYXNtYSBJbXBsb3Npb24iLCBWZWN0b3IzLm5ldyh0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikpCgkJCURNOkludm9rZVNlcnZlcigiUGxhc21hIiwgIlBsYXNtYSBJbXBsb3Npb24iLCBDRnJhbWUubmV3KHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSkKCQllbmQKCgkJaWYgU2xpbWVCdWRkaWVzRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJTbGltZSIsICJTbGltZSBCdWRkaWVzIikKCQkJRE06SW52b2tlU2VydmVyKCJTbGltZSIsICJTbGltZSBCdWRkaWVzIiwgdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQoJCWVuZAoKCQlpZiBDcnlzdGFsQXJtYW1lbnRFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIkNyeXN0YWwiLCAiQ3J5c3RhbCBBcm1hbWVudCIpCgkJCURNOkludm9rZVNlcnZlcigiQ3J5c3RhbCIsICJDcnlzdGFsIEFybWFtZW50Iiwge0xhc3RQb3NpdGlvbiA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uICsgVmVjdG9yMy5uZXcoMCwgMTUsIDApfSkKCQllbmQKCgkJaWYgR3Jhdml0YWxHbG9iZUVuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiR3Jhdml0eSIsICJHcmF2aXRhbCBHbG9iZSIpCgkJCURNOkludm9rZVNlcnZlcigiR3Jhdml0eSIsICJHcmF2aXRhbCBHbG9iZSIsIHtsYXN0UG9zID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gKyBWZWN0b3IzLm5ldygwLCAxNSwgMCl9KQoJCWVuZAoKCQlpZiBHcmF2aXRhdGlvbmFsRmllbGRFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIkdyYXZpdHkiLCAiR3Jhdml0YXRpb25hbCBGaWVsZCIpCgkJCURNOkludm9rZVNlcnZlcigiR3Jhdml0eSIsICJHcmF2aXRhdGlvbmFsIEZpZWxkIiwgdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lIC0gVmVjdG9yMy5uZXcoMCwgMTUsIDApKQoJCWVuZAoKCQlpZiBBbWF1cm90aWNMYW1iZW50RW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJMaWdodCIsICJBbWF1cm90aWMgTGFtYmVudCIpCgkJCURNOkludm9rZVNlcnZlcigiTGlnaHQiLCAiQW1hdXJvdGljIExhbWJlbnQiLCB7bGFzdFBvcyA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9ufSkKCQllbmQKCgkJaWYgQWJsYXplSnVkZ2VtZW50SGFja0VuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiTGlnaHQiLCAiQWJsYXplIEp1ZGdlbWVudCIpCgkJCURNOkludm9rZVNlcnZlcigiTGlnaHQiLCAiQWJsYXplIEp1ZGdlbWVudCIsIHtPcmlnaW4gPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KDAsIDI1LCAwKSwgb3JiUG9zID0gdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygwLCAxMCwgMCl9KQoJCWVuZAoKCQlpZiBWb2lkT3BlbmluZ0hhY2tFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIlZvaWQiLCAiVm9pZCBPcGVuaW5nIikKCQkJRE06SW52b2tlU2VydmVyKCJWb2lkIiwgIlZvaWQgT3BlbmluZyIsIHtwb3MgPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KDAsIDE1MCwgMCl9KQoJCWVuZAoKCQlpZiBTa2VsZXRvbkdyYWJFbmFibGVkIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIk5pZ2h0bWFyZSIsICJTa2VsZXRvbiBHcmFiIikKCQkJRE06SW52b2tlU2VydmVyKCJOaWdodG1hcmUiLCAiU2tlbGV0b24gR3JhYiIsIHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkKCQllbmQKCgkJaWYgR2VuZXNpc1JheUVuYWJsZWQgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiVGltZSIsICJHZW5lc2lzIFJheSIsIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikKCQkJRE06SW52b2tlU2VydmVyKCJUaW1lIiwgIkdlbmVzaXMgUmF5Iiwge2x2ID0gVmVjdG9yMy5uZXcoMCwgMCwgMCksIGNoYXJnZSA9IEdSQ2hhcmdlfSkKCQllbmQKCgkJaWYgVGhlV29ybGRFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIlRpbWUiLCAiVGhlIFdvcmxkIiwgdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pCgkJCURNOkludm9rZVNlcnZlcigiVGltZSIsICJUaGUgV29ybGQiLCB7cmhpdCA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LCBub3JtID0gVmVjdG9yMy5uZXcoMCwgMCwgMCksIHJwb3MgPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbn0pCgkJZW5kCgoJCWlmIFBvbGFyaXNFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIkF1cm9yYSIsICJQb2xhcmlzIikKCQkJRE06SW52b2tlU2VydmVyKCJBdXJvcmEiLCAiUG9sYXJpcyIsIHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkKCQllbmQKCgkJaWYgQ29udHJvbGxlZEVjaG9lc0VuYWJsZWQgYW5kIEVjaG9lc1BoYXNlIH49IG5pbCB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJTb3VuZCIsICJFY2hvZXMiKQoJCQlETTpJbnZva2VTZXJ2ZXIoIlNvdW5kIiwgIkVjaG9lcyIsIHtFY2hvZXNQaGFzZSwgbW91c2UuSGl0LnB9KQoJCWVuZAoKCQlpZiBTaGF0dGVyaW5nRXJ1cHRpb25FbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIkV4cGxvc2lvbiIsICJTaGF0dGVyaW5nIEVydXB0aW9uIikKCQkJRE06SW52b2tlU2VydmVyKCJFeHBsb3Npb24iLCAiU2hhdHRlcmluZyBFcnVwdGlvbiIsIHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkKCQllbmQKCgkJaWYgSWxsdXNpdmVBdGFrZUVuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiSWxsdXNpb24iLCAiSWxsdXNpdmUgQXRha2UiKQoJCQlETTpJbnZva2VTZXJ2ZXIoIklsbHVzaW9uIiwgIklsbHVzaXZlIEF0YWtlIiwgdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQoJCWVuZAoKCQlpZiBFdGhlcmVhbEFjdW1lbkVuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiSWxsdXNpb24iLCAiRXRoZXJlYWwgQWN1bWVuIikKCQkJRE06SW52b2tlU2VydmVyKCJJbGx1c2lvbiIsICJFdGhlcmVhbCBBY3VtZW4iLCB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpCgkJZW5kCgoJCWlmIEZvcm1pZGFibGVSb2FyRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJEcmFnb24iLCAiRm9ybWlkYWJsZSBSb2FyIikKCQkJRE06SW52b2tlU2VydmVyKCJEcmFnb24iLCAiRm9ybWlkYWJsZSBSb2FyIiwge3RhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwgMTc1fSkKCQllbmQKCgkJaWYgVG94aWNCYXNpbGlza0VuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSB0cnVlCgkJCURDTTpGaXJlU2VydmVyKCJBY2lkIiwgIlRveGljIEJhc2lsaXNrIikKCQkJRE06SW52b2tlU2VydmVyKCJBY2lkIiwgIlRveGljIEJhc2lsaXNrIiwge0RpcmVjdGlvbiA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSwgRmxvb3IgPSB0YXJnZXRDaHIuSHVtYW5vaWRSb290UGFydC5DRnJhbWV9KQoJCQl3YWl0KDE3LjUpCgkJCWlmIEZyZWV6ZUVuYWJsZWQgPT0gZmFsc2UgdGhlbgoJCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UKCQkJZW5kCgkJZW5kCgoJCWlmIEFyY2FuZUd1YXJkaWFuRW5hYmxlZCBhbmQgZmYoKSA9PSBmYWxzZSB0aGVuCgkJCURDTTpGaXJlU2VydmVyKCJBbmdlbCIsICJBcmNhbmUgR3VhcmRpYW4iKQoJCQlETTpJbnZva2VTZXJ2ZXIoIkFuZ2VsIiwgIkFyY2FuZSBHdWFyZGlhbiIsIHtQb3NpdGlvbiA9IHRhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uICsgVmVjdG9yMy5uZXcoMCwgNTAsIDApfSkKCQllbmQKCgkJaWYgU3BsaXR0aW5nU2xpbWVFbmFibGVkIGFuZCBmZigpID09IGZhbHNlIHRoZW4KCQkJRENNOkZpcmVTZXJ2ZXIoIlNsaW1lIiwgIlNwbGl0dGluZyBTbGltZSIpCgkJCURNOkludm9rZVNlcnZlcigiU2xpbWUiLCAiU3BsaXR0aW5nIFNsaW1lIiwgdGFyZ2V0Q2hyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lIC0gVmVjdG9yMy5uZXcoMCwgMjAsIDApKQoJCWVuZAoKCQlpZiBWaXJ0dWFsWm9uZUVuYWJsZWQgYW5kIGZmKCkgPT0gZmFsc2UgdGhlbgoJCQlEQ006RmlyZVNlcnZlcigiVGVjaG5vbG9neSIsICJWaXJ0dWFsIFpvbmUiKQoJCQlETTpJbnZva2VTZXJ2ZXIoIlRlY2hub2xvZ3kiLCAiVmlydHVhbCBab25lIiwge3RhcmdldENoci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uLCBWZWN0b3IzLm5ldygwLCAwLCAwKX0pCgkJZW5kCgllbmQKCgktLVtbbG9jYWwgZnVuY3Rpb24gQmVnaW5UcmFja2luZygpCgkJbG9jYWwgYyA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuQ3VycmVudENhbWVyYQoJCWxvY2FsIGhiID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0CgkJbG9jYWwgbSA9IHBsYXllcjpHZXRNb3VzZSgpCgkJbG9jYWwgcCA9IGM6V29ybGRUb1NjcmVlblBvaW50KHBsYXllcnNbdGFyZ2V0XS5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikKCQloYjpjb25uZWN0KGZ1bmN0aW9uKHN0ZXApCgkJCW1vdXNlbW92ZWFicyhwLlgsIChwLlkgKyAyNSkpCgkJZW5kKQoJZW5kXV0gLS0gRm9yIEFpbWJvdCwgY3VycmVudGx5IHVuZGVyIGRldmVsb3BtZW50CgoJLS0gVUlTCgoJbG9jYWwgVUlTID0gZ2FtZTpHZXRTZXJ2aWNlKCJVc2VySW5wdXRTZXJ2aWNlIikKCWxvY2FsIHRlcm1pbmF0ZXVpcyA9IGZhbHNlCgoJVUlTLklucHV0QmVnYW46Y29ubmVjdChmdW5jdGlvbihpbnB1dCwgZ3ApCgkJaWYgbm90IHRlcm1pbmF0ZXVpcyB0aGVuCgkJCWlmIG5vdCBncCB0aGVuCgkJCQlsb2NhbCB0YXJnZXRDaHIgPSBnYW1lLlBsYXllcnNbdGFyZ2V0XS5DaGFyYWN0ZXIKCgkJCQlpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5CYWNrU2xhc2ggdGhlbgoJCQkJCWNvbW1hbmRCb3g6Q2FwdHVyZUZvY3VzKCkKCQkJCQl3YWl0KCkKCQkJCQlpZiBzdHJpbmcuc3ViKGNvbW1hbmRCb3guVGV4dCwgc3RyaW5nLmxlbihjb21tYW5kQm94LlRleHQpLCBzdHJpbmcubGVuKGNvbW1hbmRCb3guVGV4dCkpID09ICJcXCIgdGhlbgoJCQkJCQljb21tYW5kQm94LlRleHQgPSBzdHJpbmcuc3ViKGNvbW1hbmRCb3guVGV4dCwgMSwgc3RyaW5nLmxlbihjb21tYW5kQm94LlRleHQpIC0gMSkKCQkJCQllbmQKCQkJCS0tW1tlbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuTCB0aGVuCgkJCQkJdG9nZ2xlQWltYm90KCldXQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkMgdGhlbgoJCQkJCWV4cGxvaXQoKQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlUgdGhlbgoJCQkJCVRQVG9UYXJnZXQoKQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLksgdGhlbgoJCQkJCUFudGlCbGluZEZ1bmMoKQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlQgdGhlbgoJCQkJCWJlZ2luU3BlZWQoKQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlggdGhlbgoJCQkJCWlmIFNwZWN0cmFsRW1ib2RpbWVudEVuYWJsZWQgdGhlbgoJCQkJCQlSU1IuRG9DbGllbnRNYWdpYzpGaXJlU2VydmVyKCJTcGlyaXQiLCAiU3BlY3RyYWwgRW1ib2RpbWVudCIpCgkJCQkJCURNOkludm9rZVNlcnZlcigiU3Bpcml0IiwgIlNwZWN0cmFsIEVtYm9kaW1lbnQiKQoJCQkJCWVuZAoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlAgdGhlbgoJCQkJCWlmIFNhbnNUZWxlcG9ydEVuYWJsZWQgdGhlbgoJCQkJCQlpZiBnYW1lLlBsYWNlSWQgPT0gNTY2Mzk5MjQ0IG9yIGdhbWUuUGxhY2VJZCA9PSAyNTY5NjI1ODA5IHRoZW4KCQkJCQkJCWxvY2FsIFNhbnNQb3MgPSBDRnJhbWUubmV3KC0xNjg1LjkxMDUyLCAyMzAuMDM1MTI2LCAtMTgxLjc5ODI2NCkKCQkJCQkJCWxvY2FsIFNhbnNBbmdsZXMgPSBDRnJhbWUuQW5nbGVzKDAsIG1hdGgucmFkKDIwKSwgMCkKCgkJCQkJCQlwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gU2Fuc1BvcyAqIFNhbnNBbmdsZXMKCQkJCQkJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoRW51bS5IdW1hbm9pZFN0YXRlVHlwZS5DbGltYmluZykKCQkJCQkJCXdhaXQoKQoJCQkJCQkJcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gdHJ1ZQoJCQkJCQkJd2FpdCgxKQoJCQkJCQkJaWYgbm90IEZyZWV6ZUVuYWJsZWQgdGhlbgoJCQkJCQkJCXBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IGZhbHNlCgkJCQkJCQllbmQKCQkJCQkJZW5kCgkJCQkJZW5kCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuWiB0aGVuCgkJCQkJYmVnaW5OdWxsaWZ5Rm9yY2VzKCkKCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5HIHRoZW4KCQkJCQlBbnRpR3Jhdml0eUZ1bmMoKQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkogdGhlbgoJCQkJCWlmIENsaWNrVFBFbmFibGVkIHRoZW4KCQkJCQkJY2xpY2t0cChtb3VzZS5IaXQpCgkJCQkJZW5kCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuRiB0aGVuCgkJCQkJRnJlZXplRnVuYygpCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuQmFja3F1b3RlIHRoZW4KCQkJCQlpZiBGbGFzaEVuYWJsZWQgdGhlbgoJCQkJCQlsb25nZmxhc2goKQoJCQkJCWVuZAoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlYgdGhlbgoJCQkJCXZpZXcoKQoJCQkJZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkIgdGhlbgoJCQkJCXRvZ2dsZUVTUCgpCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuTSB0aGVuCgkJCQkJdG9nZ2xlRVNQR29sZCgpCgkJCQllbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuTGVmdEJyYWNrZXQgdGhlbgoJCQkJCWlmIG5vdCBjbG9zZWRmb3JldmVyIHRoZW4KCQkJCQkJaWYgbm90IGJ1dHRvbnNkZWJvdW5jZSB0aGVuCgkJCQkJCQlidXR0b25zZGVib3VuY2UgPSB0cnVlCgkJCQkJCQlpZiBidXR0b25zb3BlbmVkID09IGZhbHNlIHRoZW4KCQkJCQkJCQlidXR0b25zb3BlbmVkID0gdHJ1ZQoJCQkJCQkJCWJ1dHRvbnNtYWluOlR3ZWVuUG9zaXRpb24oCgkJCQkJCQkJCVVEaW0yLm5ldygxLCAwLCAwLjY1LCAwKSwKCQkJCQkJCQkJIk91dCIsCgkJCQkJCQkJCSJTaW5lIiwKCQkJCQkJCQkJLjUsCgkJCQkJCQkJCXRydWUKCQkJCQkJCQkpCgkJCQkJCQllbHNlCgkJCQkJCQkJYnV0dG9uc29wZW5lZCA9IGZhbHNlCgkJCQkJCQkJYnV0dG9uc21haW46VHdlZW5Qb3NpdGlvbigKCQkJCQkJCQkJVURpbTIubmV3KDEuMjUsIDAsIDAuNjUsIDApLAoJCQkJCQkJCQkiSW4iLAoJCQkJCQkJCQkiU2luZSIsCgkJCQkJCQkJCS41LAoJCQkJCQkJCQl0cnVlCgkJCQkJCQkJKQoJCQkJCQkJZW5kCgkJCQkJCQl3YWl0KDEpCgkJCQkJCQlidXR0b25zZGVib3VuY2UgPSBmYWxzZQoJCQkJCQllbmQKCQkJCQllbmQKCQkJCWVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5SaWdodEJyYWNrZXQgdGhlbgoJCQkJCWNvbW1hbmRkZWJvdW5jZSA9IHRydWUKCQkJCQlpZiBjb21tYW5kc29wZW5lZCA9PSBmYWxzZSB0aGVuCgkJCQkJCWNvbW1hbmRzb3BlbmVkID0gdHJ1ZQoJCQkJCQljb21tYW5kc21haW46VHdlZW5Qb3NpdGlvbigKCQkJCQkJCVVEaW0yLm5ldygxLCAwLCAwLjQ1LCAwKSwKCQkJCQkJCSJPdXQiLAoJCQkJCQkJIlNpbmUiLAoJCQkJCQkJLjUsCgkJCQkJCQl0cnVlCgkJCQkJCSkKCQkJCQllbHNlCgkJCQkJCWNvbW1hbmRzb3BlbmVkID0gZmFsc2UKCQkJCQkJY29tbWFuZHNtYWluOlR3ZWVuUG9zaXRpb24oCgkJCQkJCQlVRGltMi5uZXcoMS4yNSwgMCwgMC40NSwgMCksCgkJCQkJCQkiSW4iLAoJCQkJCQkJIlNpbmUiLAoJCQkJCQkJLjUsCgkJCQkJCQl0cnVlCgkJCQkJCSkKCQkJCQllbmQKCQkJCQl3YWl0KDEpCgkJCQkJY29tbWFuZGRlYm91bmNlID0gZmFsc2UKCQkJCWVsc2VpZiBVSVM6SXNLZXlEb3duKEVudW0uS2V5Q29kZS5MZWZ0KSBhbmQgVUlTOklzS2V5RG93bihFbnVtLktleUNvZGUuUmlnaHQpIHRoZW4KCQkJCQljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiVGhhbmtzIGZvciB1c2luZyBFQkd1aSEiCgkJCQkJd2FpdCgyKQoJCQkJCWlmIGJ1dHRvbnNvcGVuZWQgPT0gdHJ1ZSB0aGVuCgkJCQkJCXRlcm1pbmF0ZXVpcyA9IHRydWUKCQkJCQkJdGVybUVCR3VpKCkKCQkJCQllbmQKCQkJCWVuZAoJCQllbmQKCQllbmQKCWVuZCkKCgktLSBTY3JpcHRzIGFuZCBGdW5jdGlvbnMgRU5ECgoJLS0gRW50cmFuY2UgQW5pbWF0aW9uCgoJd2FpdCgwLjUpCgoJYnV0dG9uc21haW46VHdlZW5Qb3NpdGlvbigKCQlVRGltMi5uZXcoMSwgMCwgMC42NSwgMCksCgkJIk91dCIsCgkJIlNpbmUiLAoJCS41LAoJCXRydWUKCSkKCgljb21tYW5kc21haW46VHdlZW5Qb3NpdGlvbigKCQlVRGltMi5uZXcoMSwgMCwgMC40NSwgMCksCgkJIk91dCIsCgkJIlNpbmUiLAoJCS41LAoJCXRydWUKCSkKCgktLSBJbmZvCgoJcHJpbnQoW1sKCgldXSkKCXdhcm4oIkdVSSBzdWNjZXNzZnVsbHkgbG9hZGVkISIpCgljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiV2VsY29tZSB0byBFQkd1aSEiCgl3YWl0KDIpCgljb21tYW5kQm94T3V0cHV0LlRleHQgPSAiQ3VycmVudCBUYXJnZXQgfCAoTm9uZSkiCmVuZA=="